var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.arrayFromIterator=function(a){for(var b,d=[];!(b=a.next()).done;)d.push(b.value);return d};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){if(a==Array.prototype||a==Object.prototype)return a;a[b]=d.value;return a};$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");
$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var d=$jscomp.propertyToPolyfillSymbol[b];if(null==d)return a[b];d=a[d];return void 0!==d?d:a[b]};$jscomp.polyfill=function(a,b,d,g){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,d,g):$jscomp.polyfillUnisolated(a,b,d,g))};
$jscomp.polyfillUnisolated=function(a,b,d,g){d=$jscomp.global;a=a.split(".");for(g=0;g<a.length-1;g++){var n=a[g];if(!(n in d))return;d=d[n]}a=a[a.length-1];g=d[a];b=b(g);b!=g&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,d,g){var n=a.split(".");a=1===n.length;g=n[0];g=!a&&g in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var t=0;t<n.length-1;t++){var h=n[t];if(!(h in g))return;g=g[h]}n=n[n.length-1];d=$jscomp.IS_SYMBOL_NATIVE&&"es6"===d?g[n]:null;b=b(d);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,n,{configurable:!0,writable:!0,value:b}):b!==d&&($jscomp.propertyToPolyfillSymbol[n]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(n):$jscomp.POLYFILL_PREFIX+n,n=
$jscomp.propertyToPolyfillSymbol[n],$jscomp.defineProperty(g,n,{configurable:!0,writable:!0,value:b})))};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(d){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};
$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};
$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};
$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};
$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var d=a.next();$jscomp.generator.ensureIteratorResultIsObject_(d);if(d.done)this.yieldResult=d.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(d.value,b)};$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};
$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,d){d?this.finallyContexts_[d]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(d){return{value:d,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,d){try{var g=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(g);if(!g.done)return this.context_.stop_(),g;var n=g.value}catch(t){return this.context_.yieldAllIterator_=null,this.context_.throw_(t),this.nextStep_()}this.context_.yieldAllIterator_=null;d.call(this.context_,n);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&a.prototype&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(g){return a.next(g)}function d(g){return a.throw(g)}return new Promise(function(g,n){function t(h){h.done?g(h.value):Promise.resolve(h.value).then(b,d).then(t,n)}t(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
$jscomp.initSymbol=function(){};$jscomp.polyfill("Symbol",function(a){if(a)return a;var b=function(n,t){this.$jscomp$symbol$id_=n;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:t})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var d=0,g=function(n){if(this instanceof g)throw new TypeError("Symbol is not a constructor");return new b("jscomp_symbol_"+(n||"")+"_"+d++,n)};return g},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),d=0;d<b.length;d++){var g=$jscomp.global[b[d]];"function"===typeof g&&"function"!=typeof g.prototype[a]&&$jscomp.defineProperty(g.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function d(h){return h instanceof n?h:new n(function(m,r){m(h)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(h){if(null==this.batch_){this.batch_=[];var m=this;this.asyncExecuteFunction(function(){m.executeBatch_()})}this.batch_.push(h)};var g=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(h){g(h,0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var h=
this.batch_;this.batch_=[];for(var m=0;m<h.length;++m){var r=h[m];h[m]=null;try{r()}catch(q){this.asyncThrow_(q)}}}this.batch_=null};b.prototype.asyncThrow_=function(h){this.asyncExecuteFunction(function(){throw h;})};var n=function(h){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];this.isRejectionHandled_=!1;var m=this.createResolveAndReject_();try{h(m.resolve,m.reject)}catch(r){m.reject(r)}};n.prototype.createResolveAndReject_=function(){function h(q){return function(u){r||(r=!0,
q.call(m,u))}}var m=this,r=!1;return{resolve:h(this.resolveTo_),reject:h(this.reject_)}};n.prototype.resolveTo_=function(h){if(h===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(h instanceof n)this.settleSameAsPromise_(h);else{a:switch(typeof h){case "object":var m=null!=h;break a;case "function":m=!0;break a;default:m=!1}m?this.resolveToNonPromiseObj_(h):this.fulfill_(h)}};n.prototype.resolveToNonPromiseObj_=function(h){var m=void 0;try{m=h.then}catch(r){this.reject_(r);
return}"function"==typeof m?this.settleSameAsThenable_(m,h):this.fulfill_(h)};n.prototype.reject_=function(h){this.settle_(2,h)};n.prototype.fulfill_=function(h){this.settle_(1,h)};n.prototype.settle_=function(h,m){if(0!=this.state_)throw Error("Cannot settle("+h+", "+m+"): Promise already settled in state"+this.state_);this.state_=h;this.result_=m;2===this.state_&&this.scheduleUnhandledRejectionCheck_();this.executeOnSettledCallbacks_()};n.prototype.scheduleUnhandledRejectionCheck_=function(){var h=
this;g(function(){if(h.notifyUnhandledRejection_()){var m=$jscomp.global.console;"undefined"!==typeof m&&m.error(h.result_)}},1)};n.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var h=$jscomp.global.CustomEvent,m=$jscomp.global.Event,r=$jscomp.global.dispatchEvent;if("undefined"===typeof r)return!0;"function"===typeof h?h=new h("unhandledrejection",{cancelable:!0}):"function"===typeof m?h=new m("unhandledrejection",{cancelable:!0}):(h=$jscomp.global.document.createEvent("CustomEvent"),
h.initCustomEvent("unhandledrejection",!1,!0,h));h.promise=this;h.reason=this.result_;return r(h)};n.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var h=0;h<this.onSettledCallbacks_.length;++h)t.asyncExecute(this.onSettledCallbacks_[h]);this.onSettledCallbacks_=null}};var t=new b;n.prototype.settleSameAsPromise_=function(h){var m=this.createResolveAndReject_();h.callWhenSettled_(m.resolve,m.reject)};n.prototype.settleSameAsThenable_=function(h,m){var r=this.createResolveAndReject_();
try{h.call(m,r.resolve,r.reject)}catch(q){r.reject(q)}};n.prototype.then=function(h,m){function r(F,M){return"function"==typeof F?function(Q){try{q(F(Q))}catch(T){u(T)}}:M}var q,u,D=new n(function(F,M){q=F;u=M});this.callWhenSettled_(r(h,q),r(m,u));return D};n.prototype.catch=function(h){return this.then(void 0,h)};n.prototype.callWhenSettled_=function(h,m){function r(){switch(q.state_){case 1:h(q.result_);break;case 2:m(q.result_);break;default:throw Error("Unexpected state: "+q.state_);}}var q=
this;null==this.onSettledCallbacks_?t.asyncExecute(r):this.onSettledCallbacks_.push(r);this.isRejectionHandled_=!0};n.resolve=d;n.reject=function(h){return new n(function(m,r){r(h)})};n.race=function(h){return new n(function(m,r){for(var q=$jscomp.makeIterator(h),u=q.next();!u.done;u=q.next())d(u.value).callWhenSettled_(m,r)})};n.all=function(h){var m=$jscomp.makeIterator(h),r=m.next();return r.done?d([]):new n(function(q,u){function D(Q){return function(T){F[Q]=T;M--;0==M&&q(F)}}var F=[],M=0;do F.push(void 0),
M++,d(r.value).callWhenSettled_(D(F.length-1),u),r=m.next();while(!r.done)})};return n},"es6","es3");$jscomp.polyfill("Array.from",function(a){return a?a:function(b,d,g){d=null!=d?d:function(m){return m};var n=[],t="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof t){b=t.call(b);for(var h=0;!(t=b.next()).done;)n.push(d.call(g,t.value,h++))}else for(t=b.length,h=0;h<t;h++)n.push(d.call(g,b[h],h));return n}},"es6","es3");
$jscomp.iteratorFromArray=function(a,b){a instanceof String&&(a+="");var d=0,g=!1,n={next:function(){if(!g&&d<a.length){var t=d++;return{value:b(t,a[t]),done:!1}}g=!0;return{done:!0,value:void 0}}};n[Symbol.iterator]=function(){return n};return n};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.polyfill("Object.entries",function(a){return a?a:function(b){var d=[],g;for(g in b)$jscomp.owns(b,g)&&d.push([g,b[g]]);return d}},"es8","es3");$jscomp.checkStringArgs=function(a,b,d){if(null==a)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(b,d){var g=$jscomp.checkStringArgs(this,b,"startsWith");b+="";var n=g.length,t=b.length;d=Math.max(0,Math.min(d|0,g.length));for(var h=0;h<t&&d<n;)if(g[d++]!=b[h++])return!1;return h>=t}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(b,d,g){var n=this.length||0;0>d&&(d=Math.max(0,n+d));if(null==g||g>n)g=n;g=Number(g);0>g&&(g=Math.max(0,n+g));for(d=Number(d||0);d<g;d++)this[d]=b;return this}},"es6","es3");$jscomp.typedArrayFill=function(a){return a?a:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(a,b){for(var d=1;d<arguments.length;d++){var g=arguments[d];if(g)for(var n in g)$jscomp.owns(g,n)&&(a[n]=g[n])}return a};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");
$jscomp.polyfill("Object.is",function(a){return a?a:function(b,d){return b===d?0!==b||1/b===1/d:b!==b&&d!==d}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(b,d){var g=this;g instanceof String&&(g=String(g));var n=g.length;d=d||0;for(0>d&&(d=Math.max(d+n,0));d<n;d++){var t=g[d];if(t===b||Object.is(t,b))return!0}return!1}},"es7","es3");
$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(b,d){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,d||0)}},"es6","es3");$jscomp.polyfill("Promise.prototype.finally",function(a){return a?a:function(b){return this.then(function(d){return Promise.resolve(b()).then(function(){return d})},function(d){return Promise.resolve(b()).then(function(){throw d;})})}},"es9","es3");
$jscomp.findInternal=function(a,b,d){a instanceof String&&(a=String(a));for(var g=a.length,n=0;n<g;n++){var t=a[n];if(b.call(d,t,n,a))return{i:n,v:t}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(b,d){return $jscomp.findInternal(this,b,d).v}},"es6","es3");$jscomp.polyfill("Number.isFinite",function(a){return a?a:function(b){return"number"!==typeof b?!1:!isNaN(b)&&Infinity!==b&&-Infinity!==b}},"es6","es3");
$jscomp.polyfill("Number.isInteger",function(a){return a?a:function(b){return Number.isFinite(b)?b===Math.floor(b):!1}},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b,d){return d})}},"es8","es3");$jscomp.polyfill("Array.prototype.findIndex",function(a){return a?a:function(b,d){return $jscomp.findInternal(this,b,d).i}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},b=Object.create(new $jscomp.global.Proxy(a,{get:function(d,g,n){return d==a&&"q"==g&&n==b}}));return!0===b.q}catch(d){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();
$jscomp.polyfill("WeakMap",function(a){function b(){if(!a||!Object.seal)return!1;try{var q=Object.seal({}),u=Object.seal({}),D=new a([[q,2],[u,3]]);if(2!=D.get(q)||3!=D.get(u))return!1;D.delete(q);D.set(u,4);return!D.has(q)&&4==D.get(u)}catch(F){return!1}}function d(){}function g(q){var u=typeof q;return"object"===u&&null!==q||"function"===u}function n(q){if(!$jscomp.owns(q,h)){var u=new d;$jscomp.defineProperty(q,h,{value:u})}}function t(q){if(!$jscomp.ISOLATE_POLYFILLS){var u=Object[q];u&&(Object[q]=
function(D){if(D instanceof d)return D;Object.isExtensible(D)&&n(D);return u(D)})}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var h="$jscomp_hidden_"+Math.random();t("freeze");t("preventExtensions");t("seal");var m=0,r=function(q){this.id_=(m+=Math.random()+1).toString();if(q){q=$jscomp.makeIterator(q);for(var u;!(u=q.next()).done;)u=u.value,this.set(u[0],u[1])}};r.prototype.set=function(q,u){if(!g(q))throw Error("Invalid WeakMap key");
n(q);if(!$jscomp.owns(q,h))throw Error("WeakMap key fail: "+q);q[h][this.id_]=u;return this};r.prototype.get=function(q){return g(q)&&$jscomp.owns(q,h)?q[h][this.id_]:void 0};r.prototype.has=function(q){return g(q)&&$jscomp.owns(q,h)&&$jscomp.owns(q[h],this.id_)};r.prototype.delete=function(q){return g(q)&&$jscomp.owns(q,h)&&$jscomp.owns(q[h],this.id_)?delete q[h][this.id_]:!1};return r},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var r=Object.seal({x:4}),q=new a($jscomp.makeIterator([[r,"s"]]));if("s"!=q.get(r)||1!=q.size||q.get({x:4})||q.set({x:4},"t")!=q||2!=q.size)return!1;var u=q.entries(),D=u.next();if(D.done||D.value[0]!=r||"s"!=D.value[1])return!1;D=u.next();return D.done||4!=D.value[0].x||"t"!=D.value[1]||!u.next().done?!1:!0}catch(F){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var d=new WeakMap,g=function(r){this.data_={};this.head_=h();this.size=0;if(r){r=$jscomp.makeIterator(r);for(var q;!(q=r.next()).done;)q=q.value,this.set(q[0],q[1])}};g.prototype.set=function(r,q){r=0===r?0:r;var u=n(this,r);u.list||(u.list=this.data_[u.id]=[]);u.entry?u.entry.value=q:(u.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:r,value:q},u.list.push(u.entry),
this.head_.previous.next=u.entry,this.head_.previous=u.entry,this.size++);return this};g.prototype.delete=function(r){r=n(this,r);return r.entry&&r.list?(r.list.splice(r.index,1),r.list.length||delete this.data_[r.id],r.entry.previous.next=r.entry.next,r.entry.next.previous=r.entry.previous,r.entry.head=null,this.size--,!0):!1};g.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=h();this.size=0};g.prototype.has=function(r){return!!n(this,r).entry};g.prototype.get=function(r){return(r=
n(this,r).entry)&&r.value};g.prototype.entries=function(){return t(this,function(r){return[r.key,r.value]})};g.prototype.keys=function(){return t(this,function(r){return r.key})};g.prototype.values=function(){return t(this,function(r){return r.value})};g.prototype.forEach=function(r,q){for(var u=this.entries(),D;!(D=u.next()).done;)D=D.value,r.call(q,D[1],D[0],this)};g.prototype[Symbol.iterator]=g.prototype.entries;var n=function(r,q){var u=q&&typeof q;"object"==u||"function"==u?d.has(q)?u=d.get(q):
(u=""+ ++m,d.set(q,u)):u="p_"+q;var D=r.data_[u];if(D&&$jscomp.owns(r.data_,u))for(r=0;r<D.length;r++){var F=D[r];if(q!==q&&F.key!==F.key||q===F.key)return{id:u,list:D,index:r,entry:F}}return{id:u,list:D,index:-1,entry:void 0}},t=function(r,q){var u=r.head_;return $jscomp.iteratorPrototype(function(){if(u){for(;u.head!=r.head_;)u=u.previous;for(;u.next!=u.head;)return u=u.next,{done:!1,value:q(u)};u=null}return{done:!0,value:void 0}})},h=function(){var r={};return r.previous=r.next=r.head=r},m=0;
return g},"es6","es3");
$jscomp.polyfill("Set",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_SET||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var g=Object.seal({x:4}),n=new a($jscomp.makeIterator([g]));if(!n.has(g)||1!=n.size||n.add(g)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var t=n.entries(),h=t.next();if(h.done||h.value[0]!=g||h.value[1]!=g)return!1;h=t.next();return h.done||h.value[0]==g||4!=h.value[0].x||h.value[1]!=h.value[0]?!1:t.next().done}catch(m){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var d=function(g){this.map_=new Map;if(g){g=$jscomp.makeIterator(g);for(var n;!(n=g.next()).done;)this.add(n.value)}this.size=this.map_.size};d.prototype.add=function(g){g=0===g?0:g;this.map_.set(g,g);this.size=this.map_.size;return this};d.prototype.delete=function(g){g=this.map_.delete(g);this.size=this.map_.size;return g};d.prototype.clear=function(){this.map_.clear();this.size=0};d.prototype.has=
function(g){return this.map_.has(g)};d.prototype.entries=function(){return this.map_.entries()};d.prototype.values=function(){return this.map_.values()};d.prototype.keys=d.prototype.values;d.prototype[Symbol.iterator]=d.prototype.values;d.prototype.forEach=function(g,n){var t=this;this.map_.forEach(function(h){return g.call(n,h,h,t)})};return d},"es6","es3");$jscomp.polyfill("Object.values",function(a){return a?a:function(b){var d=[],g;for(g in b)$jscomp.owns(b,g)&&d.push(b[g]);return d}},"es8","es3");
$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(b){var d=$jscomp.checkStringArgs(this,null,"repeat");if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var g="";b;)if(b&1&&(g+=d),b>>>=1)d+=d;return g}},"es6","es3");$jscomp.stringPadding=function(a,b){a=void 0!==a?String(a):" ";return 0<b&&a?a.repeat(Math.ceil(b/a.length)).substring(0,b):""};
$jscomp.polyfill("String.prototype.padStart",function(a){return a?a:function(b,d){var g=$jscomp.checkStringArgs(this,null,"padStart");return $jscomp.stringPadding(d,b-g.length)+g}},"es8","es3");$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(b,d){var g=$jscomp.checkStringArgs(this,b,"endsWith");b+="";void 0===d&&(d=g.length);d=Math.max(0,Math.min(d|0,g.length));for(var n=b.length;0<n&&0<d;)if(g[--d]!=b[--n])return!1;return 0>=n}},"es6","es3");
var localStorageSupported=!1,localStorageIsPolyFill=!1,storagePolyFillHasDataCallback=null,progressBar,storage,isOpera=!!window.opr&&!!opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),isFirefox="undefined"!==typeof InstallTrigger,isSafari=!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/),isIE=!!document.documentMode,isEdge=!isIE&&!!window.StyleMedia,isChrome=!!window.chrome&&!!window.chrome.webstore,isBlink=(isChrome||isOpera)&&!!window.CSS,isTest=/test\.keepa/.test(location.href)||
/keepa.com\/test/.test(location.href)||/localhost:63342/.test(location.href),isIframe=-1!==window.location.href.indexOf("keepa.com/iframe_addon")||-1!==window.location.href.indexOf("keepa.com/test/iframe_addon")||-1!==window.location.href.indexOf("keepa.com/keepaBox")||-1!==window.location.href.indexOf("localhost:63342/web/iframe_addon_local");keepaApp&&(isIframe=!0);var storagePolyFillHasData=!1,waitForExtensionStorage=!1,languagePromise=$.Deferred(),sellerNamePromises={},sellerNameCache={};
function decompress(a){var b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?(b=new DecompressionStream("deflate-raw"),d=b.writable.getWriter(),d.write(a),d.close(),g.yield((new Response(b.readable)).arrayBuffer().then(function(n){return(new TextDecoder).decode(n)}),2)):g.return(g.yieldResult)})}
var polyFillLocalStorage=function(){localStorageIsPolyFill=!0;var a={},b=function(){};b.prototype.getItem=function(g){g=String(g);return a.hasOwnProperty(g)?String(a[g]):null};b.prototype.setItem=function(g,n){a[String(g)]=String(n)};b.prototype.removeItem=function(g){delete a[String(g)]};b.prototype.clear=function(){a={}};b.prototype.key=function(g){if(0===arguments.length)throw new TypeError("Failed to execute 'key' on 'Storage': 1 argument required, but only 0 present.");return Array.from(Object.keys(a))[g]};
b.prototype.forEach=function(g){Object.entries(obj).forEach(function(n){var t=$jscomp.makeIterator(n);n=t.next().value;t=t.next().value;g(n,t)})};b.prototype.toJSON=function(g){return JSON.stringify(a)};$jscomp.global.Object.defineProperties(b.prototype,{length:{configurable:!0,enumerable:!0,get:function(){return Object.keys(a).length}}});var d=new b;storage=d;storage=new Proxy(d,{set:function(g,n,t){b.prototype.hasOwnProperty(n)?d[n]=t:d.setItem(n,t);return!0},get:function(g,n){if(b.prototype.hasOwnProperty(n))return d[n];
if(a.hasOwnProperty(n))return d.getItem(n)},has:function(g,n){return a.hasOwnProperty(n)}})},deferredStorage={};function sendReceive(a){var b=$.Deferred(),d=Date.now()+Math.floor(1E4*Math.random());"ping"==a.key?deferredStorage.pong=b:deferredStorage[d]=b;window.parent.postMessage({key:a.key,value:a.value,id:d,origin:"keepaIframe",location:""+document.location},"*");return b.promise()}var amznpopupwin=null;
function openPopup(a){var b=$.Deferred(),d="Popup"+Date.now()+Math.floor(1E4*Math.random());deferredStorage[d]=b;amznpopupwin=window.open(a,d,popupSettings);var g=setInterval(function(){amznpopupwin.closed&&(clearInterval(g),b.reject())},500);b.done(function(){clearInterval(g)});return b.promise()}
function initContentScriptListener(){window.addEventListener("message",function(a){if(a.data&&a.data.origin&&("keepaContentScript"==a.data.origin||"keepaBoxHost"==a.data.origin))a:{if("updateASIN"==a.data.key){if(lastSubUrl==a.data.value)break a;lastSubUrl=a.data.value;if(!initRun)break a;loadProductIFrame()}var b=deferredStorage[a.data.id];delete deferredStorage[a.data.id];b||"ping"!=a.data.key&&"pong"!=a.data.key||(b=deferredStorage.pong,delete deferredStorage.pong);b&&b.resolve(a.data)}},!1)}
var currencyDomainId=0,calledOnReady=!1,getTokenFromExtension=function(a){sendReceive({key:"getToken"}).done(function(b){if(a||0==storage.accountType||"undefined"==typeof storage.accountType)storage.token=b.value.token,storagePolyFillHasData=!0;if(!calledOnReady)if(calledOnReady=!0,"undefined"==typeof onready){var d=-2;d=setInterval(function(){"undefined"!=typeof onready&&(clearInterval(d),onready(!1))},300)}else onready(!1)})};
try{initContentScriptListener();var l=localStorage.language,x="test_localstorage_available_"+Date.now();localStorage.setItem(x,x);var y=localStorage.getItem(x);localStorage.removeItem(x);for(var k in localStorage)0<k.indexOf("_localstorage_available_")&&localStorage.removeItem(x),k.startsWith("__$")&&localStorage.removeItem(x);if(x===y)localStorageSupported=!0,storage=window.localStorage;else throw Error("localStorage not supported / accessible.");currencyDomainId=isNaN(Number(storage.currencyDomainId))?
0:Number(storage.currencyDomainId);waitForExtensionStorage=!0;getTokenFromExtension(!1);setTimeout(function(){if(!calledOnReady)if("undefined"==typeof onready){var a=-2;a=setInterval(function(){"undefined"!=typeof onready&&(clearInterval(a),calledOnReady||(calledOnReady=!0,onready(!1)))},300)}else calledOnReady=!0,onready(!1)},300)}catch(a){if(isIframe||keepaApp)localStorageSupported=!0,polyFillLocalStorage(!0),console.log("isolated context",localStorageIsPolyFill),localStorageIsPolyFill&&!keepaApp&&
(waitForExtensionStorage=!0,getTokenFromExtension(!0),setTimeout(function(){calledOnReady||(calledOnReady=!0,onready(!1))},3E3));else try{localStorage.clear(),serviceWorker.unregister(),indexedDB.deleteDatabase("keepa"),showPopup("Browser mode unsupported",'Your web browser does not support storing settings locally (all cookies blocked).<br>In Safari, the most common cause of this is using "Private Browsing Mode". Some settings may not save or some features may not work properly for you.',!0)}catch(b){console.error(b)}setTimeout(function(){console.log(a+
" "+navigator.userAgent+" isIframe: "+isIframe)},0)}
var hasDataAccessSubscription=!1,activeWebSocketRequests=0,network=function(){function a(){try{localforage.dropInstance({name:"keepa"}).then(function(){})}catch(A){}sa=sa||cw({pakoType:{to:"string"},initDatabase:function(A,J){importScripts("https://keeepa.amztoolz.com/_cdn/localforage.min.1.6.0.js");importScripts("https://keeepa.amztoolz.com/_cdn/fflate.min.js");(asyncSupported=localforage.supports(localforage.INDEXEDDB))?(ca=localforage.createInstance({driver:localforage.INDEXEDDB,name:"keepaCache",version:1,size:838860800,
storeName:"cache",description:"Caches network data"}),databaseMeta=localforage.createInstance({driver:localforage.INDEXEDDB,name:"keepaCache",version:1,size:838860800,storeName:"cacheMeta",description:"Caches Cache metadata"}),ca.getItem("test").then(databaseMeta.getItem("test")).then(function(){J(!0)}).catch(function(S){asyncSupported=!1;J(!1)})):J(!1)},clearDatabase:function(){ca.clear();databaseMeta.clear()},keepaTime:{now:function(){return Math.floor(Date.now()/6E4-21564E3)},minutesToEpoch:function(A){return 6E4*
(A+21564E3)},epochToMinutes:function(A){return Math.round(A/6E4)-21564E3},timeShiftOffset:-(new Date).getTimezoneOffset()},removeOudatedCacheEntries:function(){if(asyncSupported)try{databaseMeta.getItem("lastClear").then(function(A){var J=Date.now();null==A&&(A=0);if(!(30>J-A)){databaseMeta.setItem("lastClear",J);var S=[];databaseMeta.iterate(function(v,p,H){"lastClear"!=p&&J-v.cached>v.ttl&&S.push(p)}).then(function(){if(0<S.length){console.log("Clearing cached items: ",S.length);for(var v in S)ca.removeItem(S[v]),
databaseMeta.removeItem(S[v])}}).catch(function(v){console.log("2: "+v.toString())})}}).catch(function(A){console.log("3: "+A.toString())})}catch(A){console.log(A)}},calculateStatistics:function(A){return A},read:function(A,J){try{if(A instanceof ArrayBuffer){A=fflate.strFromU8(fflate.decompressSync(new Uint8Array(A)));var S=JSON.parse(A);return S&&"object"===typeof S&&null!==S?S:null}return null}catch(v){return console.error("4: "+v.toString()),null}},addProduct:function(A){try{var J=A.pr,S=null!=
J.csv;if(!S||!J.csv[3]||2!==J.csv[3].length||-2!==J.csv[3][1]){var v=J.domainId+J.asin+"h"+(S?"1":"0"),p=Date.now(),H=S?J.csv[15]:null,L=null==H||0==H.length?-1:H[H.length-2];S=!1;0<L&&12E4>p-this.keepaTime.minutesToEpoch(L)&&(S=!0);databaseMeta.setItem(v,{g:J.g,extra:S,cached:p,ttl:A.ttl,type:"pr"}).then(function(){ca.setItem(v,fflate.deflateSync(fflate.strToU8(JSON.stringify(J)),{level:6,mem:6}))})}}catch(B){console.error("5: "+B.toString())}},getProduct:function(A,J,S){try{var v=A.domainId+A.asin+
"h"+(A.history?"1":"0");databaseMeta.getItem(v).then(function(p){null==p?J(null):0<A.offerPages&&!p.extra?J(null):ca.getItem(v).then(function(H){J(null==H?null:{data:JSON.parse(fflate.strFromU8(fflate.inflateSync(H))),cached:p.cached})}).catch(function(H){J(null)})}).catch(function(p){J(null);console.log("7: "+e.toString())})}catch(p){J(null),console.error("8; "+p.toString())}},trackingKeyPrefix:"tr",addComTracking:function(A){try{var J=A.tr;if(J&&0!=J.length){var S=this.trackingKeyPrefix+J[0].asin,
v=Date.now();databaseMeta.setItem(S,{cached:v,ttl:A.ttl,type:"tr"}).then(function(){ca.setItem(S,fflate.compressSync(fflate.strToU8(JSON.stringify(J)),{level:6,mem:6}))})}}catch(p){console.error("5: "+p.toString())}},getComTracking:function(A,J,S){try{var v=this.trackingKeyPrefix+A.asin;databaseMeta.getItem(v).then(function(p){null==p?J(null):ca.getItem(v).then(function(H){J(null==H?null:{data:JSON.parse(fflate.strFromU8(fflate.decompressSync(new Uint8Array(data)))),cached:p.cached})}).catch(function(H){J(null)})}).catch(function(p){console.log("c7: "+
p.toString());J(null)})}catch(p){console.error("c8: "+p.toString())}}},1,!0);sa.initDatabase().then(function(A){Z=A;console.log("cache supported: "+Z)})}function b(A,J){h[0]||(h=$("#networkBar"),m=$("#networkOverlay"));2>N&&(J.l=document.location.host,J.u=document.location.pathname+document.location.search);J.id=Number(N++ +""+Math.floor(1E8*Math.random())%12345);J.version||(J.version=3);J.user||storage.token==f||(J.user=localStorageSupported&&null!=storage.token&&"null"!=storage.token&&64==storage.token.length?
storage.token:Guid.newGuid());J.user&&(f=J.user);0<J.id%2?++J.id:1;var S=fflate.zlibSync(fflate.strToU8(JSON.stringify(J)),{level:6,mem:6});if(0==activeWebSocketRequests&&"service/features"!=J.path)try{progressBar.open()}catch(p){}"service/features"!=J.path&&activeWebSocketRequests++;5<M.length&&M.shift();M.push({path:J.path,type:J.type,version:J.version});var v=null==F?!1:1==F.readyState;P()&&0<=serviceWorker.workerConnectionState()&&!v?(window.networkInitTimestamp=Date.now(),v=function(p){p.error||
"abort"==p.data||"connectError"==p.data?(J.status=500,m.hide(),g(J)):"connectError"!=p.data&&("tokenError"==p.data?(window.forceNoSWConnection=!1,n(),serviceWorker.updateTokenInSW(),setTimeout(function(){null==F||1!=F.readyState?ra.push(S):F.send(S)},500)):(m.hide(),pa=2,g(p.data)))},0==pa&&(pa=1),serviceWorker.postMessage({command:"request",value:J},function(p){g(p)}).then(v).catch(v)):(iframe.parent&&(keepaApp&&(iframe.parent="Keepa_App"),J.keepaBoxParent=iframe.parent,delete iframe.parent),iframe.isIframe&&
(J.keepaBoxReferrer=document.referrer),2!=pa&&(pa=1),null!=F&&1==F.readyState&&I?F.send(S):(ra.push(S),n(!1)));v=$.Deferred();v.cachedData=A.cachedData;v.cachedType=A.cachedType;ja[""+J.id]=v;v.promise().done(function(p){A.resolve(p)}).fail(function(p){"retry"!==p||J.isRetry?A.reject(p):(J.isRetry=!0,b(A,J))}).always(function(){"service/features"!=J.path&&(activeWebSocketRequests=Math.max(0,--activeWebSocketRequests));if(0==activeWebSocketRequests)try{progressBar.close()}catch(p){}})}function d(A){var J=
$.Deferred();C.push({entry:A,promise:J});return J}function g(A){try{if(null!=A.tokenBucketSize&&(hasDataAccessSubscription=5E3<A.tokenBucketSize),A.exchange&&(currencies=A.exchange),A.isAWS&&(isAWS=!0),A.tokens&&A.tokenBucketSize&&settings.applyDataBucket(A.tokenBucketSize,A.tokens),A.forceLogout)logout(!0);else{null!=A.token&&localStorageSupported&&settings.setToken(A.token,!0);var J=ja[A.id];if(J){if(A.isHuman)isHuman=A.isHuman;else if(A.checkHuman){V?ba.done(function(){J.reject("retry")}):(V=!0,
ba=$.Deferred(),isUserHuman(!1).done(function(U){network.request({path:"isHuman",captcha:U}).done(function(ka){ba.resolve();V=!1;J.reject("retry")}).fail(showErrorPopup)}).fail(showErrorPopup));return}delete ja[A.id];if(304==A.status)null!=J.cachedData?(A[J.cachedType]=J.cachedData,A[J.cachedType].lastUpdate=A.lastUpdate,J.resolve(A)):(J.reject(A),reportBug(null,"304 but cachedData empty. "+JSON.stringify(A)));else{if(A.products)for(var S=0;S<A.products.length;S++){var v=A.products[S];null!=v&&null!=
v.csv&&3<v.csv.length&&null==v.csv[CsvType.SALES.index]&&(v.csv[CsvType.SALES.index]=[v.lastUpdate,-1]);if(null!=v.csv&&null!=v.csv[CsvType.SALES.index]&&0<v.csv[CsvType.SALES.index].length&&(2<v.csv[CsvType.SALES.index].length||-1!=v.csv[CsvType.SALES.index][1])){splitRootSalesRank(v);if("undefined"==typeof v.salesRanks||null==v.salesRanks)v.salesRanks={};v.salesRanks[v.salesRankReference]=v.csv[CsvType.SALES.index]}}if(A.products&&null!=A.deals&&null!=A.deals.dr&&0<A.deals.dr.length)for(S=0;S<A.products.length;S++)A.products[S].deal=
A.deals.dr[S];if(Z&&(A.comTrackings&&sa.addComTracking({tr:A.comTrackings,ttl:864E5}),A.products))for(S=0;S<A.products.length;S++){var p=A.products[S];5!=p.productType&&sa.addProduct({pr:p,ttl:864E5})}if(100==A.status){var H=tryParseJSON(A.json);null!=H&&J.notify(H.p)}else if(402==A.status)$("body").html('<br><br>Unauthorized access detected. Please visit <a target="_blank" href="https://get.keepa.com">Keepa.com</a> to get our browser extension from a trusted source.'),setInterval(function(){$("body").html('<br><br>Unauthorized access detected. Please visit <a target="_blank" href="https://get.keepa.com">Keepa.com</a> to get our browser extension from a trusted source.')},
500),J.reject(A);else if(429==A.status)J.reject(A);else if(A.products)J.resolve(A);else if(A.offers&&(A.offers=tryParseJSON(A.offers)),200==A.status){if(null!=A.json){var L=tryParseJSON(A.json);if(null==L){J.reject(A);return}A.timestamp&&!A.timeStamp&&(A.timeStamp=A.timestamp);L.timeStamp=A.timeStamp;"undefined"!=typeof L.exchange&&(currencies=L.exchange);J.resolve(L)}else J.resolve(A);ta=0}else if(505==A.status)3===Number(storage.forceReload)?(m.show(),h.html("You are using an outdated version of Keepa. Please clear your cache and/or restart your browser. If you need any help, you can contact us at info@keepa.com."),
storage.removeItem("forceReload")):(document.location.reload(!0),storage.forceReload=3);else if(500==A.status||404==A.status)h.html(la._error+'&emsp;<span id="networkAbort" style="color:rgb(0, 0, 0); cursor:pointer">Close.</span>'),J.reject(A),$("#networkAbort").click(function(){O()});else{if((401==A.status||400==A.status)&&400==A.status){var B=tryParseJSON(A.errorMsg);null==B?J.reject({error:"invalidParameter",message:la._error,details:""}):B=B.invalidParameter;p=!1;try{if(null!=B)for(var E in B)"invalid"!=
B[E].message&&(p=!0)}catch(U){reportBug(U,JSON.stringify(A))}if(p){J.reject({error:"invalidParameter",message:la._error,details:B});return}m.show();h.html(la._error+'&emsp;<span id="networkAbort" style="color:rgb(0, 0, 0); cursor:pointer">Close.</span>');$("#networkAbort").click(function(){O()})}J.reject(A)}}}}}catch(U){reportBug(U),console.log(U)}}function n(A){if(P()&&0<=serviceWorker.workerConnectionState())A&&serviceWorker.postMessage({command:"connect"},function(H){console.log("SW reconnect command received")}).then(function(){console.log("SW reconnected")}).catch(function(){console.log("reconnect fail")});
else if(null!=F&&A)ha=!0,console.trace("webSocket.close"),f=null,F.close(4108,"reconnect");else{if(null==z||"pending"!=z.state())z=$.Deferred();var J=Date.now()-w;if(4E3>J)setTimeout(function(){n(A)},4E3-J);else if(null==F||1!=F.readyState&&0!=F.readyState){!localStorageSupported||null!=storage.token&&"null"!=storage.token&&64==storage.token.length||settings.setToken(Guid.newGuid(),!1);"undefined"!==typeof window.connection&&(window.connection.onmessage=function(H){window.preInitWS=window.preInitWS||
[];window.preInitWS.push(H)});var S=function(H){if(null==H)showErrorPopup();else{null!=H.tokenBucketSize&&(hasDataAccessSubscription=5E3<H.tokenBucketSize);if(108==H.status){I=!0;window.networkInitTimestamp=Date.now();null!=H.user&&(H.status=200,settings.dataCache={time:Date.now(),data:H,success:!0});null!=z&&z.resolve();for(z=null;1==F.readyState&&0<ra.length;){var L=ra.pop();F.send(L)}m.hide();if(null==H.user)return}1==pa&&(pa=2);g(H)}};J=function(H){var L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){L=
H.data;sa?sa.read(L).then(function(E){S(E)}):(L instanceof ArrayBuffer&&(L=fflate.strFromU8(fflate.decompressSync(new Uint8Array(L)))),S(tryParseJSON(L)));B.jumpToEnd()})};w=Date.now();F=null!=window.connection&&1==window.connection.readyState?window.connection:new WebSocket("ws://keeepa.amztoolz.com/_dyn/apps/cloud/?app=keepaWebsite&version=2.0",storage.token);pa=0;F.binaryType="arraybuffer";F.onmessage=J;F.onclose=function(H){I=!1;f=null;pa=0;if(ha)ha=!1,n(!1);else if("blocked"==H.reason)m.show(),h.html("You are blocked from our services. Please contact us via info@keepa.com for resolution."),
storage.updated1008="1";else{T++;T%=Q.length;5<=ta&&(m.show(),h.html('Unable to connect to Keepa.com. <span id="networkAgain" style="color:rgb(255, 228, 192); cursor:pointer">Try again?</span>&emsp;<span id="networkAbort" style="color:rgb(0, 0, 0); cursor:pointer">Abort!</span>'),$("#networkAgain").click(function(){h.text("Connecting...");n(!1)}),$("#networkAbort").click(function(){ra=[];O()}));if(null==z||"RESOLVED"==z.state)z=$.Deferred();5>ta&&(ta++,setTimeout(function(){n(!1)},6E3*Math.random()*
ta*ta))}};F.onerror=function(H){F.close()};F.onopen=function(H){};if(window.preInitWS)for(var v=$jscomp.makeIterator(window.preInitWS),p=v.next();!p.done;p=v.next())J(p.value);delete window.preInitWS}}}function t(){K=$.Deferred();var A=setInterval(function(){1==Number($("#networkSeconds").text())&&(K.resolve(),clearInterval(A));$("#networkSeconds").text(Number($("#networkSeconds").text())-1)},1E3);return K}var h=$("#networkBar"),m=$("#networkOverlay"),r=$.Deferred(),q=!1,u={},D=0,F=null,M=[];"undefined"==
typeof window.server&&(window.server=["dyn.keepa.com"]);var Q=window.server;"undefined"==typeof window.serverIndex&&(window.serverIndex=Math.floor(window.server.length*Math.random()));var T=(window.serverIndex+1)%Q.length,ha=!1;try{if("undefined"!=typeof storage.initFailed||isMobile)window.forceNoSWConnection=!0}catch(A){}var P=function(){return window.forceNoSWConnection?!1:serviceWorker.checkSupport()&&null!=navigator.serviceWorker.controller};$("#loadingBar").html('\n        <div role="progressbar" class="mdc-linear-progress mdc-linear-progress--indeterminate">\n          <div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar">\n            <span class="mdc-linear-progress__bar-inner"></span>\n          </div>\n          <div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">\n            <span class="mdc-linear-progress__bar-inner"></span>\n          </div>\n        </div>');
var R=document.querySelector(".mdc-linear-progress");null!=R&&(progressBar=mdc.linearProgress.MDCLinearProgress.attachTo(R));var Y=$.ajaxSettings.xhr,ja={},ra=[],ta=0,pa=0,ca=null,sa=null,Z=!1;if(!isTest)try{a(),setTimeout(function(){sa.removeOudatedCacheEntries()},3E4)}catch(A){console.error(A)}var N=1,f=null,C=async.queue(function(A,J){var S=A.entry,v=A.promise;v.always(function(p){J()});A=!1;S.path&&S.path.startsWith("pro/")&&0==storage.accountType&&("pro/seller"==S.path?"undefined"!==typeof S.storefront&&
(A=!0):A=!0);if(A)return v.reject("You are not authorized to use this feature. Please register or login first."),v;Z&&S.path?-1<S.path.indexOf("product")&&!S.refreshProduct&&-1!==S.maxAge&&null!=S.asin&&10==S.asin.length?sa.getProduct(S).then(function(p){try{if(null!=p&&p.data){var H=p.data;Date.now()-p.cached>6E4*S.maxAge?(S.g=H.g,v.cachedData=[H],v.cachedType="products",b(v,S)):v.resolve({products:[H]})}else b(v,S)}catch(L){console.error(L)}}):0==S.path.indexOf("tracking/community")&&0!=S.maxAge?
sa.getComTracking(S).then(function(p){try{null==p||!p.data||Date.now()-p.cached>6E4*S.maxAge?b(v,S):v.resolve({comTrackings:p.data})}catch(H){console.error(H)}}):b(v,S):b(v,S);return v},isTest?300:100),V=!1,ba=null,w=0,O=function(){m.hide();for(var A=0;A<ja.length;A++)ja[A].reject(null)};$.ajaxSetup({progress:function(A){try{var J=A.loaded,S=A.srcElement||A.currentTarget||A.target;if(S&&-1!=S.responseURL.indexOf("https://dyn.keepa")){var v=Number(S.getResponseHeader("Content-Uncompressed-Length"));
if(v&&!(1E5>v)&&J){A=J/v;try{progressBar.close(),progressBar.determinate=!0,progressBar.open()}catch(p){}progressBar.progress=A;1<=A&&(progressBar.close(),progressBar.determinate=!1)}}}catch(p){}},xhr:function(){try{var A=Y(),J=this;A&&"function"==typeof A.addEventListener&&A.addEventListener("progress",function(S){try{J.progress(S)}catch(v){}},!1);return A}catch(S){console.log(S)}return Y()},cache:!0});var z=null,I=!1,K;return{ajax:function(A,J){5<M.length&&M.shift();M.push(A);var S=$.Deferred(),
v=1;h[0]||(h=$("#networkBar"),m=$("#networkOverlay"));var p,H=D,L=Date.now(),B=function(){if(0>L&&!J)S.reject("cancel"),console.info("request cancelled due to navigation.",A);else{q=!0;"jsonp"==A.dataType&&(p=setTimeout(ka,3E4));if(A.url&&-1==A.url.indexOf("http")||A.backUrl)A.backUrl=A.backUrl||A.url,A.url="https://dyn.keepa.com/v2/"+A.backUrl;var ma=$.ajax(A);ma.done(E).fail(ka).always(function(){delete u[H];q=!1;try{0<u.length||progressBar.close()}catch(na){}r.resolve()});J||(u[D]=ma);D++}},E=
function(ma){clearTimeout(p);m.hide();"text"!=A.dataType&&ma&&ma.timestamp&&(ma.timeStamp=ma.timestamp);S.resolve(ma)},U=function(ma){m.hide();S.reject(ma)},ka=function(ma,na,W){try{if(-1==A.url.indexOf("://dyn")||-1<A.url.indexOf("isOnline")||-1<A.url.indexOf("app/stats")||-1<A.url.indexOf("bugreport")||"undefined"!=typeof isLoggerPage){-1==A.url.indexOf("://discuss.keepa")&&console.log("failure",A,"textStatus: "+na,W);S.reject(ma);return}}catch(Ha){}clearTimeout(p);if("abort"!=W)if(500==ma.status)T++,
T%=Q.length,h.html(ma.responseText+'&emsp;<span id="networkAbort" style="color:rgb(0, 0, 0); cursor:pointer">Close.</span>'),S.reject(ma,na,W),$("#networkAbort").click(function(){U(ma,na,W)});else if(401==ma.status||400==ma.status||isIE&&0==ma.status){if(400==ma.status){var ya=tryParseJSON(ma.responseText);if(null==ya){S.reject(null);return}ya=ya.data;var Aa="",Da=!1;if("invalidParameter"==ya.error){for(var va in ya.details){var za=ya.details[va];"invalid"!=za.message&&(Da=!0);Aa+="invalid parameter: "+
za.type+" message: "+za.message+"<br>"}setTimeout(function(){reportBug(null,Aa)},250)}if(Da){S.reject(ya);return}m.show();h.html(ya.message+'&emsp;<span id="networkAbort" style="color:rgb(0, 0, 0); cursor:pointer">Close.</span>');$("#networkAbort").click(function(){U(ma,na,W)})}S.reject(ma,na,W)}else h.html('Connection timeout. Automatic retry in <span id="networkSeconds">'+2E3*v/1E3+"</span> seconds."),m.show(),403==ma.status?(h.html(ma.responseText+'&emsp;<span id="networkAbort" style="color:rgb(0, 0, 0); cursor:pointer">Close.</span>'),
S.reject(ma,na,W),$("#networkAbort").click(function(){U(ma,na,W)})):404==ma.status?S.reject(ma,na,W):3==v?(h.html('Unable to connect to Keepa.com. <span id="networkAgain" style="color:rgb(255, 228, 192); cursor:pointer">Try again?</span>&emsp;<span id="networkAbort" style="color:rgb(0, 0, 0); cursor:pointer">Abort!</span>'),$("#networkAgain").click(function(){h.text("Connecting...");B()}),$("#networkAbort").click(function(){S.reject(ma);U(ma,na,W)})):(v++,t().always(B))};B();return S},waitForNetworkCompletion:function(){r=
$.Deferred();q||r.resolve();return r},cancel:function(){},activeRequests:u,lastUrls:M,server:Q,serverIndex:T,onConnected:function(){return z},getWorker:function(){return sa},connectToServer:function(A){n(A)},reauthorize:function(){pa=0;P()&&-1!=serviceWorker.workerConnectionState()||setTimeout(function(){d({})},400);serviceWorker.updateTokenInSW()},request:d,clearDatabase:function(){try{sa&&sa.clearDatabase()}catch(A){}}}}(),networkHelper=function(){var a=null;return{abortAll:function(){return null!=
a?a.notify():void 0},loadASINs:function(b,d,g){isTest&&console.time("load");var n=[],t=$.Deferred();null!=a&&a.notify();a=t;var h=0,m=$(g);m.show();var r=0,q=!1,u=!1,D=null;onPageNavigation.progress(function(T){q=!0;"pending"==t.state()&&console.info("cancelled loading due to navigation.")});t.progress(function(){isTest&&console.info("%cNetwork:","color:red;font-weight:bold;","aborting batch call");q=!0}).always(function(){});g=async.queue(function(T,ha){var P=!1;q||(u?ha():async.timeout(function(R){var Y=
{path:b.path,offerPages:b.offerPages,maxAge:b.maxAge,type:b.type,history:b.history,domainId:T.domainId,refreshProduct:b.refreshProduct,getTracking:b.getTracking||!1,includeDeals:b.includeDeals||!1,stats:b.stats||null,getSubSalesRankAvg:b.getSubSalesRankAvg||!1};0<T.asin.indexOf(",")?Y.asin=T.asin:10==T.asin.length?Y.asin=T.asin:Y.code=T.asin;network.request(Y).done(function(ja){switch(ja.status){case 429:case 400:case 401:case 404:case 505:case 500:case 1001:case 402:u=!0,D=ja}if(null!=ja.products&&
0<ja.products.length&&null!=ja.products[0])for(var ra=0;ra<ja.products.length;ra++){var ta=ja.products[ra];null!=ta&&n.push(ta)}else isTest&&console.log("failed loading: ",T.domainId+" "+T.asin,ja.status)}).fail(function(ja){if(!q)switch(ja.status){case 429:case 400:case 401:case 404:case 505:case 500:case 1001:case 402:u=!0,D=ja}}).always(function(){q||R(null)})},4E4*(b.offerPages&&0<b.offerPages?2:1))(function(R){q||P||(R&&isTest&&console.log("product "+T.asin+" took too long."),h+=T.batchSize,
R=Math.round(h/r*100).toFixed(0),$(".loadingProgress").html('<div class="bigAndBold" style="text-align: right">'+R+" %</div><div>"+h+" / "+r+"</div>"),P=!0,ha())}))},isMobile?30:200);for(var F in d){var M=d[F];if(null!=M&&0!=M.length){r+=M.length;M=M.reduce(function(T,ha,P){0==P%1&&0!==P&&T.push([]);T[T.length-1].push(ha);return T},[[]]);for(var Q=0;Q<M.length;Q++)g.push({index:Q,domainId:F,batchSize:M[Q].length,asin:M[Q].join(",")})}}g.drain=function(){q||(isTest&&console.timeEnd("load"),m.hide(),
"pending"==t.state()&&(u?(D.products=n,t.reject(D)):t.resolve(n)))};return t},loadSellers:function(b,d,g,n){var t={},h=$.Deferred();null!=a&&a.notify();a=h;var m=0,r=$(n);r.show();var q=!1;onPageNavigation.progress(function(F){q=!0;"pending"==h.state()&&console.info("cancelled loading due to navigation.")});n=async.queue(function(F,M){q||network.request({path:b.path,storefront:b.storefront||0,maxAge:b.maxAge||0,domainId:d,history:b.history||!1,seller:F.entry}).done(function(Q){null!=Q.merchants?Object.assign(t,
Q.merchants):console.warn("failed loading: ",F.entry)}).fail(function(Q){if(!q)switch(Q.status){case 429:case 400:case 401:case 404:case 505:case 500:case 1001:case 402:q=!0,"pending"==h.state()&&h.reject(Q)}}).always(function(){if(!q){++m;var Q=Math.round(m/g.length*100).toFixed(0);replaceHtml("loadingProgress",'<div class="bigAndBold" style="text-align: right">'+Q+" %</div><div>"+m+" / "+g.length+"</div>");M()}})},isMobile?15:70);for(var u=0;u<g.length;u++){var D=g[u];null!=D&&n.push({index:u,entry:D})}n.drain=
function(){if(!q){r.hide();for(var F={},M=[],Q=0;Q<g.length;Q++)M=M.concat(g[Q].split(","));for(Q=0;Q<M.length;Q++){var T=M[Q];t[T]&&(F[T]=t[T])}h.resolve(F)}};return h}}}();function log(a){}function clone(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor(),d;for(d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);return b}function logAppend(a){}var plotActiveIFrame=!1,graphRangeIFrame=!1,graphZoomIFrame=!1,trackTypeIFrame=!1,trackPercentIFrame=!1,graphDateFormatIFrame=!1,isMobile=!1;try{isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(a){}
var disableStockFeatures=!1,disableSoldNumbers=!1,emailChangePasswordRequired=!isTest,enableVariationGridPriceGraphs=!0,enableNewCsvTypes=!0,rearrangeCsvTypes=!0,isNewPage=!0,isAWS=!1,interval,offset=129384E7,offsetMinutes=offset/6E4,offsetHours=offset/36E5,precisionDevisor=6E4,offsetVar=offset/precisionDevisor,isHuman=!1,sso=null,sig=null,changeV5=4827410,changeV5Epoch=15834846E5,keepaTime={now:function(){return Math.floor(Date.now()/precisionDevisor-offsetMinutes)},minutesToEpoch:function(a){return(a+
offsetMinutes)*precisionDevisor},epochToMinutes:function(a){return Math.round(a/6E4)-offsetMinutes},timeShiftOffset:-(new Date).getTimezoneOffset(),precisionDevisor:6E4},ajaxURL="https://dyn.keepa.com/v2/",ajaxPrefix="/v2/",protocol="https://",rootURL="https://keeepa.amztoolz.com/",imageServer="https://images-na.ssl-images-amazon.com/images/I/",imageServerAsin="https://images-na.ssl-images-amazon.com/images/P/",CDNUrl="https://keeepa.amztoolz.com/_cdn/",graphBaseUrl="https://graph.keepa.com/",graphBaseFileName="pricehistory.png",
imgCDNUrl=CDNUrl+"img/",currency,dollar="$",euro="\u20ac",pound="\u00a3",yen="\u00a5",real="R$",rupee="\u20b9",numberOfDomains=15,invalidIfLargerCatId=0x7fffc055dadda000,maxCatId=0x7fffffffffffffff,flag_1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAABzElEQVQoU12Sz0sUUQDHP29bKuoQemkhUPCfyEBaCjEKr4ELRcEQQQUhBNUhSjS6R7BKEBrioaAicOoQmCGdxEstWVIL66HENHaddefH+xFvxpnN5vLevPfm+/nw5iucywuGfx8tkze9na1OdLnQ2ubn+q9szd+ZCRvwuHyM6Q+GUlEzM5ej1KeZnM9xsdge7XmldsIBYwyu+4w4oFjqZWZex5mBhEglUlJBKzIs7RvB/N6AP5vQaIDnIc4Psry4gHAuvTfHS30x9dQozN6OGBjL8/pGkxNjB6jkFBt3ErJSCq01HR3XabXGqVSW2gGTczojByGE2sQfy+ZH5PpERja+D0FA7sIgi18/IRzHNeVyPyfvGWZv+vSP7ufNrS0O3w+oDod0XfnC5tPemGwN0ruoFwp8d58nAUeHBnjyTmH3LfmzWkOF32A1gqpCHnpASjaeF4fsuTrEC2tQq1VNoXAEKaOYkhDatP/Jdr/Z3KJnb55Hr6YRcuSayZ0+i3n5dvdN25Oeh6nX41BLTuexwfA5pmo/ECsry6a7u4dGPs/BIKmH/cepTWoEOrb0/U6EWEPKkM6HdxGrzpmsiWm70rqFVgJIHNpjI+sj/AUdjRg+yE6/CgAAAABJRU5ErkJggg==",
flag_10="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAAa0lEQVQoU2P8P9P4PwMFgHEQGLC7nEIv/P+P1YCnT78wbNt2h+H/f0YGX18VBklJbqwhxfgfhwFr1txk+Pz5FwPIeH5+dobgYDXSDHj27CvD5s13GBgY/jH4+anhdkHiTF3KwkCog32IGwAA50I1lFJfIREAAAAASUVORK5CYII=",flag_11="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAAq0lEQVQoU2NkAIEM9/9gGgr+T9+BzIWzzwupo4gbvb/FyDh4Dfj3/w/DzQPLGVYvWcaQ1DaJQVJEkeGSqDZxXvgzZQvD9y/PGPYvmcJw/txlBkMjXQavjDbiDfjRv4rh9p3rDMevnWd4vnMjg1FkAoOrjSfDNSlT4lzwd9oWhmev7jNcuHwOrMFA14hBRkyF4bywBnEGwKLx549PYA3s7LxgmmQD0BPD4EwHAKQAcQyYJnJzAAAAAElFTkSuQmCC",
flag_12="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAABm0lEQVQoU6WSv0ubURiFn3u/DKIxCSQSTdRaFQRFBKVLKxStDoWiuDi42hZEhwoZRBERFEEEbdKhIo79A0Q7qqV0aJvBQRAyaAZj/AGKTbRE/L57i5+00SrS4tnf5xzecwThp5p7SNwKUBKE5lVg20bPJUtAC5DqhtVfAAGmQZUrxag/Tt2RtA/WvYrhvYfEUi5wWEA2dBagDIRQ9BYm6M9PEo60sPClAvPcov3JFqHQCjPpIiK7JSgtQV6AwAZILWjISzMe3KTVd8xitIP5zy/wO03SGZPo6hHdz5YY6P/G8p6HoZ1yoqculNCXgNqcnyxXrVGQY9rU7pFOPkXL8bgVvqAT7wMv1YEYQ+1hhAMOMwZNsXrWM7nZBI/yUkwUb9Lk/8HMbCNTH5rxOE8wzxUnZy4mB9boer7I6oGbwUQF368msG2VgSEs+ooSvMnfZfptK0tfKzEckrbHcXpefuTdWYBIshhLG9d/8Kebi6qsyxbG/HFqDiVaw4ZPMbJfxkbKDYZlV/xbd+7gdXAbieZ9shTUP+3g/yf5Cw8+o/xdML+uAAAAAElFTkSuQmCC",
flag_13="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAACV0lEQVQoU02Qa0iTcRTGf+9U0jI1ZYqWl1WzNCKMog8apeHCyhDKqCShC4X0wQxMxMAiFZQsxA9FhREJlVgkEctSnGFGkEiQQxpGZVpeWFOYe/fe/uEU63x5znPg/A7nkd5XXBOO0PVUvnLT6HlGsGFQatgoT/hBzrYk8u5Mg9cDKMxX3qkc7C0dwGTAS/vzG8X9yizUuETkwQGE7ENKXkuUOYquEZmPn8fRNQOfolKUv5mQYBMjo27svSM8vN6INBAWJuJr6wiankSdncXw+wkJX4HfkJjzKdSH7sSjSSiyQmJ8JLZMC/V332FJiqatqQnp5vZCcaymhLCpn3hcX5GCgom0Wpgcm2Z4bhmtvyOwZafSbnfilRV8PpXKc1n0fPhGc/UlpOp6uyjZk0Cnc4YNE0OYNJ2hrXvZJUbpH3YzF59MSnwEmCSqGrs5ui+dVEsMQsDB3EKk87nlIq3ARv+YSob2KxBM71wk1oRw0oJmeDrkpfhwBi8dX3C6pkiIXUlupoXXfSPYWxqQ4LSouHGc8XEPXl1CUXWCdQW/X8enGiAMZFlF0TQMXXDmSAb32gYxRy/nzYPL84AToqKhmO/jHg7stmJNieZqswNFM9A0HVXVA1BV0/ErKj5ZwyQJLGtW0d1avQAoqytibGKG2rIcwsNCeOFw0drxaRFgLC2vjovgkG0jNbfeYk2KwfHoyjygQJTWnA1c2WQ1syXVzO3HAwghAm/oQqBpBrJf4eLJHaSvi+V51zDtnU76nlxYAIA3EN4//bPo52Xmv96NNbsKV0/t0uwv1AgflzdsYf8AAAAASUVORK5CYII=",
flag_14="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFXSURBVHjaYvzPgAD/UNlYEUAAkuTgCAAIBgJggq5VoAs1qM0vdzmMz362vezjokxPGimkEQ5WoAQEKuK71zwCCKyB4c//J8+BShn+/vv/+w/D399AEox+//8FJH/9/wUU+cUoKw20ASCAWBhEDf/LyDOw84BU//kDtgGI/oARmAHRDJQSFwVqAAggxo8fP/Ly8oKc9P8/AxjiAoyMjA8ePAAIIJZ///5BVIM0MOBWDpRlZPzz5w9AALH8gyvCbz7QBrCJAAHEyKDYX15r/+j1199//v35++/Xn7+///77DST/wMl/f4Dk378K4jx7O2cABBALw7NP77/+ev3xB0gOpOHfr99AdX9/gTVASKCGP//+8XCyMjC8AwggFoZfIHWSwpwQk4CW/AYjsKlA8u+ff////v33998/YPgBnQQQQIzAaGNg+AVGf5AYf5BE/oCjGEIyAQQYAGvKZ4C6+xXRAAAAAElFTkSuQmCC",
flag_1l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAUCAYAAACaq43EAAACHElEQVRIS72UwUuTcRjHv4+jiUTsvejIUbyxJduch2HFVkw2mGKwgwoKogdh4MFLl27eOojTm53Ug2XKLGUb9EYii704KCFih8UodDSLCgfBRizT5p54/4P39x72u3wuz/f5PDzwe2h6OsMw+JYRN5gEKBpN89ycH6XSb8jyFSHewbEhcWNlBTQ1tcfRqAcWyyXs7/9EX99VXdSMMzMeYTERoV6vgyYmXvP8/D3s7BQRCtmQyXzXzQdQhcXo6cG/tTXQ2NhLnpzshs12Gen0N4TD13RRMz7EG2ExuVz4u7EBGh5OcCwWxNbWIQYHr2N396tuzs7eEhZrgVqtBopEXvDISDecTgmKUkIkIuui1uARXgmLyeFANZEADQxs8sJCGOvrnzE0dAOp1BfdjCElLpZl/FIUUDD4hPv7XfD5rNjeLmJ01K6LmnFpKSAuJkK5XAb5/cu8uHgfq6sFjI/fRDx+qJtGDgh1duKHqoJ6ex+zz+fGyckf4emf4alwhqxWHB8cgPL5PNvtdjAbvpxCcu2AFItF0IeuLna63eBKRaiB0WKSJHwqFEDvZJk9Dge4WjXaSyhHFgs+Hh2BVFVlr9fb1FXncjnQXns73+7oAE5PhSY3XNzWhvfad1Ikie9KEvj83HAvkSCZzXhbqYCSySQHAoGmrjqbzYKem80cam0FGg2RwY3XtrQgc3YG2jSZmEwmoEn/GETgiwv8B94wQe5VjuptAAAAAElFTkSuQmCC",
flag_2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAACDklEQVQoU32RXUiTYRTH/0+2dRPSB6YVCiKDXBOWom4ZTIJqROqcROisHGoE0YqB+TKbClaOZhHTG132BWHUnI5I1sdFE9mmSRtJzV3MwEGpbUYXXujUR3xeei8ceK5+5zz/8+ec85D7vQEqL8qCZzKEX3Nr+B9cjQxTd2wszbttQLNljHEsnoDkWBqK/a8Q1ehAng/+oDoSxg6NBpHoEryTs0x4sTIXie6HjEXXjeiyBxkrjqai2PMUO7k2dL+fBtF3eGj1ORlO/hxlgpRKDax9QTRdkYM21LMaedwP410/rNI5rEVnIDYY8cIZQnOrmzcolaZhPraMC5I9yPD1Q2zqYI3MYDEG4nQxJhYLvi4AN8yjKMw/jIEBH0g4EqeS7H0gRFhfAKqt4CdwupIeKQUCoT8gDn0bLZOnQvTtOy9ajCWJV6K/k2rizIPonJjffoLlwiLWuOvLhGCwvr4qcHD6L8gJrYOWn8lh1zffVCL/AEA5jh1uq8Fm7mtsR7UtDMXxHAwPfeINGnVSXNLmYuWeGdi9F9dmj8DedVYwEI17oTrvgudNBVZ7bPgX8OOZ0oRbLU9AHo1MUYNahkSnGeMqPYY+L7ARH5gUQBV/ROoYRNXVEcbGyzKUKLMQr6+BaX8dSIt9jGYOv4T7kBp+b0TY793rWrhPl7Fc/eEtClT8125GRno2OOspWJo+YgOa38rkXZuAuAAAAABJRU5ErkJggg==",
flag_2l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAUCAYAAACaq43EAAAFD0lEQVRIS6VTe0xTZxw9l1eLtGChRR7lMR7FFQWsViRjPGfUgfgKGxjdjJuPKMl0g2w6xbllcU4RkzFDJVPIItPhm6EbE0G3+WKCoMUJgmCBVijQQmsLBe/Sr6PuBlSM95/m3u88fufr71AqmYx2S08HHCfhwnUFTl1S4EVP/pZotGzahBGtFsGHD2Pb99eg7h9+Li1upifm27ZBW3kR/KVLQSmLi2mOSAS2SARbDgcGgwFN7QYMmkaeKSQVC6CvqSHnThIJ6pt6n4ln2dsiwM0O9moVwdsFBpFfaut3V+jP0sXQl58DS+AObuRskr7mXg+q5d3jmm9IFaOroICcua9Zg8LSe3hsHDvo9EAXSPAIusZGTJZIwBKJMDw8jG+LakGlZpXRGe+GEZHpffcw1NIMl9hYAnrU+xjn/1JAqzMxBvgofRoxfqLVwiMzkxj/H+PCsUeCyAms2j9h6+QEXnw8uc3qhm4YjUPIO1ZvMV69SIz6+30Q8Bzx9lQ7oOoibDw8CMGc/kqdEtfuPE2f9V4EVHv3kmHMxgdKGqA3DJH3sCAeotk90N+8yQhQ+bcSCtUAOT90psFivCRRhBZFrzXVmzO8SHpjbQ14KSnW9CcqWqHp12PrB1KrsWDzx8j7uQH2djZIDnMG+/J50Fwu+MnJjKFNJsutBfi44lRFI6i31h6nlyeF4v7DPsZ1Clw5WCp2gP3vZ0EJhUSIZrNRcaMDibO9od6/H4MaDYQ7vyRtiDQ0k0G5CQlgh0dArTXCPGhnVz9DN8iXh+IyucV4ceJUtLQzjUfRcyOFmNlTD/3166QGZlHz074jGyM6Hfxy9qHn0A/km7mWo8P9UauEcWjswgUIeThd8Q+ojs5O2l3gDpp+8qL6Ms4fZmaSd9///uuJkinKBl3dXaBuxMTQguhoDHV0TJT7SjgHb2/UVVaCOh0VRU+TSjHU2flKghMlO3h54U51Nahbt+/SwQG+E+VZcfdTU2E/aRL8iopemtvU8hBUcFI+HSH2QZ/WMK6AeeOXxXlhRKOBViYjC+W5axfkCxaAxeEgqKSE8AavXIVKlg8baSQuCONw+lLbuHo8F0fcalCA8ozaQodOn4nefiMDGOjDQ/aH4fD14GKwqgpKmQxTFi1CEUuK9UsCcTcmBjYuLggpLcWPvzQibd5rsNHr0ZuTg4H2dvSnrUdetQnNCmZbXJ3ZkN++aTH29AtlmK5eGMIQ0qnV0C5eha8uWDp5Ys9chnH8ulKYBbevjUREsDMZtDUnB85JC3HcNQYnK5oY+so2+VPjgQEd/Lz5yP1kDkn5uKwMivx8Qj5oNwelF+WEzOVyUClbiDqxGA58Pl6/fBmzlv9kFX5/8QxyI+b03dnZ0D54AEPGNjJ0W4ea8K3GHFc/jBKGe/qg2rkDlEYDzapN2HyyCyq13irswXdCed58NISHk2/iujqEpZ1gJDJjcjNjEervCFN5Odp278aUpCQUeCaj8Mxt0PpWy3KVfBMLoafACpq8fAX2DUfi+K/1YxbE33vyGGPRkqPjLtL6dyTYuMwftgN6EsYol2Pw8z1Iy60EdfTIMTpulgTKLZ/CpFajZd1GbC/uQ2fP4LhiXm4sVBWkoFkqtSb2Sz7yzEqF+Lvh64w3IJ3KJcGasrJwJyEB1IGVK+n+s2fhnJKCc1Qwfrva/txe8vluyM2IQOuGtQTnf+AgVn5R8cIuz4sSYsW8EJh0GnALC/EvQHYvjUeU0r4AAAAASUVORK5CYII=",
flag_3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAABYUlEQVQoU41STUtCQRQ9b1EkUZt+iLaNIMLCEoOQoGgZEe36kKhNfyDoF7SVECyCjBZBSFm2KQha9xNMnzoz72tm4s3VpxKBA8O995x7z517GSudTmmoFvoPE2HEBrD/Aiu9NKP3D48j3vc94zuOE2FC8A5mlOE4ZIvFAiKB6tsnkYJIu2FHAvVG3fjNJlnGWtjMJHF5dwtrZ3lWb+/l8PXyQQKcuokWjSU4B7MbkZhd+zF+IrtAAo/z03ru4ASovBtCCwHteeYq14V2XUhG+1CMQQkBxTlG1lMolcuDAsMWh2J/BPRDZajOYXH4orGtLL2gcBrXaxtH8L5faYR2LZpXMppXiqaxgaDFSpdjMpHBzXkV1n0+rhdXcpDtCpEBJUufkoNOHPiEq4BDKR+xqVVc5Z9JIJnajbqaYq+3den3PpkM2gN51xdPsEpncd2Psm5+rIe2FDDhAswDxkfJds8v17z51coLdO4AAAAASUVORK5CYII=",
flag_3l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAUCAYAAACaq43EAAABjUlEQVRIS8XWQUuaARzH8d9ftyIaJKwMBEmY5JQexKSoYGCHOj0XPYigB+WB550EnbrslCBe3LCLXTzVISGoKJrIM3SCYw1JMBo42Bjbyl/v4t/3DXyuX7Ftm3iGxLIs2ratSheLRUg+n6dlWWi1Wip4NBpFqVSCZLNZFgoFOI6jAhuGgXK5DEmn08zlcuh0OipwOBxGpVKBJJNJZjIZdLtdFTgUCqFarUJM02QqlUKv11OBg8EgarUaZLi9zdemCd7cqMASCOBHvQ65TSTo3doC+30d2O/H3fEx5Nv6On2JBDgY6MA+HwaNBqQbj3NhbQ0cDnXg+Xl8v7iAOIbBN7EYeH+vA8/O4muzCbleXOTbSAQcjXRgjwdf2m3I+ccAlyJB8OGnDvxiBp/bPUij7GPM8IOPv3Vg9zSaTh9ytD/HlagXGP9RgeGawlXrDlJ/7+HGsgcc/1OBxTWBs08jyOHeNN/FX4H8rwPLS5xe/4Ic7E5wc3US4FgFhrhwcvkX8mHHTRE3AK0DEpCPeAIBmJeHAt4UxgAAAABJRU5ErkJggg==",
flag_4="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAB2UlEQVQoU43S30tTYRzH8ff3WNJwcwYaOoc1hTlpNfOs+aPLyG1qIXUnBA0qY5INjS67DbW7uuuif6A/QOZFUKh110U33QTR1UZRWGc7ds55ntiOSCOInj/gxefzfD8yP/tEj5qjeI6HCOzbLtcLKU4nu/nzqXc72A8LEAyB1gSmh/nx7AVyOb+hh2IpFKoJ1GsOt5dMTLMPpZRvGAbumy3qpRkk2AlKERoPUHn5BZnLb+jB2FnQLiKGDxRNzPORVmB3C2tl3ge0R9gMUN2uIHO5dX3q5JlmgjbR1G2PxSWTdLq/FdguY927gtERBkPRORakultBZrNrOhpNYoii0cGuORSX06Qz0RbAebXJz5t5JBgGrTgeP0bl0x6Sn17X/ZERRBRaa/a+25TuTzJ5YeBv4NYMRsgHugbbqXy2kNylNd3Xm8DzHFBQqzusPphiYuo/gezFR7qnZ7ipNq9gu6z8I8FhhaGDBHO5x7r3RBxEIfjA3dI4mYnWP3Bfb2LdaZzRrxCOt1P9aCEL157qaCROI7+0Cfs1lxuL50iNte7A2ylTX85hBLuaO+hIHuXrBwspFp7r2EDCT3CwxKsLIySS3SilD4ek3pb5tZpFGmdsLDFzhG/vLX4DfLjm5WxVFyQAAAAASUVORK5CYII=",
flag_4l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAUCAYAAACaq43EAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAAAZtJREFUSIm9lEGO1DAQRZ9jt8RiGrgGV2DHaLZzBM7ATTjPXIQNG/YI0U2cdBK7XMUiHQmG7iQNEX9l2b/q6Zctu4eHj+Z9xZKenj4segC+PL5fNlWOUFUV9/dvVjVdo7t3bxc9/afPBBFlGDLH4wkD3DOTAc7Wg/PXb+fCc5FzuPPagPD6JZYGgqrSdYm+z+u7z8j64c+9X9baD6gIIWel6zJdtxG46+fPdztIQhApNM1A26ZNwKU9zRt8hYmMdxxjR9uOI7p0z7dIl8DOYUMaE9d1v1liWwCb2QjOuRDjcOGOp+y3zaA0E/hyvRVFUxofV133DMMEnszwN0PX05XEZuOYi0DKBBEhRiVnuRlyEdy2s+cuJfB+TNw0J3Ium4DL9+M8eLfDv9qPj0vEKOWG72lOOvW50q8UNGdCjC1mfrPEltLvz+S5nCPHhiBieA+q2yQ2s+tQwDmHZCGUIngfxoJtyIsWLYVKVXHuX/6qG+UcqkplZvxP7gQOI9ix37/YpG+1v1v0qBkBjBh/LJoPh8Mq8LGuFz0G/ARPQgf/2BYuEAAAAABJRU5ErkJggg==",
flag_5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAABVUlEQVQoU12SQWoCQRBFfw/ZqKM3EG8huPEA3sAslGTtwpXncJ+Q6Fb0Ai7cJKcQRCMogk5kGFzojP2lu+3WmYGmiuqp11X1S5xOJyLzSSl1RNmsb2PKJvIKoQD5fF4nkA+Wceli6i57drvdA5BOJjCbgT+/YHwBq1Ww0UgBhBDYbrcGkMvlXBMaNJmAwyEYx+7gtQn59u4gCrDZbNIAXeLhAHQ6YBia5MtFW93QYABZqWiIAqzXa4goilgoFBw5ns/x0u2mknk+g0kC9vtgrWYAnoe/1QoiDEP6vm8AIETwD9lug1FkXr9XoGbqjcdIymX9r+d5WC6XBmArsErw8wP8+n7MQEGaTbDXc6qoFlaqguPxyGKx6PRWdK39aAROp6aCeh3XVkv3bdVS/mKxgAiCgKVSyc3AVaHUsAt13xG7B1YyDdjv98xul0yubguf7559C7kBliRnuKPjqCMAAAAASUVORK5CYII=",
flag_5l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAUCAYAAACaq43EAAAB90lEQVRIS8XVPUgjQRgG4HcE/41JNibZKCFCFMGAghba2GljYWdjc8gVNjaieFhYWRwn2tlYiNjY2FnYaGfjFlE0qBFJMCTm12wS179TyBxzC1uIzk4hcepvvmfej51ZkkwmKb5hEQZ7PJ6K0qlUCgZMaWWCE0JgwLIsVzRxOp3WEzNYNPFLLImnqxj+ZvIApaiVW9DQ5UOdr1Xo8CyxAbvdbtNN9PUNd3uHeDyPfFjbGPCjZXQIpKbatFcmk9ETM9gscWprF8+ROLdpvd8Lz48xbg1LbMAul4sLP5xeIb29Z5qEFcgTo2jq7fq0lsHZbFZP7HQ6ufDt+s6nI34vsJG3TY1z4Vwup8MOh4MLRxbX8JZVhRJXuyT4l6a5cD6f12FJkrjw9dwqXtlXLLBq3A50rsxyYVVVddhms3Hhm98b0I4vBFjA0teN9oWfXLhYLOqw1WrlwsXDIGJ/NoVg369J2Ib6uXCpVNJhi8Viep2u51agnYS5eHN/AB3LM6bXSdM0kEQiIQSXn18QW96Eun/0YWNpZBC++UlU1deJwdFolNrtdqExsqJ75QzqgYLHyyhQLqMx0AFpeADNAz3CPQqFAkg4HKZmD4hwR4FC4wEJhUL//8dmT6ZAT6ES47cYDAap1+sV2vRVRfF4HERRFMpOUcnFpvsPHXUA1Vwc3ioAAAAASUVORK5CYII=",
flag_6="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAACEklEQVQoU1WSzUtUURiHnzufztz5qAn6YCS1jFqEtOgDoyCDVkZF/QeCSBtFEyooEBRE/CDCEANpES0iatOiTURLoRaGIhQtwsHGudfbdZp05s69556417rZuznve87vffidc16l3HlDyrKJF/a6RuLjvJ/vDNd1/dJxHPRcLjjaAJQfJ9pl8lbvtqBSJtHTHQhqpieBaCbtr65wKQ8MEk0mkbbg68NJlI1zF2VDTzfCMLAMg+zQPV8shGBjcorIlkX0ziChP1jz2nVCiTTh/H6+zUz/c+CslRCmRmp4mNriMpZbR87MIiwLt6uLiBDETp3E7LxCuCGO0tjE4pPH24BE703s70Uc0yA1OoLZNxDYdGwLp1Znq1Bg36vnGBcuEVITxJsPs/B0DkU/dlwm+wcQuo6taaQnRn3rfFrAjaqENuvUKxr1I63sGhnGON+BklKJHWxh+cUzlFLTUane7qdeLCHXVkk/msb+WcEYGiKyUvRvvhmPsntqnJCaRDt9lngmi8w38uX1S5TinrzM3L+LVVjB0UtkZmcRroBqjV/v3/mA8Jl2v9l7WK2tjVhuL+FDrcx7gM8g8+MPsAoFhLaKOjeHlBLv77f0EpFYImj2YB4grGYJN7fw4e2bbcCBkTEcq4a9rpOaGAsA3uDsDM9B+fJVZDrrbweAvyJvbNSlJarVatBnWVaQ27ZNsaPjP+hvICgB410MezgAAAAASUVORK5CYII=",
flag_7="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAABtElEQVQoU52SP2gTcRTHP+93uYv9g43aqilBKSnoIJEs6uIgUhAK4lKhDoKCFRx0EbqIg7gILjoIVlBwsGAXEQqiiLgpHohRxMFENNKgNnjVhjZe7p7c/VyKDup3+A3v8T7v8+AnQRBofOMy/xNz5CRSq9W0d+Y6A3sP/JERrlHcr/Jb78vDOyyOHUV839f87DSDo+MEL5+T2RgTLQjaFsRTMgNKpykQCxoBArktZeZmp2mMjlvAutvX6B/ZB/IOb7iDN9/HwocW0bxBO4K3KUoHw7oBB9zCZpqP7tE8eMwCmJpiaPcOnFyd7j0hUUP4fj+LLgMGRECTI9IH3PV5ao+fwcTEL8ClcxTKOzG9n3FyCkZpv86gHazBUOIO4XtrkFnbT91/CqfOWkDr/GmK20pEiwG6LJBRxEmtMX0Ksd0efZO06KzOUX1VoefMRQv4NHmcrcNF4lbLTiWqCpJVusodlnyXOCSFJjHdPbx5W2XDhasWUD1xiO2FQeJ2cvTKaAxiVtZMdhUvPs5RvHLLAiqH91Pqyv/TX6osNSjdvGsBT8ZGcFwPTdb9RUQMUfiDXTMP+AkkxbXvqu101QAAAABJRU5ErkJggg==",
flag_7l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAUCAYAAACaq43EAAAChUlEQVRIS71VTWsTURQ9982byUySSSJYq7UQFyoKLVi0ixaz6KYLQVGwFBW3IrjxN/QPuHHhD/AfuHYl7kQRXLTYalvbgmBsmnaSTGbmXZnMTBtspBMDeas3951zz/16b2h74QGTJtBrkckQRUbws/d5T1IaIwnQzuJDNis3e8LlCCNzLYDzVgIqjcd0mPbyCmj7/iJbszNQe3Uwc4dJRJEHqaDZDP93lHFo78Yk+265hPsvnCgW4K2EwncX2Jy+DlXfj7TKCv62APwjdyLHyN7x0Hov4W8OVnZRsOGtroG2bt9j88YkVGMfEEDpmYvay0yntOxGmZME5LiC2iUEe3E10lX1GCoU9r9vgLbmb7Esl6EcB6WnbZgVH613ErVXxiEpFDYmAvhbAsGvAYVzOQTVKmhzbp7luVFws4nScxf11zoKjz3UXmSAqOWgPKP4pA3njYT3VfvPXGNfWavTVtqszLEonQL0JviAIjECyFKAIGgFBX+nWywGJFGF4M5K7Elc3bijKpFpglst0MZMhcm0wK4bhxSKR6kalxXsRx6qS2Z0nWI7kqkPv5P9SXWIsWQYgO+B1qdnOeSy5x0fhCygnWZ4P+JKnOQ8xTnpOqBpoPWpaQ4cB+ghnMJP/xBdh2bboG8TU8zNBuAnFzfsx0n9iqfuWH+7eQnmr9ikBOXzoLUrk0yuCz4U7j+JfhgkJdiyQKsXr7Lw/Z497sdhWmzYY6VL0PKFS6wzg9vttNyBcOFUe0KAvoyV2TKMzgMyjEWWhYbXBn0+O862lYVqNIahC5HNYr/VBH0aPc/FXL7zVg9jiVwOe84B6OOZMS7ZhWFoHmrs1uugDyNjPNj/pv+Ywxv+B4u6+rLjbNaLAAAAAElFTkSuQmCC",
flag_8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAABk0lEQVQoU43Sz08TQRTA8e/bpS0xwDYNoW5riMGoJSZevCF48UYrJca/gYug8cLZhH9CTxzl6t3UePfKQUL8Qct2dg2ljTGB0p1HutYa08Y4p5n3Mp+892bk7vZjTd2Y5feqB4bw5dvh+a/N/DzMzQ1DhwsLyM2tijZnJ3B6iiNC29TR1x9HgAtjSPk+ZLPQbif5d5UKUnq+pt9zfcAmQGiOxgJdE5L2r6L5PFiLxDG1lRVk8dkjjTzBsYorDiZqjAcCQ7ro/wGs/QWUtioaTWsCOOISnQRjgfMgIFMsop6HdDpJC7VqFSltljW8EuP0Iz3LyfEBuvdlZAZDIJtFBjOora8ji5tlPZ48Q7p9xHIa1dE3n/8fuP10VT9dhMkFLzNFJzpC9/4BTHvIj0ELa1XkzouyNlI/cfuCuLTCr+ju4WgFzSaZQgG9lgMGr7D8ELm3U1Uzc4bEFhfhW6uB7uyPAN2oSXq1gOZ8iGNE4P2tB8jSqyd6mj9He5oA+60A3RjzkTqG1LYPM9dBY5iAD1P3uQSwOL94YLv3EgAAAABJRU5ErkJggg==",
flag_8l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAUCAYAAACaq43EAAACfklEQVRIS62WXUiTURyHf8dNl6VhkZplJpb6TjfExFj0wSpmRhosRCwzlcEiqYSsMCswA0tKCSlIobAsSEQkS0JiERTShbPcZOkyN3NujCYqNsxMT3nR7X/novf6ec7D74X3gxnf3OEQuJr2lgtQwMi1m0IcM7yu50b1oYDw9ujkgMwyMGu1BeQ87Z1gJT23uEGVjQHfKCmUqXMDHrgMeJ51kFxYciLcHc/BCrtreak6G9ZJBymUp+mFwu4nbSS3MnEL3J0vwPK7avhxlQ6fJ7+RwvlteULhiZandDghHq6uV2D6jqu8QLUfw1MuUriceVQoPN7cQnKh8XEY7+4By2mr5EdStRiZdpNCjeaEUHjsbjO9OC4WYz0msKzWCp6j2gXnjJcU6nYahMLOhnskt2JjDJymt2Dah2e4LlWD8dnvpNC4p0woPHqjnuQU66PheNcLtuP+Sa5NyYTbP0kK/+sFooiKxNfeD2AZjaVck5IOr3+KDLdmXRRabK+sJrmQdWvxpa8fTH27kKcr1fDNzZBC+8ErQuGhc1UkF7wmAvYBC1hSbR5PkZSYnv9BCi9zrwuFbWUVJCdfHY4hmw0svvow3yolYWbeTwomfZ1QeNBwmg6Hh8Fmt4NtuJTNN0kJ8C/8JIX3eQ1CYUuRkeRkoaEYdDrAIiv28ShpM+Z+z5OCuYB+Pv/Jn/KLyXOCFApYJlxgEWd38wgpFr8WF0jBeqxJaHG/vpBeHCzHR68HbNUpDQ+TYrCwuEgKw0UPhMLmnHx6sVyOfp8XLMSQwRXKaCzxJVJwFD8WCvcdCPD5ZEEwT/nAZCVpXBYkA+f0H9Aj3QWhsL2qhuYYA/97d/8Ay4HaIqKlU4EAAAAASUVORK5CYII=",
flag_9="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAABSklEQVQoU2P88OHD/48TZjGQA/gL0hgYL1269J97+UYGsSAfksx4tW4Lw9dIf4gBrPNWMkj4ezJ8v3WHKEM41VQYXmzczvA7KRxigPL/VgYOyWCGf98fEmUAE6c8w4/naxnuMlZDDJD4Ws8gKGXF8O/3B4a3r1kYnj9iZ5CU+8kgLPoHq4FMrAIM758dY3jB3QgxgO91CYOkvCnDt4/fGG5dZGL4+FeLQU6Nk0Gc5zQDJ9c3DEMYWUUYnj88zfBJtAdiwL+bcQwaOuYMH979Z3h4k5fh2ZNfDFIybAzy6p8ZeHk+YhjAzCbAcOPKSQYm9UUIA5TkhRm+/WFl+PH9H8P/n6xgTZwCfxm4WH5j9ca9h28RBpwIjGXQEhIlKgBhiq69e81gsX4xxAW7XAIYDPiESDLgwqd3DG57NkAM2GrvTZJmmGLvg1sZAKZYjW3zq1NvAAAAAElFTkSuQmCC",
flag_9l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAUCAYAAACaq43EAAACdklEQVRIS72VT2sTQRjGn3c3+z+bpCG0YmkVqSJKUQShlnowFaEWBD+D934K8Sp61osgopeCHyAetQhFoU3Fg1ZKW0xKSLLdbXY3O6/srq3tQUpSzXOZ3dmZ9/c+M+/M0vbtOYaqYtCiGGyUbw2UG1TXcACOarW/wxkAHZNbPCbW4XGH5/3+Lo8MIwFvzZRZm56CaLUH4lrK5xCsrKZg9crkQMHh93VQ/c0kW8Z1sO8MxDFpNjpuC8TtGYZ0CmD3CJhZoONbcH6mm2OPEHTNBZF0sgTJAgsnBl9lxggIh8AZwGtE2Fk0EYoUpEgCpfsezKIMdPtnM6yERdy6zKAhALsH0ZbfBhi9oEBeF6ivmVALOdizWbD3DZtfQ1y7d5Jzn01YxK3zDMSBghQsR2i6Zfg/PmL98V7SNX7nWdIad18kbcGqAJHcp+006RTMLeyvX9gO0Kg8gF9dxPaGjqX6EKZvLmB0fAy68QReq4ThuZdQcv26zgCUB4nmGSbEzlLHYbubgGWzgujzFl4vTST98xMW8uU6Iq+MYvk5lFymb8cMAxQ1TrMkdQBOKyZ0BGrNBQwV38F/VYVTz2NzOV4R4Nyjs+jq8xguPIVi91ndlIEQOsivl1hVBMB+EjzoGnhfncJFYyMprlhxgdnqCpTZCXzZG8ONSx+gZtL971mkIQglUO1hkTNaBKkTHsRoOSVoigtd30P8HCt+j+WHFvL2Ts+8/QlCV9D1ZdCqkmVTUcGe13ewXiaSacILgxRsqRqEe/Tm6iVYL2Mly4Ib+KBPpHMha0M4g7mrJdtGc9f5A4ZIC+m/S5LQcNqgZWgs0XF/+X+bjmDGLwotAlW0wG/NAAAAAElFTkSuQmCC",
flags=[null,flag_1,flag_2,flag_3,flag_4,flag_5,flag_6,flag_7,flag_8,flag_9,flag_10,flag_11,flag_12,flag_13,flag_14],flagsLarge=[null,flag_1l,null,flag_3l,flag_4l,flag_5l,null,flag_7l,flag_8l,flag_9l,null,null,null,null,null],englishFlag=flag_2;try{englishFlag="en-US"==navigator.language?flag_1:flag_2}catch(a){}var englishFlagLarge=flag_2l;try{englishFlagLarge="en-US"==navigator.language?flag_1l:flag_2l}catch(a){}
var maxTrackingAllowed=5E3,verifyRegExp={email:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,asin:/([BC][A-Z0-9]{9}|\d{9}(!?X|\d))/,globalAsin:/([BC][A-Z0-9]{9}|\d{9}(!?X|\d))/g,productCode:/(\d{12,13})/,globalProductCode:/(\d{12,13})/g,sellerId:/([A-Z0-9]{9,21})/,domainId:/^([1-9]|10|11|12|13|14)$/,vatId:/^((AT)?U[0-9]{8}|(BE)?0[0-9]{9}|(BG)?[0-9]{9,10}|(CY)?[0-9A-Z]{8}[A-Z]{1}|(CZ)?[0-9]{8,10}|(DE)?[0-9]{9}|(DK)?[0-9]{8}|(EE)?[0-9]{9}|(EL|GR)?[0-9]{9}|(ES)?[0-9A-Z][0-9]{7}[0-9A-Z]|(FI)?[0-9]{8}|(FR)?[0-9A-Z]{2}[0-9]{9}|(GB)?([0-9]{9}([0-9]{3})?|[A-Z]{2}[0-9]{3})|(HR)?[0-9]{11}|(HU)?[0-9]{8}|(IE)?[0-9]S[0-9]{5}L|(IE)?[0-9]{7}[A-Z]{1,2}|(IT)?[0-9]{11}|(LT)?([0-9]{9}|[0-9]{12})|(LU)?[0-9]{8}|(LV)?[0-9]{11}|(MT)?[0-9]{8}|(NL)?[0-9]{9}B[0-9]{2}|(PL)?[0-9]{10}|(PT)?[0-9]{9}|(RO)?[0-9]{2,10}|(SE)?[0-9]{12}|(SI)?[0-9]{8}|(SK)?[0-9]{10})$/},
tld,CsvType={AMAZON:{index:0,deal:!0,currency:!0,showDefault:1,isEnabled:!0,isWithShipping:!1,isTopGraph:!0,isOfferData:!1,isTrackable:!0,graphAPI:!0,color:"#FFA500",fillColor:["rgba(255, 224, 193, 0.5)","rgba(255, 224, 193, 1)"],bg:"rgba(255, 225, 192, 0.8)"},NEW:{index:1,deal:!0,currency:!0,showDefault:1,isEnabled:!0,isWithShipping:!1,isTopGraph:!0,isOfferData:!1,isTrackable:!0,graphAPI:!0,color:"#88d",bg:"rgba(225, 235, 255, 0.8)"},USED:{index:2,deal:!0,currency:!0,showDefault:1,isEnabled:!0,isWithShipping:!1,
isTopGraph:!0,isOfferData:!1,isTrackable:!0,graphAPI:!0,color:"#444",bg:"rgba(230, 230, 230, 0.8)"},SALES:{index:3,deal:!0,currency:!1,showDefault:0,isEnabled:!0,isWithShipping:!1,isTopGraph:!0,isOfferData:!1,isTrackable:!0,graphAPI:!0,color:"#8FBC8F",bg:"rgba(198, 237, 203, 0.8)"},LISTPRICE:{index:4,deal:!1,currency:!0,showDefault:0,isEnabled:!0,isWithShipping:!1,isTopGraph:!0,isOfferData:!1,isTrackable:!0,color:"#8B4513",bg:"rgba(214, 175, 147, 0.8)"},COLLECTIBLE:{index:5,deal:!0,currency:!0,showDefault:0,
isEnabled:!0,isWithShipping:!1,isTopGraph:!0,isOfferData:!1,isTrackable:!0,color:"#B0C4DE",bg:"rgba(220, 233, 251, 0.8)"},REFURBISHED:{index:6,deal:!0,currency:!0,showDefault:0,isEnabled:!0,isWithShipping:!1,isTopGraph:!0,isOfferData:!1,isTrackable:!0,color:"#00FFFF",bg:"rgba(198, 255, 255, 0.8)"},NEW_FBM_SHIPPING:{index:7,deal:!0,currency:!0,showDefault:0,isEnabled:!0,isWithShipping:!0,isTopGraph:!0,isBeta:function(){return la._498+la._496},isOfferData:!0,isTrackable:!0,graphAPI:!0,color:"#039BE5",
bg:"rgba(177, 213, 255, 0.8)"},LIGHTNING_DEAL:{index:8,deal:!0,currency:!0,showDefault:1,isEnabled:!0,isWithShipping:!1,isTopGraph:!0,isBeta:function(){return'Tip: To only view lightning deals sold by Amazon use the "Has Amazon offer" filter.'},isOfferData:!1,isTrackable:!0,graphAPI:!0,color:"#ff0000",bg:"rgba(255, 221, 221, 0.8)"},WAREHOUSE:{index:9,deal:!0,currency:!0,showDefault:1,isEnabled:!0,isWithShipping:!1,isTopGraph:!0,isBeta:function(){return la._498+la._494},isOfferData:!0,isTrackable:!0,
graphAPI:!0,color:"#9c27b0",bg:"rgba(237, 206, 243, 0.8)"},NEW_FBA:{index:10,deal:!0,currency:!0,showDefault:0,isEnabled:!0,isWithShipping:!1,isTopGraph:!0,isBeta:function(){return la._498+la._495},isOfferData:!0,isTrackable:!0,graphAPI:!0,color:"#ff5722",bg:"rgba(255, 188, 167, 0.8)"},COUNT_NEW:{index:11,deal:!1,currency:!1,showDefault:0,isEnabled:!0,isWithShipping:!1,isTopGraph:!1,isOfferData:!1,isTrackable:!0,color:"#88d",bg:"rgba(225, 235, 255, 0.8)"},COUNT_USED:{index:12,deal:!1,currency:!1,
showDefault:0,isEnabled:!0,isWithShipping:!1,isTopGraph:!1,isOfferData:!1,isTrackable:!0,color:"#444",bg:"rgba(230, 230, 230, 0.8)"},COUNT_REFURBISHED:{index:13,deal:!1,currency:!1,showDefault:0,isEnabled:!0,isWithShipping:!1,isTopGraph:!1,isOfferData:!1,isTrackable:!0,color:"#00FFFF",bg:"rgba(198, 255, 255, 0.8)"},COUNT_COLLECTIBLE:{index:14,deal:!1,currency:!1,showDefault:0,isEnabled:!0,isWithShipping:!1,isTopGraph:!1,isOfferData:!1,isTrackable:!0,color:"rgba(220, 233, 251, 0.8)",bg:"rgba(220, 233, 251, 0.8)"},
EXTRA_INFO_UPDATES:{index:15,deal:!1,currency:!1,showDefault:0,isEnabled:!1,isWithShipping:!1,isTopGraph:!0,color:"#444",bg:"rgba(255, 225, 192, 0.8)"},RATING:{index:16,deal:!1,currency:!1,showDefault:0,isEnabled:!0,isWithShipping:!1,isTopGraph:!1,isOfferData:!0,isTrackable:!0,color:"#009688",bg:"rgba(200, 255, 251, 0.8)"},COUNT_REVIEWS:{index:17,deal:!1,currency:!1,showDefault:0,isEnabled:!0,isWithShipping:!1,isTopGraph:!1,isOfferData:!0,isTrackable:!0,color:"#8ab300",bg:"rgba(222, 239, 167, 0.8)"},
BUY_BOX_SHIPPING:{index:18,deal:!0,currency:!0,showDefault:0,isEnabled:!0,isWithShipping:!0,isTopGraph:!0,isOfferData:!0,isTrackable:!0,graphAPI:!0,color:"#ff00b4",bg:"rgba(255, 204, 240, 0.8)"},USED_NEW_SHIPPING:{index:19,deal:!0,currency:!0,showDefault:0,isEnabled:!0,isWithShipping:!0,isTopGraph:!0,isOfferData:!0,isTrackable:!0,color:"#444",bg:"rgba(173, 173, 173, 0.7)"},USED_VERY_GOOD_SHIPPING:{index:20,deal:!0,currency:!0,showDefault:0,isEnabled:!0,isWithShipping:!0,isTopGraph:!0,isOfferData:!0,
isTrackable:!0,color:"#009678",bg:"rgba(162, 255, 236, 0.7)"},USED_GOOD_SHIPPING:{index:21,deal:!0,currency:!0,showDefault:0,isEnabled:!0,isWithShipping:!0,isTopGraph:!0,isOfferData:!0,isTrackable:!0,color:"#795548",bg:"rgba(189, 162, 153, 0.8)"},USED_ACCEPTABLE_SHIPPING:{index:22,deal:!0,currency:!0,showDefault:0,isEnabled:!0,isWithShipping:!0,isTopGraph:!0,isOfferData:!0,isTrackable:!0,color:"#9E9E9E",bg:"rgba(220, 220, 220, 0.8)"},COLLECTIBLE_NEW_SHIPPING:{index:23,deal:!1,currency:!0,showDefault:0,
isEnabled:isTest,isWithShipping:!0,isTopGraph:!0,isOfferData:!0,isTrackable:!1,color:"#444",bg:"rgba(255, 225, 192, 0.8)"},COLLECTIBLE_VERY_GOOD_SHIPPING:{index:24,deal:!1,currency:!0,showDefault:0,isEnabled:isTest,isWithShipping:!0,isTopGraph:!0,isOfferData:!0,isTrackable:!1,color:"#444",bg:"rgba(255, 225, 192, 0.8)"},COLLECTIBLE_GOOD_SHIPPING:{index:25,deal:!1,currency:!0,showDefault:0,isEnabled:isTest,isWithShipping:!0,isTopGraph:!0,isOfferData:!0,isTrackable:!1,color:"#444",bg:"rgba(255, 225, 192, 0.8)"},
COLLECTIBLE_ACCEPTABLE_SHIPPING:{index:26,deal:!1,currency:!0,showDefault:0,isEnabled:isTest,isWithShipping:!0,isTopGraph:!0,isOfferData:!0,isTrackable:!1,color:"#222",bg:"rgba(255, 225, 192, 0.8)"},REFURBISHED_SHIPPING:{index:27,deal:!1,currency:!0,showDefault:0,isEnabled:isTest,isWithShipping:!0,isTopGraph:!0,isOfferData:!0,isTrackable:!1,color:"#009688",bg:"rgba(192, 255, 226, 0.8)"},EBAY_NEW_SHIPPING:{index:28,deal:!1,currency:!0,showDefault:0,isEnabled:!0,isWithShipping:!0,isTopGraph:!0,isOfferData:!1,
isTrackable:!1,color:"#009688",bg:"rgba(94, 226, 225, 0.8)"},EBAY_USED_SHIPPING:{index:29,deal:!1,currency:!0,showDefault:0,isEnabled:!0,isWithShipping:!0,isTopGraph:!0,isOfferData:!1,isTrackable:!1,color:"#99E600",bg:"rgba(207, 255, 107, 0.8)"},TRADE_IN:{index:30,deal:!0,currency:!0,showDefault:0,isEnabled:!0,isWithShipping:!1,isTopGraph:!0,isOfferData:!1,isTrackable:!0,color:"#ff597c",bg:"rgba(255, 201, 213, 0.7)"},RENT:{index:31,deal:!1,currency:!0,showDefault:0,isEnabled:!1,isWithShipping:!1,
isTopGraph:!0,isOfferData:!0,isTrackable:!1,color:"#b3809a",bg:"rgba(212, 212, 241, 0.8)"},BUY_BOX_USED_SHIPPING:{index:32,deal:!0,currency:!0,showDefault:0,isEnabled:enableNewCsvTypes,isWithShipping:!0,isTopGraph:!0,isOfferData:!0,isTrackable:!0,color:"#da66ff",bg:"rgba(225,159,255,0.6)"},PRIME_EXCL:{index:33,deal:!0,currency:!0,showDefault:0,isEnabled:enableNewCsvTypes,isWithShipping:!1,isTopGraph:!0,isOfferData:!0,isTrackable:!1,color:"#dfc300",bg:"rgba(208,190,123,0.6)"},length:34,getObjectsSorted:function(){return[CsvType.SALES,
0,CsvType.RATING,CsvType.COUNT_REVIEWS,CsvType.BUY_BOX_SHIPPING,CsvType.AMAZON,CsvType.NEW,CsvType.NEW_FBA,CsvType.NEW_FBM_SHIPPING,CsvType.PRIME_EXCL,CsvType.LIGHTNING_DEAL,0,CsvType.BUY_BOX_USED_SHIPPING,CsvType.USED,CsvType.USED_NEW_SHIPPING,CsvType.USED_VERY_GOOD_SHIPPING,CsvType.USED_GOOD_SHIPPING,CsvType.USED_ACCEPTABLE_SHIPPING,CsvType.WAREHOUSE,0,CsvType.REFURBISHED,CsvType.REFURBISHED_SHIPPING,CsvType.COLLECTIBLE,CsvType.COLLECTIBLE_NEW_SHIPPING,CsvType.COLLECTIBLE_VERY_GOOD_SHIPPING,CsvType.COLLECTIBLE_GOOD_SHIPPING,
CsvType.COLLECTIBLE_ACCEPTABLE_SHIPPING,CsvType.LISTPRICE,CsvType.TRADE_IN,CsvType.RENT,CsvType.EBAY_NEW_SHIPPING,CsvType.EBAY_USED_SHIPPING,1,CsvType.COUNT_NEW,CsvType.COUNT_USED,CsvType.COUNT_REFURBISHED,CsvType.COUNT_COLLECTIBLE]},getObjectNamesSortedTracking:function(){return"BUY_BOX_SHIPPING AMAZON NEW NEW_FBA NEW_FBM_SHIPPING PRIME_EXCL LIGHTNING_DEAL BUY_BOX_USED_SHIPPING USED USED_NEW_SHIPPING USED_VERY_GOOD_SHIPPING USED_GOOD_SHIPPING USED_ACCEPTABLE_SHIPPING WAREHOUSE REFURBISHED REFURBISHED_SHIPPING COLLECTIBLE COLLECTIBLE_NEW_SHIPPING COLLECTIBLE_VERY_GOOD_SHIPPING COLLECTIBLE_GOOD_SHIPPING COLLECTIBLE_ACCEPTABLE_SHIPPING LISTPRICE TRADE_IN RENT EBAY_NEW_SHIPPING EBAY_USED_SHIPPING SALES RATING COUNT_REVIEWS COUNT_NEW COUNT_USED COUNT_REFURBISHED COUNT_COLLECTIBLE".split(" ")},
getName:function(a){switch(a){case 0:return"Amazon";case 1:return la._93;case 2:return la._94;case 3:return la._391;case 4:return la._398;case 5:return la._399;case 6:return la._400;case 7:return la._401;case 8:return la._402;case 9:return la._403;case 10:return la._404;case 11:return la._405;case 12:return la._406;case 13:return la._407;case 14:return la._408;case 15:return la._439;case 16:return la._440;case 17:return la._441;case 18:return la._442;case 19:return la._443;case 20:return la._444;
case 21:return la._445;case 22:return la._446;case 23:return la._447;case 24:return la._448;case 25:return la._449;case 26:return la._450;case 27:return la._451;case 28:return"eBay New \ud83d\ude9a";case 29:return"eBay Used \ud83d\ude9a";case 30:return"Trade-In";case 31:return"Rental";case 32:return la._983;case 33:return la._984;default:return""}},getCondition:function(a){var b="Unknown";switch(a){case 1:b=la._93;break;case 2:b=la._443;break;case 3:b=la._444;break;case 4:b=la._445;break;case 5:b=
la._446}return b.replace(" \ud83d\ude9a","")},getNameWithCircle:function(a){return'<i class="fa fa-circle" style="font-size: 7px;transform: translateY(-1px);color:'+CsvType.getObject(a).color+'" ></i> '+CsvType.getName(a)},getDescription:function(a){switch(a){case 0:return la._499;case 1:return la._500;case 2:return la._501;case 3:return la._502;case 4:return la._409;case 5:return la._503;case 6:return la._504;case 7:return la._505;case 8:return la._402;case 9:return la._403;case 10:return la._506;
case 11:return la._405;case 12:return la._406;case 13:return la._407;case 14:return la._408;case 15:return la._439;case 16:return la._440;case 17:return la._441;case 18:return la._507;case 19:return la._508;case 20:return la._508;case 21:return la._508;case 22:return la._508;case 23:return la._447;case 24:return la._448;case 25:return la._449;case 26:return la._450;case 27:return la._451;case 28:return"eBay Fixed Price New \ud83d\ude9a";case 29:return"eBay Fixed Price Used \ud83d\ude9a";case 30:return"Amazon Trade-In Value";
case 31:return"Rental price";case 32:return la._985;case 33:return la._986;default:return""}},getDescriptionTracking:function(a){switch(a){case 0:return la._818;case 1:return la._819;case 2:return la._820;case 3:return la._391;case 4:return la._398;case 5:return la._821;case 6:return la._822;case 7:return la._823;case 8:return la._402;case 9:return la._403;case 10:return la._824;case 11:return la._405;case 12:return la._406;case 13:return la._407;case 14:return la._408;case 16:return la._440;case 17:return la._441;
case 18:return la._825;case 19:return la._826;case 20:return la._827;case 21:return la._828;case 22:return la._829;case 23:return la._830;case 24:return la._831;case 25:return la._832;case 26:return la._833;case 27:return la._834;case 30:return la._835;case 28:case 29:case 31:return"";case 32:return la._989;case 33:return la._986;default:return""}},getObjectNameByName:function(a){if(0==a.indexOf(la._391))return"SALES";if(0==a.indexOf("eBay New \ud83d\ude9a"))return"EBAY_NEW_SHIPPING";if(0==a.indexOf("eBay Used \ud83d\ude9a"))return"EBAY_USED_SHIPPING";
for(var b in CsvType)if("object"==typeof CsvType[b]&&a==CsvType.getName(CsvType[b].index))return b},getObject:function(a){for(var b in CsvType)if("object"==typeof CsvType[b]&&CsvType[b].index==a)return CsvType[b]},getObjectName:function(a){for(var b in CsvType)if("object"==typeof CsvType[b]&&CsvType[b].index==a)return b},format:function(a,b,d){if("undefined"===typeof CsvType[a])return"";if(null==b||-1==b)return"-";if(CsvType[a].currency)return Money.format(b,{sourceDomainId:d,targetDomainId:d});if("RATING"==
a)return(b/10).toFixed(1);b=NumberUtil.format(b);"SALES"===a&&(b="# "+b);return b}},graphIsRestricted=function(a,b,d){return hasDataAccessSubscription&&!0!==d?!1:[CsvType.EBAY_NEW_SHIPPING.index,CsvType.EBAY_USED_SHIPPING.index].includes(Number(b))?!0:!0!==[!1,!0,!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!1][Number(a)]||!0!==[!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!0,!0,!0,!0,!1,!0,!0,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!0,!1,!1,!0,!1][Number(b)]?!1:!0};
function getStarsFromRating(a){a*=10;for(var b="#f1bb00",d="",g=100;600>g;g+=100){if(g<=a)var n="fa-star";else a+100<g?n="fa-star-o":(n=a%100,75<=n?n="fa-star":25>n?(n="fa-star-o",b="rgba(241, 187, 0, .5)"):n="fa-star-half-o");d+='<i style="color:'+b+'" class="fa '+n+'"></i>'}return d}
function findOffer(a,b,d,g,n,t,h,m){if(null==a)return null;if(null==h&&t==CsvType.BUY_BOX_SHIPPING&&null!=b&&1<b.length)for(var r=0;r<b.length;r+=2){var q=Number(b[r]);if(q>d)break;if(!(q<d&&r+2!=b.length&&b[r+2]<=d)){h=b[r+1];break}}if(null==h&&t==CsvType.BUY_BOX_USED_SHIPPING&&null!=m&&1<m.length)for(b=0;b<m.length;b+=4){r=Number(m[b]);if(r>d)break;if(!(r<d&&b+4!=m.length&&m[b+4]<=d)){h=m[b+1];break}}for(m=0;m<a.length;m++)if(b=a[m],!(d>b.lastSeen||null!=h&&b.sellerId!=h||null==b.offerCSV||2>b.offerCSV.length)){switch(t.index){case CsvType.AMAZON.index:if(!b.isAmazon)continue;
break;case CsvType.WAREHOUSE.index:if(!b.isWarehouseDeal)continue;break;case CsvType.NEW_FBA.index:if(b.isAmazon||!b.isPrime||b.condition!=ConditionType.NEW)continue;break;case CsvType.NEW_FBM_SHIPPING.index:if(b.isAmazon||b.isPrime||b.condition!=ConditionType.NEW)continue;break;case CsvType.USED_NEW_SHIPPING.index:if(b.condition!=ConditionType.USED_NEW)continue;break;case CsvType.USED_VERY_GOOD_SHIPPING.index:if(b.condition!=ConditionType.USED_VERY_GOOD)continue;break;case CsvType.USED_GOOD_SHIPPING.index:if(b.condition!=
ConditionType.USED_GOOD)continue;break;case CsvType.USED_ACCEPTABLE_SHIPPING.index:if(b.condition!=ConditionType.USED_ACCEPTABLE)continue;break;case CsvType.BUY_BOX_SHIPPING.index:if(null==h||b.sellerId!=h)continue;if([ConditionType.USED_NEW,ConditionType.USED_VERY_GOOD,ConditionType.USED_GOOD,ConditionType.USED_ACCEPTABLE].includes(b.condition))continue;break;case CsvType.BUY_BOX_USED_SHIPPING.index:if(null==h||b.sellerId!=h)continue;if(![ConditionType.USED_NEW,ConditionType.USED_VERY_GOOD,ConditionType.USED_GOOD,
ConditionType.USED_ACCEPTABLE].includes(b.condition))continue;break;case CsvType.PRIME_EXCL.index:if(!b.isPrimeExcl)continue;break;default:continue}for(r=0;r<b.offerCSV.length;r+=3){q=b.offerCSV[r];if(q>d)break;if(!(q<d&&r+3!=b.offerCSV.length&&b.offerCSV[r+3]<d)){var u=b.offerCSV[r+1],D=b.offerCSV[r+2],F=!1;t.isWithShipping?null==n&&(u+D==g?F=!0:u==g&&D==n&&(F=!0)):u==g&&(F=!0);if(F)return b.item||(b.item={}),!0!==disableStockFeatures&&(b.item.stock=getValueAtTime(b.stockCSV,d,CsvType.AMAZON)),b.item.price=
u,b.item.shipping=D,b.item.time=keepaTime.minutesToEpoch(q),b}}if(t.index===CsvType.PRIME_EXCL.index&&"undefined"!==typeof b.primeExclCSV)for(r=0;r<b.primeExclCSV.length;r+=2){q=b.primeExclCSV[r];if(q>d)break;if(!(q<d&&r+2!=b.primeExclCSV.length&&b.primeExclCSV[r+2]<d)&&(u=b.primeExclCSV[r+1],D=!1,t.isWithShipping?null==n&&(u+0==g?D=!0:u==g&&0==n&&(D=!0)):u==g&&(D=!0),D))return b.item||(b.item={}),!0!==disableStockFeatures&&(b.item.stock=getValueAtTime(b.stockCSV,d,CsvType.AMAZON)),b.item.price=u,
b.item.shipping=0,b.item.time=keepaTime.minutesToEpoch(q),b}}return null}
for(var continents=[[1,6,11],[12],[2,3,4,8,9,14],[5,10],[13]],domainIdToContinent=[0,0,2,2,2,3,0,3,2,2,3,0,1,4,2],LocaleType={length:numberOfDomains,getName:function(a){a=Number(a);switch(a){case 1:return"US";case 2:return"UK";case 3:return"DE";case 4:return"FR";case 5:return"JP";case 6:return"CA";case 7:return"CN";case 8:return"IT";case 9:return"ES";case 10:return"IN";case 11:return"MX";case 12:return"BR";case 13:return"AU";case 14:return"NL";default:return""}},getByRegionOrder:function(a){return a?
[la._664,1,6,11,la._353,2,3,4,8,9,14,la._354,5,10]:[1,6,11,2,3,4,8,9,5,10]},getObjectNameByName:function(a){return a},getObject:function(a){for(var b in LocaleType)if("object"==typeof LocaleType[b]&&LocaleType[b].index==a)return LocaleType[b]},getObjectName:function(a){return LocaleType.getName(a)},getContinentId:function(a){return domainIdToContinent[a]},getContinentName:function(a){return[la._664,la._665,la._353,la._354,la._663][domainIdToContinent[a]]},getShippingInfoLink:function(a){a=Number(a);
switch(a){case 1:return"http://www.amazon.com/gp/redirect.html?location=/gp/help/customer/display.html/ref=hp_left_ac?ie=UTF8&nodeId=596184";case 2:return"http://www.amazon.co.uk/gp/redirect.html?location=/gp/help/customer/display.html?nodeId=11072981";case 3:return"http://www.amazon.de/gp/redirect.html?location=/gp/help/customer/display.html/ref=hp_left_sib?ie=UTF8&nodeId=200170100";case 4:return"http://www.amazon.fr/gp/redirect.html?location=/gp/help/customer/display.html/ref=hp_left_sib?ie=UTF8&nodeId=200781660";
case 5:return"http://www.amazon.co.jp/gp/redirect.html?location=/gp/help/customer/display.html/ref=footer_shiprates?ie=UTF8&nodeId=642982";case 6:return"http://www.amazon.ca/gp/redirect.html?location=/gp/help/customer/display.html/ref=hp_rel_topic?ie=UTF8&nodeId=915474";case 7:return"";case 8:return"http://www.amazon.it/gp/redirect.html?location=/gp/help/customer/display.html/ref=hp_left_cn?ie=UTF8&nodeId=200533920";case 9:return"http://www.amazon.es/gp/redirect.html?location=/gp/help/customer/display.html/ref=hp_left_cn?ie=UTF8&nodeId=200533920";
case 10:return"";case 11:return"";case 12:return"";case 13:return"";case 14:return"";default:return""}}},LanguageHelper={getAlpha2:function(a){a=Number(a);switch(a){case 1:return"en";case 3:return"de";case 5:return"jp";case 7:return"cn";case 8:return"it";default:return"en"}},getLocaleString:function(a,b){a=Number(a);b=Number(b);switch(a){case 1:return a=LocaleType.getName(b),["US","CA","UK"].includes(a)?"en-"+("UK"==a?"GB":a):"en-US";case 3:return"de-DE";case 5:return"ja-JP";case 7:return"cn-CN";
case 8:return"it-IT";default:return"en-US"}}},MerchantType={RATING:{index:0,deal:!1,currency:!1,showDefault:1,isEnabled:!0,isWithShipping:!1,isTopGraph:!0,isOfferData:!1,color:"#009688",bg:"rgba(200, 255, 251, 0.8)"},RATING_COUNT:{index:1,deal:!1,currency:!1,showDefault:1,isEnabled:!0,isWithShipping:!1,isTopGraph:!0,isOfferData:!1,color:"#8ab300",bg:"rgba(222, 239, 167, 0.8)"},LISTINGS_COUNT:{index:2,deal:!1,currency:!1,showDefault:1,isEnabled:!0,isWithShipping:!1,isTopGraph:!0,isOfferData:!0,color:"#B0C4DE",
bg:"rgba(225, 235, 255, 0.8)"},length:3,getName:function(a){a=Number(a);switch(a){case 0:return la._440;case 1:return la._441;case 2:return"Listing Count";default:return""}},getObjectNameByName:function(a){for(var b in MerchantType)if("object"==typeof MerchantType[b]&&a==MerchantType.getName(MerchantType[b].index))return b},getObject:function(a){for(var b in MerchantType)if("object"==typeof MerchantType[b]&&MerchantType[b].index==a)return MerchantType[b]},getObjectName:function(a){for(var b in MerchantType)if("object"==
typeof MerchantType[b]&&MerchantType[b].index==a)return b}},RatingType={COUNT_RATING:{index:0,deal:!1,currency:!1,showDefault:1,isEnabled:!0,isWithShipping:!1,isTopGraph:!0,isOfferData:!1,color:"#009688",bg:"rgba(200, 255, 251, 0.9)"},COUNT_REVIEW:{index:1,deal:!1,currency:!1,showDefault:1,isEnabled:!0,isWithShipping:!1,isTopGraph:!0,isOfferData:!1,color:"#8ab300",bg:"rgba(222, 239, 167, 0.9)"},length:2,getName:function(a){a=Number(a);switch(a){case 0:return"Rating Count";case 1:return la._441;default:return""}},
getObjectNameByName:function(a){for(var b in RatingType)if("object"==typeof RatingType[b]&&a==RatingType.getName(RatingType[b].index))return b},getObject:function(a){for(var b in RatingType)if("object"==typeof RatingType[b]&&RatingType[b].index==a)return RatingType[b]},getObjectName:function(a){for(var b in RatingType)if("object"==typeof RatingType[b]&&RatingType[b].index==a)return b}},OfferType={STOCK:{index:0,deal:!1,currency:!1,showDefault:1,isEnabled:!0,isWithShipping:!1,isTopGraph:!0,isOfferData:!1,
color:"#2692c2",bg:"rgba(185, 238, 255, 1.0)"},PRICE:{index:1,deal:!1,currency:!0,showDefault:1,isEnabled:!0,isWithShipping:!0,isTopGraph:!0,isOfferData:!1,color:"#000",background:"#000"},BBWIN:{index:2,deal:!1,currency:!1,showDefault:1,isEnabled:!0,isWithShipping:!1,isTopGraph:!0,isOfferData:!1,color:"#e600ff",background:"#e600ff"},length:3,getName:function(a){a=Number(a);switch(a){case 0:return la._632;case 1:return la._488;case 2:return"Buy Box Win";default:return""}},getObjectNameByName:function(a){for(var b in OfferType)if("object"==
typeof OfferType[b]&&a==OfferType.getName(OfferType[b].index))return b},getObject:function(a){for(var b in OfferType)if("object"==typeof OfferType[b]&&OfferType[b].index==a)return OfferType[b]},getObjectName:function(a){for(var b in OfferType)if("object"==typeof OfferType[b]&&OfferType[b].index==a)return b}},ConditionType={UNKNOWN:0,NEW:1,USED_NEW:2,USED_VERY_GOOD:3,USED_GOOD:4,USED_ACCEPTABLE:5,REFURBISHED:6,COLLECTIBLE_NEW:7,COLLECTIBLE_VERY_GOOD:8,COLLECTIBLE_GOOD:9,COLLECTIBLE_ACCEPTABLE:10,RENTAL:11,
length:12,getName:function(a){a=Number(a);switch(a){case 0:return la._530;case 1:return la._93;case 2:return la._637;case 3:return la._638;case 4:return la._639;case 5:return la._640;case 6:return la._645;case 7:return la._641;case 8:return la._642;case 9:return la._643;case 10:return la._644;case 11:return la._655;default:return la._530}},getCorrespondingCsvType:function(a){var b=null;switch(a){case 2:b=CsvType.USED_NEW_SHIPPING;break;case 3:b=CsvType.USED_VERY_GOOD_SHIPPING;break;case 4:b=CsvType.USED_GOOD_SHIPPING;
break;case 5:b=CsvType.USED_ACCEPTABLE_SHIPPING;break;case 6:b=CsvType.REFURBISHED_SHIPPING;break;case 7:b=CsvType.COLLECTIBLE_NEW_SHIPPING;break;case 8:b=CsvType.COLLECTIBLE_VERY_GOOD_SHIPPING;break;case 9:b=CsvType.COLLECTIBLE_GOOD_SHIPPING;break;case 10:b=CsvType.COLLECTIBLE_ACCEPTABLE_SHIPPING;break;case 11:b=CsvType.RENT}return b},getMetaCondition:function(a){a=Number(a);switch(a){case 1:return"NEW";case 2:case 3:case 4:case 5:return"USED";case 6:return"REFURBISHED";case 7:case 8:case 9:case 10:return"COLLECTIBLE";
case 11:return"RENTAL";default:return"UNKNOWN"}},getBuyBoxUsedConditionMap:function(){var a={};return a[ConditionType.USED_NEW]=ConditionType.getName(ConditionType.USED_NEW),a[ConditionType.USED_VERY_GOOD]=ConditionType.getName(ConditionType.USED_VERY_GOOD),a[ConditionType.USED_GOOD]=ConditionType.getName(ConditionType.USED_GOOD),a[ConditionType.USED_ACCEPTABLE]=ConditionType.getName(ConditionType.USED_ACCEPTABLE),a}},domainId=0;domainId<numberOfDomains;domainId++)7!=domainId&&(LocaleType[LocaleType.getName(domainId)]=
{index:domainId,deal:!0,currency:!0,showDefault:1});var AccountType=["GUEST","ANON","KEEPA"],EmailStatus=["NEW","VERIFIED","BLOCKED"],NotificationType="NONE EMAIL TWITTER DELETED BROWSER RSS API".split(" "),checkboxNameArray=" US GB DE FR JP CA CN IT ES IN MX BR AU".split(" "),NotifyIfType=["OUT_OF_STOCK","BACK_IN_STOCK","EVERY_CHANGE"],desiredSeriesPrefix="desired-",window_focus=!0;$(window).focus(function(){window_focus=!0}).blur(function(){window_focus=!1});
var selectText=function(a){if(document.body.createTextRange){var b=document.body.createTextRange();b.moveToElementText(a);b.select()}else if(window.getSelection){b=window.getSelection();var d=document.createRange();d.selectNodeContents(a);b.removeAllRanges();b.addRange(d)}};function tryParseJSON(a,b){try{var d=JSON.parse(a);if(d&&"object"===typeof d&&null!==d)return d}catch(g){b||reportBug(g,a)}return null}
var material=function(){return{getButton:function(a,b,d,g,n,t){return'<button id="'+a+'" class="mdc-button '+(n?"":"mdc-button--raised")+" "+(t?"mdc-button--secondary":"mdc-button--primary")+'" data-mdc-auto-init="MDCRipple" name="action">\n\t\t\t'+(d?'<i class="fa fa-'+d+'" ></i>&ensp;':"")+"\n\t\t\t"+b+"\n\t\t\t"+(g?'&ensp;<i class="fa fa-'+g+'" ></i>':"")+"\n\t\t</button>"},getCheckbox:function(a,b,d,g,n,t){return'<div class="mdc-form-field">\n\t\t  <div class="mdc-checkbox" data-mdc-auto-init="MDCCheckbox">\n\t\t\t<input class="mdc-checkbox__native-control" type="checkbox" id="'+
a+'-checkbox" '+(d?"checked":"")+' name="'+n+'" '+(g?"required":"")+(0==t||t?' value="'+t+'"':"")+' />\n\t\t\t<div class="mdc-checkbox__background">\n\t\t\t  <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">\n\t\t\t\t<path class="mdc-checkbox__checkmark-path" fill="none" stroke="white" d="M1.73,12.91 8.1,19.28 22.79,4.59"/>\n\t\t\t  </svg>\n\t\t\t  <div class="mdc-checkbox__mixedmark"></div>\n\t\t\t</div>\n\t\t  </div>\n\t\t  <label for="'+a+'-checkbox">'+b+"</label>\n\t\t</div>"},getCountrySelect:function(a,
b){for(var d="",g=[],n=[],t="US GB DE FR JP CA CN IT ES IN MX BR AU".split(" "),h=$jscomp.makeIterator(t),m=h.next();!m.done;m=h.next())n.push(a[m.value]);for(var r in a)g.push([a[r].name,a[r]]);g.sort(function(D,F){return D[0].localeCompare(F[0])});for(var q in g)n.push(g[q][1]);a=!1;for(var u in n)g=n[u],(h=b==g.id&&!a)&&(a=!0),d+="<option "+(h?'selected="selected"':"")+' id="'+g.id+'" data-country="'+g.name+'">'+g.name+"</option>",Number(u)==t.length-1&&(d+="<option disabled>----------------</option>");
return'<div class="mdc-select" style="margin-top:12px;">\n\t\t\t\t<select id="countrySelect" name="billing-country" autocomplete="billing country" class="mdc-select__native-control">'+d+"</select>\n\t\t\t</div>"},getInput:function(a,b,d,g,n,t,h,m,r,q,u,D){return'<div class="mdc-text-field mdc-text-field--dense"'+(r?' style="width:inherit;"':"")+' data-mdc-auto-init="MDCTextField">\n\t\t\t  <input type="'+(D?D:"text")+'" id="'+d+'" class="mdc-text-field__input" '+(m?'placeholder="'+m+'"':"")+"  "+
(b?'pattern="'+b+'"':"")+' name="'+t+'"'+(u?' value="'+u+'"':"")+" "+(a?"required":"")+" "+(n?'autocomplete="'+n+'"':"")+' aria-controls="'+d+'-validation-msg">\n\t\t\t  <label for="'+d+'" class="mdc-floating-label"'+(q?' style="'+q+'"':"")+">"+g+"</label>\n\t\t</div>\n\t\t"+(h?'<p id="'+d+'-validation-msg" class="mdc-text-field-helper-text mdc-text-field-helper-text--validation-msg" aria-hidden="true"> \n\t\t\t\t'+h+"\n\t\t</p>":"")},getInputNumber:function(a,b,d,g,n,t,h,m){return(t?t+"&ensp;":"")+
'\n\t\t<div class="mdc-text-field mdc-text-field--dense">\n\t\t\t<input type="number" id="'+a+'" class="mdc-text-field__input" value="'+b+'" min="'+d+'" max="'+g+'"'+(n?" disabled":"")+(m?' style="'+m+'"':"")+">\n\t\t</div>\n\t\t"+(h?"&ensp;"+h:"")},getInputNumberPattern:function(a,b,d,g,n,t,h,m,r,q){return'<div class="mdc-text-field mdc-text-field--dense'+(m||q?" mdc-text-field--with-leading-icon":"")+(r?" mdc-text-field--with-trailing-icon":"")+'" data-mdc-auto-init="MDCTextField">\n\t\t\t'+(m?
'<i class="mdc-text-field__icon fa fa-fw fa-lg fa-'+m+'"></i>':"")+"\n\t\t\t"+(q?q:"")+'\n\t\t\t<input type="text" id="'+a+'" class="mdc-text-field__input" name="'+b+'"'+(0==g||g?' value="'+g+'"':"")+(n?' pattern="'+n+'"':"")+(t?' title="'+t+'"':"")+(h?'autocomplete="'+h+'"':"")+'>\n\t\t\t<label for="'+a+'" class="mdc-floating-label">'+d+"</label>\n\t\t\t"+(r?'<i class="mdc-text-field__icon fa fa-fw fa-lg fa-'+r+'"></i>':"")+"\n\t\t</div>"},getInputDate:function(a,b,d,g){return'<label class="mdc-text-field mdc-text-field--dense" data-mdc-auto-init="MDCTextField">\n\t\t\t<input type="date" id="'+
a+'" name="'+b+'" '+(g?' value="'+g+'"':"")+' min="1900-01-01" max="2999-12-31" step="1" class="mdc-text-field__input" autocomplete="off">\n\t\t\t<label for="'+a+'" class="mdc-floating-label">'+d+"</label>\n\t\t</label>"},getInputFile:function(a,b,d,g,n,t,h){return'<div class="mdc-text-field mdc-text-field--dense"'+(t?' style="width:inherit;"':"")+' data-mdc-auto-init="MDCTextField">\n\t\t\t<input id="'+a+'Trigger" class="mdc-text-field__input"'+(n?" required":"")+' autocomplete="off">\n\t\t\t<input id="'+
a+'" name="'+b+'" type="file"'+(g?' accept="'+g+'"':"")+' style="display:none;">\n\t\t\t<label for="'+a+'" class="mdc-floating-label"'+(h?' style="'+h+'"':"")+">"+d+'</label>\n\t\t</div>\n\t\t<p id="'+a+'-validation-msg" class="mdc-text-field-helper-text mdc-text-field-helper-text--validation-msg" aria-hidden="true">\n\t\t\tno valid file found\n\t\t</p>'},getMenu:function(a,b){var d="";b=$jscomp.makeIterator(b);for(var g=b.next();!g.done;g=b.next())g=g.value,d=g.divider?d+'<li class="mdc-list-divider"></li>':
d+("<li"+(g.value?' data-value="'+g.value+'"':"")+' class="mdc-list-item" role="menuitem" tabindex="'+(g.disabled?-1:0)+'"'+(g.disabled?' aria-disabled="true"':"")+(g.style?' style="'+g.style+'"':"")+">\n\t\t\t\t\t"+g.content+"\n\t\t\t\t</li>");return"\n\t\t\t<div"+(a?' id="'+a+'"':"")+' class="mdc-menu" tabindex="-1">\n\t\t\t\t<ul class="mdc-menu__items mdc-list" role="menu" aria-hidden="true">\n\t\t\t\t'+d+"\n\t\t\t\t</ul>\n\t\t\t</div>\t\n\t\t"},getRadio:function(a,b,d,g,n,t,h){return'<div class="mdc-form-field"'+
("undefined"!=typeof h?' title="'+h+'"':"")+'>\n\t\t  <div class="mdc-radio '+(n?"mdc-radio--disabled":"")+'" data-mdc-auto-init="MDCRadio">\n\t\t\t<input class="mdc-radio__native-control" type="radio" id="'+a+'-radio" name="'+g+'"'+("undefined"!=typeof t?' value="'+t+'"':"")+(d?" checked":"")+(n?" disabled":"")+'>\n\t\t\t<div class="mdc-radio__background">\n\t\t\t  <div class="mdc-radio__outer-circle"></div>\n\t\t\t  <div class="mdc-radio__inner-circle"></div>\n\t\t\t</div>\n\t\t  </div>\n\t\t  <label id="'+
a+'-radio1-label" for="'+a+'-radio">'+b+"</label>\n\t\t</div>"},getSelect:function(a,b,d,g,n,t,h){var m=h?"":-1;n=!0!==t?'<option value="'+m+'"'+(d==m?' selected="selected"':"")+">"+(n?n:"All")+"</option>":"";for(var r in g)t=g[r],n+='<option value="'+t.value+'"'+(d==t.value?' selected="selected"':"")+">"+t.label+"</option>";return'<div class="mdc-select">\n\t\t\t<select id="'+a+'" name="'+b+'" class="mdc-select__native-control"'+(h?" required":"")+">\n\t\t\t \t"+n+"\n\t\t\t</select>\n\t\t</div>"},
getSwitch:function(a,b,d){return'<div class="mdc-switch">\n\t\t\t<input type="checkbox" id="'+a+'-switch" class="mdc-switch__native-control"'+(b?" checked":"")+(d?" disabled":"")+' />\n\t\t\t<div class="mdc-switch__background">\n\t\t\t<div class="mdc-switch__knob"></div>\n\t\t\t</div>\n\t\t</div>'},getTabs:function(a){for(var b=a.mode?a.mode:"text-icon",d="",g="",n=$jscomp.makeIterator(a.tabs),t=n.next();!t.done;t=n.next())if(t=t.value)"text-icon"===b?d+='<a class="mdc-tab mdc-tab--with-icon-and-text'+
(t.isActive?" mdc-tab--active":"")+'"'+(t.tab.id?' id="'+t.tab.id+'"':"")+'>\n\t\t\t\t\t\t<i class="fa fa-'+t.tab.icon+' mdc-tab__icon" aria-hidden="'+(t.isActive?"false":"true")+'"></i>\n\t\t\t\t\t\t<span class="mdc-tab__icon-text">'+t.tab.label+"</span>\n\t\t\t\t\t</a>":"text"===b&&(d+='<a class="mdc-tab'+(t.isActive?" mdc-tab--active":"")+'"'+(t.tab.id?' id="'+t.tab.id+'"':"")+">\n\t\t\t\t\t\t"+t.tab.label+"\n\t\t\t\t\t</a>"),g+='<div class="panel '+(t.isActive?"active":"")+'" '+(t.panel.style?
'style="'+t.panel.style+'"':"")+" "+(t.panel.id?'id="'+t.panel.id+'"':"")+' role="tabpanel" aria-hidden="false">'+(t.panel.content?t.panel.content:"")+"</div>";return'<section class="dynamic-toolbar">\n\t\t\t\t<nav id="'+(a.id?a.id:"icon-text-tab-bar")+'" class="mdc-tab-bar'+("text-icon"===b?" mdc-tab-bar--icons-with-text":"")+'">\n\t\t\t\t\t'+d+'\n\t\t\t\t\t<span class="mdc-tab-bar__indicator"></span>\n\t\t\t\t</nav>\n\t\t\t</section>\n\t\t\t<section>\n\t\t\t\t<div class="panels '+(a.panelsClass?
a.panelsClass:"")+'">\n\t\t\t\t\t'+g+"\n\t\t\t\t</div>\n\t\t\t</section>"},init:function(a){setTimeout(function(){mdc.autoInit($(a)[0],function(){})},0)}}}();function getAmazonWishListUrl(a){return"https://www.amazon."+getTldByDomain(a.domain)+"/gp/registry/wishlist/"+a.id+"/"}
NotificationType={getName:function(a){switch(a){case 0:return"Email";case 1:return"Twitter";case 2:return"";case 3:return"Web Push";case 4:return"";case 5:return"API";case 6:return"Keepa App";case 7:return"Telegram";default:return"Unknown"}},getNotifiedViaText:function(a){for(var b="",d=0;d<a.length;d++)a[d]&&(b+=NotificationType.getName(d)+", ");return b.substr(0,b.length-2)}};
var NotificationCause={getName:function(a,b){b=void 0===b?!0:b;switch(a){case 0:return la._525;case 1:return b?la._526:la._864;case 2:return b?la._527:la._865;case 3:return b?la._528:la._866;case 4:return la._134;case 5:return la._462;case 6:return b?la._529:la._867;case 7:return la._560;default:return la._530}}};function getQueryVariable(a){var b=null,d=[];location.hash.substr(7).split("&").forEach(function(g){d=g.split("=");d[0]===a&&(b=d[1])});return b}
function getCurrencyByDomain(a){a=parseInt(a);switch(a){case 1:case 6:return dollar;case 2:return pound;case 3:case 4:case 8:case 9:case 14:return euro;case 7:case 5:return yen;case 10:return rupee;case 11:return dollar;case 12:return real;case 13:return dollar;default:return dollar}}
function getCurrencyCodeByDomain(a){a=parseInt(a);switch(a){case 1:return"USD";case 2:return"GBP";case 3:case 4:case 8:case 9:case 14:return"EUR";case 5:return"JPY";case 6:return"CAD";case 7:return"CNY";case 10:return"INR";case 11:return"MXN";case 12:return"BRL";case 13:return"AUD";default:return"???"}}var globalEbayArray=[!1,!0,!0,!0,!1,!1,!0,!1,!0,!0,!0,!1,!1,!1,!1];
function getBucketInformation(){if(("undefined"!==typeof storage.bucketUpdated||null==storage.bucketUpdated)&&3E4>Date.now()-Number(storage.bucketUpdated)){var a={tokenBucketSize:storage.tokenBucketSize,tokens:storage.tokens};updateQuotaWidget(a);return $.Deferred().resolve(a)}return network.request({path:"user/settings",type:"getTokenStatus"}).done(function(b){isTest&&"undefined"==typeof b.tokenBucketSize&&console.error("BUCKET ERROR: tokenBucketSize is undefined");updateQuotaWidget({tokenBucketSize:b.tokenBucketSize,
tokens:b.tokens})}).fail(function(b){401==b.status?console.log("not authorized - no account"):console.log(b)})}
function getAmazonRedirectByDomain(a,b){var d=lastUrl.substr(2);if(1==$("#dealSearchBar").length){d="dealsOverlay";try{var g=dealWrapperInstance.get();g.lastRequest&&g.lastRequest.priceTypes&&(d+="/"+CsvType.getObjectName(g.lastRequest.priceTypes[0]))}catch(n){}}else 1==$("#trackingSearch").length?d="manageOverlay":1==$("#searchPage").length&&(d="searchOverlay");return"https://dyn.keepa.com/r/?type=amazon&smile="+("true"===storage.useSmile?"1":"0")+"&domain="+a+"&asin="+b+"&source=website&path="+
d}function getEbayRedirectByDomain(a,b,d,g){return"https://dyn.keepa.com/r/?type=ebay&domain="+a+"&asin="+b+"&search="+(d?1:0)+"&source=website&path="+(g||CsvType.EBAY_NEW_SHIPPING.index)}
function refreshDomain(a){a=parseInt(a);switch(a){case 1:currency=dollar;tld="com";break;case 2:currency=pound;tld="co.uk";break;case 3:currency=euro;tld="de";break;case 4:currency=euro;tld="fr";break;case 5:currency=yen;tld="co.jp";break;case 6:currency=dollar;tld="ca";break;case 7:currency=yen;tld="cn";break;case 8:currency=euro;tld="it";break;case 9:currency=euro;tld="es";break;case 10:currency=rupee;tld="in";break;case 11:currency=dollar;tld="com.mx";break;case 12:currency=real;tld="com.br";break;
case 13:currency=dollar;tld="com.au";break;case 14:currency=euro;tld="nl";break;default:currency=dollar,tld="com"}}function getTldByDomain(a){a=parseInt(a);switch(a){case 1:return"com";case 2:return"co.uk";case 3:return"de";case 4:return"fr";case 5:return"co.jp";case 6:return"ca";case 7:return"cn";case 8:return"it";case 9:return"es";case 10:return"in";case 11:return"com.mx";case 12:return"com.br";case 13:return"com.au";case 14:return"nl";default:return"com"}}
function getSSTldByDomain(a){a=parseInt(a);switch(a){case 1:return"com";case 2:return"co.uk";case 3:return"co.uk";case 4:return"co.uk";case 5:return"co.jp";case 6:return"com";case 7:return"cn";case 8:return"co.uk";case 9:return"co.uk";case 10:return"co.uk";case 11:return"com";case 12:return"com";case 13:return"com.au";case 14:return"nl";default:return"com"}}
function getSSMktByDomain(a){a=parseInt(a);switch(a){case 1:return"1";case 2:return"3";case 3:return"4";case 4:return"5";case 5:return"6";case 6:return"7";case 7:return"3240";case 8:return"35691";case 9:return"44551";case 10:return"44571";case 11:return"771770";case 12:return"526970";case 13:return"111172";default:return"1"}}
function getDomainByTld(a){a=a.toLowerCase();switch(a){case "com":return 1;case "co.uk":return 2;case "de":return 3;case "fr":return 4;case "co.jp":return 5;case "ca":return 6;case "cn":return 7;case "it":return 8;case "es":return 9;case "in":return 10;case "com.mx":return 11;case "com.br":return 12;case "com.au":return 13;case "nl":return 14;default:return 1}}(function(a){a.fn.onEnter=function(b){this.bind("keypress",function(d){13==d.keyCode&&b.apply(this,[d])});return this}})(jQuery);
function DiscourseApi(a){this.url=a}DiscourseApi.prototype.category=function(a,b){network.ajax({url:this.url+"/c/"+a+".json"}).done(function(d){b(d)})};DiscourseApi.prototype.topic=function(a,b){network.ajax({url:this.url+"/t/"+a+".json"}).done(function(d){b(d)})};DiscourseApi.prototype.notification=function(a){network.ajax({url:this.url+"/notifications.json",xhrFields:{withCredentials:!0}}).done(function(b){a(b)})};
var discourseUrl="https://discuss.keepa.com",discourseBaseUrl="#!discuss",discourseApi=new DiscourseApi(discourseUrl),serviceWorker=function(){function a(T,ha){if(!t())return!1;var P=!1;n().done(function(R){P=!0}).fail(function(R){P=R?!1:null}).always(function(){if(null!=P&&(!P||ha)){var R='Receive Web Push Notifications for Price Alerts<br><div style="font-size:11px;margin-left:35px;"><span style="color:black;">Chrome and Firefox</span>: You will receive notifications whenever your browser is open. <span style="color:black">Chrome for Android</span>: Always.<br>Registration needs to be repeated for each browser through which you want to receive web push notifications.'+
(P?' To send a test message, <span class="settings-chpw" id="testMessage">click here</span>.':"")+(ha?"":"<br> You can change your decision anytime in your account settings.")+"</div>",Y='<i class="settings-chpw fa fa-toggle-'+(P?"on":"off")+' fa-18"></i>';iframe.isIframe&&(R='Want to receive Web Push Notifications for Price Alerts? Go to your <a target="_parent" href="https://keeepa.amztoolz.com/#!settings" class="url">account settings</a> to enable them on all your supported devices.',Y="");replaceHtml(T,
Y+"&emsp;"+R);$("#"+T).css("color","#444");ha=!0;var ja=!1;$("#testMessage").on("click",function(){ja||(b(),ja=!0,setTimeout(function(){ja=!1},5E3))});$("#"+T+" i").on("click",function(ra){$(ra.currentTarget).replaceWith('<i style="margin:0 4px;" class="fa fa-refresh fa-rotate-90 fa-spin"></i>');P?d().always(function(){a(T,ha)}):g().always(function(){a(T,ha)})})}})}function b(){var T=$.Deferred();network.request({path:"user/session",type:"webPushSendTest",content:""}).done(function(ha){null==ha.error?
T.resolve(q):T.reject(q)}).fail(function(){T.reject(q)});return T}function d(){var T=$.Deferred();navigator.serviceWorker.ready.then(function(ha){ha.pushManager.getSubscription().then(function(P){if(P){var R=P.endpoint,Y=P.getKey?P.getKey("p256dh"):"",ja=P.getKey?P.getKey("auth"):"";network.request({path:"user/session",type:"webPushUnregister",content:R,key:Y?btoa(String.fromCharCode.apply(null,new Uint8Array(Y))):"",auth:ja?btoa(String.fromCharCode.apply(null,new Uint8Array(ja))):""}).always(function(){P.unsubscribe().then(function(){T.resolve(R)}).catch(function(ra){T.reject(R);
console.error("Error unsubscribing: ",ra)})})}else T.resolve()}).catch(function(P){console.error("Error unsubscribing.",P);T.reject(null)})});return T}function g(){var T=$.Deferred();navigator.serviceWorker.ready.then(function(ha){ha.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:"BPD1V1O2wWmO_i2VyaeAxu1EiKnrZDJS-zgZ3pAPUJbtMz8jC5lTg0OUxCmJBd1opBSWIEakIjWOEEtOEMoP2TA"}).then(function(P){var R=P.getKey?P.getKey("p256dh"):"",Y=P.getKey?P.getKey("auth"):"",ja=P.endpoint;network.request({path:"user/session",
type:"webPushRegister",content:ja,key:R?btoa(String.fromCharCode.apply(null,new Uint8Array(R))):"",auth:Y?btoa(String.fromCharCode.apply(null,new Uint8Array(Y))):""}).done(function(ra){null==ra.error?T.resolve(ja):T.reject(ja)}).fail(function(){T.reject(ja)})}).catch(function(P){ha.unregister().finally(function(){ha.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:"BPD1V1O2wWmO_i2VyaeAxu1EiKnrZDJS-zgZ3pAPUJbtMz8jC5lTg0OUxCmJBd1opBSWIEakIjWOEEtOEMoP2TA"}).then(function(R){var Y=R.getKey?
R.getKey("p256dh"):"",ja=R.getKey?R.getKey("auth"):"",ra=R.endpoint;network.request({path:"user/session",type:"webPushRegister",content:ra,key:Y?btoa(String.fromCharCode.apply(null,new Uint8Array(Y))):"",auth:ja?btoa(String.fromCharCode.apply(null,new Uint8Array(ja))):""}).done(function(ta){null==ta.error?T.resolve(ra):T.reject(ra)}).fail(function(){T.reject(ra)})}).catch(function(R){ha.unregister();T.reject(null);showPopup("Unable to register push subscription",'<div style="width:600px;">'+R+"<br><br>Please try again. If it still does not work: Are using incognito or private mode? If that is not the case, please change your Notification exception of https://keeepa.amztoolz.com:443 here:<br><br>Chrome:<br>chrome://settings/content/notifications<br><br>Firefox:<br>Open about:preferences#privacy and open the Notifications settings.</div>",
!0)})})})});return T}function n(){var T=$.Deferred();navigator.serviceWorker.ready.then(function(ha){ha.pushManager.getSubscription().then(function(P){if(P){var R=P.endpoint,Y=P.getKey?P.getKey("p256dh"):"";P=P.getKey?P.getKey("auth"):"";network.request({path:"user/session",type:"webPushStatus",content:R,key:Y?btoa(String.fromCharCode.apply(null,new Uint8Array(Y))):"",auth:P?btoa(String.fromCharCode.apply(null,new Uint8Array(P))):""}).done(function(ja){null==ja.error?T.resolve(R):T.reject(R)}).fail(function(){T.reject(R)})}else T.reject(!0)}).catch(function(P){console.error("Error getting subscription",
P);T.reject(!1)})});return T}function t(){return M?"serviceWorker"in navigator&&"showNotification"in ServiceWorkerRegistration.prototype&&"PushManager"in window?!0:!1:!1}function h(){try{if(!t())return!1;if(null!=navigator.serviceWorker.controller)return r({command:"localStorage",value:{key:"token",value:storage.token}}).then(function(T){try{"undefined"!=typeof T.networkState&&(u=T.networkState),"undefined"!=typeof T.lastActivate&&(D=T.lastActivate)}catch(ha){console.error(ha)}F.resolve()}).catch(function(){u=
-1;F.reject()})}catch(T){return reportBug(T,"updateTokenInSW"),u=-1,F.reject(),!1}}function m(){try{navigator.serviceWorker.getRegistration().then(function(T){try{T.unregister()}catch(ha){}})}catch(T){}}function r(T,ha){return new Promise(function(P,R){try{var Y=new MessageChannel;Y.port1.onmessage=function(ja){if("pong"==ja.data.data)P(ja.data);else if(100==ja.data.status)ha(ja.data);else if(ja.data.update)switch(ja.data.update){case "connectionErrorRetry":$("#networkOverlay").show();$("#networkBar").text("Connecting...");
break;case "connected":$("#networkOverlay").hide();break;case "connectError":var ra=function(){$("#networkOverlay").show();$("#networkBar").html('Unable to connect to Keepa.com. <span id="networkAgain" style="color:rgb(255, 228, 192); cursor:pointer">Try again?</span>&emsp;<span id="networkAbort" style="color:rgb(0, 0, 0); cursor:pointer">Abort!</span>');$("#networkAgain").click(function(){$("#networkBar").text("Connecting...");serviceWorker.postMessage({command:"connect"}).then(function(){$("#networkOverlay").hide()}).catch(ra)});
$("#networkAbort").click(function(){$("#networkOverlay").hide();ja.data.error="connectError";r({command:"abort"}).catch(function(ta){});R(ja.data)})};ra()}else ja.data.error?(console.log("sw message error",ja.data),R(ja.data.error)):"connectError"==ja.data||"abort"==ja.data?R(ja.data):P(ja.data)};null==navigator.serviceWorker.controller?R():navigator.serviceWorker.controller.postMessage(T,[Y.port2])}catch(ja){console.log(ja)}})}var q,u=-1,D=-1,F=$.Deferred(),M=!1;try{if(-1<navigator.userAgent.toLowerCase().indexOf("firefox")){var Q=
navigator.userAgent.toLowerCase().match(/firefox\/(\d\d)\.\d\d?/);Q&&48>=Number(Q[1])?m():M=!0}else M=!0}catch(T){console.log(T)}return{checkSupport:t,isInitialized:F,generatePushHtml:a,unsubscribePush:d,subscribePush:g,checkSubscription:n,register:function(){if(!t())return F.reject(),!1;if(null==navigator.serviceWorker.controller){var T=storage.swFile||"serviceWorker.js";navigator.serviceWorker.register("./"+T).then(navigator.serviceWorker.ready).then(h).then(function(P){isTest&&console.log("registered:  "+
T,P)}).catch(function(P){u=-1;F.reject();isTest&&console.log(P)})}else try{h();navigator.serviceWorker.addEventListener("message",function(P){isTest&&console.log("message from SW",P)});var ha={command:"ping"};setInterval(function(){try{r(ha).then(function(P){"undefined"!=typeof P.networkState&&(D!=P.lastActivate&&(console.log("lastActivate change!",D,P.lastActivate),D=P.lastActivate),u=P.networkState)}).catch(function(){u=-1})}catch(P){console.log(P),u=-1,network.connectToServer(!1)}},3E3)}catch(P){reportBug(P,
"register"),u=-1,network.connectToServer(!1),"pending"==F.state()&&F.reject()}},showNotification:b,postMessage:r,unregister:m,updateTokenInSW:h,workerConnectionState:function(){return u}}}();serviceWorker.register();
var ProductImageHover=function(){var a={image_urls_main:[],pf_preview_current:"",preview_images:[],img_string:'<img style="border: 1px solid #ff9f29;  -moz-border-radius: 0px;  margin: -3px;   display:block;   position: relative;   top: -3px;   left: -3px;" src=\'',createNewImageElement:function(b,d){b=b.createElement(d?d:"img");b.style.borderTop="4px solid #328dc3";b.style.borderBottom="3px solid #999999";b.style.display="block";b.style.position="relative";b.style.padding="5px";return b},preview_image:function(b,
d){var g=document;if(!g.getElementById("pf_preview")){var n=g.createElement("div");n.id="pf_preview";n.addEventListener("mouseout",function(D){a.clear_image(D)},!1);n.style.boxShadow="rgb(68, 68, 68) 0px 1px 7px -2px";n.style.position="fixed";n.style.zIndex="10000000";n.style.bottom="0px";n.style.right="0px";n.style.margin="12px 12px";n.style.backgroundColor="#fff";g.body.appendChild(n)}a.pf_preview_current=g.getElementById("pf_preview");if(!a.pf_preview_current.firstChild){n=d;var t=Math.max(Math.floor(.4*
g.defaultView.innerHeight),256),h=Math.max(Math.floor(.4*g.defaultView.innerWidth),256),m=b.clientX>g.defaultView.innerWidth/2,r=256;try{var q=g.defaultView.innerWidth-b.clientX,u=g.defaultView.innerHeight-b.clientY;m&&(q=g.defaultView.innerWidth-q);r=Math.max(Math.max(q,u)-150,r);h=Math.min(Math.floor(.9*g.defaultView.innerWidth),r);t=Math.min(Math.floor(.9*g.defaultView.innerHeight),r);r=Math.min(h,t)}catch(D){}768<r&&(r=768);r-=r%10;a.pf_preview_current.current=-1;a.pf_preview_current.a=d;a.pf_preview_current.href=
"";a.pf_preview_current.size=Math.floor(1.1*Math.min(h,t));m&&(b=g.getElementById("pf_preview"),b.style.right="",b.style.left="6px");"object"===typeof d&&"svgBarcode"===d.type?$.when(LoaderUtil.js(CDNUrl+"JsBarcode-3.11.0.ean-upc.min.js")).then(function(){if(JsBarcode){g.getElementById("pf_preview").style.display="block";var D="jsBarcode-"+d.value,F=a.createNewImageElement(g,"span");F.innerHTML='<svg id="'+D+'"></svg>';a.pf_preview_current.appendChild(F);setTimeout(function(){$("#"+D).length&&JsBarcode("#"+
D,d.value,{format:d.format?d.format:"auto"})},100)}}):(d.startsWith("https://cdn.keepa")||d.startsWith("https://dyn.keepa.com")||d.startsWith("https://graph.keepa.com")||(n=imageServer,n+=d.replace(".","._SL"+r+"_.")),g.getElementById("pf_preview").style.display="block",b=a.createNewImageElement(g),b.setAttribute("src",n),a.pf_preview_current.appendChild(b))}},clear_image:function(b){try{var d=document.getElementById("pf_preview");d.style.display="none";d.style.right="2px";d.style.left="";a.pf_preview_current.innerHTML=
""}catch(g){}},add_events:function(b,d){"pf_prevImg"!=b.getAttribute("keepaPreview")&&(b.addEventListener("mouseover",function(g){a.preview_image(g,d);return!0},!0),b.addEventListener("mouseout",function(g){a.clear_image(g)},!1),b.setAttribute("keepaPreview","pf_prevImg"))}};return{preview:a}}(),browserInfo=function(a){a=a||navigator.userAgent;var b=a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(b[1])){var d=/\brv[ :]+(\d+)/g.exec(a)||[];return{name:"IE",
version:d[1]||""}}if("Chrome"===b[1]&&(d=a.match(/\b(OPR|Edg)\/(\d+)/),null!=d))return{name:d[1].replace("OPR","Opera").replace("Edg","Edge"),version:d[2]};b=b[2]?[b[1],b[2]]:[navigator.appName,navigator.appVersion,"-?"];null!=(d=a.match(/version\/(\d+)/i))&&b.splice(1,1,d[1]);return{name:b[0],version:b[1]}};function wait(a){return $.Deferred(function(){setTimeout(this.resolve,a)}).promise()}
var intranet=function(){var a=null,b=0,d=function(n,t){b=Date.now();null!=a?wait(100).always(function(){d(n,t)}):(a=t,null!=n&&(storage.postMessage=JSON.stringify(n)),isIframe&&"login"==n.key&&document.location.reload())},g=null;window.addEventListener("storage",function(n){if(!(1E3>Date.now()-b)&&"postMessage"==n.key&&n.newValue){n=n.newValue;storage.removeItem("postMessage");var t=tryParseJSON(n);if(null!=t){try{null!=g&&g.close()}catch(h){}switch(t.key){case "login":isIframe&&"login"==t.key&&document.location.reload();
break;case "logout":network.reauthorize();updateMenuUserPanel(0);refreshLoginBar();try{callSubPage(1)}catch(h){reportBug(h)}"logout"==t.key&&(g=showPopup("Your session ended","You have signed out from Keepa in another tab.",!0))}null!=a&&(t=a,a=null,t(tryParseJSON(n)))}}},!1);return{postMessage:d,key:"postMessage"}}();function inIframe(){try{return window.self!==window.top}catch(a){return!0}}RegExp.escape=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};
function onlyUnique(a,b,d){return d.indexOf(a)===b}String.prototype.replaceAt=function(a,b){a=Number(a);b=String(b);return this.substr(0,a)+b+this.substr(a+b.length)};
function reportBug(a,b){try{if(!localStorageSupported||isTest)console.warn(a,b);else{storage.lastBugReport||(storage.lastBugReport=0);try{if(-1<(""+a).indexOf("getComputedStyle")||-1<(""+a).indexOf("'plot' of undefined")||-1<(""+a).indexOf("NS_ERROR_FILE_CORRUPTED")||-1<(""+a).indexOf("mooikfkahbdckldjjndioackbalphokd")||-1<(""+a).indexOf("Invalid dimensions for plot"))return}catch(q){}var d=Date.now();if(!(2E4>d-Number(storage.lastBugReport))){storage.lastBugReport=d;d=a;var g="";try{g=Error().stack.split("\n").splice(1).splice(1).join("&ensp;&lArr;&ensp;"),
g=g.replace(/http|s:\/\/.*?\//g,"").replace(/:[0-9]*?\)/g,")").replace(/[ ]{2,}/g,""),d=a.message?a.message:a}catch(q){}if(!(-1<g.indexOf("KasperskyLab")||-1<g.indexOf("Invalid dimensions for plot")||-1<g.indexOf("mprogress.min"))){var n=function(q,u,D,F){var M=new XMLHttpRequest;D&&(M.onreadystatechange=function(){4==M.readyState&&D.call(this,M.responseText)});M.withCredentials=F;M.open("POST",q,!0);M.setRequestHeader("Content-Type","text/plain;charset=UTF-8");M.send(u)},t={};try{for(var h in navigator)t[h]=
navigator[h]}catch(q){}h=[];for(var m in network.lastUrls)/.*discuss.keepa.*/.test(network.lastUrls[m].url)||/.*js\/languages.*/.test(network.lastUrls[m].url)||"service/features"==network.lastUrls[m].path||"user/settings"==network.lastUrls[m].path||"user/session"==network.lastUrls[m].path||("string"===typeof network.lastUrls[m]&&(network.lastUrls[m]={url:network.lastUrls[m]}),h.push(network.lastUrls[m]));network.lastUrls=[];null==b&&(b="");var r={exception:d,additional:b,url:document.location.toString(),
stack:g,navigator:t,isIframe:iframe.isIframe,keepaType:"website",version:"29",history:h};setTimeout(function(){n(protocol+network.server[network.serverIndex]+ajaxPrefix+"service/bugreport/?user="+storage.token+"&type=website&version=29",JSON.stringify(r))},50)}}}}catch(q){console.error(q,a)}}
function getDebugInfos(){var a=document.location+"",b=[],d;for(d in network.lastUrls)/.*discuss.keepa.*/.test(network.lastUrls[d].url)||/.*js\/languages.*/.test(network.lastUrls[d].url)||"service/features"!=network.lastUrls[d].path&&"user/settings"!=network.lastUrls[d].path&&"user/session"!=network.lastUrls[d].path&&b.push(JSON.stringify(network.lastUrls[d]));network.lastUrls=[];return[a,"",b]}
function prettyDate(a){a=Math.floor(60*a);var b=3===parseInt(storage.language)?la._652+" ":"";return 60>a&&b+la._112||120>a&&b+la._113||3600>a&&b+Math.floor(a/60)+la._114||7200>a&&b+la._115||86400>a&&b+Math.floor(a/3600)+la._116||172800>a&&b+la._117||5356800>a&&b+Math.floor(a/86400)+la._118||114048E4>a&&b+Math.floor(a/2678400)+la._120}
function hoursToMaxTimeUnit(a,b){var d={},g={},n={month:720,day:24},t={month:{p:la._878,s:la._877},day:{p:la._143,s:la._887}};Object.keys(n).forEach(function(q){d[q]=Math.round(a/n[q]);a-=d[q]*n[q];g[q]=Math.round(b/n[q]);b-=g[q]*n[q]});var h="",m="";0<d.month?(h+=d.month+" - ",m="month"):0<d.day?(h+=d.day+" - ",m="day"):0<g.month?m="month":0<g.day&&(m="day");if(m){var r=g[m];0>=r&&"day"===m&&(r=30*g.month);h+=r+" "+(1<r?t[m].p:t[m].s)}return h}function zeroToDash(a){return 0==a?"-":a}
function greenOrRed(a){if("-"==a)return a;var b=0<parseFloat(a)?"red":"green",d=0<parseFloat(a)?"":'&nbsp;<img src="'+imgCDNUrl+'good.png" />';return'<span style="color: '+b+'">'+a+d+"</span>"}function getValueAtTime(a,b,d){if(null==a||0==a.length)return-1;for(var g=0,n=d.isWithShipping?3:2;g<a.length&&!(a[g]>b);g+=n);return g>a.length?getLast(a,d):g<n?-1:d.isWithShipping?(b=a[g-2],a=a[g-1],0>b?b:b+(0>a?0:a)):a[g-1]}
function getValueAtTimeWithShipping(a,b){if(null==a||0==a.length)return-1;for(var d=0;d<a.length&&!(a[d]>b);d+=3);return d>a.length?getLastWithShipping(a,CsvType.BUY_BOX_SHIPPING):3>d?[-1,1]:[a[d-2],a[d-1]]}function getValueAtTimeWithExactTime(a,b,d){if(null==a||0==a.length)return-1;for(var g=0,n=d.isWithShipping?3:2;g<a.length&&!(a[g]>b);g+=n);return g>a.length?getLast(a,d):g<n?-1:d.isWithShipping?(b=a[g-2],a=a[g-1],0>b?b:b+(0>a?0:a)):[a[g-2],a[g-1]]}
function getBBEntryAtTimeWithExactTime(a,b){if(null==a||0==a.length)return-1;for(var d=0;d<a.length&&!(a[d]>b);d+=2);return d>a.length?getLast(a,type):2>d?-1:a[d-1]}function getAggregatedDrop(a,b,d){if(null==a||0==a.length)return-1;for(var g=0,n=-1,t=-1;g<a.length&&!(a[g]>b);g+=2);for(1<g&&(g-=2);g<a.length;g+=2){b=a[g+1];if(0<t&&0<b&&b<t){var h=t-b;!(h<=d&&0!=h%100)||2<g&&10==b&&2<g&&a[g-3]==b&&9<h&&0==h%10||0==t%100&&0==b%100&&49<h||(n+=h)}t=b}0<=n&&n++;return n}
function getLastTime(a,b){return null==a||0==a.length?-1:a[a.length-(b.isWithShipping?3:2)]}
function splitRootSalesRank(a){try{var b=CsvType.SALES.index;if(null!=a.csv[b]&&null!=a.salesRankReferenceHistory&&2<a.salesRankReferenceHistory.length){4<=a.salesRankReferenceHistory.length&&-1==a.salesRankReference&&-1==a.csv[b][a.csv[b].length-1]&&a.csv[b][a.csv[b].length-2]==a.salesRankReferenceHistory[a.salesRankReferenceHistory.length-2]&&(a.salesRankReferenceHistory.pop(),a.salesRankReferenceHistory.pop(),a.salesRankReference=a.salesRankReferenceHistory[a.salesRankReferenceHistory.length-1]);
for(var d={},g={},n=a.salesRankReferenceHistory[1],t=a.salesRankReferenceHistory[0],h=0;h<a.salesRankReferenceHistory.length;h+=2)d[a.salesRankReferenceHistory[h]]=a.salesRankReferenceHistory[h+1];for(var m=h=-1,r=0,q=0;q<a.csv[b].length;q+=2){var u=a.csv[b][q],D=a.csv[b][q+1];if(u<=t)m=n;else{var F=d[u];m=null!=F?F:getValueAtTime(a.salesRankReferenceHistory,u,CsvType.SALES)}h!=m&&(0<q&&4320<u-r&&(g[h]=processCSV(g[h],-1,null,CsvType.SALES,u,a,!1)),h=m,r=u);g[m]=processCSV(g[m],D,null,CsvType.SALES,
u,a,!1)}for(var M in g){null==a.salesRanks&&(a.salesRanks={});var Q=g[M];M!=a.salesRankReference&&4320<keepaTime.now()-Q[Q.length-2]&&(g[M]=processCSV(g[M],-1,null,CsvType.SALES,Q[Q.length-2]+1440,a,!1));var T=a.salesRanks[M];null==T&&(a.salesRanks[M]=Q);a.salesRanks[M]=mergeCSV(Q,T,CsvType.SALES)}var ha=a.salesRanks[a.salesRankReference];null!=ha&&(a.csv[b]=ha)}if(null!=a.salesRanks)for(var P in a.salesRanks)"undefined"===typeof a.salesRankCategoryTrees||a.salesRankCategoryTrees[P]||(b=P,-2==P&&
(b="Launchpad"),a.salesRankCategoryTrees[P]=[{catId:P,name:b}],a.salesRankCategories[P]={catId:P,name:b,children:null,contextFreeName:b,domainId:a.domainId,highestRank:-1,lowestRank:-1,parent:0,productCount:0})}catch(R){console.log(R)}}
function processCSV(a,b,d,g,n,t,h){if(null==a||0==a.length){if(-1==b&&g.index>CsvType.SALES.index&&!h)return null;g=g.isWithShipping?[n,b,d]:[n,b]}else if(g.isWithShipping)if(h||a[a.length-2]!=b||a[a.length-1]!=d){if(a[a.length-3]>n)return a;if(a[a.length-3]==n){if(5<a.length&&0>a[a.length-2]&&(n=a[a.length-4],a[a.length-5]==b&&n==d))return a.slice(0,a.length-3);g=a;g[a.length-2]=b;g[a.length-1]=d}else g=a,g.push(n),g.push(b),g.push(d)}else g=a;else if(h||a[a.length-1]!=b){if(a[a.length-2]>n)return a;
if(a[a.length-2]==n){if(3<a.length&&0>a[a.length-1]&&a[a.length-3]==b)return a.slice(0,a.length-3);g=a;g[a.length-1]=b}else g=a,g.push(n),g.push(b)}else g=a;return g}function mergeCSV(a,b,d){var g=[],n=[];try{var t=d.isWithShipping?3:2,h=function(q){for(var u=0,D=q.length;u<D;u+=t){var F=q[u],M=q[u+1];g[F]=d.isWithShipping?{d:F,c:M,s:q[u+2]}:{d:F,c:M}}};h(a);h(b);for(var m in g){var r=g[m];n.push(r.d);n.push(r.c);d.isWithShipping&&n.push(r.s)}}catch(q){return a}return n}
function getWeightedMean(a,b,d,g,n){a=getExtremeFilteredCSV(a,g,n);return getWeightedMeanInInterval(a,b,b-1440*d,b,g)}function getExtremeFilteredCSV(a,b,d){var g=keepaTime.now();if(null==a||!b.currency)return a;g=getWeightedMeanInInterval(a,g,g-144E4,g,b);if(10>g)return a;var n=b.isWithShipping?3:2,t=a.length,h=5==d?100:1;d=99E5*h;h*=2E4;for(var m=[],r=1;r<t;r+=n){var q=a[r];q>d||0<q&&(q>h&&q>5*g||q<0*g)||(m.push(a[r-1]),m.push(q),b.isWithShipping&&m.push(a[r+1]))}return m}
function getWeightedMeanInInterval(a,b,d,g,n){var t=-1;if(d>=g||null==a||0==a.length)return-1;var h=a.length,m=n.isWithShipping?3:2,r=getLastTime(a,n),q=a[0];if(-1==r||-1==q||q>g)return-1;r=0;q>d&&(d=q);g>b&&(g=b);q=n.isWithShipping?2:1;for(var u=1;u<h;u+=m){var D=a[u],F=a[u-1];if(F>=g)break;if(-1!=D){if(n.isWithShipping){var M=a[u+1];D+=0>M?0:M}if(F>=d){if(1==u&&u+q==h)return D;u+q==h?M=b:(M=a[u+q],M>g&&(M=g));F=Math.max(1,M-F);r+=F;t+=D*F}else{if(u==h-q)return D;M=a[u+q];if(M>=g)return D;M>=d&&
(r=Math.max(1,M-d),t=D*r)}}}-1!=t&&(t=0!=r?parseInt(Math.floor(t/r)):-1);return t}
function getMergedBB(a,b,d,g,n,t){var h={};if(null==a)return{};for(var m=1,r=a.length;m<r;m+=t?4:2){var q=a[m];if(!t||""!=q){var u=Number(a[m-1]);h[u]||(h[u]={sellerId:q,price:-1,oc:-1,uoc:-1})}}if(null!=b)for(a=0,t=b.length;a<t;a+=3)m=b[a],r=-1,0<b[a+1]&&(r=0<b[a+2]?b[a+1]+b[a+2]:b[a+1]),h[m]?h[m].price=r:h[m]={sellerId:-1,price:r,oc:-1,uoc:-1};if(null!=d)for(b=0,a=d.length;b<a;b+=2)t=d[b],m=d[b+1],h[t]?h[t].oc=m:h[t]={sellerId:-1,price:-1,oc:m,uoc:-1};if(null!=g)for(d=0,b=g.length;d<b;d+=2)a=g[d],
t=g[d+1],h[a]?h[a].uoc=t:h[a]={sellerId:-1,price:-1,oc:-1,uoc:t};a=b=d=g=-1;t=[];for(var D in h)if(m=h[D],0>m.price?-1!=m.sellerId&&(m.price=d):d=m.price,-1!=g&&-1==m.sellerId&&(m.sellerId=g),-1!=b&&-1==m.oc&&(m.oc=b),-1!=a&&-1==m.uoc&&(m.uoc=a),-1!=m.sellerId&&(g=m.sellerId),-1!=m.oc&&(b=m.oc),-1!=m.uoc&&(a=m.uoc),n||!(0>m.price||-1==m.sellerId||-2==m.sellerId))D=Number(D),t.push(D),t.push(m);return t}
function getWeightedMeanSellerInInterval(a,b,d,g,n,t){var h=keepaTime.now(),m=h-1440*n;n={};if(m>=h)return-1;if(null==a||0==a.length)return n;d=getMergedBB(a,b,d,g,!1,t);g=h;for(t=b.length;0<=t&&0!=t;t-=3){var r=b[t-3];if(0>b[t-2])g=r;else break}if(g<m)return n;a=Number(a[0]);if(-1==d[d.length-2]||-1==a||a>h)return n;a>m&&(m=a);m<changeV5&&(m=changeV5);a=!0;b=1;for(t=d.length;b<t;b+=2)if(r=d[b],!(0>r.price||-1==r.sellerId||-2==r.sellerId)){var q=d[b-1],u=n[r.sellerId];if(q>=h)break;if(q<changeV5||
q<m)if(b+2>=d.length||d[b-1+2]>m&&d[b-1+2]>changeV5)q=m;else continue;a&&(m=q,a=!1);var D=b+2<t?d[b+2-1]:g;if(-1!=r.sellerId&&-2!=r.sellerId)if(u?u.lastSeen=D:u=n[r.sellerId]={pct:0,price:0,oc:0,uoc:0,lastSeen:D},q>=m){if(1==b&&b+1==t)return u.pct=100,u.price=r.price,u.oc=r.oc,u.uoc=r.uoc,n;b+1==t?D=h:(D=d[b+1],D>h&&(D=h));q=Math.max(1,Math.min(D,h)-q);u.pct+=q;u.price+=r.price*q;u.oc+=r.oc*q;u.uoc+=r.uoc*q}else{if(b==t-1)return u.pct=100,u.price=r.price,u.oc=r.oc,u.uoc=r.uoc,n;q=d[b+1];if(q>=h)return u.pct=
100,u.price=r.price,u.oc=r.oc,u.uoc=r.uoc,n;q>=m&&(u.pct=Math.max(1,q-m),u.price=r.price*u.pct,u.oc=r.oc*u.pct,u.uoc=r.uoc*u.pct)}}h-=m;for(var F in n)m=n[F],m.price=0==m.price?-1:parseInt(Math.floor(m.price/m.pct)),m.oc=0==m.oc?-1:parseInt(Math.floor(m.oc/m.pct)),m.uoc=0==m.uoc?-1:parseInt(Math.floor(m.uoc/m.pct)),m.pct=m.pct/h*100,0==m.pct&&delete n[F];return n}
function getClosestValueAtTime(a,b,d){if(null==a||0==a.length)return-1;for(var g=0,n=d.isWithShipping?3:2;g<a.length&&!(a[g]>b);g+=n);if(g>a.length)return getLast(a,d);if(g<n)if(d.isWithShipping){if(4>a.length)return b=a[2],a=a[1],0>b?b:b+(0>a?0:a);g+=3}else{if(3>a.length)return a[1];g+=2}if(d.isWithShipping){if(-1==a[g-2]){for(;g<a.length&&-1==a[g-2];g+=n);if(g>a.length)return getLast(a,d);if(3>g)return-1}b=a[g-2];a=a[g-1];return 0>b?b:b+(0>a?0:a)}if(-1!=a[g-1])return a[g-1];for(;g<a.length&&-1==
a[g-1];g+=2);return g>a.length?getLast(a,d):2>g?-1:a[g-1]}function getLast(a,b){return null==a||0==a.length?-1:b.isWithShipping?(b=a[a.length-1],a=a[a.length-2],0>a?a:a+(0>b?0:b)):a[a.length-1]}function getLastWithShipping(a,b){return null==a||0==a.length?-1:b.isWithShipping?[a[a.length-2],a[a.length-1]]:[a[a.length-1],0]}
function getLastInStock(a,b){if(null==a||0==a.length)return[-1,-1];if(b.isWithShipping){if(-1<a[a.length-1]){b=a[a.length-1];var d=a[a.length-2];a=a[a.length-3]}else b=a[a.length-4],d=a[a.length-5],a=a[a.length-6];return[a,0>d?d:d+(0>b?0:b)]}return-1<a[a.length-1]?[a[a.length-2],a[a.length-1]]:[a[a.length-4],a[a.length-3]]}function getSimpleTreeToString(a){var b="";a.forEach(function(d,g){g<a.length-1?(b+=d.name,b+=" \u203a "):b+=d.name+""});return b}
function getCategorySalesRanks(a,b,d,g){var n=keepaTime.now(),t=[],h={},m;for(m in a){h.$jscomp$loop$prop$catId$707=m;if(null!=a[h.$jscomp$loop$prop$catId$707]&&d[h.$jscomp$loop$prop$catId$707]){var r=null!=b?b[h.$jscomp$loop$prop$catId$707]:null,q=getLast(d[h.$jscomp$loop$prop$catId$707],CsvType.SALES),u=function(F){return function(M){var Q=[365,90,30,0,0,0,0];if(g&&g[F.$jscomp$loop$prop$catId$707])return g[F.$jscomp$loop$prop$catId$707][Q.indexOf(M)];if(30>=M)return getWeightedMean(d[F.$jscomp$loop$prop$catId$707],
n,M,CsvType.SALES);var T=n-d[F.$jscomp$loop$prop$catId$707][0];Q=Q[Q.indexOf(M)+1];return T<1440*Q?-1:getWeightedMean(d[F.$jscomp$loop$prop$catId$707],n,M,CsvType.SALES,1)}}(h),D=u(30);t.push({tree:getSimpleTreeToString(a[h.$jscomp$loop$prop$catId$707]),sublevel:a[h.$jscomp$loop$prop$catId$707].length-1,rank:q,avg30:D,avg90:u(90),avg365:u(365),cr:r,topPct:0==r.productCount||0>=D?108:parseInt(Math.ceil(D/r.productCount*100))})}h={$jscomp$loop$prop$catId$707:h.$jscomp$loop$prop$catId$707}}t.sort(function(F,
M){return F.sublevel==M.sublevel?F.rank>M.rank?-1:1:F.sublevel<M.sublevel?-1:1});return t}var supportsPassive=!1;try{var opts=Object.defineProperty({},"passive",{get:function(){supportsPassive=!0}});window.addEventListener("test",null,opts)}catch(a){}var currencies=0;
function exchangeCurrencyCSV(a,b,d,g){if(null!=a)for(var n=b.isWithShipping?3:2,t=0;t<a.length;t+=n)b.isWithShipping?(a[t+1]=Money.raw(a[t+1],{sourceDomainId:d,targetDomainId:g,applyFloor:!0,keepUnit:!0}),a[t+2]=Money.raw(a[t+2],{sourceDomainId:d,targetDomainId:g,applyFloor:!0,keepUnit:!0})):a[t+1]=Money.raw(a[t+1],{sourceDomainId:d,targetDomainId:g,applyFloor:!0,keepUnit:!0})}
function imageToHtml(a,b,d,g){var n=(a=imageToUrl(a,b))?"":'alt="No image available"';a||(a=imgCDNUrl+"no-photo-available.png",d="");return"<img "+(g?' style="width:'+g+"px; height:"+g+'px;"':"")+' class="active '+d+'" src="'+a+'" width="'+b+'" height="'+b+'" '+n+" />"}
function imageToUrl(a,b){"string"==typeof a&&(a=a.split(","));if(null==a||0===a.length||""===a[0])return!1;if(!b)return""+imageServer+a[0];var d=a[0].substring(a[0].length-4,a[0].length);".gif"===d||".jpg"===d||".png"===d?a=a[0].substring(0,a[0].length-4):(a=a[0],d=".jpg");return""+imageServer+a+"._SS"+b+"_"+d}function replaceHtml(a,b){if(a=document.getElementById(a)){$(a).find("*").off();var d=a.cloneNode(!1);d.innerHTML=b;a.parentNode.replaceChild(d,a)}}
function replaceHtmlEl(a,b){if(a&&a.parentNode){$(a).find("*").off();var d=a.cloneNode(!1);d.innerHTML=b;a.parentNode.replaceChild(d,a);return d}}function replaceElement(a,b,d,g){if(a&&a.parentNode)return $(a).find("*").off(),b=document.createElement(b),b.innerHTML=d,g&&b.setAttribute("style",g),a.parentNode.replaceChild(b,a),b}
function floatHorizontalScroll(a){var b=$(a),d="auto"!==b.css("left"),g=(d?b.css("left"):b.css("right")).replace("px","");$(window).scroll(function(){var n=jQuery(this).scrollLeft();d?b.css({left:g+n+"px"}):b.css({right:g-n+"px"})})}function toPascalCase(a){return(a.match(/[a-zA-Z0-9]+/g)||[]).map(function(b){return""+b.charAt(0).toUpperCase()+b.slice(1)}).join("")}
function toCamelCase(a){return a.toLowerCase().replace(/[-_]+/g," ").replace(/[^\w\s]/g,"").replace(/ (.)/g,function(b){return b.toUpperCase()}).replace(/ /g,"")}function toSpecialCamelCase(a){return a.toLowerCase().replace(/[-_]+/g," ").replace(/[^\w\s]/g,"").replace(/(?: |^)(.)/g,function(b){return b.toUpperCase()})}
function longCodeToString(a,b){if(1E4>a)return"0";var d=""+a,g=d.length,n=b?12:13;if(g==n)return d;if(g>n)return console.error("invalid product code: "+a+" isUPC: "+b),"0";a=n-g;b="";for(g=0;g<a;g++)b+="0";return b+d}function stripTags(a){return a.replace(/<\/?[^>]+>/gi,"")}function stripHTML(a){return stripTags($("<div/>").html(a).text())}function escapeHTML(a){var b=document.createElement("div");a=document.createTextNode(a);b.appendChild(a);return b.innerHTML}
function unescapeHTML(a){var b=document.createElement("div");b.innerHTML=a.stripTags();return b.childNodes[0].nodeValue}function getLoaderFlip(a){return'<div class="cssload-loader"><div class="cssload-flipper"><div class="cssload-front '+a+'"></div><div class="cssload-back '+a+'"></div></div></div>'}
function getLoaderBox(a){var b=newThemeColor;"#905246"===b&&(b="#ce6e6c");b='<div style="position:relative;width:50px;display:block;margin-bottom:50px;"><div class="cssload-box-loading" style="--new-theme-color:'+(b+';"></div></div>');a&&(b='<div class="loadingFlipper" style="display:flex;justify-content:center;margin:80px;flex-direction:column;align-content:center;align-items: center;">'+b+'<div class="loadingProgress"></div></div>');return b}
(function(a){function b(d,g){this.content=d;this.shown=!1}a.fn.colorTip=function(d){var g="red green blue white yellow black".split(" ");d=a.extend({color:"red",timeout:5},d);return this.each(function(){var n=a(this),t=n.attr("title");"INPUT"==n.get(0).nodeName&&(n=n.parent());if(!t)return!0;var h=new b(t);n.append(h.generate()).addClass("colorTipContainer");t=!1;for(var m=0;m<g.length;m++)if(n.hasClass(g[m])){t=!0;break}t||n.addClass(d.color);n.hover(function(){h.show();h.tip.find(".colorTipContent").one("mouseenter",
function(){h.hide()})},function(){h.hide()});n.removeAttr("title");a(this).removeAttr("title")})};b.prototype={generate:function(){return this.tip||(this.tip=a('<span class="colorTip"><span class="colorTipContent">'+this.content+'</span><span class="pointyTipShadow"></span><span class="pointyTip"></span></span>'))},show:function(){if(!this.shown){var d=-18-this.tip.height();-40>d&&(d-=3);this.tip.css({marginLeft:-this.tip.outerWidth()/2,top:d}).show();this.shown=!0}},hide:function(){this.shown&&(this.tip.hide(),
this.shown=!1)}}})(jQuery);function float2int(a){return a|0}Date.DATE_ATOM="Y-m-d%TH:i:sP";Date.DATE_ISO8601="Y-m-d%TH:i:sO";Date.DATE_RFC2822="D, d M Y H:i:s O";Date.DATE_W3C="Y-m-d%TH:i:sP";
Date.prototype.formatDate=function(a,b){function d(q){return void 0!=m[q]?m[q]():q}var g=la._77,n=la._78,t=la._79,h=la._80,m={a:function(){return 11<r.getHours()?"pm":"am"},A:function(){return this.a().toUpperCase()},B:function(){var q=60*(r.getTimezoneOffset()+60);q=3600*r.getHours()+60*r.getMinutes()+r.getSeconds()+q;q=Math.floor(q/86.4);1E3<q&&(q-=1E3);0>q&&(q+=1E3);1==String(q).length&&(q="00"+q);2==String(q).length&&(q="0"+q);return q},c:function(){return this.Y()+"-"+this.m()+"-"+this.d()+"T"+
this.H()+":"+this.i()+":"+this.s()+this.P()},d:function(){var q=String(this.j());return 1==q.length?"0"+q:q},D:function(){return n[r.getDay()]},F:function(){return h[r.getMonth()]},g:function(){return 0==r.getHours()?12:12<r.getHours()?r.getHours()-12:r.getHours()},G:function(){return r.getHours()},h:function(){var q=String(this.g());return 1==q.length?"0"+q:q},H:function(){var q=String(this.G());return 1==q.length?"0"+q:q},i:function(){var q=String(r.getMinutes());return 1==q.length?"0"+q:q},I:function(){return(new Date("January 1 "+
this.Y()+" 00:00:00")).getTimezoneOffset()==r.getTimezoneOffset()?0:1},j:function(){return r.getDate()},l:function(){return g[r.getDay()]},L:function(){var q=this.Y();return 0==q%4&&0!=q%100||0==q%4&&0==q%100&&0==q%400?1:0},m:function(){var q=String(this.n());return 1==q.length?"0"+q:q},M:function(){return t[r.getMonth()]},n:function(){return r.getMonth()+1},N:function(){var q=this.w();return 0==q?7:q},O:function(){var q=Math.abs(r.getTimezoneOffset()),u=String(Math.floor(q/60));q=String(q%60);1==
u.length&&(u="0"+u);1==q.length&&(q="0"+q);return 0>r.getTimezoneOffset()?"+"+u+q:"-"+u+q},P:function(){var q=this.O();return q.substr(0,3)+":"+q.substr(3,2)},r:function(){return this.D()+", "+this.d()+" "+this.M()+" "+this.Y()+" "+this.H()+":"+this.i()+":"+this.s()+" "+this.O()},s:function(){var q=String(r.getSeconds());return 1==q.length?"0"+q:q},S:function(){switch(r.getDate()){case 1:return"st";case 2:return"nd";case 3:return"rd";case 21:return"st";case 22:return"nd";case 23:return"rd";case 31:return"st";
default:return"th"}},t:function(){return 1==this.L()&&2==this.n()?29:[null,31,28,31,30,31,30,31,31,30,31,30,31][this.n()]},U:function(){return Math.round(r.getTime()/1E3)},w:function(){return r.getDay()},W:function(){var q=this.N(),u=this.z(),D=364+this.L()-u;if(2>=D&&q<=3-D)return 1;if(2>=u&&5<=q)return(new Date(this.Y()-1,11,31)).formatDate("W");q=(new Date(this.Y(),0,1)).getDay();q=0!=q?q-1:6;return 3>=q?1+Math.floor((u+q)/7):1+Math.floor((u-(7-q))/7)},y:function(){var q=String(this.Y());return q.substring(q.length-
2,q.length)},Y:function(){if(r.getFullYear){var q=(new Date("January 1 2001 00:00:00 +0000")).getFullYear();if(2001==q)return r.getFullYear()}q=r.getYear();q%=100;return q+(38>q?2E3:1900)},z:function(){var q="January 1 "+this.Y()+" 00:00:00 GMT"+this.O();q=new Date(q);q=r.getTime()-q.getTime();return Math.floor(q/1E3/60/60/24)},Z:function(){return-60*r.getTimezoneOffset()}};var r=b?new Date(b):this;a=a.split("");for(b=0;b<a.length;)"%"==a[b]?a.splice(b,1):a[b]=d(a[b]),b++;return a.join("")};
function drawLine(a,b,d,g,n){try{if(!$(a).next().hasClass("drawLine")){var t=getOffset(a),h=getOffset(b),m=t.left,r=t.top+t.height,q=h.left+h.width/2-5,u=h.top,D=Math.sqrt((q-m)*(q-m)+(u-r)*(u-r));b=(m+q)/2-D/2;h=(r+u)/2-g/2;var F=180/Math.PI*Math.atan2(r-u,m-q),M=h+t.height/2+4;t=b+19;iframe.isIframe&&(M=h,t=b+7);d="<div class='drawLine' style='opacity: "+n+"; height:"+g+"px; background-color:"+d+"; left:"+t+"px; top:"+M+"px; width:"+D+"px; -moz-transform:rotate("+F+"deg); -webkit-transform:rotate("+
F+"deg); -o-transform:rotate("+F+"deg); -ms-transform:rotate("+F+"deg); transform:rotate("+F+"deg);' />";$(a).after(d)}}catch(Q){}}function getOffset(a){for(var b=0,d=0,g=a.offsetWidth|0,n=a.offsetHeight|0,t=2;0!=t&&a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)b+=a.offsetLeft-a.scrollLeft,d+=a.offsetTop-a.scrollTop,a=a.offsetParent,t--;return{top:d,left:b,width:g,height:n}}
Array.prototype.includes||(Array.prototype.includes=function(a,b){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");var d=Object(this),g=parseInt(d.length,10)||0;if(0===g)return!1;b=parseInt(b,10)||0;0<=b||(b=g+b,0>b&&(b=0));for(var n;b<g;){n=d[b];if(a===n||a!==a&&n!==n)return!0;b++}return!1});function addDataUpdateHandler(){$(".link--data-update").on("click",function(a){a.preventDefault();SettingsSubscription.initUpdateData(!1)})}
function removeToolTip(a,b,d){a.removeClass("colorTipContainer");var g=a.children(".colorTip");d?a.attr("title",d):a.attr("title",g.text());g.remove();b&&a.removeClass(b)}function isStockMax(a,b){return[999,1E3,99999].includes(a)?!0:a&&b?1===b[b.length-1]:!1}
function getAppLinksAndBadges(){switch(storage.language){case "3":var a='<img alt="" src="'+imgCDNUrl+'app-store/Download_on_the_App_Store_Badge_DE_RGB_blk_092917.svg"/>';var b='<img alt="Jetzt bei Google Play" src="'+imgCDNUrl+'app-store/de_badge_web_generic.png"/>';break;case "4":a='<img alt="" src="'+imgCDNUrl+'app-store/Download_on_the_App_Store_Badge_FR_RGB_blk_100517.svg"/>';b='<img alt="Disponible sur Google Play" src="'+imgCDNUrl+'app-store/fr_badge_web_generic.png"/>';break;case "5":a='<img alt="" src="'+
imgCDNUrl+'app-store/Download_on_the_App_Store_Badge_JP_RGB_blk_100317.svg"/>';b='<img alt="Google Play \u3067\u624b\u306b\u5165\u308c\u3088\u3046" src="'+imgCDNUrl+'app-store/ja_badge_web_generic.png"/>';break;case "7":a='<img alt="" src="'+imgCDNUrl+'app-store/Download_on_the_App_Store_Badge_CNSC_RGB_blk_092917.svg"/>';b='<img alt="\u4e0b\u8f7d\u5e94\u7528\uff0c\u8bf7\u5230 Google Play" src="'+imgCDNUrl+'app-store/zh-cn_badge_web_generic.png"/>';break;case "8":a='<img alt="" src="'+imgCDNUrl+'app-store/Download_on_the_App_Store_Badge_IT_RGB_blk_100317.svg"/>';
b='<img alt="Disponibile su Google Play" src="'+imgCDNUrl+'app-store/it_badge_web_generic.png"/>';break;case "9":a='<img alt="" src="'+imgCDNUrl+'app-store/Download_on_the_App_Store_Badge_ES_RGB_blk_100217.svg"/>';b='<img alt="Disponible en Google Play" src="'+imgCDNUrl+'app-store/es_badge_web_generic.png"/>';break;default:a='<img alt="" src="'+imgCDNUrl+'app-store/Download_on_the_App_Store_Badge_US-UK_RGB_blk_092917.svg"/>',b='<img alt="Get it on Google Play" src="'+imgCDNUrl+'app-store/en_badge_web_generic.png"/>'}return{linkAppStore:"https://apps.apple.com/app/keepa-price-tracker/id1518541385",
badgeAppStore:a,linkGooglePlay:"https://play.google.com/store/apps/details?id=com.keepa.mobile",badgeGooglePlay:b}}
var showReferencePrice=function(a){return"#!deals"===window.location.hash.split("/")[0]?!1:0<currencyDomainId&&currencyDomainId!=a&&0!=currencies&&currencies[a]!=currencies[currencyDomainId]},Money=function(){var a={},b=0,d,g,n,t=function(h,m){!0===m.isDivided&&5!=m.sourceDomainId&&(h*=100);m.absolute&&0>h&&(-1!=h||-1==h&&m.acceptMinusOne)&&null!=h&&(h*=-1);b=h;"undefined"===typeof m.targetDomainId&&(m.targetDomainId=0<currencyDomainId?currencyDomainId:m.sourceDomainId);a=m;d=Number(a.sourceDomainId);
g=Number(a.targetDomainId);n=5!=g?2:0;!0===a.noDigits&&(n=0);0!=g&&d!=g&&0!=currencies&&currencies[d]!=currencies[g]&&-1!=b&&null!=b&&(b=1/currencies[d]*b*currencies[g]/(5==g?100:5==d?.01:1),b=+accounting.toFixed(b,a.keepUnit?n:0));!0!==a.keepUnit&&5!=g&&(b=100==g?b/10:b/100);a.applyFloor&&(b=Math.floor(b))};return{format:function(h,m){try{t(h,m);if(null==h||-1==h&&!a.acceptMinusOne)return"-";var r=!0===a.forceEuropeanStyle,q=a.preValueModifier?a.preValueModifier+"%v":"%v",u=a.skipSymbol?q:r?q+" %s":
"%s "+q;return accounting.formatMoney(b,{symbol:getCurrencyByDomain(g),precision:n,thousand:r?".":",",decimal:r?",":".",format:u})}catch(D){return reportBug(D),""}},raw:function(h,m){try{return t(h,m),b}catch(r){return reportBug(r),""}},unformat:function(h){return accounting.unformat(h)}}}(),NumberUtil=function(){return{format:function(a,b){return accounting.formatNumber(a,{precision:b||0,thousand:",",decimal:"."})}}}(),CurrencySwitch=function(){var a=function(){var b=$.Deferred(),d=material.getButton("submitCurrency",
la._225,null,"money"),g=[],n=[];continents.forEach(function(h,m){h.forEach(function(r){var q=getCurrencyCodeByDomain(r),u=getCurrencyByDomain(r);g[m]||(g[m]=[]);n.includes(q)||(n.push(q),r=material.getRadio(r+"currency",u+" "+q,r==currencyDomainId),g[m].push(r))})});var t=material.getRadio("0currency",la._954,0==currencyDomainId);d='<div style="width:400px;margin-bottom:10px;">'+la._952+"<br>"+la._953+'*</div>\n\t\t\t<form name="loadForm" id="formCurrency">\n\t\t\t<section id="currencyRadio" style="margin: 10px 0">\n\t\t\t\t'+
t+'\n\t\t\t\t<div class="mdc-typography--caption">'+la._664+" / "+la._665+"</div>\n\t\t\t\t"+g[0].join("")+g[1].join("")+'\n\t\t\t\t<div class="mdc-typography--caption">'+la._353+"</div>\n\t\t\t\t"+g[2].join("")+'\n\t\t\t\t<div class="mdc-typography--caption">'+la._354+"</div>\n\t\t\t\t"+g[3].join("")+"\n\t\t\t</section>\n\t\t\t"+d+'\n\t\t\t</form>\n\t\t\t<div style="width: 400px;margin-top: 10px;font-size: 11px;text-align: justify;">\n\t\t\t* '+la._955+"\n\t\t\t</div>";material.init("#formCurrency");
setTimeout(function(){$("#formCurrency").on("submit",function(h){var m=Number($("#currencyRadio").find(":checked")[0].id.replace("currency-radio",""));b.resolve({currency:m});h.preventDefault()})},0);return{onSubmit:b.promise(),html:d}};return{init:function(){var b=a(),d=showPopup(la._951,b.html,!0);b.onSubmit.done(function(g){g=Number(g.currency);0<g&&"undefined"===typeof currencies[g]&&(g=0);storage.currencyDomainId=g;settings.send();settings.refresh();d.close()})}}}(),LoaderUtil=function(){var a=
[],b=function(d,g){var n=$.Deferred();if(a.includes(g))return n.resolve();a.push(g);var t=document.createElement(d);switch(d){case "script":var h="body";d="src";t.async=!0;t.crossOrigin="anonymous";break;case "link":h="head";d="href";t.type="text/css";t.rel="stylesheet";break;default:throw Error("Unsupported tag.");}t.onload=n.resolve;t.onerror=n.reject;t[d]=g;document[h].appendChild(t);return n.promise()};return{css:function(d){return b("link",d)},js:function(d){return b("script",d)}}}(),GraphService=
function(){return{getAvailableGraphTypes:function(){return[CsvType.SALES.index,CsvType.BUY_BOX_SHIPPING.index,CsvType.AMAZON.index,CsvType.NEW.index,CsvType.NEW_FBA.index,CsvType.NEW_FBM_SHIPPING.index,CsvType.PRIME_EXCL.index,CsvType.LIGHTNING_DEAL.index,CsvType.BUY_BOX_USED_SHIPPING.index,CsvType.USED.index,CsvType.WAREHOUSE.index]},getDefaultWebGraphRange:function(){return 365},getDefaultWebGraphType:function(){var a=Array(CsvType.length).fill(0);a[CsvType.SALES.index]=1;a[CsvType.AMAZON.index]=
1;a[CsvType.NEW.index]=1;a[CsvType.LIGHTNING_DEAL.index]=1;a[CsvType.USED.index]=1;a[CsvType.WAREHOUSE.index]=1;return a},getShareUrl:function(a,b){var d=""+graphBaseUrl+graphBaseFileName;return d+="?asin="+a+"&domain="+getTldByDomain(b)},getUrl:function(a,b,d,g,n,t,h){var m=""+graphBaseUrl+graphBaseFileName;m+="?asin="+a+"&domain="+getTldByDomain(b);n=n||JSON.parse(get("webGraphType"));t=t||JSON.parse(get("webGraphRange"));m+="&salesrank="+n[CsvType.SALES.index];m+="&amazon="+n[CsvType.AMAZON.index];
m+="&new="+n[CsvType.NEW.index];m+="&used="+n[CsvType.USED.index];m+="&bb="+n[CsvType.BUY_BOX_SHIPPING.index];m+="&fba="+n[CsvType.NEW_FBA.index];m+="&fbm="+n[CsvType.NEW_FBM_SHIPPING.index];m+="&pe="+n[CsvType.PRIME_EXCL.index];m+="&ld="+n[CsvType.LIGHTNING_DEAL.index];m+="&bbu="+n[CsvType.BUY_BOX_USED_SHIPPING.index];m+="&wd="+n[CsvType.WAREHOUSE.index];m=m+("&range="+t)+("&width="+(d||500)+"&height="+(g||200));h&&1===h&&(m+="&type=1");return m},getWebGraphTypeAllOff:function(){return Array(CsvType.length).fill(0)}}}();
function sendHelloGraph(a){if(!isTest&&(0!=storage.accountType&&1!=storage.accountType||a)){var b="?token="+storage.token;a&&(b="");a=new XMLHttpRequest;a.open("HEAD","https://graph.keepa.com/hello.graph"+b,!0);a.withCredentials=!0;a.send(null)}}function getBaseUrl(){var a=protocol+document.location.hostname;/localhost:63342\/web/.test(document.location.href)&&(a="http://"+document.location.host+"/web/index_local.html"+document.location.search.replace(/\/$/,""));return a+"/"}
function encodeHTML(a){return a?a.split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;").split("'").join("&#39;"):""}function getCasinLocalesFromStorage(){var a=storage.casinLocales?tryParseJSON(storage.casinLocales):null;Array.isArray(a)&&a.length===LocaleType.length&&"boolean"===typeof a[0]||(a=Array(LocaleType.length).fill(!1),a[0]=!0);return a}
var SellerUtil=function(){var a=" ATVPDKIKX0DER A3P5ROKL5A1OLE A3JWKAKR8XB7XF A1X6FK5RDHNB96 AN1VRQENFRJN5 A3DWYIK6Y9EEQB A1AJ19PSB66TGU A11IL2PNWYJU7H A1AT7YVPFBWXBL  AVDBXBAVVSXLQ A1ZZFT5FULY4LN ANEGB3WVEVKZB A17D2BRD4YMT0X".split(" "),b=" A3SLTBYT1P4ASM AZH2GF8Z5J95G AMUN6OW4OKOC5 A2W68NJA5YNXUP    A1TMZHY2SHKLH2 A13P6277X44WWB     ".split(" "),d="A3M32Z6M072V6G A17SFUTIVB227Z A73J8FUD3TCA5 A3T7DQBB0CKEM6 A3ODHND3J0WMC8 A6D8GZQLZZGO9 A3NKQTGM3PCAIZ A3SLTBYT1P4ASM A5UUIVRC5HDTS A1NHYT4IBWIJVV A1SL8GN8WYR9PY A27GA0YBG6SP60 A3MTENA2RGT54E AR9ZQCUDB1BRG A18FWS6K2KEZVH A272UC180L3PT5 A3QNOO22OOSRVA A8FQRD0WW0VW5 AYRD2K1E2G5OI A3OSP7RQDCZTFI A2KAVP39WOVYMY ALQGD0RUJOUO0 A2VH1G09VXWEK4 A3DMYT37LYXJWC A1HAK8FCVUIIJW A3HBS5CIENBL3I AZ8B0UT6GFHPA AE2QNCE40KCLM A1RJCHJCQT9WV5 A1XE56C8KJF3Q8 A1XHM9JTFOBM5W A3G9IOHQDOG823 A2U5JVE7GGFD8B A23R8XU9UYU5MY A14WSK88711B1Q A27LXP2YCQ2WLE A1RIR7ZBMS38LR A20WXWN33S3JGD A1PT7S6F0FISH A2X9BIRDIKC20I A1JW18WKUHUG7I A1G3UP32AZJ14F A1LD4FJ97AUVJA".split(" "),
g=" A2L77EE7U53NWQ A2OAJ7377F756P A8KICS1PHF7ZO A2CVHYRTWLQO9T ANNLLU4HTZVX9 AUJBRIGYRJ3Q8  A1HO9729ND375Y A6T89FGPU3U0Q  A23KQ2J0V65IPS  A1GE4GWD4XC0D9 A3C1D9TG1HJ66Y".split(" "),n=function(h,m){return-1==h||-2==h?"-":t(h,m)?"Amazon":"3rd Party"},t=function(h,m){return h===a[m]||h===b[m]||d.includes(h)};return{getAmazonSellerIds:function(h){var m=[];a[h]&&a[h].length&&m.push(a[h]);b[h]&&b[h].length&&m.push(b[h]);return m},getAmazonWarehouseSellerIds:function(h){var m=[];g[h]&&g[h].length&&m.push(g[h]);
return m},getHtml:function(h,m,r,q,u){q=void 0===q?null:q;u=void 0===u?!1:u;var D=t(h,m),F=!D&&14!=m,M="https://www.amazon."+getTldByDomain(m)+"/gp/aag/details/?seller="+h,Q=getBaseUrl()+"#!seller/"+m+"-"+h;r=r||n(h,m);return""+(F?'<a href="'+Q+'" title="'+la._181+'" target="_blank">'+r+"</a>":r)+(D||null===q?"":' <span style="color:#999">('+q+"%)</span>")+"&ensp;"+(F?'<a href="'+M+'" title="'+la._646+' Amazon" target="_blank"><i class="fa fa-external-link"></i></a>':"")+"\n\t\t\t\t"+(u?'<br><span style="font-family:monospace;color:#ccc">'+
h+"</span>":"")},getLabel:n,isSellerIdAmazon:t}}();(function(a){a.color={};a.color.make=function(d,g,n,t){var h={};h.r=d||0;h.g=g||0;h.b=n||0;h.a=null!=t?t:1;h.add=function(m,r){for(var q=0;q<m.length;++q)h[m.charAt(q)]+=r;return h.normalize()};h.scale=function(m,r){for(var q=0;q<m.length;++q)h[m.charAt(q)]*=r;return h.normalize()};h.toString=function(){return 1<=h.a?"rgb("+[h.r,h.g,h.b].join()+")":"rgba("+[h.r,h.g,h.b,h.a].join()+")"};h.normalize=function(){function m(r,q,u){return q<r?r:q>u?u:q}h.r=m(0,parseInt(h.r),255);h.g=m(0,parseInt(h.g),255);
h.b=m(0,parseInt(h.b),255);h.a=m(0,h.a,1);return h};h.clone=function(){return a.color.make(h.r,h.b,h.g,h.a)};return h.normalize()};a.color.extract=function(d,g){do{var n=d.css(g).toLowerCase();if(""!=n&&"transparent"!=n)break;d=d.parent()}while(d.length&&!a.nodeName(d.get(0),"body"));"rgba(0, 0, 0, 0)"==n&&(n="transparent");return a.color.parse(n)};a.color.parse=function(d){var g,n=a.color.make;if(g=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(d))return n(parseInt(g[1],10),
parseInt(g[2],10),parseInt(g[3],10));if(g=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(d))return n(parseInt(g[1],10),parseInt(g[2],10),parseInt(g[3],10),parseFloat(g[4]));if(g=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)%\s*,\s*([0-9]+(?:\.[0-9]+)?)%\s*,\s*([0-9]+(?:\.[0-9]+)?)%\s*\)/.exec(d))return n(2.55*parseFloat(g[1]),2.55*parseFloat(g[2]),2.55*parseFloat(g[3]));if(g=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)%\s*,\s*([0-9]+(?:\.[0-9]+)?)%\s*,\s*([0-9]+(?:\.[0-9]+)?)%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(d))return n(2.55*
parseFloat(g[1]),2.55*parseFloat(g[2]),2.55*parseFloat(g[3]),parseFloat(g[4]));if(g=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(d))return n(parseInt(g[1],16),parseInt(g[2],16),parseInt(g[3],16));if(g=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(d))return n(parseInt(g[1]+g[1],16),parseInt(g[2]+g[2],16),parseInt(g[3]+g[3],16));d=a.trim(d).toLowerCase();if("transparent"==d)return n(255,255,255,0);g=b[d]||[0,0,0];return n(g[0],g[1],g[2])};var b={aqua:[0,255,255],azure:[240,255,255],beige:[245,
245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,
144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
(function(a){function b(t,h){var m=h.children("."+t)[0];if(null==m&&(m=document.createElement("canvas"),m.className=t,a(m).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(h),!m.getContext))if(window.G_vmlCanvasManager)m=window.G_vmlCanvasManager.initElement(m);else throw Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=
m;t=this.context=m.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1);try{this.resize(float2int(h.width()),float2int(h.height()))}catch(r){reportBug(r),console.log(h,r),this.resize(h.width(),h.height())}this.textContainer=null;this.text={};this._textCache={}}function d(t,h,m,r){function q(G,X){X=[ia].concat(X);for(var aa in G)G[aa].apply(this,
X)}function u(G){for(var X=[],aa=0;aa<G.length;++aa){var da=a.extend(!0,{},U.series);null!=G[aa].data?(da.data=G[aa].data,delete G[aa].data,a.extend(!0,da,G[aa]),G[aa].data=da.data):da.data=G[aa];X.push(da)}E=X;aa=E.length;X=-1;for(G=0;G<E.length;++G)da=E[G].color,null!=da&&(aa--,"number"==typeof da&&da>X&&(X=da));aa<=X&&(aa=X+1);X=[];var qa=U.colors,xa=qa.length,wa=0;for(G=0;G<aa;G++)da=a.color.parse(qa[G%xa]||"#666"),0==G%xa&&G&&(wa=0<=wa?.5>wa?-wa-.2:0:-wa),X[G]=da.scale("rgb",1+wa);for(G=aa=0;G<
E.length;++G){da=E[G];null==da.color?(da.color=X[aa].toString(),++aa):"number"==typeof da.color&&(da.color=X[da.color].toString());if(null==da.lines.show){var Ca;qa=!0;for(Ca in da)if(da[Ca]&&da[Ca].show){qa=!1;break}qa&&(da.lines.show=!0)}null==da.lines.zero&&(da.lines.zero=!!da.lines.fill);da.xaxis=T(Aa,D(da,"x"));da.yaxis=T(Da,D(da,"y"))}ha()}function D(G,X){G=G[X+"axis"];"object"==typeof G&&(G=G.n);"number"!=typeof G&&(G=1);return G}function F(){return a.grep(Aa.concat(Da),function(G){return G})}
function M(G){var X={},aa,da;for(aa=0;aa<Aa.length;++aa)(da=Aa[aa])&&da.used&&(X["x"+da.n]=da.c2p(G.left));for(aa=0;aa<Da.length;++aa)(da=Da[aa])&&da.used&&(X["y"+da.n]=da.c2p(G.top));void 0!==X.x1&&(X.x=X.x1);void 0!==X.y1&&(X.y=X.y1);return X}function Q(){var G=[],X,aa;for(X=0;X<Aa.length;++X)(aa=Aa[X])&&aa.used&&G.push(aa);for(X=0;X<Da.length;++X)(aa=Da[X])&&aa.used&&G.push(aa);return G}function T(G,X){G[X-1]||(G[X-1]={n:X,direction:G==Aa?"x":"y",options:a.extend(!0,{},G==Aa?U.xaxis:U.yaxis)});
return G[X-1]}function ha(){function G(Oa,Sa,Za){Sa<Oa.datamin&&Sa!=-da&&(Oa.datamin=Sa);Za>Oa.datamax&&Za!=da&&(Oa.datamax=Za)}var X=Number.POSITIVE_INFINITY,aa=Number.NEGATIVE_INFINITY,da=Number.MAX_VALUE,qa,xa,wa,Ca,Ba;a.each(F(),function(Oa,Sa){Sa.datamin=X;Sa.datamax=aa;Sa.used=!1});for(qa=0;qa<E.length;++qa){var Fa=E[qa];Fa.datapoints={points:[]};q(ea.processRawData,[Fa,Fa.data,Fa.datapoints])}for(qa=0;qa<E.length;++qa){Fa=E[qa];var Ea=Fa.data;var La=Fa.datapoints.format;if(!La){La=[];La.push({x:!0,
number:!0,required:!0});La.push({y:!0,number:!0,required:!0});if(Fa.bars.show||Fa.lines.show&&Fa.lines.fill)La.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:!!(Fa.bars.show&&Fa.bars.zero||Fa.lines.show&&Fa.lines.zero)}),Fa.bars.horizontal&&(delete La[La.length-1].y,La[La.length-1].x=!0);Fa.datapoints.format=La}if(null==Fa.datapoints.pointsize){Fa.datapoints.pointsize=La.length;var Ma=Fa.datapoints.pointsize;var Ga=Fa.datapoints.points;var Na=Fa.lines.show&&Fa.lines.steps||Fa.dashes.show&&
Fa.dashes.steps;Fa.xaxis.used=Fa.yaxis.used=!0;for(xa=wa=0;xa<Ea.length;++xa,wa+=Ma){var Qa=Ea[xa];var Ka=null==Qa;if(!Ka)for(Ca=0;Ca<Ma;++Ca){var Ia=Qa[Ca];if(Ba=La[Ca])Ba.number&&null!=Ia&&(Ia=+Ia,isNaN(Ia)?Ia=null:Infinity==Ia?Ia=da:-Infinity==Ia&&(Ia=-da)),null==Ia&&(Ba.required&&(Ka=!0),null!=Ba.defaultValue&&(Ia=Ba.defaultValue));Ga[wa+Ca]=Ia}if(Ka)for(Ca=0;Ca<Ma;++Ca)Ia=Ga[wa+Ca],null==Ia||Fa.Yignore||(Ba=La[Ca],!1!==Ba.autoscale&&(Ba.x&&G(Fa.xaxis,Ia,Ia),Ba.y&&G(Fa.yaxis,Ia,Ia))),Ga[wa+Ca]=
null;else if(Na&&0<wa&&null!=Ga[wa-Ma]&&Ga[wa-Ma]!=Ga[wa]&&Ga[wa-Ma+1]!=Ga[wa+1]){for(Ca=0;Ca<Ma;++Ca)Ga[wa+Ma+Ca]=Ga[wa+Ca];Ga[wa+1]=Ga[wa-Ma+1];wa+=Ma}}}}for(qa=0;qa<E.length;++qa)Fa=E[qa],q(ea.processDatapoints,[Fa,Fa.datapoints]);for(qa=0;qa<E.length;++qa)if(Fa=E[qa],Ga=Fa.datapoints.points,Ma=Fa.datapoints.pointsize,La=Fa.datapoints.format,!Fa.Yignore){Qa=wa=X;Na=Ea=aa;for(xa=0;xa<Ga.length;xa+=Ma)if(null!=Ga[xa])for(Ca=0;Ca<Ma;++Ca)Ia=Ga[xa+Ca],(Ba=La[Ca])&&!1!==Ba.autoscale&&Ia!=da&&Ia!=-da&&
(Ba.x&&(Ia<wa&&(wa=Ia),Ia>Ea&&(Ea=Ia)),!Ba.y||void 0!==Fa.xaxis.options.min&&Ga[xa]<Fa.xaxis.options.min||void 0!==Fa.xaxis.options.max&&Ga[xa]>Fa.xaxis.options.max||(Ia<Qa&&(Qa=Ia),Ia>Na&&(Na=Ia)));if(Fa.bars.show){switch(Fa.bars.align){case "left":xa=0;break;case "right":xa=-Fa.bars.barWidth;break;default:xa=-Fa.bars.barWidth/2}Fa.bars.horizontal?(Qa+=xa,Na+=xa+Fa.bars.barWidth):(wa+=xa,Ea+=xa+Fa.bars.barWidth)}G(Fa.xaxis,wa,Ea);G(Fa.yaxis,Qa,Na)}a.each(F(),function(Oa,Sa){Sa.datamin==X&&(Sa.datamin=
null);Sa.datamax==aa&&(Sa.datamax=null)})}function P(){oa&&clearTimeout(oa);na.off("mousemove",A);na.off("mouseleave",J);na.off("click",S);q(ea.shutdown,[na])}function R(G){function X(wa){return wa}var aa=G.options.transform||X,da=G.options.inverseTransform;if("x"==G.direction){var qa=G.scale=za/Math.abs(aa(G.max)-aa(G.min));var xa=Math.min(aa(G.max),aa(G.min))}else qa=G.scale=Ha/Math.abs(aa(G.max)-aa(G.min)),qa=-qa,xa=Math.max(aa(G.max),aa(G.min));G.p2c=aa==X?function(wa){return(wa-xa)*qa}:function(wa){return(aa(wa)-
xa)*qa};G.c2p=da?function(wa){return da(xa+wa/qa)}:function(wa){return xa+wa/qa}}function Y(G,X,aa){if(!aa)return{};var da=aa*Math.PI/180,qa=Math.sin(da);da=Math.cos(da);var xa=da*G,wa=qa*G,Ca=-qa*X,Ba=da*X,Fa=da*G-qa*X,Ea=qa*G+da*X,La=Math.min(0,xa,Ca,Fa);Ca=Math.max(0,xa,Ca,Fa);Fa=Math.min(0,wa,Ba,Ea);Ba=Math.max(0,wa,Ba,Ea);Ea={x:X/2*qa,y:X/2*da};var Ma={x:G*da+X/2*qa,y:G*qa-X/2*da};if(0>aa){G={x:G*da+X*qa,y:G*qa-X*da};var Ga={x:X*qa,y:X*da}}else{var Na={x:xa,y:wa};G={x:X*qa,y:-X*da}}return{width:Ca-
La,height:Ba-Fa,a_left:Ea,a_right:Ma,topmost:Na,bottommost:G,leftmost:Ga}}function ja(G){var X=G.options.labelAngle;if(void 0==X||0==X)return{};var aa=G.box,da=Y(G.options.origWidth,G.options.origHeight,X),qa="left",xa=0,wa=0;if("bottom"==G.position){var Ca=aa.top+aa.padding;0>X?xa=ua?-da.a_left.x:da.a_left.x:(qa="right",xa=-da.a_right.x,ua&&(Ca+=da.topmost.y))}else if("top"==G.position)Ca=aa.top,ua&&0<X&&(Ca+=aa.height-aa.padding+da.bottommost.y),0>X&&(qa="right"),xa=!ua&&0>X?-da.width-da.a_left.x:
0>X?-da.a_right.x:-da.a_left.x;else if("left"==G.position){qa="right";var Ba=aa.left;0>X?(wa=da.a_right.y,ua&&(Ba-=da.leftmost.x)):wa=ua?da.a_right.y:-da.a_left.y}else"right"==G.position&&(qa="left",Ba=aa.left+aa.padding,0>X?(ua&&(Ba-=da.leftmost.x),wa=-da.a_left.y):wa=ua?-da.a_left.y:-da.height+da.a_left.y);return{top:Ca,left:Ba,oTop:wa,oLeft:xa,align:qa}}function ra(G){function X(Ba,Fa){return a('<div style="position:absolute;top:-10000px;'+Fa+'font-size:smaller"><div class="'+G.direction+"Axis "+
G.direction+G.n+'Axis">'+Ba.join("")+"</div></div>").appendTo(t)}var aa=G.options,da,qa=G.ticks||[],xa=[],wa,Ca=aa.labelWidth;aa=aa.labelHeight;if("x"==G.direction&&0==G.options.labelAngle){if(null==Ca&&(Ca=Math.floor(ka.width/(0<qa.length?qa.length:1))),null==aa){xa=[];for(da=0;da<qa.length;++da)(wa=qa[da].label)&&xa.push('<div class="tickLabel" style="float:left;width:'+Ca+'px">'+wa+"</div>");0<xa.length&&(xa.push('<div style="clear:left"></div>'),qa=X(xa,"width:10000px;"),aa=float2int(qa.height()),
qa.remove())}}else if(null==Ca||null==aa){for(da=0;da<qa.length;++da)(wa=qa[da].label)&&xa.push('<div class="tickLabel">'+wa+"</div>");0<xa.length&&(qa=X(xa,""),0!=G.options.labelAngle?(xa=Y(float2int(qa.children().width()),float2int(qa.find("div.tickLabel").height()),G.options.labelAngle),G.options.origHeight=float2int(qa.find("div.tickLabel").height()),G.options.origWidth=float2int(qa.children().width()),null==aa&&(aa=xa.height),null==Ca&&(Ca=xa.width)):(null==Ca&&(Ca=float2int(qa.children().width())),
null==aa&&(aa=float2int(qa.find("div.tickLabel").height()))),qa.remove())}null==Ca&&(Ca=0);null==aa&&(aa=0);G.labelWidth=Ca;5==ia.getOptions().graphIndex&&3==G.n&&(G.labelWidth=13);G.labelHeight=aa}function ta(G){var X=G.labelWidth,aa=G.labelHeight,da=G.options.position,qa="x"===G.direction,xa=G.options.tickLength,wa=U.grid.axisMargin,Ca=U.grid.labelMargin,Ba=!0,Fa=!0,Ea=!0,La=!1;a.each(qa?Aa:Da,function(Ma,Ga){Ga&&(Ga.show||Ga.reserveSpace)&&(Ga===G?La=!0:Ga.options.position===da&&(La?Fa=!1:Ba=!1),
La||(Ea=!1))});Fa&&(wa=0);null==xa&&(xa=Ea?"full":5);qa?(aa+=Ca,"bottom"==da?(va.bottom+=aa+wa,G.box={top:ka.height-va.bottom,height:aa}):(G.box={top:va.top+wa,height:aa},va.top+=aa+wa)):(X+=Ca,"left"==da?(G.box={left:va.left+wa,width:X},va.left+=X+wa):(va.right+=X+wa,G.box={left:ka.width-va.right,width:X}));G.position=da;G.tickLength=xa;G.box.padding=Ca;G.innermost=Ba}function pa(G){var X,aa=F(),da=U.grid.show;a.each(aa,function(Ca,Ba){Ba.show=Ba.options.show;null==Ba.show&&(Ba.show=Ba.used);Ba.reserveSpace=
Ba.show||Ba.options.reserveSpace;ca(Ba)});var qa=a.grep(aa,function(Ca){return Ca.reserveSpace});va.left=va.right=va.top=va.bottom=0;if(U.grid.show){a.each(qa,function(Ca,Ba){sa(Ba);Z(Ba);N(Ba,Ba.ticks);ra(Ba)});for(X=qa.length-1;0<=X;--X)ta(qa[X]);var xa=U.grid.minBorderMargin;if(null==xa)for(X=xa=0;X<E.length;++X)xa=Math.max(xa,E[X].points.radius+E[X].points.lineWidth/2);for(var wa in va)va[wa]+=U.grid.borderWidth,va[wa]=Math.max(xa,va[wa])}za=ka.width-va.left-va.right;Ha=ka.height-va.bottom-va.top;
a.each(aa,function(Ca,Ba){R(Ba)});da&&(a.each(qa,function(Ca,Ba){"x"==Ba.direction?(Ba.box.left=va.left-Ba.labelWidth/2,Ba.box.width=ka.width-va.left-va.right+Ba.labelWidth):(Ba.box.top=va.top-Ba.labelHeight/2,Ba.box.height=ka.height-va.bottom-va.top+Ba.labelHeight)}),ba());G||K()}function ca(G){var X=G.options,aa=+(null!=X.min?X.min:G.datamin),da=+(null!=X.max?X.max:G.datamax),qa=da-aa;if(0==qa){if(qa=0==da?1:.01,null==X.min&&(aa-=qa),null==X.max||null!=X.min)da+=qa}else{var xa=X.autoscaleMargin;
null!=xa&&(null==X.min&&(aa-=qa*xa,0>aa&&null!=G.datamin&&0<=G.datamin&&(aa=0)),null==X.max&&(da+=qa*xa,0<da&&null!=G.datamax&&0>=G.datamax&&(da=0)))}G.min=aa;G.max=da}function sa(G){var X=G.options;var aa="number"==typeof X.ticks&&0<X.ticks?X.ticks:.3*Math.sqrt("x"==G.direction?ka.width:ka.height);aa=(G.max-G.min)/aa;var da;if("time"==X.mode){var qa={second:1E3,minute:6E4,hour:36E5,day:864E5,month:2592E6,year:525949.2*6E4};var xa=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],
[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]];var wa=0;null!=X.minTickSize&&(wa="number"==typeof X.tickSize?X.tickSize:X.minTickSize[0]*qa[X.minTickSize[1]]);for(da=0;da<xa.length-1&&!(aa<(xa[da][0]*qa[xa[da][1]]+xa[da+1][0]*qa[xa[da+1][1]])/2&&xa[da][0]*qa[xa[da][1]]>=wa);++da);wa=xa[da][0];var Ca=xa[da][1];
"year"==Ca&&(da=Math.pow(10,Math.floor(Math.log(aa/qa.year)/Math.LN10)),xa=aa/qa.year/da,wa=(1.5>xa?1:3>xa?2:7.5>xa?5:10)*da);G.tickSize=X.tickSize||[wa,Ca];da=function(Ea){var La=[],Ma=Ea.tickSize[0],Ga=Ea.tickSize[1],Na=new Date(Ea.min),Qa=Ma*qa[Ga];"second"==Ga&&Na.setUTCSeconds(g(Na.getUTCSeconds(),Ma));"minute"==Ga&&Na.setUTCMinutes(g(Na.getUTCMinutes(),Ma));"hour"==Ga&&Na.setUTCHours(g(Na.getUTCHours(),Ma));"month"==Ga&&Na.setUTCMonth(g(Na.getUTCMonth(),Ma));"year"==Ga&&Na.setUTCFullYear(g(Na.getUTCFullYear(),
Ma));Na.setUTCMilliseconds(0);Qa>=qa.minute&&Na.setUTCSeconds(0);Qa>=qa.hour&&Na.setUTCMinutes(0);Qa>=qa.day&&Na.setUTCHours(0);Qa>=4*qa.day&&Na.setUTCDate(1);Qa>=qa.year&&Na.setUTCMonth(0);var Ka=0,Ia=Number.NaN;do{var Oa=Ia;Ia=Na.getTime();La.push(Ia);if("month"==Ga)if(1>Ma){Na.setUTCDate(1);var Sa=Na.getTime();Na.setUTCMonth(Na.getUTCMonth()+1);var Za=Na.getTime();Na.setTime(Ia+Ka*qa.hour+(Za-Sa)*Ma);Ka=Na.getUTCHours();Na.setUTCHours(0)}else Na.setUTCMonth(Na.getUTCMonth()+Ma);else"year"==Ga?
Na.setUTCFullYear(Na.getUTCFullYear()+Ma):Na.setTime(Ia+Qa)}while(Ia<Ea.max&&Ia!=Oa);return La};wa=function(Ea,La){Ea=new Date(Ea);if(null!=X.timeformat)return a.plot.formatDate(Ea,X.timeformat,X.monthNames);var Ma=La.tickSize[0]*qa[La.tickSize[1]];La=La.max-La.min;var Ga=X.twelveHourClock?" %p":"";return a.plot.formatDate(Ea,Ma<qa.minute?"%h:%M:%S"+Ga:Ma<qa.day?La<2*qa.day?"%h:%M"+Ga:"%b %d %h:%M"+Ga:Ma<qa.month?"%b %d":Ma<qa.year?La<qa.year?"%b":"%b %y":"%y",X.monthNames)}}else{Ca=X.tickDecimals;
var Ba=-Math.floor(Math.log(aa)/Math.LN10);null!=Ca&&Ba>Ca&&(Ba=Ca);da=Math.pow(10,-Ba);xa=aa/da;1.5>xa?wa=1:3>xa?(wa=2,2.25<xa&&(null==Ca||Ba+1<=Ca)&&(wa=2.5,++Ba)):wa=7.5>xa?5:10;wa*=da;null!=X.minTickSize&&wa<X.minTickSize&&(wa=X.minTickSize);G.delta=aa;G.tickDecimals=Math.max(0,null!=Ca?Ca:Ba);G.tickSize=X.tickSize||wa;da=function(Ea){var La=[],Ma=g(Ea.min,Ea.tickSize),Ga=0,Na=Number.NaN;do{var Qa=Na;Na=Ma+Ga*Ea.tickSize;La.push(Na);++Ga}while(Na<Ea.max&&Na!=Qa);return La};wa=function(Ea,La){return Ea.toFixed(La.tickDecimals)}}if(null!=
X.alignTicksWithAxis){var Fa=("x"==G.direction?Aa:Da)[X.alignTicksWithAxis-1];Fa&&Fa.used&&Fa!=G&&(da=da(G),0<da.length&&(null==X.min&&(G.min=Math.min(G.min,da[0])),null==X.max&&1<da.length&&(G.max=Math.max(G.max,da[da.length-1]))),da=function(Ea){var La=[],Ma;for(Ma=0;Ma<Fa.ticks.length;++Ma){var Ga=(Fa.ticks[Ma].v-Fa.min)/(Fa.max-Fa.min);Ga=Ea.min+Ga*(Ea.max-Ea.min);La.push(Ga)}return La},"time"!=G.mode&&null==X.tickDecimals&&(aa=Math.max(0,-Math.floor(Math.log(aa)/Math.LN10)+1),xa=da(G),1<xa.length&&
/\..*0$/.test((xa[1]-xa[0]).toFixed(aa))||(G.tickDecimals=aa)))}G.tickGenerator=da;a.isFunction(X.tickFormatter)?G.tickFormatter=function(Ea,La){return""+X.tickFormatter(Ea,La)}:G.tickFormatter=wa}function Z(G){var X=G.options.ticks,aa=[];null==X||"number"==typeof X&&0<X?aa=G.tickGenerator(G):X&&(aa=a.isFunction(X)?X(G):X);G.ticks=[];for(X=0;X<aa.length;++X){var da=null,qa=aa[X];if("object"==typeof qa){var xa=+qa[0];1<qa.length&&(da=qa[1])}else xa=+qa;null==da&&(da=G.tickFormatter(xa,G));isNaN(xa)||
G.ticks.push({v:xa,label:da})}}function N(G,X){G.options.autoscaleMargin&&0<X.length&&(null==G.options.min&&(G.min=Math.min(G.min,X[0].v)),null==G.options.max&&1<X.length&&(G.max=Math.max(G.max,X[X.length-1].v)))}function f(){ka.clear();q(ea.drawBackground,[W]);var G=U.grid;G.show&&G.backgroundColor&&(W.save(),W.translate(va.left,va.top),W.fillStyle=B(U.grid.backgroundColor,Ha,0,"rgba(255, 255, 255, 0)"),W.fillRect(0,0,za,Ha),W.restore());G.show&&!G.aboveData&&V();for(var X=0;X<E.length;++X){q(ea.drawSeries,
[W,E[X]]);var aa=E[X];aa.lines.show&&w(aa);aa.bars.show&&z(aa);aa.points.show&&O(aa)}q(ea.draw,[W]);G.show&&G.aboveData&&V();ka.render();p()}function C(G,X){for(var aa,da,qa,xa,wa=F(),Ca=0;Ca<wa.length;++Ca)if(aa=wa[Ca],aa.direction==X&&(xa=X+aa.n+"axis",G[xa]||1!=aa.n||(xa=X+"axis"),G[xa])){da=G[xa].from;qa=G[xa].to;break}G[xa]||(aa="x"==X?Aa[0]:Da[0],da=G[X+"1"],qa=G[X+"2"]);null!=da&&null!=qa&&da>qa&&(G=da,da=qa,qa=G);return{from:da,to:qa,axis:aa}}function V(){W.save();W.translate(va.left,va.top);
var G=U.grid.markings;if(G){if(a.isFunction(G)){var X=ia.getAxes();X.xmin=X.xaxis.min;X.xmax=X.xaxis.max;X.ymin=X.yaxis.min;X.ymax=X.yaxis.max;G=G(X)}var aa=0;a:for(;aa<G.length;++aa){X=G[aa];var da=C(X,"x"),qa=C(X,"y");null==da.from&&(da.from=da.axis.min);null==da.to&&(da.to=da.axis.max);null==qa.from&&(qa.from=qa.axis.min);null==qa.to&&(qa.to=qa.axis.max);if(!(da.to<da.axis.min||da.from>da.axis.max||qa.to<qa.axis.min||qa.from>qa.axis.max)){da.from=Math.max(da.from,da.axis.min);da.to=Math.min(da.to,
da.axis.max);qa.from=Math.max(qa.from,qa.axis.min);qa.to=Math.min(qa.to,qa.axis.max);var xa=da.from===da.to,wa=qa.from===qa.to;if(!xa||!wa){da.from=Math.floor(da.axis.p2c(da.from));da.to=Math.floor(da.axis.p2c(da.to));qa.from=Math.floor(qa.axis.p2c(qa.from));qa.to=Math.floor(qa.axis.p2c(qa.to));X.isUpdateMarker&&(qa.to-=5,qa.from=0);if(X.isBuyBoxMarker)try{for(var Ca=ia.getData(),Ba=!1,Fa=0;Fa<Ca.length;Fa++){var Ea=Ca[Fa];if(Ea.color==CsvType.BUY_BOX_SHIPPING.color){if(!Ea.lines.show)continue a;
Ba=!0;break}}if(!Ba)continue;qa.from=X.xaxis.from>=changeV5Epoch?8:20}catch(La){reportBug(La)}xa||wa?(wa=X.lineWidth||U.grid.markingsLineWidth,Ba=wa%2?.5:0,W.beginPath(),W.strokeStyle=X.color||U.grid.markingsColor,W.lineWidth=wa,xa?(W.moveTo(da.to+Ba,qa.from),W.lineTo(da.to+Ba,qa.to)):(W.moveTo(da.from,qa.to+Ba),W.lineTo(da.to,qa.to+Ba)),W.stroke()):(W.fillStyle=X.color||U.grid.markingsColor,W.fillRect(da.from,qa.to,da.to-da.from,qa.from-qa.to))}}}}X=F();G=U.grid.borderWidth;for(Ca=0;Ca<X.length;++Ca)if(Ea=
X[Ca],aa=Ea.box,da=Ea.tickLength,Ea.show&&0!=Ea.ticks.length){W.strokeStyle=Ea.options.tickColor||a.color.parse(Ea.options.color).scale("a",.22).toString();W.lineWidth=1;"x"==Ea.direction?(qa=0,xa="full"==da?"top"==Ea.position?0:Ha:aa.top-va.top+("top"==Ea.position?aa.height:0)):(xa=0,qa="full"==da?"left"==Ea.position?0:za:aa.left-va.left+("left"==Ea.position?aa.width:0));W.beginPath();for(aa=0;aa<Ea.ticks.length;++aa)Fa=Ea.ticks[aa].v,wa=Ba=0,Fa<Ea.min||Fa>Ea.max||"full"==da&&0<G&&(Fa==Ea.min||Fa==
Ea.max)||("x"==Ea.direction?(qa=Ea.p2c(Fa),Ba="full"==da?-Ha:da,"top"==Ea.position&&(Ba=-Ba)):(xa=Ea.p2c(Fa),wa="full"==da?-za:da,"left"==Ea.position&&(wa=-wa)),1==W.lineWidth&&("x"==Ea.direction?qa=Math.floor(qa)+.5:xa=Math.floor(xa)+.5),W.moveTo(qa,xa),W.lineTo(qa+wa,xa+Ba));W.stroke()}G&&(aa=U.grid.borderColor,"object"==typeof G||"object"==typeof aa?("object"!==typeof G&&(G={top:G,right:G,bottom:G,left:G}),"object"!==typeof aa&&(aa={top:aa,right:aa,bottom:aa,left:aa}),0<G.top&&(W.strokeStyle=aa.top,
W.lineWidth=G.top,W.beginPath(),W.moveTo(0-G.left,-(G.top/2)),W.lineTo(za,-(G.top/2)),W.stroke()),0<G.right&&(W.strokeStyle=aa.right,W.lineWidth=G.right,W.beginPath(),W.moveTo(za+G.right/2,0-G.top),W.lineTo(za+G.right/2,Ha),W.stroke()),0<G.bottom&&(W.strokeStyle=aa.bottom,W.lineWidth=G.bottom,W.beginPath(),W.moveTo(za+G.right,Ha+G.bottom/2),W.lineTo(0,Ha+G.bottom/2),W.stroke()),0<G.left&&(W.strokeStyle=aa.left,W.lineWidth=G.left,W.beginPath(),W.moveTo(-(G.left/2),Ha+G.bottom),W.lineTo(-(G.left/2),
0),W.stroke())):(W.lineWidth=G,W.strokeStyle=U.grid.borderColor,W.strokeRect(-G/2,-G/2,za+G,Ha+G)));W.restore()}function ba(){var G=void 0,X=function(){},aa=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],da=["","-webkit-","-moz-","-o-","-ms-"],qa=document.createElement("flotelement"),xa;for(xa in aa)if(void 0!==qa.style[aa[xa]]){G=da[xa];break}if(void 0!=G)ua=!0,X=function(Ga,Na){Ga.push(G+"transform:rotate("+-Na.options.labelAngle+"deg)");Ga.push(G+"transform-origin:top left")};
else if("string"==typeof qa.style.filter||"object"==typeof qa.style.filters)X=function(Ga,Na){var Qa=Na.options.labelAngle*Math.PI/180;Na=Math.cos(Qa);Qa=Math.sin(Qa);Ga.push("filter:progid:DXImageTransform.Microsoft.Matrix(M11="+Na+", M12="+Qa+", M21="+-Qa+", M22="+Na+",sizingMethod='auto expand'")};t.find(".tickLabels").remove();aa=['<div class="tickLabels" style="font-size:smaller">'];da=Q();for(qa=0;qa<da.length;++qa){var wa=da[qa],Ca=wa.box;if(wa.show){var Ba=ja(wa);aa.push('<div class="'+wa.direction+
"Axis "+wa.direction+wa.n+'Axis" style="color:'+wa.options.color+'">');for(xa=0;xa<wa.ticks.length;++xa){var Fa=wa.ticks[xa];if(!(!Fa.label||Fa.v<wa.min||Fa.v>wa.max)){var Ea={};if("x"==wa.direction)if(0!=wa.options.labelAngle){var La=Ba.align;Ea.left=Math.round(va.left+wa.p2c(Fa.v));Ea.left+=Ba.oLeft;Ea.top=Ba.top}else La="center",Ea.left=Math.round(va.left+wa.p2c(Fa.v)-wa.labelWidth/2),"bottom"==wa.position?Ea.top=Ca.top+Ca.padding:Ea.bottom=ka.height-(Ca.top+Ca.height-Ca.padding);else 0!=wa.options.labelAngle?
(La=Ba.align,Ea.top=Math.round(va.top+wa.p2c(Fa.v)),Ea.top+=Ba.oTop,Ea.left=Ba.left):(Ea.top=Math.round(va.top+wa.p2c(Fa.v)-wa.labelHeight/2),"left"==wa.position?(Ea.right=ka.width-(Ca.left+Ca.width-Ca.padding),La="right"):(Ea.left=Ca.left+Ca.padding,La="left"));Ea.width=0!=wa.options.labelAngle?wa.options.origWidth:wa.labelWidth;La=["position:absolute","text-align:"+La];for(var Ma in Ea)La.push(Ma+":"+Ea[Ma]+"px");0!=wa.options.labelAngle&&X(La,wa);aa.push('<div class="tickLabel" style="'+La.join(";")+
'">'+Fa.label+"</div>")}}aa.push("</div>")}}aa.push("</div>");t.append(aa.join(""))}function w(G){function X(wa,Ca,Ba,Fa,Ea,La){var Ma=wa.points;wa=wa.pointsize;var Ga=null,Na=null;W.beginPath();for(var Qa=wa;Qa<Ma.length;Qa+=wa){var Ka=Ma[Qa-wa],Ia=Ma[Qa-wa+1],Oa=Ma[Qa],Sa=Ma[Qa+1];if(null!=Ka&&null!=Oa){if(Ia<=Sa&&Ia<Ea.min){if(Sa<Ea.min)continue;Ka=(Ea.min-Ia)/(Sa-Ia)*(Oa-Ka)+Ka;Ia=Ea.min}else if(Sa<=Ia&&Sa<Ea.min){if(Ia<Ea.min)continue;Oa=(Ea.min-Ia)/(Sa-Ia)*(Oa-Ka)+Ka;Sa=Ea.min}if(Ia>=Sa&&Ia>
Ea.max){if(Sa>Ea.max)continue;Ka=(Ea.max-Ia)/(Sa-Ia)*(Oa-Ka)+Ka;Ia=Ea.max}else if(Sa>=Ia&&Sa>Ea.max){if(Ia>Ea.max)continue;Oa=(Ea.max-Ia)/(Sa-Ia)*(Oa-Ka)+Ka;Sa=Ea.max}if(Ka<=Oa&&Ka<Fa.min){if(Oa<Fa.min)continue;Ia=(Fa.min-Ka)/(Oa-Ka)*(Sa-Ia)+Ia;Ka=Fa.min}else if(Oa<=Ka&&Oa<Fa.min){if(Ka<Fa.min)continue;Sa=(Fa.min-Ka)/(Oa-Ka)*(Sa-Ia)+Ia;Oa=Fa.min}if(Ka>=Oa&&Ka>Fa.max){if(Oa>Fa.max)continue;Ia=(Fa.max-Ka)/(Oa-Ka)*(Sa-Ia)+Ia;Ka=Fa.max}else if(Oa>=Ka&&Oa>Fa.max){if(Ka>Fa.max)continue;Sa=(Fa.max-Ka)/(Oa-
Ka)*(Sa-Ia)+Ia;Oa=Fa.max}Ka==Ga&&Ia==Na||W.moveTo(Fa.p2c(Ka)+Ca,Ea.p2c(Ia)+Ba);Ga=Oa;Na=Sa;1==La?W.lineTo(Math.round(Fa.p2c(Oa)+Ca)+.5,Math.round(Ea.p2c(Sa)+Ba)+.5):W.lineTo(Fa.p2c(Oa)+Ca,Ea.p2c(Sa)+Ba)}}W.stroke()}function aa(wa,Ca,Ba){var Fa=wa.points;wa=wa.pointsize;for(var Ea=Math.min(Math.max(0,Ba.min),Ba.max),La=0,Ma=!1,Ga=1,Na=0,Qa=0;!(0<wa&&La>Fa.length+wa);){La+=wa;var Ka=Fa[La-wa],Ia=Fa[La-wa+Ga],Oa=Fa[La],Sa=Fa[La+Ga];if(Ma){if(0<wa&&null!=Ka&&null==Oa){Qa=La;wa=-wa;Ga=2;continue}if(0>
wa&&La==Na+wa){W.fill();Ma=!1;wa=-wa;Ga=1;La=Na=Qa+wa;continue}}if(null!=Ka&&null!=Oa){if(Ka<=Oa&&Ka<Ca.min){if(Oa<Ca.min)continue;Ia=(Ca.min-Ka)/(Oa-Ka)*(Sa-Ia)+Ia;Ka=Ca.min}else if(Oa<=Ka&&Oa<Ca.min){if(Ka<Ca.min)continue;Sa=(Ca.min-Ka)/(Oa-Ka)*(Sa-Ia)+Ia;Oa=Ca.min}if(Ka>=Oa&&Ka>Ca.max){if(Oa>Ca.max)continue;Ia=(Ca.max-Ka)/(Oa-Ka)*(Sa-Ia)+Ia;Ka=Ca.max}else if(Oa>=Ka&&Oa>Ca.max){if(Ka>Ca.max)continue;Sa=(Ca.max-Ka)/(Oa-Ka)*(Sa-Ia)+Ia;Oa=Ca.max}Ma||(W.beginPath(),W.moveTo(Ca.p2c(Ka),Ba.p2c(Ea)),Ma=
!0);if(Ia>=Ba.max&&Sa>=Ba.max)W.lineTo(Ca.p2c(Ka),Ba.p2c(Ba.max)),W.lineTo(Ca.p2c(Oa),Ba.p2c(Ba.max));else if(Ia<=Ba.min&&Sa<=Ba.min)W.lineTo(Ca.p2c(Ka),Ba.p2c(Ba.min)),W.lineTo(Ca.p2c(Oa),Ba.p2c(Ba.min));else{var Za=Ka,Wa=Oa;Ia<=Sa&&Ia<Ba.min&&Sa>=Ba.min?(Ka=(Ba.min-Ia)/(Sa-Ia)*(Oa-Ka)+Ka,Ia=Ba.min):Sa<=Ia&&Sa<Ba.min&&Ia>=Ba.min&&(Oa=(Ba.min-Ia)/(Sa-Ia)*(Oa-Ka)+Ka,Sa=Ba.min);Ia>=Sa&&Ia>Ba.max&&Sa<=Ba.max?(Ka=(Ba.max-Ia)/(Sa-Ia)*(Oa-Ka)+Ka,Ia=Ba.max):Sa>=Ia&&Sa>Ba.max&&Ia<=Ba.max&&(Oa=(Ba.max-Ia)/
(Sa-Ia)*(Oa-Ka)+Ka,Sa=Ba.max);Ka!=Za&&W.lineTo(Ca.p2c(Za),Ba.p2c(Ia));W.lineTo(Ca.p2c(Ka),Ba.p2c(Ia));W.lineTo(Ca.p2c(Oa),Ba.p2c(Sa));Oa!=Wa&&(W.lineTo(Ca.p2c(Oa),Ba.p2c(Sa)),W.lineTo(Ca.p2c(Wa),Ba.p2c(Sa)))}}}}W.save();W.translate(va.left,va.top);W.lineJoin="round";var da=G.lines.lineWidth,qa=G.shadowSize;if(0<da&&0<qa){W.lineWidth=qa;W.strokeStyle="rgba(0,0,0,0.1)";var xa=Math.PI/18;X(G.datapoints,Math.sin(xa)*(da/2+qa/2),Math.cos(xa)*(da/2+qa/2),G.xaxis,G.yaxis,da);W.lineWidth=qa/2;X(G.datapoints,
Math.sin(xa)*(da/2+qa/4),Math.cos(xa)*(da/2+qa/4),G.xaxis,G.yaxis,da)}W.lineWidth=da;W.strokeStyle=G.color;if(qa=I(G.lines,G.color,0,Ha))W.fillStyle=qa,aa(G.datapoints,G.xaxis,G.yaxis);0<da&&X(G.datapoints,0,0,G.xaxis,G.yaxis,da);W.restore()}function O(G){function X(wa,Ca,Ba,Fa,Ea,La,Ma,Ga){var Na=wa.points;wa=wa.pointsize;for(var Qa=18==G.index,Ka=0;Ka<Na.length;Ka+=wa){var Ia=Na[Ka],Oa=Na[Ka+1];if(!(null==Ia||Ia<La.min||Ia>La.max||Oa<Ma.min||Oa>Ma.max)){if(Qa&&Ia>changeV5Epoch)break;W.beginPath();
Ia=La.p2c(Ia);Oa=Ma.p2c(Oa)+Fa;"circle"==Ga?W.arc(Ia,Oa,Ca,0,Ea?Math.PI:2*Math.PI,!1):Ga(W,Ia,Oa,Ca,Ea,Ka==Na.length-2||Ka==Na.length-3);W.closePath();Ba&&(W.fillStyle=Ba,W.fill());W.stroke()}}}W.save();W.translate(va.left,va.top);var aa=G.points.lineWidth,da=G.shadowSize,qa=G.points.radius,xa=G.points.symbol;0<aa&&0<da&&(da/=2,W.lineWidth=da,W.strokeStyle="rgba(0,0,0,0.1)",X(G.datapoints,qa,null,da+da/2,!0,G.xaxis,G.yaxis,xa),W.strokeStyle="rgba(0,0,0,0.2)",X(G.datapoints,qa,null,da/2,!0,G.xaxis,
G.yaxis,xa));W.lineWidth=aa;W.strokeStyle=G.color;X(G.datapoints,qa,I(G.points,G.color),0,!1,G.xaxis,G.yaxis,xa);W.restore()}function z(G){W.save();W.translate(va.left,va.top);W.lineWidth=G.bars.lineWidth;W.strokeStyle=G.color;var X="left"==G.bars.align?0:-G.bars.barWidth/2;(function(aa,da,qa,xa,wa,Ca,Ba){var Fa=aa.points;aa=aa.pointsize;for(var Ea=0;Ea<Fa.length;Ea+=aa)if(null!=Fa[Ea]){var La,Ma;var Ga=Fa[Ea];var Na=Fa[Ea+1];var Qa=Fa[Ea+2];var Ka=xa,Ia=wa,Oa=Ca,Sa=Ba,Za=W,Wa=G.bars.lineWidth;if(G.bars.horizontal){var Ra=
Ma=La=!0;var Ja=!1;var Xa=Qa;Qa=Na+da;var Ya=Na+qa;Ga<Xa&&(Na=Ga,Ga=Xa,Xa=Na,Ja=!0,Ma=!1)}else Ja=Ma=La=!0,Ra=!1,Xa=Ga+da,Ga+=qa,Ya=Qa,Qa=Na,Qa<Ya&&(Na=Qa,Qa=Ya,Ya=Na,Ra=!0,La=!1);Ga<Oa.min||Xa>Oa.max||Qa<Sa.min||Ya>Sa.max||(Xa<Oa.min&&(Xa=Oa.min,Ja=!1),Ga>Oa.max&&(Ga=Oa.max,Ma=!1),Ya<Sa.min&&(Ya=Sa.min,Ra=!1),Qa>Sa.max&&(Qa=Sa.max,La=!1),Xa=Oa.p2c(Xa),Ya=Sa.p2c(Ya),Ga=Oa.p2c(Ga),Qa=Sa.p2c(Qa),Ia&&(Za.beginPath(),Za.moveTo(Xa,Ya),Za.lineTo(Xa,Qa),Za.lineTo(Ga,Qa),Za.lineTo(Ga,Ya),Za.fillStyle=Ia(Ya,
Qa),Za.fill()),0<Wa&&(Ja||Ma||La||Ra)&&(Za.beginPath(),Za.moveTo(Xa,Ya+Ka),Ja?Za.lineTo(Xa,Qa+Ka):Za.moveTo(Xa,Qa+Ka),La?Za.lineTo(Ga,Qa+Ka):Za.moveTo(Ga,Qa+Ka),Ma?Za.lineTo(Ga,Ya+Ka):Za.moveTo(Ga,Ya+Ka),Ra?Za.lineTo(Xa,Ya+Ka):Za.moveTo(Xa,Ya+Ka),Za.stroke()))}})(G.datapoints,X,X+G.bars.barWidth,0,G.bars.fill?function(aa,da){return I(G.bars,G.color,aa,da)}:null,G.xaxis,G.yaxis);W.restore()}function I(G,X,aa,da){var qa=G.fill;if(!qa)return null;if(G.fillColor)return B(G.fillColor,aa,da,X);G=a.color.parse(X);
G.a="number"==typeof qa?qa:.4;G.normalize();return G.toString()}function K(){t.find(".legend").remove();if(U.legend.show){var G=[],X=[],aa=!1,da=U.legend.labelFormatter,qa,xa=ia.getOptions().graphIndex,wa=0==xa||1==xa;if(!U.legend.noLegend){for(var Ca=0;Ca<E.length;++Ca){var Ba=E[Ca];if(qa=Ba.label){var Fa="";0==Ca%U.legend.noColumns&&(aa&&(Fa+="</tr>"),Fa+="<tr>",aa=!0);da&&(qa=da(qa,Ba));var Ea=Ba.index;Fa+='<td class="legendColorBox"><div><div class="legendColorBoxCircle" style="background:'+Ba.color+
"; border:"+(Ba.lines.show?6:1)+"px solid "+(Ba.lines.show?Ba.color:"#ccc")+';"></div></div></td><td class="legendLabel" data-type="'+Ea+'">'+qa+'<span class="flotLegendHover" style="color:'+Ba.color+'"></span></td>';wa?G[Ea]=Fa:X.push(Fa)}}if(wa)for(da=CsvType.getObjectsSorted(),Ba=0;Ba<da.length;Ba++)da[Ba]==xa?X.push('<tr><td></td><td style="margin-top: 5px;display: block;"></td></tr>'):!Number.isInteger(da[Ba])&&G[da[Ba].index]&&X.push(G[da[Ba].index]);aa&&X.push("</tr>");if(0==X.length)return}G=
'<table class="legendTable" style="font-size:smaller;color:'+U.grid.color+'">'+X.join("")+"</table>";null!=U.legend.container?a(U.legend.container).html(G):a('<div class="legend">'+G.replace('style="','style="position:absolute;')+"</div>").appendTo(t)}}function A(G,X){U.grid.hoverable&&v("plothover",X||G,function(aa){return 0!=aa.hoverable})}function J(G){U.grid.hoverable&&v("plothover",G,function(X){return!1})}function S(G){v("plotclick",G,function(X){return 0!=X.clickable})}function v(G,X,aa){var da=
na.offset(),qa=X.pageX-da.left-va.left,xa=X.pageY-da.top-va.top,wa=M({left:qa,top:xa});wa.pageX=X.pageX;wa.pageY=X.pageY;if("plotclick"==G){var Ca=U.grid.mouseActiveRadius,Ba=Ca*Ca+1,Fa,Ea;X=[];for(Fa=E.length-1;0<=Fa;--Fa){var La=null;if(aa(E[Fa])){var Ma=E[Fa],Ga=Ma.xaxis,Na=Ma.yaxis,Qa=Ma.datapoints.points,Ka=Ma.datapoints.pointsize,Ia=Ga.c2p(qa),Oa=Na.c2p(xa),Sa=Ca/Ga.scale,Za=Ca/Na.scale;Ga.options.inverseTransform&&(Sa=Number.MAX_VALUE);Na.options.inverseTransform&&(Za=Number.MAX_VALUE);if(Ma.lines.show||
Ma.points.show)if(18==Ma.index&&Ia>changeV5Epoch){var Wa=Qa.length-2;for(Ea=0;Ea<Wa;Ea+=Ka)if(Sa=Qa[Ea+1],null!=Qa[Ea]&&!((Ea+Ka>=Wa?1E14:Qa[Ea+Ka])<Ia||Sa-Oa>Za||Sa-Oa<-Za)){Sa=Qa[Ea+1];var Ra=Math.abs(Ga.p2c(Ia)-qa);Sa=Math.abs(Na.p2c(Sa)-xa);if(Ra*Ra+Sa*Sa<Ba){La=[Fa,Ea/Ka];break}}}else for(Ea=0;Ea<Qa.length;Ea+=Ka)if(Ra=Qa[Ea],Wa=Qa[Ea+1],null!=Ra&&!(Ra-Ia>Sa||Ra-Ia<-Sa||Wa-Oa>Za||Wa-Oa<-Za)&&(Ra=Math.abs(Ga.p2c(Ra)-qa),Wa=Math.abs(Na.p2c(Wa)-xa),Ra*Ra+Wa*Wa<Ba)){La=[Fa,Ea/Ka];break}if(Ma.bars.show&&
!La)for(Ga="left"==Ma.bars.align?0:-Ma.bars.barWidth/2,Ma=Ga+Ma.bars.barWidth,Ea=0;Ea<Qa.length;Ea+=Ka)Ra=Qa[Ea],Wa=Qa[Ea+1],Na=Qa[Ea+2],null!=Ra&&(E[Fa].bars.horizontal?Ia<=Math.max(Na,Ra)&&Ia>=Math.min(Na,Ra)&&Oa>=Wa+Ga&&Oa<=Wa+Ma:Ia>=Ra+Ga&&Ia<=Ra+Ma&&Oa>=Math.min(Na,Wa)&&Oa<=Math.max(Na,Wa))&&(La=[Fa,Ea/Ka]);La&&(Fa=La[0],Ea=La[1],Ka=E[Fa].datapoints.pointsize,X.push({datapoint:E[Fa].datapoints.points.slice(Ea*Ka,(Ea+1)*Ka),dataIndex:Ea,series:E[Fa],seriesIndex:Fa}))}}if(0<X.length)for(var Ja in X)aa=
X[Ja],aa.pageX=parseInt(aa.series.xaxis.p2c(aa.datapoint[0])+da.left+va.left),aa.pageY=parseInt(aa.series.yaxis.p2c(aa.datapoint[1])+da.top+va.top);t.trigger(G,[wa,X])}else{Ja=U.grid.mouseActiveRadius;X=Ja*Ja+1;Ca=null;for(Ba=E.length-1;0<=Ba;--Ba)if(aa(E[Ba])){Ia=E[Ba];Ma=Ia.xaxis;Ga=Ia.yaxis;Ea=Ia.datapoints.points;La=Ia.datapoints.pointsize;Qa=Ma.c2p(qa);Ka=Ga.c2p(xa);Na=Ja/Ma.scale;Za=Ja/Ga.scale;Ma.options.inverseTransform&&(Na=Number.MAX_VALUE);Ga.options.inverseTransform&&(Za=Number.MAX_VALUE);
if(Ia.lines.show||Ia.points.show)for(Fa=0;Fa<Ea.length;Fa+=La)Wa=Ea[Fa],Oa=Ea[Fa+1],null==Wa||Wa-Qa>Na||Wa-Qa<-Na||Oa-Ka>Za||Oa-Ka<-Za||(Wa=Math.abs(Ma.p2c(Wa)-qa),Oa=Math.abs(Ga.p2c(Oa)-xa),Oa=Wa*Wa+Oa*Oa,Oa<X&&(X=Oa,Ca=[Ba,Fa/La]));if(Ia.bars.show&&!Ca)for(Ma="left"==Ia.bars.align?0:-Ia.bars.barWidth/2,Ia=Ma+Ia.bars.barWidth,Fa=0;Fa<Ea.length;Fa+=La)Wa=Ea[Fa],Oa=Ea[Fa+1],Ga=Ea[Fa+2],null!=Wa&&(E[Ba].bars.horizontal?Qa<=Math.max(Ga,Wa)&&Qa>=Math.min(Ga,Wa)&&Ka>=Oa+Ma&&Ka<=Oa+Ia:Qa>=Wa+Ma&&Qa<=Wa+
Ia&&Ka>=Math.min(Ga,Oa)&&Ka<=Math.max(Ga,Oa))&&(Ca=[Ba,Fa/La])}Ca?(Ba=Ca[0],Fa=Ca[1],La=E[Ba].datapoints.pointsize,aa={datapoint:E[Ba].datapoints.points.slice(Fa*La,(Fa+1)*La),dataIndex:Fa,series:E[Ba],seriesIndex:Ba}):aa=null;aa&&(aa.pageX=parseInt(aa.series.xaxis.p2c(aa.datapoint[0])+da.left+va.left),aa.pageY=parseInt(aa.series.yaxis.p2c(aa.datapoint[1])+da.top+va.top));t.trigger(G,[wa,aa])}}function p(){var G=U.interaction.redrawOverlayInterval;-1==G?H():oa||(oa=setTimeout(H,G))}function H(){oa=
null;ya.save();ma.clear();ya.translate(va.left,va.top);var G;for(G=0;G<fa.length;++G){var X=fa[G];if(X.series.points.show){var aa=X.series,da=X.point,qa=da[0],xa=da[1],wa=aa.xaxis,Ca=aa.yaxis;if(!(qa<wa.min||qa>wa.max||xa<Ca.min||xa>Ca.max)){var Ba=aa.points.radius+aa.points.lineWidth/2;ya.lineWidth=Ba;ya.strokeStyle=a.color.parse(aa.color).scale("a",.5).toString();Ba*=1.5;qa=wa.p2c(qa);xa=Ca.p2c(xa);18==aa.index&&da[0]>changeV5Epoch||(ya.beginPath(),"circle"==aa.points.symbol?ya.arc(qa,xa,Ba,0,2*
Math.PI,!1):aa.points.symbol(ya,qa,xa,Ba,!1),ya.closePath(),ya.stroke())}}if(X.point[0]!=X.point[2]){xa=X.series;qa=X.point;var Fa=qa[0];aa=X.color||xa.color;da=xa.xaxis;xa=xa.yaxis;wa=ya;var Ea=X.lineWidth||2.5;Ba=Ca=X=!0;var La=Fa+0;var Ma=Fa+(qa[2]-qa[0]);Fa=0;qa=qa[1];Ma<da.min||La>da.max||qa<xa.min||Fa>xa.max||(La<da.min&&(La=da.min),Ma>da.max&&(Ma=da.max),Fa<xa.min&&(Fa=xa.min),qa>xa.max&&(qa=xa.max,X=!1),La=da.p2c(La),xa.p2c(Fa),Ma=da.p2c(Ma),qa=xa.p2c(qa),wa.lineWidth=Ea,wa.strokeStyle=aa,
0<Ea&&(Ba||Ca||X)&&(wa.beginPath(),wa.moveTo(Math.round(La)+.5,Math.round(qa+0)+.5),X&&wa.lineTo(Math.round(Ma)+.5,Math.round(qa+0)+.5),wa.stroke()))}}ya.restore();q(ea.drawOverlay,[ya])}function L(G,X){for(var aa=0;aa<fa.length;++aa){var da=fa[aa];if(da.series==G&&da.point[0]==X[0]&&da.point[1]==X[1])return aa}return-1}function B(G,X,aa,da){if("string"==typeof G)return G;X=W.createLinearGradient(0,aa,0,X);aa=0;for(var qa=G.colors.length;aa<qa;++aa){var xa=G.colors[aa];if("string"!=typeof xa){var wa=
a.color.parse(da);null!=xa.brightness&&(wa=wa.scale("rgb",xa.brightness));null!=xa.opacity&&(wa.a*=xa.opacity);xa=wa.toString()}X.addColorStop(aa/(qa-1),xa)}return X}var E=[],U={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,
inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,labelAngle:0,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:!1},yaxis:{autoscaleMargin:.02,labelAngle:0,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,
steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:0,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!1,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1E3/60},hooks:{}},ka=null,ma=null,na=
null,W=null,ya=null,Aa=[],Da=[],va={left:0,right:0,top:0,bottom:0},za=0,Ha=0,ea={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},ia=this;ia.setData=u;ia.setupGrid=pa;ia.draw=f;ia.setupTickGeneration=sa;ia.setTicks=Z;ia.setRange=ca;ia.snapRangeToTicks=N;ia.syncedMouseMove=null;ia.getPlaceholder=function(){return t};ia.getEventHolder=function(){return na};ia.getCanvas=function(){return canvas};
ia.getPlotOffset=function(){return va};ia.width=function(){return za};ia.height=function(){return Ha};ia.offset=function(){var G=na.offset();G.left+=va.left;G.top+=va.top;return G};ia.getData=function(){return E};ia.getAxes=function(){var G={};a.each(Aa.concat(Da),function(X,aa){aa&&(G[aa.direction+(1!=aa.n?aa.n:"")+"axis"]=aa)});return G};ia.getXAxes=function(){return Aa};ia.getYAxes=function(){return Da};ia.c2p=M;ia.p2c=function(G){var X={},aa,da;for(aa=0;aa<Aa.length;++aa)if((da=Aa[aa])&&da.used){var qa=
"x"+da.n;null==G[qa]&&1==da.n&&(qa="x");if(null!=G[qa]){X.left=da.p2c(G[qa]);break}}for(aa=0;aa<Da.length;++aa)if((da=Da[aa])&&da.used&&(qa="y"+da.n,null==G[qa]&&1==da.n&&(qa="y"),null!=G[qa])){X.top=da.p2c(G[qa]);break}return X};ia.getOptions=function(){return U};ia.highlight=function(G,X,aa){"number"==typeof G&&(G=E[G]);if("number"==typeof X){var da=G.datapoints.pointsize;X=G.datapoints.points.slice(da*X,da*(X+2))}da=L(G,X);-1==da?(fa.push({series:G,point:X,auto:aa}),p()):aa||(fa[da].auto=!1)};
ia.getHighlights=function(){return fa};ia.setHighlights=function(G){fa=G};ia.unhighlight=function(G,X){null==G&&null==X&&(fa=[],p());"number"==typeof G&&(G=E[G]);"number"==typeof X&&(X=G.data[X]);G=L(G,X);-1!=G&&(fa.splice(G,1),p())};ia.triggerRedrawOverlay=p;ia.drawOverlay=H;ia.pointOffset=function(G){return{left:parseInt(Aa[D(G,"x")-1].p2c(+G.x)+va.left),top:parseInt(Da[D(G,"y")-1].p2c(+G.y)+va.top)}};ia.shutdown=P;ia.destroy=function(){P();t.removeData("plot").empty();E=[];ya=W=na=ma=ka=U=null;
Aa=[];Da=[];ea=null;fa=[];ia=null};ia.resize=function(){var G=float2int(t.width()),X=float2int(t.height());ka.resize(G,X);ma.resize(G,X)};ia.hooks=ea;(function(){for(var G={Canvas:b},X=0;X<r.length;++X){var aa=r[X];aa.init(ia,G);aa.options&&a.extend(!0,U,aa.options)}})(ia);(function(G){a.extend(!0,U,G);G&&G.colors&&(U.colors=G.colors);null==U.xaxis.color&&(U.xaxis.color=U.grid.color);null==U.yaxis.color&&(U.yaxis.color=U.grid.color);null==U.xaxis.tickColor&&(U.xaxis.tickColor=U.grid.tickColor||U.xaxis.color);
null==U.yaxis.tickColor&&(U.yaxis.tickColor=U.grid.tickColor||U.yaxis.color);null==U.grid.borderColor&&(U.grid.borderColor=U.grid.color);null==U.grid.tickColor&&(U.grid.tickColor=a.color.parse(U.grid.color).scale("a",.22).toString());var X;G=(G=t.css("fontSize"))?+G.replace("px",""):13;var aa={style:t.css("fontStyle"),size:Math.round(.8*G),variant:t.css("fontVariant"),weight:t.css("fontWeight"),family:t.css("fontFamily")};var da=U.xaxes.length||1;for(G=0;G<da;++G)(X=U.xaxes[G])&&!X.tickColor&&(X.tickColor=
X.color),X=a.extend(!0,{},U.xaxis,X),U.xaxes[G]=X,X.font&&(X.font=a.extend({},aa,X.font),X.font.color||(X.font.color=X.color),X.font.lineHeight||(X.font.lineHeight=Math.round(1.15*X.font.size)));da=U.yaxes.length||1;for(G=0;G<da;++G)(X=U.yaxes[G])&&!X.tickColor&&(X.tickColor=X.color),X=a.extend(!0,{},U.yaxis,X),U.yaxes[G]=X,X.font&&(X.font=a.extend({},aa,X.font),X.font.color||(X.font.color=X.color),X.font.lineHeight||(X.font.lineHeight=Math.round(1.15*X.font.size)));U.xaxis.noTicks&&null==U.xaxis.ticks&&
(U.xaxis.ticks=U.xaxis.noTicks);U.yaxis.noTicks&&null==U.yaxis.ticks&&(U.yaxis.ticks=U.yaxis.noTicks);U.grid.coloredAreas&&(U.grid.markings=U.grid.coloredAreas);U.grid.coloredAreasColor&&(U.grid.markingsColor=U.grid.coloredAreasColor);U.lines&&a.extend(!0,U.series.lines,U.lines);U.points&&a.extend(!0,U.series.points,U.points);U.bars&&a.extend(!0,U.series.bars,U.bars);null!=U.shadowSize&&(U.series.shadowSize=U.shadowSize);null!=U.highlightColor&&(U.series.highlightColor=U.highlightColor);for(G=0;G<
U.xaxes.length;++G)T(Aa,G+1).options=U.xaxes[G];for(G=0;G<U.yaxes.length;++G)T(Da,G+1).options=U.yaxes[G];for(var qa in ea)U.hooks[qa]&&U.hooks[qa].length&&(ea[qa]=ea[qa].concat(U.hooks[qa]));q(ea.processOptions,[U])})(m);(function(){t.css("padding",0).children().filter(function(){return!a(this).hasClass("flot-overlay")&&!a(this).hasClass("flot-base")}).remove();"static"==t.css("position")&&t.css("position","relative");ka=new b("flot-base",t);ma=new b("flot-overlay",t);W=ka.context;ya=ma.context;
na=a(ma.element).off();var G=t.data("plot");G&&(G.shutdown(),ma.clear());t.data("plot",ia)})();u(h);pa(!1);f();(function(){U.grid.hoverable&&(na.mousemove(A),na.mouseleave(J),na.on("touchmove",function(G){G.pageX=G.originalEvent.touches[0].pageX;G.pageY=G.originalEvent.touches[0].pageY;A(G)}));U.grid.clickable&&na.click(S);q(ea.bindEvents,[na])})();var ua,fa=[],oa=null}function g(t,h){return h*Math.floor(t/h)}var n=Object.prototype.hasOwnProperty;a.fn.detach||(a.fn.detach=function(){return this.each(function(){this.parentNode&&
this.parentNode.removeChild(this)})});b.prototype.resize=function(t,h){if(0>=t||0>=h){0==t&&(t=400);if(0>=h)throw Error("Invalid dimensions for plot, width = "+t+", height = "+h);console.error("Invalid dimensions for plot, width = "+t+", height = "+h)}var m=this.element,r=this.context,q=this.pixelRatio;this.width!=t&&(m.width=t*q,m.style.width=t+"px",this.width=t);this.height!=h&&(m.height=h*q,m.style.height=h+"px",this.height=h);r.restore();r.save();r.scale(q,q)};b.prototype.clear=function(){this.context.clearRect(0,
0,this.width,this.height)};b.prototype.render=function(){var t=this._textCache,h;for(h in t)if(n.call(t,h)){var m=this.getTextLayer(h),r=t[h];m.hide();for(var q in r)if(n.call(r,q)){var u=r[q],D;for(D in u)if(n.call(u,D)){for(var F=u[D].positions,M=0,Q;Q=F[M];M++)Q.active?Q.rendered||(m.append(Q.element),Q.rendered=!0):(F.splice(M--,1),Q.rendered&&Q.element.detach());0==F.length&&delete u[D]}}m.show()}};b.prototype.getTextLayer=function(t){var h=this.text[t];null==h&&(null==this.textContainer&&(this.textContainer=
a("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,fontSize:"smaller",color:"#545454"}).insertAfter(this.element)),h=this.text[t]=a("<div></div>").addClass(t).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer));return h};b.prototype.getTextInfo=function(t,h,m,r,q){h=""+h;r="object"===typeof m?m.style+" "+m.variant+" "+m.weight+" "+m.size+"px/"+m.lineHeight+"px "+m.family:m;var u=this._textCache[t];null==u&&(u=this._textCache[t]=
{});var D=u[r];null==D&&(D=u[r]={});u=D[h];null==u&&(t=a("<div></div>").html(h).css({position:"absolute",maxWidth:q,top:-9999}).appendTo(this.getTextLayer(t)),"object"===typeof m?t.css({font:r,color:m.color}):"string"===typeof m&&t.addClass(m),u=D[h]={width:t.outerWidth(!0),height:t.outerHeight(!0),element:t,positions:[]},t.detach());return u};b.prototype.addText=function(t,h,m,r,q,u,D,F,M){t=this.getTextInfo(t,r,q,u,D);r=t.positions;"center"==F?h-=t.width/2:"right"==F&&(h-=t.width);"middle"==M?m-=
t.height/2:"bottom"==M&&(m-=t.height);for(M=0;q=r[M];M++)if(q.x==h&&q.y==m){q.active=!0;return}q={active:!0,rendered:!1,element:r.length?t.element.clone():t.element,x:h,y:m};r.push(q);q.element.css({top:Math.round(m),left:Math.round(h),"text-align":F})};b.prototype.removeText=function(t,h,m,r,q,u){if(null==r){if(h=this._textCache[t],null!=h)for(var D in h)if(n.call(h,D)){m=h[D];for(var F in m)if(n.call(m,F))for(t=m[F].positions,r=0;q=t[r];r++)q.active=!1}}else for(t=this.getTextInfo(t,r,q,u).positions,
r=0;q=t[r];r++)q.x==h&&q.y==m&&(q.active=!1)};a.plot=function(t,h,m){return new d(a(t),h,m,a.plot.plugins)};a.plot.version="0.7";a.plot.plugins=[];a.plot.formatDate=function(t,h,m){var r=function(P){P=""+P;return 1==P.length?"0"+P:P},q=[],u=!1,D=!1,F=t.getUTCHours(),M=12>F;null==m&&(m=la._79);-1!=h.search(/%p|%P/)&&(12<F?F-=12:0==F&&(F=12));for(var Q=0;Q<h.length;++Q){var T=h.charAt(Q),ha=5==storage.language?"\u65e5":"";if(u){switch(T){case "h":T=""+F;break;case "H":T=r(F);break;case "M":T=r(t.getUTCMinutes());
break;case "S":T=r(t.getUTCSeconds());break;case "d":T=""+t.getUTCDate()+ha;break;case "m":T=""+(t.getUTCMonth()+1);break;case "y":T=""+t.getUTCFullYear();break;case "b":T=""+m[t.getUTCMonth()];break;case "p":T=M?"am":"pm";break;case "P":T=M?"AM":"PM";break;case "0":T="",D=!0}T&&D&&(T=r(T),D=!1);q.push(T);D||(u=!1)}else"%"==T?u=!0:q.push(T)}return q.join("")}})(jQuery);/*
 Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 Licensed under the MIT License (LICENSE.txt).

 Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 Thanks to: Seamus Leahy for adding deltaX and deltaY

 Version: 3.0.6

 Requires: 1.2.2+
*/
(function(a){a.plot.plugins.push({init:function(b){var d,g;function n(M,Q){if("undefined"!=typeof b.getOptions().$isSyncedWith&&1<b.getOptions().$isSyncedWith.length)for(var T=0;T<b.getOptions().$isSyncedWith.length;T++){var ha=b.getOptions().$isSyncedWith[T].$container;u=!!Q||ha&&ha.is(":visible")}Q&&(M=Q);T=b.offset();ha=a(b.getPlaceholder()).offset();Q=T.left-ha.left;ha=T.top-ha.top;var P=M.pageX-T.left;M=M.pageY-T.top;r=Q;q=P>float2int(b.width())||0>P||!u&&(M>float2int(b.height())||0>M);d=Q+Math.max(0,
Math.min(P,float2int(b.width())));h=ha+Math.max(0,Math.min(M,float2int(b.height())));g=d+m.x}function t(M){F||(F=!0,setTimeout(function(){var Q=b.getPlaceholder();if("undefined"!=typeof b.getOptions().$isSyncedWith)for(var T=0;T<b.getOptions().$isSyncedWith.length;T++){var ha=b.getOptions().$isSyncedWith[T].$container;ha.find(".flotToolTipsPlaceholder").hide();ha.find("#flotTipDate").hide();Q.find(".flotLegendHover").hide()}Q.find(".flotToolTipsPlaceholder").hide();Q.find(".flotLegendHover").hide();
Q.find("#flotTipDate").hide();b.unhighlight();F=!1;Q.css("cursor","")},0))}if("undefined"==typeof isSnapshotPage){var h=d=g=0;var m={x:14,y:25};var r=0;var q=!1,u=!1;var D=graphDateFormatIFrame?graphDateFormatIFrame:"D, M j Y, G:i ";b.hooks.bindEvents.push(function(M,Q){Q.mouseout(t);Q.mousemove(n);Q.on("touchmove",function(T){T.pageX=T.originalEvent.touches[0].pageX;T.pageY=T.originalEvent.touches[0].pageY;1==T.touches.length&&n(T)});Q.on("touchstart",function(T){1<T.touches.length&&t(T)});Q.on("touchstart",
function(T){1<T.touches.length&&t(T)})});var F=!1;b.hooks.bindEvents.push(function(M,Q){var T=M.getOptions(),ha=T.timeShiftOffset,P=M.getPlaceholder(),R=a("<div></div>").attr("class","flotToolTipsPlaceholder").appendTo(P),Y=P.find(".flotLegendHover").hide();R=P.find(".flotToolTipsPlaceholder");for(var ja=a("<div></div>").attr("id","flotTipVerticalLine"),ra=a("<div />").attr("id","flotTipDate"),ta=a("<div />").attr("id","flotTipHorizontalLine"),pa=[],ca=[],sa=M.getData(),Z=5==T.graphIndex,N=T.showOnlyTracked,
f=0;f<sa.length;f++){var C=a("<div />").attr("class","flotTip").attr("id","flotTip"+sa[f].index).attr("style","border: 1px solid "+a.color.parse(sa[f].color).scale("a",.7).toString()+";background: "+sa[f].backgroundColor+";");pa.push(C);ca.push(a("<div />").attr("class","flotTipAngularLine"+(Z?3:sa[f].index%4)).attr("id","flotTipAngularLine"+sa[f].index))}for(f=sa.length-1;0<=f;f--)pa[f].appendTo(R)[0]&&(pa[f].appendTo(R)[0].style.display="none");if("undefined"!=typeof ra.appendTo(R)[0]){ra.appendTo(R)[0].style.display=
"none";ja.appendTo(R)[0].style.display="none";ta.appendTo(R)[0].style.display="none";for(sa=sa.length-1;0<=sa;sa--)ja.append(ca[sa].hide());var V=!1;a(P).on("mouseout",function(O,z){q=!0;M.getPlaceholder().find(".flotToolTipsPlaceholder").hide()});var ba=T.domain,w=function(O){O.getPlaceholder().find(".flotToolTipsPlaceholder").hide();if("undefined"!=typeof O.getOptions().$isSyncedWith)for(var z=0;z<O.getOptions().$isSyncedWith.length;z++)if(T.graphIndex!=T.$isSyncedWith[z].graphIndex){var I=O.getOptions().$isSyncedWith[z].plot;
I.setHighlights([]);I.drawOverlay()}O.setHighlights([]);O.drawOverlay()};a(P).on("plothover",function(O,z){q?w(M):V||(V=!0,setTimeout(function(){if(q)w(M),V=!1;else{var I=[],K=[],A=[],J=!1,S,v,p=M.getData();if("undefined"!==typeof z.x){var H=0,L=0,B={};for(S=0;S<p.length;B={$jscomp$loop$prop$bbEntry$709:B.$jscomp$loop$prop$bbEntry$709,$jscomp$loop$prop$isCached$710:B.$jscomp$loop$prop$isCached$710,$jscomp$loop$prop$sellerText$711:B.$jscomp$loop$prop$sellerText$711,$jscomp$loop$prop$text$712:B.$jscomp$loop$prop$text$712},
S++){var E=p[S];if(E.lines.show||E.dashes.show)if(null==E.data.length)H++;else{for(v=0;v<E.data.length&&!(null!=E.data[v]&&E.data[v][0]>z.x);v++);if(null==E.data[v-1]){var U=E.data[v-2],ka=E.data[v];null==U&&v==E.data.length&&(v--,U=E.data[v-2]);U=null==U?0:U[0];ka=null==ka?9999999999999:ka[0];var ma=Math.abs(z.x-U),na=Math.abs(z.x-U),W=Math.abs(z.x-ka);na>=W?ma=W:(ma=na,v-=2);if(ma/(E.xaxis.max-E.xaxis.min)>(5==T.graphIndex?.025:.003))continue}var ya=void 0,Aa=void 0,Da=E.data[v-1],va=E.data[v];
null==Da?(Aa=va[1],ya=va[0],E.points.show&&(Da=va)):(Aa=Da[1],ya=Da[0]);if(null!=Aa&&"u"!=Aa){var za=NumberUtil.format(Aa);if(E.formatter)I[S]=E.formatter(Aa);else if(E.index==CsvType.RATING.index||E.index-100==CsvType.RATING.index)I[S]="<span>"+E.labelText+"</span><br>"+Aa,za=Aa;else if(E.isCurrency){B.$jscomp$loop$prop$sellerText$711="";var Ha=""+Money.format(Aa,{sourceDomainId:ba,targetDomainId:ba,isDivided:!0});if(E.index==CsvType.BUY_BOX_SHIPPING.index){var ea=keepaTime.epochToMinutes(ya)-keepaTime.timeShiftOffset;
B.$jscomp$loop$prop$bbEntry$709=getBBEntryAtTimeWithExactTime(E.bbHistory,ea,CsvType.AMAZON);if(-1!=B.$jscomp$loop$prop$bbEntry$709){var ia=SellerUtil.isSellerIdAmazon(B.$jscomp$loop$prop$bbEntry$709.sellerId,ba);B.$jscomp$loop$prop$text$712="Amazon";var ua=!0;if(!ia){B.$jscomp$loop$prop$text$712="3rd Party";var fa=null;if(null!=E.offers)for(var oa=$jscomp.makeIterator(E.offers),G=oa.next();!G.done;G=oa.next()){var X=G.value;if(X.sellerId===B.$jscomp$loop$prop$bbEntry$709.sellerId){var aa=getValueAtTimeWithShipping(X.offerCSV,
ea);if(""+Money.format(aa[0]+aa[1],{sourceDomainId:ba,targetDomainId:ba,isDivided:!1})===Ha){fa=X.isFBA?CsvType.NEW_FBA.color:CsvType.NEW_FBM_SHIPPING.color;var da="3rd Party";sellerNameCache[ba+B.$jscomp$loop$prop$bbEntry$709.sellerId]&&(da=sellerNameCache[ba+B.$jscomp$loop$prop$bbEntry$709.sellerId].name,ua=!1);B.$jscomp$loop$prop$text$712='<span style="color: '+fa+'">'+(X.isFBA?"FBA":"FBM")+"</span>&ensp;"+da;break}}}}for(var qa=0;qa<E.buyBoxSellerIdHistory.length;qa+=2){var xa=E.buyBoxSellerIdHistory[qa+
1],wa=Number(E.buyBoxSellerIdHistory[qa]),Ca=null;if("-2"!=xa&&"-1"!=xa&&xa==B.$jscomp$loop$prop$bbEntry$709.sellerId){var Ba=keepaTime.minutesToEpoch(Number(wa)),Fa=qa+2>=E.buyBoxSellerIdHistory.length?E.xaxis.datamax:keepaTime.minutesToEpoch(Number(E.buyBoxSellerIdHistory[qa+2])),Ea=E.yaxis.max,La=getBBEntryAtTimeWithExactTime(E.bbHistory,wa),Ma=$jscomp.makeIterator(E.offers);for(G=Ma.next();!G.done;G=Ma.next()){var Ga=G.value;if(Ga.sellerId===La.sellerId){var Na=getValueAtTimeWithShipping(Ga.offerCSV,
wa);if(Na[0]+Na[1]===La.price){Ca=ia?CsvType.AMAZON.color:Ga.isFBA?CsvType.NEW_FBA.color:CsvType.NEW_FBM_SHIPPING.color;break}}}null!=Ca&&A.push({auto:void 0,color:Ca,lineWidth:5,point:[Ba,Ea,Fa,Ea],series:E,seriesIndex:qa})}}B.$jscomp$loop$prop$sellerText$711='<br><span id="tt'+B.$jscomp$loop$prop$bbEntry$709.sellerId+'" style="font-weight: bold">'+B.$jscomp$loop$prop$text$712+"</span>";if(!ia&&5<(B.$jscomp$loop$prop$bbEntry$709.sellerId+"").length&&hasDataAccessSubscription&&ua){B.$jscomp$loop$prop$isCached$710=
!!sellerNamePromises[ba+B.$jscomp$loop$prop$bbEntry$709.sellerId];for(var Qa={},Ka=0;Ka<E.bbHistory.length;Ka+=2){var Ia=E.bbHistory[Ka+1].sellerId;5<(Ia+"").length&&!sellerNamePromises[ba+Ia]&&100>Object.keys(Qa).length&&(Qa[Ia]=1)}var Oa=function(db){return function(wb){wb=wb.merchants;for(var xb in wb){var hb=wb[xb];hb.name=hb.sellerName;40<hb.name.length&&(hb.name=hb.name.substring(0,37)+"\u2026");hb.name=hb.name+"&ensp;&#9733; "+hb.currentRating+"%&ensp;"+hb.currentRatingCount;sellerNameCache[ba+
xb]=hb;if(xb==db.$jscomp$loop$prop$bbEntry$709.sellerId)if(db.$jscomp$loop$prop$isCached$710)db.$jscomp$loop$prop$sellerText$711='<br><span>by <span id="tt'+db.$jscomp$loop$prop$bbEntry$709.sellerId+'" style="font-weight: bold">'+db.$jscomp$loop$prop$text$712.replace("3rd Party",hb.sellerName)+"</span></span>";else{var Eb=a("#tt"+xb);1===Eb.length&&Eb.html(Eb.html().replace("3rd Party",hb.name))}}}}(B),Sa=B.$jscomp$loop$prop$isCached$710?sellerNamePromises[ba+B.$jscomp$loop$prop$bbEntry$709.sellerId]:
a.Deferred();Sa.done(Oa);if(!B.$jscomp$loop$prop$isCached$710){for(var Za=$jscomp.makeIterator(Object.keys(Qa)),Wa=Za.next();!Wa.done;Wa=Za.next())sellerNamePromises[ba+Wa.value]=Sa;network.request({path:"pro/seller",domainId:ba,seller:Object.keys(Qa).join(","),graphOnly:!0}).done(Sa.resolve)}}}}za=Ha;showReferencePrice(ba)&&(Ha+='&ensp;<span style="color:#444;">'+Money.format(Aa,{sourceDomainId:ba,isDivided:!0})+"</span>");I[S]="<span>"+E.labelText+"</span><br>"+Ha+B.$jscomp$loop$prop$sellerText$711}else{var Ra=
E.labelText;if(null!=E.labelReferenceHistory){var Ja=keepaTime.epochToMinutes(parseInt(z.x))-keepaTime.timeShiftOffset;Ja<changeV5&&(Ra=E.getLabelText(Ja))}I[S]="<span>"+Ra+"</span><br>"+za}K[S]=Aa;var Xa=E.yaxis.max,Ya=E.yaxis.min;E.index!=CsvType.SALES.index&&2!=E.yaxis.n||"1"!=storage.salesRankInverse||(Xa=E.yaxis.min,Ya=E.yaxis.max);var Ta=Xa-Ya,Pa=1-(Xa-Aa)/Ta,Ua=1-(Xa-z.y)/Ta,ab=Pa*float2int(M.height());L=Math.max(ab,L);var Va=CsvType.getObject(E.index);Va&&E.points.show&&Va.isOfferData&&.02>
Math.abs(Pa-Ua)&&(J=!0)}if(!(99<E.index&&200>E.index))try{A.push({auto:void 0,point:[Da[0],Number(Da[1]),va[0],Number(va[1])],series:E,seriesIndex:S})}catch(db){}}else pa[S].hide(),ca[S].hide()}a(M.getPlaceholder()).css("cursor",J?"pointer":"");R.show();Y.show();try{for(var bb=M.getHighlights(),cb=[],$a=!1,ib=0;ib<bb.length;ib++){for(var eb=bb[ib],fb=!1,jb=0;jb<A.length;jb++){var kb=A[jb];if(eb.seriesIndex==kb.seriesIndex){eb.point[0]==kb.point[0]?fb=!0:(cb.push(kb),$a=!0);break}}fb?cb.push(eb):$a=
!0}for(jb=0;jb<A.length;jb++){kb=A[jb];fb=!1;for(ib=0;ib<cb.length;ib++)if(eb=cb[ib],eb.seriesIndex==kb.seriesIndex){eb.point[0]==kb.point[0]?fb=!0:(cb.push(eb),$a=!0);break}fb||($a=!0,cb.push(kb))}$a&&(M.setHighlights(cb),M.drawOverlay())}catch(db){}var ob=0,gb=0,tb=!0;u&&!keepaApp&&(0==T.graphIndex&&(tb=!1),T.graphIndex!=T.$isSyncedWith[M.getOptions().$isSyncedWith.length-1].graphIndex&&(tb=!1));var Yb="none"!=a("#moreDataGraph").css("display"),nb=float2int(M.height()),Zb=float2int(M.width()),Fb=
!1;if(5==T.graphIndex)try{var qb=M.getPlaceholder().parent().parent();if(qb&&0<qb.length&&null!=qb[0].className&&qb[0].className.startsWith("ag-row")){var $b=qb[0].getAttribute("row-index"),ac=qb.siblings().length;Fb=$b==ac}}catch(db){console.error(db)}if(tb){var rb="",Gb=Fb?null:T.grid.markings,Nb=function(db){db.text&&(-1<db.text.indexOf("offer data")&&""!=rb||.003<Math.abs(z.x-db.xaxis.from)/(p[0].xaxis.max-p[0].xaxis.min)||(rb+="<br>"+db.text))};if(null!=Gb)for(var bc in Gb)Nb(Gb[bc]);if("undefined"!=
typeof M.getOptions().$isSyncedWith)for(var yb=0;yb<M.getOptions().$isSyncedWith.length;yb++)if(T.graphIndex!=T.$isSyncedWith[yb].graphIndex){var Hb=M.getOptions().$isSyncedWith[yb].grid.markings;if(null!=Hb)for(var cc in Hb)Nb(Hb[cc])}""!=rb&&(rb='<span class="markingsText">'+rb+"</span>");try{ra[0]=z.x?replaceHtmlEl(ra[0],(new Date(Math.floor(z.x)-6E4*ha)).formatDate(D)+rb):""}catch(db){reportBug(db,"plothover");return}try{ra.css({left:g-14,top:N?nb:nb+(Fb?15:30),display:"block"})}catch(db){}}var Ob=
!keepaApp;if(2==M.getOptions().graphIndex){var zb="";for(v=0;v<p.length;v++)null==I[v]?(null!=pa[v]&&(pa[v][0].style.display="none"),null!=ca[v]&&(ca[v][0].style.display="none")):"undefined"!=typeof I[v]&&""!=I[v]&&(zb+=I[v],v!=p.length-1&&(zb+="<br>"));0<zb.length&&pa[0].html(zb).css({left:g,top:10,display:"block"})}else for(v=0;v<p.length;v++)if(null==I[v])null!=pa[v]&&(pa[v][0].style.display="none"),null!=ca[v]&&(ca[v][0].style.display="none");else{Ob=!1;var Ab=p[v];if(!(100<=Ab.index&&"#!manage"==
lastUrl&&0==storage.manageGridView)){var ub=Ab.yaxis;ob=ub.min;gb=ub.max;Ta=gb-ob;(0<=I[v].indexOf(CsvType.getName(CsvType.SALES.index))||2==ub.n)&&"1"==storage.salesRankInverse&&(ob=ub.max,gb=ub.min,Ta=gb-ob);ja[0].style.display="block";ta[0].style.display="block";var vb=(1-(gb-K[v])/Ta)*nb;pa[v][0]=replaceHtmlEl(pa[v][0],I[v]);var Bb=float2int(pa[v].height())+2,Cb=nb-vb,sb=Ab.index%4;Z&&(sb=3);0==sb?(pa[v].css({left:g,top:Cb-Bb-14,display:"block"}),ca[v].css({marginTop:-14+L-vb,display:"block"})):
1==sb||3==sb?(pa[v].html(I[v]).css({left:g-float2int(pa[v].width())-33,top:1==sb?Cb-Bb-14:Cb+Bb-14+6,display:"block"}),1==sb?ca[v].css({marginTop:-14+L-vb,display:"block"}):ca[v].css({marginTop:L-vb-1,display:"block"})):(pa[v].css({left:g,top:Cb+Bb-14+6+(Ab.index==CsvType.BUY_BOX_SHIPPING.index?-8:0),display:"block"}),ca[v].css({"margin-top":L-vb,display:"block"}))}}var Ib=!0;if(u||!Yb||keepaApp){for(var pb=[],Jb=[],dc=a(".flotTip:visible"),Pb=0,Qb=$jscomp.makeIterator(dc),Kb=Qb.next();!Kb.done;Kb=
Qb.next()){var Rb=Kb.value;pb[Pb]=a(Rb);Jb[Pb++]=a("#flotTipAngularLine"+Rb.getAttribute("id").replace("flotTip",""))}for(var Sb=0;3>Sb&&Ib;Sb++){Ib=!1;for(var Lb=[],lb=0;lb<pb.length;lb++)if(null!=pb[lb])for(var mb=0;mb<pb.length;mb++)if(lb!=mb&&null!=pb[mb]&&!Lb[mb+"."+lb]){Lb[mb+"."+lb]=!0;Lb[lb+"."+mb]=!0;var Tb=pb[lb],Ub=pb[mb],Mb=Tb.collision(Ub,{relative:"collider",directionData:"ddata",as:"<div/>"});if(0<Mb.length){Ib=!0;var Db=a(Mb[0]).data("ddata"),Vb=parseInt(a(Mb[0]).css("height"))+5;
0==Db.indexOf("S")&&(Ub.css("top","+="+Vb),Jb[mb].hide());if(0==Db.indexOf("W")||0==Db.indexOf("N")||0==Db.indexOf("Inside"))Tb.css("top","+="+Vb),Jb[lb].hide();break}}}}var Wb=N?-35:0,Xb=float2int(P.height());float2int(P.width());Ob?ja.css({left:d,top:nb+5,height:Xb-nb+1+(tb?0:200)+Wb,display:"block"}):ja.css({left:d,top:nb-L+5,height:Xb-(nb-L)+1+(tb?0:150)+20+Wb,display:"block"});ta.css({left:r,top:h,width:Zb,display:"block"});V=!1}}},0))});Q.mousemove(n);Q.mouseout(t);M.hooks.shutdown.push(function(O,
z){z.off("mouseout",t);z.off("mousemove",n)})}})}},name:"tooltip",version:"0.5"})})(jQuery);
(function(a){a.plot.plugins.push({init:function(b){b.hooks.processDatapoints.push(function(d,g,n){d.hooks.draw[g.index]=function(t,h){function m(F,M){var Q=n.points,T=n.pointsize,ha=null,P=null,R=0,Y=!0;if(g.dashes.dashLength[0]){var ja=g.dashes.dashLength[0];var ra=g.dashes.dashLength[1]?g.dashes.dashLength[1]:ja}else ra=ja=g.dashes.dashLength;h.beginPath();for(var ta={},pa=T;pa<Q.length;ta={$jscomp$loop$prop$ax2$714:ta.$jscomp$loop$prop$ax2$714,$jscomp$loop$prop$ax1$715:ta.$jscomp$loop$prop$ax1$715,
$jscomp$loop$prop$ay2$716:ta.$jscomp$loop$prop$ay2$716,$jscomp$loop$prop$ay1$717:ta.$jscomp$loop$prop$ay1$717},pa+=T){var ca=Q[pa-T],sa=Q[pa-T+1],Z=Q[pa],N=Q[pa+1];if(null!=ca&&null!=Z){if(sa<=N&&sa<q.min){if(N<q.min)continue;ca=(q.min-sa)/(N-sa)*(Z-ca)+ca;sa=q.min}else if(N<=sa&&N<q.min){if(sa<q.min)continue;Z=(q.min-sa)/(N-sa)*(Z-ca)+ca;N=q.min}if(sa>=N&&sa>q.max){if(N>q.max)continue;ca=(q.max-sa)/(N-sa)*(Z-ca)+ca;sa=q.max}else if(N>=sa&&N>q.max){if(sa>q.max)continue;Z=(q.max-sa)/(N-sa)*(Z-ca)+
ca;N=q.max}if(ca<=Z&&ca<r.min){if(Z<r.min)continue;sa=(r.min-ca)/(Z-ca)*(N-sa)+sa;ca=r.min}else if(Z<=ca&&Z<r.min){if(ca<r.min)continue;N=(r.min-ca)/(Z-ca)*(N-sa)+sa;Z=r.min}if(ca>=Z&&ca>r.max){if(Z>r.max)continue;sa=(r.max-ca)/(Z-ca)*(N-sa)+sa;ca=r.max}else if(Z>=ca&&Z>r.max){if(ca>r.max)continue;N=(r.max-ca)/(Z-ca)*(N-sa)+sa;Z=r.max}ca==ha&&sa==P||h.moveTo(r.p2c(ca)+F,q.p2c(sa)+M);ta.$jscomp$loop$prop$ax1$715=r.p2c(ca)+F;ta.$jscomp$loop$prop$ay1$717=q.p2c(sa)+M;ta.$jscomp$loop$prop$ax2$714=r.p2c(Z)+
F;ta.$jscomp$loop$prop$ay2$716=q.p2c(N)+M;ha=void 0;P=function(f){return function(C){var V=Math.sqrt(Math.pow(f.$jscomp$loop$prop$ax2$714-f.$jscomp$loop$prop$ax1$715,2)+Math.pow(f.$jscomp$loop$prop$ay2$716-f.$jscomp$loop$prop$ay1$717,2));return V<=C?{deltaX:f.$jscomp$loop$prop$ax2$714-f.$jscomp$loop$prop$ax1$715,deltaY:f.$jscomp$loop$prop$ay2$716-f.$jscomp$loop$prop$ay1$717,distance:V,remainder:C-V}:{deltaX:(f.$jscomp$loop$prop$ax2$714>f.$jscomp$loop$prop$ax1$715?1:-1)*Math.sqrt(Math.pow(C,2)/(1+
Math.pow((f.$jscomp$loop$prop$ay2$716-f.$jscomp$loop$prop$ay1$717)/(f.$jscomp$loop$prop$ax2$714-f.$jscomp$loop$prop$ax1$715),2))),deltaY:(f.$jscomp$loop$prop$ay2$716>f.$jscomp$loop$prop$ay1$717?1:-1)*Math.sqrt(Math.pow(C,2)-Math.pow(C,2)/(1+Math.pow((f.$jscomp$loop$prop$ay2$716-f.$jscomp$loop$prop$ay1$717)/(f.$jscomp$loop$prop$ax2$714-f.$jscomp$loop$prop$ax1$715),2))),distance:C,remainder:0}}}(ta);ca=500;do{ca--;ha=P(0<R?R:Y?ja:ra);if(0!=ha.deltaX||0!=ha.deltaY)Y?h.lineTo(ta.$jscomp$loop$prop$ax1$715+
ha.deltaX,ta.$jscomp$loop$prop$ay1$717+ha.deltaY):h.moveTo(ta.$jscomp$loop$prop$ax1$715+ha.deltaX,ta.$jscomp$loop$prop$ay1$717+ha.deltaY);Y=!Y;R=ha.remainder;ta.$jscomp$loop$prop$ax1$715+=ha.deltaX;ta.$jscomp$loop$prop$ay1$717+=ha.deltaY}while(0<ha.distance&&0<ca);ha=Z;P=N}}h.stroke()}if(g.dashes.show){t=t.getPlotOffset();var r=g.xaxis,q=g.yaxis;h.save();h.translate(t.left,t.top);h.lineJoin="round";t=g.dashes.lineWidth;var u=g.shadowSize;if(0<t&&0<u){h.lineWidth=u;h.strokeStyle="rgba(0,0,0,0.1)";
var D=Math.PI/18;m(Math.sin(D)*(t/2+u/2),Math.cos(D)*(t/2+u/2));h.lineWidth=u/2;m(Math.sin(D)*(t/2+u/4),Math.cos(D)*(t/2+u/4))}h.lineWidth=t;h.strokeStyle=g.color;0<t&&m(0,0);h.restore()}}})},options:{series:{dashes:{show:!1,lineWidth:1,dashLength:10}}},name:"dashes",version:"0.1"})})(jQuery);
(function(a,b){function d(P){return!!(""===P||P&&P.charCodeAt&&P.substr)}function g(P){return D?D(P):"[object Array]"===F.call(P)}function n(P){return"[object Object]"===F.call(P)}function t(P,R){var Y;P=P||{};R=R||{};for(Y in R)R.hasOwnProperty(Y)&&null==P[Y]&&(P[Y]=R[Y]);return P}function h(P,R,Y){var ja=[],ra;if(!P)return ja;if(u&&P.map===u)return P.map(R,Y);var ta=0;for(ra=P.length;ta<ra;ta++)ja[ta]=R.call(Y,P[ta],ta,P);return ja}function m(P,R){P=Math.round(Math.abs(P));return isNaN(P)?R:P}function r(P){var R=
q.settings.currency.format;"function"===typeof P&&(P=P());return d(P)&&P.match("%v")?{pos:P,neg:P.replace("-","").replace("%v","-%v"),zero:P}:P&&P.pos&&P.pos.match("%v")?P:d(R)?q.settings.currency.format={pos:R,neg:R.replace("%v","-%v"),zero:R}:R}var q={version:"0.4.1",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},u=Array.prototype.map,D=Array.isArray,F=Object.prototype.toString,M=q.unformat=
q.parse=function(P,R){if(g(P))return h(P,function(ja){return M(ja,R)});P=P||0;if("number"===typeof P)return P;R=R||".";var Y=RegExp("[^0-9-"+R+"]",["g"]);Y=parseFloat((""+P).replace(/\((.*)\)/,"-$1").replace(Y,"").replace(R,"."));return isNaN(Y)?0:Y},Q=q.toFixed=function(P,R){R=m(R,q.settings.number.precision);var Y=Math.pow(10,R);return(Math.round(q.unformat(P)*Y)/Y).toFixed(R)},T=q.formatNumber=q.format=function(P,R,Y,ja){if(g(P))return h(P,function(Z){return T(Z,R,Y,ja)});P=M(P);var ra=t(n(R)?
R:{precision:R,thousand:Y,decimal:ja},q.settings.number),ta=m(ra.precision),pa=0>P?"-":"",ca=parseInt(Q(Math.abs(P||0),ta),10)+"",sa=3<ca.length?ca.length%3:0;return pa+(sa?ca.substr(0,sa)+ra.thousand:"")+ca.substr(sa).replace(/(\d{3})(?=\d)/g,"$1"+ra.thousand)+(ta?ra.decimal+Q(Math.abs(P),ta).split(".")[1]:"")},ha=q.formatMoney=function(P,R,Y,ja,ra,ta){if(g(P))return h(P,function(sa){return ha(sa,R,Y,ja,ra,ta)});P=M(P);var pa=t(n(R)?R:{symbol:R,precision:Y,thousand:ja,decimal:ra,format:ta},q.settings.currency),
ca=r(pa.format);return(0<P?ca.pos:0>P?ca.neg:ca.zero).replace("%s",pa.symbol).replace("%v",T(Math.abs(P),m(pa.precision),pa.thousand,pa.decimal))};q.formatColumn=function(P,R,Y,ja,ra,ta){if(!P)return[];var pa=t(n(R)?R:{symbol:R,precision:Y,thousand:ja,decimal:ra,format:ta},q.settings.currency),ca=r(pa.format),sa=ca.pos.indexOf("%s")<ca.pos.indexOf("%v")?!0:!1,Z=0;P=h(P,function(N){if(g(N))return q.formatColumn(N,pa);N=M(N);N=(0<N?ca.pos:0>N?ca.neg:ca.zero).replace("%s",pa.symbol).replace("%v",T(Math.abs(N),
m(pa.precision),pa.thousand,pa.decimal));N.length>Z&&(Z=N.length);return N});return h(P,function(N){return d(N)&&N.length<Z?sa?N.replace(pa.symbol,pa.symbol+Array(Z-N.length+1).join(" ")):Array(Z-N.length+1).join(" ")+N:N})};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=q),exports.accounting=q):"function"===typeof define&&define.amd?define([],function(){return q}):(q.noConflict=function(P){return function(){a.accounting=P;q.noConflict=b;return q}}(a.accounting),
a.accounting=q)})(this);
(function(a){a.plot.plugins.push({init:function(b){function d(Q){D.active&&(m(Q),b.getPlaceholder().trigger("plotselecting",[n()]))}function g(Q){1==Q.which&&(document.body.focus(),void 0!==document.onselectstart&&null==F.onselectstart&&(F.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),void 0!==document.ondrag&&null==F.ondrag&&(F.ondrag=document.ondrag,document.ondrag=function(){return!1}),h(D.first,Q),D.active=!0,M=function(T){M=null;void 0!==document.onselectstart&&
(document.onselectstart=F.onselectstart);void 0!==document.ondrag&&(document.ondrag=F.ondrag);D.active=!1;m(T);u()?t():(b.getPlaceholder().trigger("plotunselected",[]),b.getPlaceholder().trigger("plotselecting",[null]))},a(document).one("mouseup",M))}function n(){if(!u()||!D.show)return null;var Q={},T=D.first,ha=D.second;a.each(b.getAxes(),function(P,R){if(R.used){var Y=R.c2p(T[R.direction]);R=R.c2p(ha[R.direction]);Q[P]={from:Math.min(Y,R),to:Math.max(Y,R)}}});return Q}function t(){var Q=n();b.getPlaceholder().trigger("plotselected",
[Q]);Q.xaxis&&Q.yaxis&&b.getPlaceholder().trigger("selected",[{x1:Q.xaxis.from,y1:Q.yaxis.from,x2:Q.xaxis.to,y2:Q.yaxis.to}])}function h(Q,T){var ha=b.getOptions(),P=b.getPlaceholder().offset(),R=b.getPlotOffset(),Y=T.pageX-P.left-R.left,ja=float2int(b.width());Q.x=0>Y?0:Y>ja?ja:Y;T=T.pageY-P.top-R.top;P=float2int(b.height());Q.y=0>T?0:T>P?P:T;"y"==ha.selection.mode&&(Q.x=Q==D.first?0:float2int(b.width()));"x"==ha.selection.mode&&(Q.y=Q==D.first?0:float2int(b.height()))}function m(Q){null!=Q.pageX&&
(h(D.second,Q),u()?(D.show=!0,b.triggerRedrawOverlay()):r(!0))}function r(Q){D.show&&(D.show=!1,b.triggerRedrawOverlay(),Q||b.getPlaceholder().trigger("plotunselected",[]))}function q(Q,T){var ha=b.getAxes(),P;for(P in ha){var R=ha[P];if(R.direction==T){var Y=T+R.n+"axis";Q[Y]||1!=R.n||(Y=T+"axis");if(Q[Y]){var ja=Q[Y].from;var ra=Q[Y].to;break}}}Q[Y]||(R="x"==T?b.getXAxes()[0]:b.getYAxes()[0],ja=Q[T+"1"],ra=Q[T+"2"]);null!=ja&&null!=ra&&ja>ra&&(Q=ja,ja=ra,ra=Q);return{from:ja,to:ra,axis:R}}function u(){var Q=
b.getOptions().selection.minSize;return Math.abs(D.second.x-D.first.x)>=Q&&Math.abs(D.second.y-D.first.y)>=Q}var D={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},F={},M=null;b.clearSelection=r;b.setSelection=function(Q,T){var ha=b.getOptions();if("y"==ha.selection.mode)D.first.x=0,D.second.x=float2int(b.width());else{var P=q(Q,"x");D.first.x=P.axis.p2c(P.from);D.second.x=P.axis.p2c(P.to)}"x"==ha.selection.mode?(D.first.y=0,D.second.y=float2int(b.height())):(P=q(Q,"y"),D.first.y=P.axis.p2c(P.from),
D.second.y=P.axis.p2c(P.to));D.show=!0;b.triggerRedrawOverlay();!T&&u()&&t()};b.getSelection=n;b.hooks.bindEvents.push(function(Q,T){null!=Q.getOptions().selection.mode&&(T.mousemove(d),T.mousedown(g))});b.hooks.drawOverlay.push(function(Q,T){if(D.show&&u()){var ha=Q.getPlotOffset();Q=Q.getOptions();T.save();T.translate(ha.left,ha.top);ha=a.color.parse(Q.selection.color);T.strokeStyle=ha.scale("a",.8).toString();T.lineWidth=1;T.lineJoin=Q.selection.shape;T.fillStyle=ha.scale("a",.4).toString();ha=
Math.min(D.first.x,D.second.x)+.5;Q=Math.min(D.first.y,D.second.y)+.5;var P=Math.abs(D.second.x-D.first.x)-1,R=Math.abs(D.second.y-D.first.y)-1;T.fillRect(ha,Q,P,R);T.strokeRect(ha,Q,P,R);T.restore()}});b.hooks.shutdown.push(function(Q,T){T.off("mousemove",d);T.off("mousedown",g);M&&a(document).off("mouseup",M)})},options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery);
(function(a){function b(h,m){if(h)if("offset"in h){var r=h.data("jqueryCollisionCoordinates");r?(this.x1=r.x1,this.y1=r.y1,this.x2=r.x2,this.y2=r.y2):m&&m.length&&4<=m.length?(this.x1=m[0],this.y1=m[1],this.x2=m[2]+h.outerWidth(!0),this.y2=m[3]+h.outerHeight(!0)):0>=h.parent().length?(this.x1=parseInt(h.css("left"))||0,this.y1=parseInt(h.css("top"))||0,this.x2=parseInt(h.css("width"))||0,this.y2=parseInt(h.css("height"))||0,this.x2+=this.x1,this.x2+=(parseInt(h.css("marginLeft"))||0)+(parseInt(h.css("borderLeft"))||
0)+(parseInt(h.css("paddingLeft"))||0)+(parseInt(h.css("paddingRight"))||0)+(parseInt(h.css("borderRight"))||0)+(parseInt(h.css("marginRight"))||0),this.y2+=this.y1,this.y2+=(parseInt(h.css("marginTop"))||0)+(parseInt(h.css("borderTop"))||0)+(parseInt(h.css("paddingRop"))||0)+(parseInt(h.css("paddingBottom"))||0)+(parseInt(h.css("borderBottom"))||0)+(parseInt(h.css("marginBottom"))||0)):(m=h.offset(),this.x1=m.left-(parseInt(h.css("marginLeft"))||0),this.y1=m.top-(parseInt(h.css("marginTop"))||0),
this.x2=this.x1+h.outerWidth(!0),this.y2=this.y1+h.outerHeight(!0));this.proto=h}else"x1"in h&&(this.x1=h.x1,this.y1=h.y1,this.x2=h.x2,this.y2=h.y2,this.proto=h);else this.x1=this.y1=this.x2=this.y2=0,this.proto=null;"dir"in h&&(this.dir=h.dir)}function d(h,m,r,q){this.target=h;this.obstacle=m;this.overlap=r;this.overlapType=q}function g(h,m,r){this.targets=h;this.obstacles=m;this.cache=this.collisions=null;this.containment=r?r:null}function n(h){return a(h).get().map(function(m,r,q){return new b(a(m))})}
function t(h){for(var m=a(),r=0;r<h.length;r++)m=m.add(h[r]);return m}b.prototype.innerContainer=function(){var h=new b(this);this.proto.css&&(h.x1+=parseInt(this.proto.css("marginLeft"))||0,h.x1+=parseInt(this.proto.css("borderLeft"))||0,h.x1+=parseInt(this.proto.css("paddingLeft"))||0,h.x2-=parseInt(this.proto.css("paddingRight"))||0,h.x2-=parseInt(this.proto.css("borderRight"))||0,h.x2-=parseInt(this.proto.css("marginRight"))||0,h.y1+=parseInt(this.proto.css("marginTop"))||0,h.y1+=parseInt(this.proto.css("borderTop"))||
0,h.y1+=parseInt(this.proto.css("paddingTop"))||0,h.y2-=parseInt(this.proto.css("paddingBottom"))||0,h.y2-=parseInt(this.proto.css("borderBottom"))||0,h.y2-=parseInt(this.proto.css("marginBottom"))||0);return h};b.prototype.move=function(h,m){this.x1+=h;this.x2+=h;this.y1+=m;this.y2+=m;return this};b.prototype.update=function(h){"x1"in h&&(this.x1=h.x1);"x2"in h&&(this.x1=h.x2);"y1"in h&&(this.x1=h.y1);"y2"in h&&(this.x1=h.y2);if("left"in h){var m=this.x2-this.x1;this.x1=h.left;this.x2=this.x1+m}"top"in
h&&(m=this.y2-this.y1,this.y1=h.top,this.y2=this.y1+m);"offset"in h&&(m=h.offset(),this.update(m),this.x2=this.x1+float2int(h.width()),this.y2=this.y1+float2int(h.height()));"dir"in h&&(this.x1=h.dir);return this};b.prototype.width=function(){return this.x2-this.x1};b.prototype.height=function(){return this.y2-this.y1};b.prototype.centerx=function(){return(this.x1+this.x2)/2};b.prototype.centery=function(){return(this.y1+this.y2)/2};b.prototype.toString=function(){return(this.proto.get?"#"+this.proto.get(0).id:
"")+"["+[this.x1,this.y1,this.x2,this.y2].join()+"]"};b.EPSILON=.001;b.prototype.containsPoint=function(h,m,r){r||(r=!1);r=(r?-1:1)*b.EPSILON;return h>this.x1+r&&h<this.x2-r&&m>this.y1+r&&m<this.y2-r?!0:!1};b.prototype.overlaps=function(h,m){var r=this._overlaps(h,m);if(0<r.length)return r;r=h._overlaps(this,m);0<r.length&&(r[0].dir="Inside"==r[0].dir?"Outside":"Outside"==r[0].dir?"Inside":"N"==r[0].dir?"S":"S"==r[0].dir?"N":"W"==r[0].dir?"E":"E"==r[0].dir?"W":"NE"==r[0].dir?"SW":"SW"==r[0].dir?"NE":
"SE"==r[0].dir?"NW":"NW"==r[0].dir?"SE":void 0);return r||[]};b.prototype._overlaps=function(h,m){m||(m=!1);var r=h.centerx(),q=h.centery();r=[[h.x1,h.y1,"SE"],[h.x2,h.y1,"SW"],[h.x2,h.y2,"NW"],[h.x1,h.y2,"NE"],[r,h.y1,"S"],[h.x2,q,"W"],[r,h.y2,"N"],[h.x1,q,"E"],[r,q,void 0]];q=null;for(var u={NW:!1,N:!1,NE:!1,E:!1,SE:!1,S:!1,SW:!1,W:!1},D=0;D<r.length;D++)this.containsPoint(r[D][0],r[D][1],m)&&(r[D][2]&&(u[r[D][2]]=!0),q||(q=[new b({x1:Math.max(h.x1,this.x1),y1:Math.max(h.y1,this.y1),x2:Math.min(h.x2,
this.x2),y2:Math.min(h.y2,this.y2),dir:r[D][2]})]));q&&(u.NW&&u.NE&&(q[0].dir="N"),u.NE&&u.SE&&(q[0].dir="E"),u.SE&&u.SW&&(q[0].dir="S"),u.SW&&u.NW&&(q[0].dir="W"),u.NW&&u.NE&&u.SE&&u.SW&&(q[0].dir="Outside"),u.NW||u.NE||u.SE||u.SW||u.N||u.E||u.S||u.W||(q[0].dir="Inside"));return q||[]};b.prototype._protrusion=function(h,m,r){h=this.overlaps(new b(h),!1);if(0>=h.length)return r;h[0].dir=m;r.push(h[0]);return r};b.prototype.protrusions=function(h){var m=[],r=Number.NEGATIVE_INFINITY,q=Number.POSITIVE_INFINITY,
u=h.x1,D=h.x2,F=h.y1;h=h.y2;m=this._protrusion({x1:u,y1:r,x2:D,y2:F},"N",m);m=this._protrusion({x1:D,y1:r,x2:q,y2:F},"NE",m);m=this._protrusion({x1:D,y1:F,x2:q,y2:h},"E",m);m=this._protrusion({x1:D,y1:h,x2:q,y2:q},"SE",m);m=this._protrusion({x1:u,y1:h,x2:D,y2:q},"S",m);m=this._protrusion({x1:r,y1:h,x2:u,y2:q},"SW",m);m=this._protrusion({x1:r,y1:F,x2:u,y2:h},"W",m);return m=this._protrusion({x1:r,y1:r,x2:u,y2:F},"NW",m)};d.prototype.distance=function(h){h=c.target;var m=c.overlap;return Math.sqrt((h.centerx()-
m.centerx())*(h.centerx()-m.centerx())+(h.centery()-m.centery())*(h.centery()-m.centery()))};g.prototype.getCollisions=function(h){if(null!==this.collisions)return this.collisions;this.cache={};this.collisions=[];h||(h="collision");if("collision"!=h&&"protrusion"!=h)return[];for(var m=[],r=this.targets,q=this.obstacles,u=0;u<r.length;u++)for(var D=r[u],F=0;F<q.length;F++){var M=q[F];M="collision"==h?D.overlaps(M):D.protrusions(M.innerContainer());for(var Q=0;Q<M.length;Q++)m.push(new d(r[u],q[F],
M[Q],h))}return this.collisions=m};a.fn.collision=function(h,m){m||(m={});var r="collision",q=null,u=null,D=null,F=null,M="body";"protrusion"==m.mode&&(r=m.mode);m.as&&(q=m.as);m.colliderData&&(u=m.colliderData);m.obstacleData&&(D=m.obstacleData);m.directionData&&(F=m.directionData);m.relative&&(M=m.relative);h=(new g(n(this),n(h))).getCollisions(r);h=q?a.map(h,function(Q,T,ha){T=Q.overlap.x1;ha=Q.overlap.y1;if(M&&"body"!=M){var P="collider"==M?a(Q.target.proto):"obstacle"==M?a(Q.obstacle.proto):
a(M);0<P.length&&(P=P.offset(),T-=P.left,ha-=P.top)}try{var R=a(q);R.offset({left:T,top:ha});R.width(float2int(Q.overlap.width()));R.height(float2int(Q.overlap.height()))}catch(Y){return}u&&R.data(u,a(Q.target.proto));D&&R.data(D,a(Q.obstacle.proto));F&&Q.overlap.dir&&R.data(F,Q.overlap.dir);return R}):a.map(h,function(Q,T,ha){return Q.obstacle.proto});return t(h)}})(jQuery);(function(a){a.fn.endlessScroll=function(b){b=a.extend({bottomPixels:50,fireOnce:!0,fireDelay:150,data:"",insertAfter:"div:last",resetCounter:function(){return!1},callback:function(){return!0},ceaseFire:function(){return!1},eventName:"endless"},b);var d=!0,g=!1,n=0;!0===b.ceaseFire.apply(this)&&(d=!1);if(!0===d)a(this).off("scroll."+b.eventName).on("scroll."+b.eventName,function(){if(this==document)var t=a(document).height()-a(window).height()<=a(window).scrollTop()+b.bottomPixels;else t=a(".endless_scroll_inner_wrap",
this),0==t.length&&a(this).wrapInner('<div class="endless_scroll_inner_wrap" />'),t=0<t.length&&t.height()-a(this).height()<=a(this).scrollTop()+b.bottomPixels;t&&(0==b.fireOnce||1==b.fireOnce&&1!=g)&&(!0===b.resetCounter.apply(this)&&(n=0),g=!0,n++,!1!==("function"==typeof b.data?b.data.apply(this):b.data)&&(t=[],t[0]=n,b.callback.apply(this,t),!1!==b.fireDelay||0!==b.fireDelay?(a("body").after('<div id="endless_scroll_marker"></div>'),a("div#endless_scroll_marker").fadeTo(b.fireDelay,1,function(){a(this).remove();
g=!1})):g=!1))})}})(jQuery);var $jscomp$this=this,enableListTrackingComponent=isTest&&!1,enableSubcategorySalesRankFilter=isTest&&!1,GridApi=function(){var a,b=$.Deferred();return{version:"16.0.1/1",load:function(){if(a)return b.promise();a=!0;var d=CDNUrl+"ag-grid-enterprise-21.1.0.min.js";isTest&&(d=CDNUrl+"ag-grid-enterprise-21.1.0.js",console.info("%cLoaded \u27fc ","color:pink;font-weight:bold;","21.1.0"));var g=document.createElement("script");g.async=!0;g.src=d;g.onload=b.resolve;g.onerror=b.reject;g.crossOrigin="anonymous";
document.body.appendChild(g);return b.promise()},init:function(d){agGrid.LicenseManager.setLicenseKey("Keepa_GmbH_Keepa_1Devs25_June_2019__MTU2MTQxNzIwMDAwMA==dab76dc13dd49d31c96996f22552f92d");var g=$("#"+d.gridId)[0];if("undefined"===typeof g)return null;new agGrid.Grid(g,d.gridOptions);d.gridOptions.context={};d.gridOptions.context.gridWrapperId=d.gridWrapperId;d.gridOptions.context.pageId=d.pageId;"undefined"===typeof d.gridOptions.onGridReady&&(d.gridOptions.onGridReady=function(n){GridHelper.addToggleUnitEvents(d.gridOptions);
GridHelper.addCopyByKeyboard(d.gridOptions)});d.gridOptions.onVirtualColumnsChanged=function(n){GridHelper.addToggleUnitEvents(d.gridOptions);"finder"===d.gridOptions.context.pageId&&GridFinder.handleSpecialFilters()};d.gridOptions.onRowDataChanged=function(){d.gridOptions.api&&d.gridOptions.api.sizeColumnsToFit();iframe.isIframe&&addon("resize",float2int($(document).height()))};"bestseller deals finder manage offer storefront variation viewer".split(" ").includes(d.pageId)&&("manage"!==d.pageId&&
GridState.restoreColumnState(d.gridOptions),d.gridOptions.onColumnVisible=function(n){d.gridOptions.api&&d.gridOptions.api.sizeColumnsToFit();if("manage"!==d.pageId&&n.column){var t=$('.grid-wrapper-tools [data-col-id="'+n.column.colId+'"]');!1===n.column.visible&&!0===t.prop("checked")?t.prop("checked",!1):!0===n.column.visible&&!1===t.prop("checked")&&t.prop("checked",!0)}"undefined"!==typeof n.visible&&GridState.saveColumnState(d.gridOptions)},d.gridOptions.onDragStopped=function(){GridState.saveColumnState(d.gridOptions)},
["manage","variation","offer"].includes(d.pageId)&&(d.gridOptions.onSortChanged=function(){GridState.saveSortModel(d.gridOptions);"manage"===d.pageId&&(GridManage.removeDeletedRows(),GridManage.updateSortToolbar())}));onPageNavigation.progress(function(n){"#!product"!=n&&"undefined"!=typeof d.gridOptions&&null!=d.gridOptions.api&&d.gridOptions.api.destroy()});return d.gridOptions},setData:function(d,g,n){GridHelper.addContextMenu(d);d.api.setRowData(g);n&&n.length&&(d.pinnedBottomRowData=n);!0===
d.pagination&&1===d.api.paginationGetTotalPages()&&$(".ag-paging-page-summary-panel").hide();"variation"!==d.context.pageId&&"search"!==d.context.pageId&&getBucketInformation()},getRowsPerPage:function(d){if(d.context.config.perPage)return hasDataAccessSubscription?d.context.config.perPage:GridConfig.maxRowsFreeUser;var g=d.context.config.type,n=GridConfig.getRowCountOptions(g);if("undefined"===typeof n)return GridConfig.maxRowsFreeUser;n=n.values[hasDataAccessSubscription?"asin"==g?2:1:0];if("undefined"!==
typeof storage.gridConfig){var t=JSON.parse(storage.gridConfig);(t=t.perPage?t.perPage:!1)&&t[g]&&(t=t[g],GridHelper.isValidRowsPerPage(g,t)&&(n=t))}"asinFinder"==g?100<n&&(n=100):1E3<n&&(n=1E3);d.context.config.currentRowsPerPage=n;return d.context.config.perPage=n},setRowsPerPage:function(d,g){var n=d.context.config.type;if(GridHelper.isValidRowsPerPage(n,g)){d.context.config.currentRowsPerPage=g;d.context.config.perPage=g;var t=document.querySelector(".tool__row .trigger");$(t).find("span").replaceWith("<span>&ensp;"+
g+" rows&emsp;</span>");t=storage.gridConfig?JSON.parse(storage.gridConfig):{};t.perPage=t.perPage?t.perPage:{};t.perPage[n]=g;storage.gridConfig=JSON.stringify(t);settings.send();d.api.showLoadingOverlay();switch(d.context.pageId){case "bestseller":GridBestSeller.initData(d);break;case "finder":GridFinder.initDatasource();break;case "storefront":GridStorefront.initData(d);break;case "topseller":GridTopSeller.initData(d)}}},toggleUnit:function(d){var g=GridHelper.getCurrentUnitSystem(),n=storage.gridConfig?
JSON.parse(storage.gridConfig):{};delete n.units;n.unitSystem="METRIC"===g?"IMPERIAL":"METRIC";storage.gridConfig=JSON.stringify(n);settings.send();var t=GridHelper.getCurrentUnits(!0);g=d.context.config.template;if("asin"===g){"infinite"==d.rowModelType?d.api.refreshInfiniteCache():d.api.updateRowData({});g=GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+t.measure+"</span>\u00b3)");n=GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+
t.measure+"</span>)");t=GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+t.weight+"</span>)");var h=d.columnApi.getColumn("packageDimension"),m=d.columnApi.getColumn("packageLength"),r=d.columnApi.getColumn("packageWidth"),q=d.columnApi.getColumn("packageHeight"),u=d.columnApi.getColumn("packageWeight"),D=d.columnApi.getColumn("itemDimension"),F=d.columnApi.getColumn("itemLength"),M=d.columnApi.getColumn("itemWidth"),Q=d.columnApi.getColumn("itemHeight"),
T=d.columnApi.getColumn("itemWeight");h.colDef.headerComponentParams.template=g;m.colDef.headerComponentParams.template=n;r.colDef.headerComponentParams.template=n;q.colDef.headerComponentParams.template=n;u.colDef.headerComponentParams.template=t;D.colDef.headerComponentParams.template=g;F.colDef.headerComponentParams.template=n;M.colDef.headerComponentParams.template=n;Q.colDef.headerComponentParams.template=n;T.colDef.headerComponentParams.template=t;d.api.refreshHeader();GridHelper.addToggleUnitEvents(d)}else if("productDetail"===
g){var ha={packageDimension:'Dimension (<span class="toggle-unit" title="Toggle unit">'+t.measure+"</span>\u00b3)",packageWeight:'Weight (<span class="toggle-unit" title="Toggle unit">'+t.weight+"</span>)",itemDimension:'Dimension (<span class="toggle-unit" title="Toggle unit">'+t.measure+"</span>\u00b3)",itemWeight:'Weight (<span class="toggle-unit" title="Toggle unit">'+t.weight+"</span>)"},P=[];d.api.forEachNode(function(R){R=R.data;if(["packageDimension","packageWeight","itemDimension","itemWeight"].includes(R.realField)){R.productKey=
(R.realField.includes("package")?"Package - ":"Item - ")+ha[R.realField];switch(R.realField){case "packageWeight":case "itemWeight":var Y={colDef:{field:R.realField},data:{}};Y.data[R.realField]=d.context.lookup[R.realField];R.productValue=GridHelper.valueGetterWeight(Y);Y.value=R.productValue;R.productValueFormatted=GridHelper.valueFormatterWeight(Y);break;case "packageDimension":Y={colDef:{field:R.realField},data:{packageLength:d.context.lookup.packageLength,packageWidth:d.context.lookup.packageWidth,
packageHeight:d.context.lookup.packageHeight}};R.productValue=GridHelper.valueGetterDimension(Y);Y.value=R.productValue;R.productValueFormatted=GridHelper.valueFormatterDimension(Y);break;case "itemDimension":Y={colDef:{field:R.realField},data:{itemLength:d.context.lookup.itemLength,itemWidth:d.context.lookup.itemWidth,itemHeight:d.context.lookup.itemHeight}};R.productValue=GridHelper.valueGetterDimension(Y);Y.value=R.productValue;R.productValueFormatted=GridHelper.valueFormatterDimension(Y);break;
default:Y={colDef:{field:R.realField},data:{}},Y.data[R.realField]=d.context.lookup[R.realField],R.productValue=GridHelper.valueGetterMeasure(Y),Y.value=R.productValue,R.productValueFormatted=GridHelper.valueFormatterMeasure(Y)}P.push(R)}});GridHelper.addContextMenu(d);d.api.updateRowData({update:P});GridHelper.addToggleUnitEvents(d)}}}}(),GridState=function(){var a=function(P){if(isTest)for(var R={},Y=$jscomp.makeIterator(P),ja=Y.next();!ja.done;R={$jscomp$loop$prop$c$262$719:R.$jscomp$loop$prop$c$262$719},
ja=Y.next())R.$jscomp$loop$prop$c$262$719=ja.value,ja=Object.keys(R.$jscomp$loop$prop$c$262$719).filter(function(ra){return!"colId hide aggFunc width pivotIndex pinned rowGroupIndex".split(" ").includes(ra)}),ja.length&&console.warn("columnState has unknownAttributes:",ja,R.$jscomp$loop$prop$c$262$719),ja=Object.keys(R.$jscomp$loop$prop$c$262$719).filter(function(ra){return function(ta){return["aggFunc","pivotIndex","rowGroupIndex"].includes(ta)&&null!==ra.$jscomp$loop$prop$c$262$719[ta]}}(R)),ja.length&&
console.warn("columnState has skippedAttributesNotNull:",ja,R.$jscomp$loop$prop$c$262$719);return P.map(function(ra){return{c:ra.colId,h:ra.hide?1:0,p:ra.pinned?ra.pinned.charAt(0):"",w:ra.width}})},b=function(P){return P[0].colId?P:P.map(function(R){return{colId:R.c,hide:1===R.h?!0:!1,pinned:"l"===R.p?"left":"r"===R.p?"right":null,width:R.w,aggFunc:null,pivotIndex:null,rowGroupIndex:null}})},d=function(P,R,Y,ja){Y=R=g(P,R,Y);R=[];Y=$jscomp.makeIterator(Y);for(var ra=Y.next();!ra.done;ra=Y.next())ra=
ra.value,P.columnApi.getColumn(ra.colId)&&R.push(ra);P=R;if(ja&&ja.length)for(R=P,P=[],R=$jscomp.makeIterator(R),Y=R.next();!Y.done;Y=R.next())Y=Y.value,ja.includes(Y.colId)&&P.push(Y);return R=n(P)},g=function(P,R,Y){var ja=P.columnApi.getAllColumns(),ra=[];if(Y){Y={};ja=$jscomp.makeIterator(ja);for(var ta=ja.next();!ta.done;Y={$jscomp$loop$prop$col$721:Y.$jscomp$loop$prop$col$721},ta=ja.next())Y.$jscomp$loop$prop$col$721=ta.value,R.find(function(ca){return function(sa){return sa.colId===ca.$jscomp$loop$prop$col$721.colId}}(Y))||
ra.push({colState:{colId:Y.$jscomp$loop$prop$col$721.colId,hide:!0}})}else ra=GridConfig.getNewColumns(P.context.pageId),"variation"===P.context.pageId&&ra.push({colState:{colId:"color"},insertAfterColId:"variationAttributes"},{colState:{colId:"size"},insertAfterColId:"color"},{colState:{colId:"edition"},insertAfterColId:"size"},{colState:{colId:"format"},insertAfterColId:"edition"});if(ra&&ra.length&&Array.prototype.findIndex){Y={};for(var pa in ra)Y.$jscomp$loop$prop$column$724=ra[pa],ja=-1<R.findIndex(function(ca){return function(sa){return sa.colId===
ca.$jscomp$loop$prop$column$724.colState.colId}}(Y)),ta=null!=P.columnApi.getColumn(Y.$jscomp$loop$prop$column$724.colState.colId),!ja&&ta&&(!1===Y.$jscomp$loop$prop$column$724.insertAfterColId?R.splice(0,0,Y.$jscomp$loop$prop$column$724.colState):(ja=R.findIndex(function(ca){return function(sa){return sa.colId===ca.$jscomp$loop$prop$column$724.insertAfterColId}}(Y)),-1<ja?R.splice(ja+1,0,Y.$jscomp$loop$prop$column$724.colState):R.push(Y.$jscomp$loop$prop$column$724.colState))),Y={$jscomp$loop$prop$column$724:Y.$jscomp$loop$prop$column$724}}return R},
n=function(P){if(Array.prototype.findIndex){var R=P.findIndex(function(Y){return"checkboxSelection"===Y.colId});-1<R&&(P[R].hide=!0)}return P},t=function(P){var R=h(),Y=showPopup("Load/save column presets",R.html,!0);R.onSubmit.done(function(ja){ja?("load"===ja.action&&m(P,ja.presetIdx),"save"===ja.action&&r(P,ja.presetIdx,ja.presetName),"import"===ja.action&&u(P,ja.input),settings.send().done(function(){Y.close();"import"===ja.action&&setTimeout(function(){t(P)},500)}).fail(showErrorPopup)):Y.close()})},
h=function(){var P=$.Deferred(),R=material.getButton("savePreset","Save",null,"floppy-o"),Y=material.getInput(!0,".{1,50}","presetName","Preset name","off","presetName","","",!0),ja=material.getInputFile("importInputFile","importInputFile","Choose preset *.json file",".json",!0,!0,"font-size:15px;width:100%;"),ra=material.getButton("importPreset","Import",null,"upload"),ta=T().map(function(f,C){return f?{name:f.name,idx:C}:null}).filter(function(f){return f}).sort(function(f,C){f=f&&f.name?f.name.toUpperCase():
"";C=C&&C.name?C.name.toUpperCase():"";return f<C?-1:f>C?1:0});R='<div style="width:500px;margin-bottom:10px;">\n                        <p>You can save up to 10 column presets which can be applied to any of our ASIN tables*.</p>\n                    </div>\n\t\t\t\t\t<form name="savePresetForm" id="savePresetForm">\n\t\t\t\t\t    <section id="presetSave" '+(10<=ta.length?' style="display:none"':"")+'>\n\t\t\t\t\t\t    <p class="mdc-typography--caption" style="margin-top:15px;">Save current column configuration as:</p>\n\t\t\t\t\t\t   \n\t\t\t\t\t\t    <div style="display:flex">\n                                <div style="width:340px;margin-top:-14px;margin-right:20px;">\n                                    '+
Y+'\n                                    <p id="presetName-validation-msg" class="mdc-text-field-helper-text"></p>\n                                </div>\n                                <div>'+R+'</div>\n\t\t                    </div>\n                        </section>\n                        <hr class="-purple">\n\t\t\t\t\t    <section id="presetTable">\n\t\t\t\t\t\t    <p class="mdc-typography--caption" style="margin:15px 0;">Load and apply one of the presets below:</p>\n                        </section>\n\t\t\t\t\t</form>\n\t\t\t\t\t<form name="importPresetForm" id="importPresetForm"'+
((10<=ta.length?' style="display:none"':"")+'>\n\t\t\t\t\t    <hr class="-purple">\n\t\t\t\t\t    <p class="mdc-typography--caption" style="margin:15px 0 0;">Import a previously exported/backed up column preset:</p>\n\t\t\t\t\t    <div style="display:flex">\n                            <div style="width:340px;margin:-14px 20px -20px 0;">\n                                '+ja+'\n                                <p id="importInputFile-validation-msg" class="mdc-text-field-helper-text"></p>\n                            </div>\n                            <div>'+
ra+'</div>\n                        </div>\n                        <p class="mdc-typography--caption" style="font-size:11px;margin-top:20px;">\n                            Note: If the preset name already exists, the existing preset will be overwritten.\n                        </p>\n\t\t\t\t\t</form>\n\t\t\t\t\t<hr class="-purple">\n                    <p class="mdc-typography--caption" style="font-size:11px;">\n                        * Product Finder, Product Viewer, Product Best Sellers or Seller Storefront\n                    </p>');
var pa=document.createElement("table");pa.className="table";Y=$jscomp.makeIterator(ta);for(ja=Y.next();!ja.done;ja=Y.next()){ja=ja.value;ra=document.createElement("tr");var ca=document.createElement("td");ca.style="width:340px;";ca.textContent=ja.name;var sa=document.createElement("td");sa.className="action";sa.innerHTML='<span data-action="load-'+ja.idx+'"><i class="fa fa-upload -green" title="Load"></i> Load</span>';var Z=document.createElement("td");Z.className="action";Z.innerHTML='<span data-action="export-'+
ja.idx+'"><i class="fa fa-hdd-o -orange" title="Export"></i> Export</span>';var N=document.createElement("td");N.className="action";N.innerHTML='<span data-action="delete-'+ja.idx+'"><i class="fa fa-trash -tomato"></i> Delete</span>';ra.append(ca,sa,Z,N);pa.appendChild(ra)}material.init("#savePresetForm");material.init("#importPresetForm");setTimeout(function(){document.getElementById("presetTable").appendChild(pa);var f=!1,C="",V=function(z,I){z=void 0===z?!0:z;$("#savePreset").prop("disabled",z||
10<=ta.length);f=!z;$("#presetName-validation-msg").html(I)};V(10<=ta.length);$("#presetName").on("input",function(){C=$(this).val().trim();1>C.length||50<C.length?V(!0,"The name must be between 1 and 50 characters long."):ta.some(function(z){return z.name===C})?V(!0,"The name is already taken."):V(!1,"")});$("#savePresetForm").on("submit",function(z){f&&P.resolve({action:"save",presetName:C});P.resolve();z.preventDefault()});$("#savePresetForm [data-action]").click(function(){var z=$jscomp.makeIterator($(this).data("action").split("-")),
I=z.next().value,K=z.next().value;"delete"===I?(D(K),ta=ta.filter(function(A){return A.idx!==Number(K)}),$(this).closest("tr").remove(),10>ta.length&&($("#presetSave").show(),V(10<=ta.length),$("#importPresetForm").show())):"export"===I?q(K):P.resolve({action:I,presetIdx:K})});var ba=$("#importInputFile"),w=$("#importInputFileTrigger"),O=null;ba.on("change",function(){for(var z=$jscomp.makeIterator(this.files),I=z.next();!I.done;I=z.next())I=I.value,O=null,"application/json"===I.type&&(O=I);$(w).prop("required",
!0);O&&($(w).val(O.name),$('label[for="importInputFile"]').addClass("mdc-floating-label--float-above"),$(w).parent().removeClass("mdc-text-field--invalid"))});$("#importPresetForm").on("submit",function(z){z.preventDefault();if(O){var I=new FileReader;I.onload=function(){var K=tryParseJSON(I.result);null!==K&&K.name&&K.columnState?P.resolve({action:"import",input:K}):($(w).val(""),$('label[for="importInputFile"]').removeClass("mdc-floating-label--float-above"),$(w).parent().addClass("mdc-text-field--invalid"),
$("#importInputFile-validation-msg").html("Invalid preset format. Only presets exported though this interface are supported."))};I.onerror=function(){P.resolve({action:"import",input:""})};I.readAsText(O)}})},0);return{onSubmit:P.promise(),html:R}},m=function(P,R){R=T()[R];R.columnState&&(R=b(R.columnState),R=d(P,R,!0,null),P.columnApi.setColumnState(R),GridState.saveColumnState(P),GridTools.init(P))},r=function(P,R,Y,ja){ja=ja||P.columnApi.getColumnState();P=T();R=R?R:P.findIndex(function(ra){return ra&&
ra.name===Y});Y=Y?Y:P[R].name;ja={name:Y,columnState:a(ja)};0<=R?P[R]=ja:P.push(ja);P=P.filter(function(ra){return ra});ha(P)},q=function(P){var R=T()[P],Y=document.createElement("a"),ja=new Blob([JSON.stringify(R)],{type:"text/plain"});Y.href=URL.createObjectURL(ja);Y.download=(toCamelCase(R.name.replace(/[|&;$%@"<>()+,]/g,"-"))||P)+".keepaPreset.json";Y.click()},u=function(P,R){if(R.columnState){var Y=b(R.columnState);Y=d(P,Y,!0,null);r(P,null,R.name,Y)}},D=function(P){var R=T();R[P]=null;ha(R)},
F=function(P){var R=P.context.pageId;"manage"===R&&P.context.config.activeViewMode&&P.context.config.activeViewMode===GridManage.viewModes.COMPACT&&(R+=P.context.config.activeViewMode);return R},M=function(P){var R={};try{(storage.gridVersion?JSON.parse(storage.gridVersion):null)===GridApi.version&&storage.gridState&&(R=JSON.parse(storage.gridState))}catch(Y){reportBug(Y,"[GridState][getGridStateFromStorage]")}"undefined"===typeof R[P]&&(R[P]={});return R},Q=function(P){try{storage.gridState=JSON.stringify(P),
storage.gridVersion=JSON.stringify(GridApi.version),settings.send()}catch(R){reportBug(R,"[GridState][setGridState]")}},T=function(){var P=[];try{storage.gridPresets&&(P=JSON.parse(storage.gridPresets))}catch(R){reportBug(R,"[GridState][getGridPresetsFromStorage]")}return P},ha=function(P){try{storage.gridPresets=JSON.stringify(P),settings.send()}catch(R){reportBug(R,"[GridState][setGridPresets]")}};return{saveColumnState:function(P){var R=F(P),Y=M(R);try{var ja=P.columnApi.getColumnState();ja&&ja.length||
reportBug("missing columnState","[GridState][saveColumnState]");Y[R].columnState=a(ja);Q(Y)}catch(ra){reportBug(ra,"[GridState][saveColumnState]")}},restoreColumnState:function(P,R){if(null!=P.api&&null!=P.columnApi&&P.context){var Y=F(P);try{var ja=M(Y);if(ja[Y]&&ja[Y].columnState){var ra=b(ja[Y].columnState);(ra=d(P,ra,!1,R))&&ra.length||reportBug("missing columnState after cleanup","[GridState][restoreColumnState]");P.columnApi.setColumnState(ra)}}catch(ta){reportBug(ta,"[GridState][restoreColumnState]")}}},
openColumnPresetPopup:t,saveSortModel:function(P){if(null!=P.api&&P.context){var R=F(P),Y=M(R);P=P.api.getSortModel();"undefined"===typeof P[0]||Y[R].sortModel&&0!==Y[R].sortModel.length&&P[0].colId===Y[R].sortModel[0].colId&&P[0].sort===Y[R].sortModel[0].sort||(Y[R].sortModel=P,Q(Y))}},restoreSortModel:function(P,R){if(null!=P.api&&null!=P.columnApi){var Y=F(P),ja=M(Y);ja[Y]&&ja[Y].sortModel&&ja[Y].sortModel.length&&(R=ja[Y].sortModel);P.api.setSortModel(R)}}}}(),GridConfig=function(){var a="AMAZON NEW USED SALES COLLECTIBLE REFURBISHED TRADE_IN NEW_FBA NEW_FBM_SHIPPING LIGHTNING_DEAL WAREHOUSE BUY_BOX_SHIPPING USED_NEW_SHIPPING USED_VERY_GOOD_SHIPPING USED_GOOD_SHIPPING USED_ACCEPTABLE_SHIPPING EBAY_NEW_SHIPPING EBAY_USED_SHIPPING RENT BUY_BOX_USED_SHIPPING PRIME_EXCL".split(" "),
b="SALES AMAZON NEW USED COLLECTIBLE REFURBISHED TRADE_IN NEW_FBA NEW_FBM_SHIPPING WAREHOUSE BUY_BOX_SHIPPING USED_NEW_SHIPPING USED_VERY_GOOD_SHIPPING USED_GOOD_SHIPPING USED_ACCEPTABLE_SHIPPING EBAY_NEW_SHIPPING EBAY_USED_SHIPPING RENT BUY_BOX_USED_SHIPPING PRIME_EXCL".split(" "),d={balham:24},g=function(){var v={default:{gridId:"grid",gridClass:"grid ag-theme-balham",gridWrapperId:"grid-wrapper",gridWrapperClass:"grid-wrapper",gridOptions:{autoSizePadding:16,columnTypes:{booleanColumn:{cellClass:"cell-icon",
cellRenderer:GridHelper.cellRendererBoolean,pinnedRowCellRenderer:GridHelper.cellRendererEmpty,filter:!1,suppressMenu:!0,suppressSizeToFit:!0},dateColumn:{cellRenderer:GridHelper.cellRendererDateKeepaTime,comparator:GridHelper.comparatorNumberNullLast,icons:GridHelper.getIconsSortNumeric(),pinnedRowCellRenderer:GridHelper.cellRendererEmpty,filter:!1,suppressMenu:!0,suppressSizeToFit:!0,valueGetter:GridHelper.valueGetterDateKeepaTime,width:94},dateAgoColumn:{cellRenderer:GridHelper.cellRendererDateAgo,
comparator:GridHelper.comparatorDateAgo,icons:GridHelper.getIconsSortNumeric(),pinnedRowCellRenderer:GridHelper.cellRendererEmpty,filter:!1,suppressMenu:!0,suppressSizeToFit:!0,width:100},deltaColumn:{cellClass:"cell-number",comparator:GridHelper.comparatorNumberNullLast,equals:function(){return!1},filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,width:88},deltaPercentColumn:{cellClass:"cell-number",comparator:GridHelper.comparatorNumberNullLast,equals:function(){return!1},
filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,width:98},graphColumn:{cellClass:["cell-overflow"],pinnedRowCellRenderer:GridHelper.cellRendererEmpty,filter:!1,suppressMenu:!0,suppressSizeToFit:!0,sortable:!1,width:200},manageVariationColumn:{cellRenderer:function(p){return p.data.isDeleted?"":""+GridHelper.defaultTextClamp(p.value,Math.max(2,p.data.multiLocaleProductsReduced.length))},valueGetter:function(p){return p.data.isDeleted?null:p.data.product[p.colDef.field]},
suppressSizeToFit:!1,minWidth:80,width:120},measureColumn:{cellClass:"cell-number",comparator:GridHelper.comparatorNumberNullLast,filter:"agNumberColumnFilter",hide:!0,icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterMeasure,valueGetter:GridHelper.valueGetterMeasure,width:100},numberColumn:{cellClass:"cell-number",comparator:GridHelper.comparatorNumberNullLast,equals:function(){return!1},filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),
valueFormatter:function(p){return null==p.value?"-":NumberUtil.format(p.value)}},numberSalesRankColumn:{cellRenderer:function(p){return'<span style="color:'+CsvType.SALES.color+';">'+p.valueFormatted+"</span>"},valueFormatter:function(p){return null==p.value?"-":CsvType.format("SALES",p.value)}},offerCountColumn:{cellClass:"cell-number",cellRenderer:GridHelper.cellRendererCsvType,comparator:GridHelper.comparatorNumberNullLast,equals:function(){return!1},filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),
suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterCsvType,valueGetter:GridHelper.valueGetterNoNegative,width:88},priceColumn:{cellClass:"cell-number",cellRenderer:GridHelper.cellRendererCsvType,comparator:GridHelper.comparatorNumberNullLast,equals:function(){return!1},filter:"agNumberColumnFilter",filterParams:{filterOptions:[{displayKey:"nullValue",displayName:la._666,hideFilterInput:!0,test:function(p,H){return null==H}},"equals","notEqual","lessThan","lessThanOrEqual","greaterThan",
"greaterThanOrEqual","inRange"],defaultOption:"equals",suppressAndOrCondition:!0},icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterPrice,valueGetter:GridHelper.valueGetterPrice,width:91},productCodeColumn:{cellClass:"cell-id cell-wrap",cellRenderer:GridHelper.cellRendererProductCodes,suppressSizeToFit:!0,sortable:!1,width:105},salesRankColumn:{cellClass:"cell-number",cellRenderer:GridHelper.cellRendererCsvType,comparator:GridHelper.comparatorNumberNullLast,
equals:function(){return!1},filter:"agNumberColumnFilter",filterParams:{filterOptions:[{displayKey:"nullValue",displayName:"No Sales Rank",hideFilterInput:!0,test:function(p,H){return null==H}},"equals","notEqual","lessThan","lessThanOrEqual","greaterThan","greaterThanOrEqual","inRange"],defaultOption:"equals",suppressAndOrCondition:!0},icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterCsvType,valueGetter:GridHelper.valueGetterSalesRank,width:91},
stockSingleColumn:{cellClass:"cell-number",cellRenderer:GridHelper.cellRendererStockSingle,comparator:GridHelper.comparatorNumberNullLast,filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterStockSingle,valueGetter:GridHelper.valueGetterStockSingle,width:76},trackingColumn:{cellClass:"cell-number",cellRenderer:GridHelper.cellRendererTracking,comparator:GridHelper.comparatorNumberArrayNullLast,getQuickFilterText:function(p){return""},
filter:"customNumberArrayColumnFilter",filterParams:{filterOptions:[{displayKey:"nullValue",displayName:"No value",hideFilterInput:!0,test:function(p,H){return Array.isArray(H)?H.some(function(L){return null==L}):null==H}},"equals","notEqual","lessThan","lessThanOrEqual","greaterThan","greaterThanOrEqual","inRange"],defaultOption:"lessThanOrEqual",suppressAndOrCondition:!0},icons:GridHelper.getIconsSortNumeric(),lockPinned:!0,minWidth:50,width:110,maxWidth:190,suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterTracking,
valueGetter:GridHelper.valueGetterTracking},hiddenColumn:{getQuickFilterText:function(p){return null},headerNameGroup:"[hidden]",hide:!0,lockVisible:!0,suppressToolPanel:!0}},colWidth:100,defaultColDef:{equals:GridHelper.valuesAreEqual,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},resizable:!0,sortable:!0},minColWidth:30,suppressMenuHide:!0,accentedSort:!0,enableRangeSelection:!1,rowDeselection:!0,rowSelection:"multiple",headerHeight:d.balham,rowData:null,rowModelType:"clientSide",
pagination:!0,paginationPageSize:100,icons:GridHelper.getIconsDefault(),rowHeight:d.balham,scrollbarWidth:isChrome?8:17,overlayLoadingTemplate:getLoaderBox(!0),overlayNoRowsTemplate:'<span class="grid-no-data">No data available</span>',debug:!1,rowBuffer:1,suppressContextMenu:!0,suppressExcelExport:!0,components:{customAutocompleteColumnFilter:GridFilter.AutocompleteFilter,customBooleanColumnFilter:GridFilter.BooleanFilter,customDynamicColumnFilter:GridFilter.DynamicFilter,customSingleChoiceColumnFilter:GridFilter.SingleChoiceFilter,
customSingleChoiceRadioColumnFilter:GridFilter.SingleChoiceRadioFilter},fullWidthCellRenderer:function(p){var H=document.createElement("div");H.className="ag-cell ag-cell-not-inline-editing ag-cell-no-focus ag-force-no-hover";H.innerHTML='<div class="row-free-access"><i class="fa fa-arrow-circle-o-right"></i>&ensp;'+p.data.message+"</div>";return H},isFullWidthCell:function(p){return"undefined"===typeof p.data?!1:p.data.freeAccessRow},localeTextFunc:function(p,H){p={applyFilter:'<i class="fa fa-caret-right"></i> Apply',
autosizeAllColumns:la._682,average:la._385,blanks:la._809,clearFilter:la._596,contains:la._597,copy:la._677,copyWithHeaders:la._678,ctrlC:la._679,endsWith:la._598,equals:la._599,filterOoo:la._177,first:la._610,greaterThan:la._601,greaterThanOrEqual:la._602,inRange:la._603,isNoneOf:"Is none of",isOneOf:"Is one of",last:la._611,lessThan:la._604,lessThanOrEqual:la._605,loadingOoo:la._600,next:la._612,noRowsToShow:la._606,notContains:la._607,notEqual:la._608,nullValue:la._666,of:la._613,page:la._292,
previous:la._614,selectAll:la._671,startsWith:la._609,to:la._615}[p];return"undefined"!==typeof p?p:H},postProcessPopup:function(p){if("columnMenu"===p.type){var H=p.ePopup;p=["casin","variation"].includes(p.column.gridOptionsWrapper.gridOptions.context.pageId)?1:2;H.style.top=d.balham*p-4+"px"}}}},asin:{gridId:"grid-asin",gridWrapperId:"grid-wrapper-asin",gridOptions:{pagination:!1,getRowClass:function(p){if("undefined"===typeof p.data)return null;var H=[];3===p.data.productType&&H.push("row-product-inaccessible");
return H.length?H.join(" "):null},getRowHeight:function(p){return p&&p.node.data.freeAccessRow?d.balham+8:3*(d.balham-8)+8}}},asinViewer:{},asinDeals:{gridId:"grid-asin-deals",gridWrapperId:"grid-wrapper-asin-deals",gridOptions:{rowModelType:"infinite",cacheBlockSize:150,cacheOverflowSize:0,infiniteInitialRowCount:0,maxConcurrentDatasourceRequests:1,paginationPageSize:150,rowHeight:3*(d.balham-8)+8}},asinFinder:{gridId:"grid-asin-finder",gridWrapperId:"grid-wrapper-asin-finder",gridOptions:{rowModelType:"infinite",
cacheBlockSize:100,cacheOverflowSize:0,infiniteInitialRowCount:0,maxBlocksInCache:1,maxConcurrentDatasourceRequests:1,rowHeight:3*(d.balham-8)+8}},buyBoxStatistics:{gridId:"grid-buy-box-statistics",gridWrapperId:"grid-wrapper-buy-box-statistics",gridOptions:{defaultColDef:{filter:!1,resizable:!0,suppressMenu:!0,suppressSizeToFit:!0,width:100},pagination:!1}},buyBoxUsedStatistics:{gridId:"grid-buy-box-used-statistics",gridWrapperId:"grid-wrapper-buy-box-used-statistics",gridOptions:{defaultColDef:{filter:!1,
resizable:!0,suppressMenu:!0,suppressSizeToFit:!0,width:100},pagination:!1}},casin:{gridId:"grid-casin",gridWrapperId:"grid-wrapper-casin",gridOptions:{defaultColDef:{equals:GridHelper.valuesAreEqual,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},resizable:!0,sortable:!0,sortingOrder:["asc","desc"]},minColWidth:20,autoGroupColumnDef:{cellClass:"cell-right",cellRenderer:function(p){return null==p.value?"":LocaleType.getContinentName(p.data.domainId)},headerName:"",suppressMenu:!0,
suppressSizeToFit:!0,width:110,minColWidth:110},groupDefaultExpanded:1,groupHideOpenParents:!0,defaultGroupSortComparator:function(p,H){p=Number(p.key);H=Number(H.key);return isFirefox?p-H:H-p},pagination:!1}},category:{gridId:"grid-category",gridWrapperId:"grid-wrapper-category",gridOptions:{autoGroupColumnDef:{cellClassRules:{"cell-group-no-children":function(p){return"undefined"===typeof p.data||null==p.data.children||0===p.data.children.length}},className:"cell-autogroup",field:"name1",headerName:"Category Tree",
suppressSizeToFit:!1,width:600},defaultColDef:{filter:!1,resizable:!1,sortable:!1,suppressMenu:!0,suppressSizeToFit:!0,width:100},rowModelType:"serverSide",cacheBlockSize:500,rowGroupPanelShow:"never",pagination:!1,suppressContextMenu:!1,getContextMenuItems:function(p){return["copy","copyWithHeaders"]},getRowNodeId:function(p){return p.catId},getChildCount:function(p){return"undefined"===typeof p||0===p.parent?-1:null===p.children||0===p.children.length?-1:p.children.length}}},lightningDeal:{gridId:"grid-lightning-deal",
gridWrapperId:"grid-wrapper-lightning-deal",gridOptions:{pagination:!1,suppressContextMenu:!1,getContextMenuItems:function(p){return["copy","copyWithHeaders"]},getRowHeight:function(p){return 2*(d.balham-8)+8},onGridSizeChanged:function(p){setTimeout(function(){p.api.sizeColumnsToFit()})}}},manage:{gridId:"grid-manage",gridWrapperId:"grid-wrapper-manage",gridOptions:{enableRangeSelection:!0,cacheQuickFilter:!0,groupDefaultExpanded:1,pagination:!0,paginationPageSize:1E4,suppressPaginationPanel:!0,
detailCellRendererParams:{},masterDetail:!0,suppressCopyRowsToClipboard:!0,suppressContextMenu:!1,components:{cellEditorAutocompleteChips:GridCellEditorComponents.AutocompleteChips,cellEditorMetaData:GridCellEditorComponents.MetaData,cellEditorThresholdBooleanValues:GridCellEditorComponents.ThresholdBooleanValues,cellEditorThresholdValues:GridCellEditorComponents.ThresholdValues,customNumberArrayColumnFilter:GridFilter.NumberArrayFilter,customResetHeader:GridComponents.CustomResetHeader},getContextMenuItems:function(p){if(null===
p.node)return[];var H=p.columnApi,L=p.node.data;return[{name:la._681,action:function(){var B="#!track/"+L.domainId+"-"+L.asin;iframe.isIframe?window.open(getBaseUrl()+B,"_blank").focus():window.open(B,"_self")},icon:'<i class="fa fa-bell-o"></i>',cssClasses:["menu-option-bold"]},"separator","copy","copyWithHeaders","separator","autoSizeAll",{name:la._680,action:function(){H.resetColumnState();p.api.sizeColumnsToFit();GridState.saveColumnState(p)}}]},getRowClass:function(p){if("undefined"===typeof p.data)return null;
var H=[];p.data.isDeleted&&H.push("row-deleted");p.context.config.activeViewMode!==GridManage.viewModes.COMPACT||p.data.multiLocaleProductsReduced.length||H.push("row-padding");return H.length?H.join(" "):null},getRowHeight:function(p){if(p.node.detail)return p.data.detailRowHeight;var H=1;if(p.data.multiLocaleProductsReduced.length){p=$jscomp.makeIterator(p.data.multiLocaleProductsReduced);for(var L=p.next();!L.done;L=p.next())H++}else p.context.config.activeViewMode===GridManage.viewModes.COMPACT&&
(H+=1);return H*(d.balham-2)+2},processCellForClipboard:GridHelper.processCellForClipboard,processHeaderForClipboard:GridHelper.processHeaderForClipboard,onFilterChanged:function(p){var H=0<Object.keys(p.api.getFilterModel()).length;p=null!=p.api.filterManager.quickFilter&&0<p.api.filterManager.quickFilter.length;H||p?$("#fab-reset").show():$("#fab-reset").hide();GridManage.removeDeletedRows(!0);GridManage.adjustGridHeight();GridManage.updateRowCount()},onGridReady:function(p){window.addEventListener("resize",
function(){setTimeout(function(){GridPage.resizeToViewPort(p.api.gridOptionsWrapper.gridOptions.context.config,!0);p.api.gridOptionsWrapper.gridOptions.context.config.maxHeight=$("#"+p.api.gridOptionsWrapper.gridOptions.context.gridWrapperId).height();p.api.sizeColumnsToFit();$("#grid-wrapper-lightning-deal").length&&$("#grid-wrapper-lightning-deal").width($("#grid-wrapper-manage").width()+"px")})})},onGridSizeChanged:function(p){setTimeout(function(){p.api.sizeColumnsToFit()})}}},manageDetail:{detailGridOptions:{columnDefs:[],
cacheQuickFilter:!0,headerHeight:0,overlayLoadingTemplate:'<div class="grid-loading-simple"></div>',suppressContextMenu:!0,components:{cellEditorImagesCsv:GridCellEditorComponents.ImagesCsv},getRowClass:function(p){return"undefined"===typeof p.data?null:p.data.isDeleted?"row-deleted":null},getRowHeight:function(p){return p.data.detailRowHeight},onGridReady:function(p){},onGridSizeChanged:function(p){setTimeout(function(){var H=Math.max(720,window.innerWidth-275),L=p.columnApi.getColumn("graphData").actualWidth;
H!=L&&(p.columnApi.setColumnWidth("graphData",H),graph.resizeGraphs(!0))})}},getDetailRowData:function(p){var H=p.data.detailRowData;H&&H.length?(p.data.isDeleted&&(H[0].isDeleted=!0),p.successCallback(H)):network.request({path:"product",asin:p.data.asin,domainId:p.data.detailDomainId,getTracking:!0,history:!0,maxAge:15,offerPages:0,refreshProduct:!1,type:"manage"}).done(function(L){if(null!=L&&null!=L.products&&1==L.products.length){L=GridHelper.prepareProductTrackingDetail(L.products[0]);var B=
GridManage.calculateDetailRowHeight(L),E=L.domainId===p.data.domainId?B:p.data.detailRowHeight;H.detailDomainId=p.data.detailDomainId;var U={};H.push({detailDomainId:p.data.detailDomainId,detailsPerDomain:(U[L.domainId]={asin:L.asin,domainId:L.domainId,imagesCSV:L.imagesCSV,title:L.title,lastUpdate:L.lastUpdate,lastEbayUpdate:L.lastEbayUpdate,lastPriceChange:L.lastPriceChange,graphData:{buyBoxSellerIdHistory:L.buyBoxSellerIdHistory,csv:L.csv,offers:L.offers,tracking:p.data.tracking},detailRowHeight:B},
U),wishLists:p.data.wishLists,conditionsMet:p.data.conditionsMet,detailRowHeight:E});p.data.detailRowData=H}p.successCallback(p.data.detailRowData)}).fail(showErrorPopup)}},offer:{gridId:"grid-offer",gridWrapperId:"grid-wrapper-offer",gridOptions:{defaultColDef:{filter:!1,suppressMenu:!0},pagination:!1,getRowHeight:function(p){var H=6;p&&p.node.rowPinned&&(H=2);return H*(d.balham-8)+8},getRowStyle:function(p){return p.data.isScam?{opacity:"0.4"}:null}}},productDetail:{gridId:"grid-product-detail",
gridWrapperId:"grid-wrapper-product-detail",gridOptions:{pagination:!1,domLayout:"autoHeight",components:{cellRendererAutoHeightRow:GridCellRendererComponents.AutoHeightRow},onFirstDataRendered:function(p){setTimeout(function(){p.api.forEachNode(function(H){H=p.api.getCellRendererInstances({rowNodes:[H],columns:["productValue"]});0<H.length&&H[0].updateRowHeight()})},0);iframe.isIframe&&setTimeout(addon,2)}}},productPrice:{gridId:"grid-product-price",gridWrapperId:"grid-wrapper-product-price",gridOptions:{pagination:!1,
domLayout:"autoHeight"}},seller:{gridId:"grid-seller",gridWrapperId:"grid-wrapper-seller",gridOptions:{getRowHeight:function(p){return p.node.data.freeAccessRow?d.balham+8:d.balham}}},sellerbrandstatistic:{gridId:"grid-sellerbrandstatistic",gridWrapperId:"grid-wrapper-sellerbrandstatistic",gridOptions:{defaultColDef:{filter:!1,resizable:!1,suppressMenu:!0,suppressSizeToFit:!0,width:100},pagination:!1}},sellercategorystatistic:{gridId:"grid-sellercategorystatistic",gridWrapperId:"grid-wrapper-sellercategorystatistic",
gridOptions:{defaultColDef:{filter:!1,resizable:!1,suppressMenu:!0,suppressSizeToFit:!0,width:100},pagination:!1}},search:{gridId:"grid-search",gridWrapperId:"grid-wrapper-search",gridOptions:{defaultColDef:{filter:!1,suppressMenu:!0},pagination:!1,getRowHeight:function(p){return 6*(d.balham-8)+8}}},variation:{gridId:"grid-variation",gridWrapperId:"grid-wrapper-variation",gridOptions:{pagination:!1,getRowHeight:function(p){return p&&p.node.data.freeAccessRow?d.balham+8:6*(d.balham-8)+8},onFilterChanged:function(p){GridTools.updateResults("variation",
p.api.getDisplayedRowCount())}}}};v.asinViewer=v.asin;return v},n=function(v,p,H){var L=g();L=$.extend(!0,L.default,L[v]);L.gridOptions.columnDefs=t(v,p,H);"manage"===v&&(GridManage.pageConfig.activeViewMode===GridManage.viewModes.COMPACT?L.gridOptions.masterDetail=!1:(L.gridOptions.detailCellRendererParams=n("manageDetail"),L.gridOptions.detailCellRendererParams.detailGridOptions.columnDefs=t("manageDetail")));return L},t=function(v,p,H){var L=[],B=[];switch(v){case "asin":case "asinViewer":B=h(v,
H);break;case "asinDeals":B=m(v,p);break;case "asinFinder":B=r(v);break;case "buyBoxStatistics":B=u();break;case "buyBoxUsedStatistics":B=u(!0);break;case "casin":B=D();break;case "category":B=F();break;case "lightningDeal":B=q();break;case "manage":B=M();break;case "manageDetail":B=Q();break;case "offer":B=T();break;case "productDetail":B=ha();break;case "productPrice":B=P();break;case "search":B=ra();break;case "seller":B=R();break;case "sellerbrandstatistic":B=Y();break;case "sellercategorystatistic":B=
ja();break;case "variation":B=ta()}var E="manage"===v?["filterMenuTab","columnsMenuTab"]:["filterMenuTab"];v={};for(var U in B)v.$jscomp$loop$prop$id$726=U,B[v.$jscomp$loop$prop$id$726].children?B[v.$jscomp$loop$prop$id$726].children.forEach(function(ma){return function(na,W){B[ma.$jscomp$loop$prop$id$726].children[W].menuTabs=!0===B[ma.$jscomp$loop$prop$id$726].children[W].suppressMenu?[]:E}}(v)):B[v.$jscomp$loop$prop$id$726].menuTabs=!0===B[v.$jscomp$loop$prop$id$726].suppressMenu?[]:E,v={$jscomp$loop$prop$id$726:v.$jscomp$loop$prop$id$726};
for(var ka in B)L.push(B[ka]);return L},h=function(v,p){v=v||"asin";var H=GridHelper.getCurrentUnits(),L={};L=rearrangeCsvTypes?{checkboxSelection:GridConfig.gridTypesWithCheckboxSelection.includes(v)?{headerName:"",field:"checkboxSelection",checkboxSelection:!0,headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,hide:!0,lockPinned:!0,pinned:"left",filter:!1,suppressMenu:!0,suppressSizeToFit:!0,sortable:!1,suppressToolPanel:!0,width:30}:{},domainId:{headerName:"",field:"domainId",cellClass:"cell-icon",
cellRenderer:GridHelper.cellRendererDomainId,filter:!1,suppressMenu:!0,resizable:!1,suppressSizeToFit:!0,sortable:!1,width:20},imagesCSV:{headerName:la._589,field:"imagesCSV",cellClass:"cell-image",cellRenderer:GridHelper.cellRendererImage,filter:!1,suppressMenu:!0,suppressSizeToFit:!0,sortable:!1,width:54},title:{headerName:la._590,field:"title",cellRenderer:GridHelper.cellRendererTitle,lockVisible:!0,minWidth:140,width:200},groupDescriptionFeatures:pa(),groupSalesRank:ca("SALES",v,p),groupReviews:GridHelperReviews.getColumnGroupReviews(),
dealFound:"asinDeals"===v?{headerName:"Deal found",field:"dealFound",type:["dateAgoColumn"]}:{},lastPriceChange:{headerName:"Last Price Change",field:"lastPriceChange",type:["dateAgoColumn"],width:114},lastUpdate:{headerName:"Last Update",field:"lastUpdate",type:["dateAgoColumn"],hide:!0,width:114},lastOffersUpdate:{headerName:"Last Offer Update",field:"lastOffersUpdate",type:["dateAgoColumn"],hide:!0,valueGetter:function(E){return"undefined"===typeof E.data?null:E.data.stats.lastOffersUpdate},width:114},
groupPriceBuyBoxShipping:ca("BUY_BOX_SHIPPING",v),buyBoxSellerIdHistory:{headerName:"Buy Box Seller",headerTooltip:"Seller of the Buy Box. (x%) = Rating of the displayed seller",field:"buyBoxSellerIdHistory",cellRenderer:GridHelper.cellRendererBuyBoxSellerId,filter:"agSetColumnFilter",filterParams:{cellHeight:22,suppressAndOrCondition:!0,suppressMiniFilter:!0,suppressRemoveEntries:!0},filterValueGetter:function(E){if("undefined"===typeof E.data||null==E.data.asin)return"-";var U=E.data.buyBoxSellerIdHistory;
if(null==U)return"-";if(!Array.isArray(U))return"3rd Party";if(0>=U.length||E.data.offersOutdated)return"-";U=getLast(U,CsvType.AMAZON);return SellerUtil.getLabel(U,E.data.domainId)},suppressSizeToFit:!0,valueGetter:GridHelper.valueGetterBuyBoxSellerId,width:110},buyBoxIsFBA:{headerName:"Buy Box: Is FBA",headerTooltip:"Whether or not the Buy Box is fulfilled by Amazon",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'<i class="fa fa-info"></i>')},field:"buyBoxIsFBA",type:["booleanColumn"],
valueGetter:GridHelper.valueGetterStats,width:135},buyBoxIsUnqualified:{headerName:"Buy Box: Unqualified",headerTooltip:"Whether or not a seller won the Buy Box. If there are only sellers with bad offers none qualifies for the Buy Box.",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'<i class="fa fa-info"></i>')},field:"buyBoxIsUnqualified",type:["booleanColumn"],valueGetter:GridHelper.valueGetterStats,width:135},groupPriceAmazon:ca("AMAZON",v),groupPriceNew:ca("NEW",v),
newPriceIsMAP:{headerName:""+la._907,headerTooltip:"Whether or not the lowest new price (either price type Amazon or New)<br>is restricted by MAP (Minimum Advertised Price). Use this to differentiate<br>out of stock vs. MAP restriction.",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'<i class="fa fa-info"></i>')},field:"newPriceIsMAP",type:["booleanColumn"],hide:!0,width:120},groupPriceNewFBA:ca("NEW_FBA",v),sellerIdsLowestFBA:K("FBA"),fbaFees:ba(),groupPriceNewFBMShipping:ca("NEW_FBM_SHIPPING",
v),sellerIdsLowestFBM:K("FBM"),groupPricePrimeExcl:ca("PRIME_EXCL",v),groupPriceLightningDeal:ca("LIGHTNING_DEAL",v),groupPriceBuyBoxUsedShipping:ca("BUY_BOX_USED_SHIPPING",v),buyBoxUsedSeller:CsvType.BUY_BOX_USED_SHIPPING.isEnabled?{headerName:"Buy Box Used Seller",headerTooltip:"Seller of the Used Buy Box. (x%) = Rating of the displayed seller",field:"buyBoxUsed.seller",cellRenderer:GridHelper.cellRendererBuyBoxUsedSeller,suppressSizeToFit:!0,width:110}:{},buyBoxUsedIsFBA:CsvType.BUY_BOX_USED_SHIPPING.isEnabled?
{headerName:"Buy Box Used: Is FBA",headerTooltip:"Whether or not the Used Buy Box is fulfilled by Amazon",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'<i class="fa fa-info"></i>')},field:"buyBoxUsed.isFBA",type:["booleanColumn"],width:145}:{},buyBoxUsedCondition:CsvType.BUY_BOX_USED_SHIPPING.isEnabled?{headerName:"Buy Box Used: Condition",field:"buyBoxUsed.condition",filter:"agSetColumnFilter",filterParams:{cellHeight:22,suppressAndOrCondition:!0,suppressMiniFilter:!0,
suppressRemoveEntries:!0,values:"asinFinder"===v?Object.keys(ConditionType.getBuyBoxUsedConditionMap()):null,valueMap:"asinFinder"===v?ConditionType.getBuyBoxUsedConditionMap():null},valueFormatter:function(E){return ConditionType.getBuyBoxUsedConditionMap()[E.value]},suppressSizeToFit:!0,width:145}:{},groupPriceUsed:ca("USED",v),groupPriceUsedNewShipping:ca("USED_NEW_SHIPPING",v),groupPriceUsedVeryGoodShipping:ca("USED_VERY_GOOD_SHIPPING",v),groupPriceUsedGoodShipping:ca("USED_GOOD_SHIPPING",v),
groupPriceUsedAcceptableShipping:ca("USED_ACCEPTABLE_SHIPPING",v),groupPriceWarehouse:ca("WAREHOUSE",v),groupPriceRefurbished:ca("REFURBISHED",v),groupPriceRefurbishedShipping:ca("REFURBISHED_SHIPPING",v),groupPriceCollectable:ca("COLLECTIBLE",v),groupPriceCollectibleNewShipping:ca("COLLECTIBLE_NEW_SHIPPING",v),groupPriceCollectibleVeryGoodShipping:ca("COLLECTIBLE_VERY_GOOD_SHIPPING",v),groupPriceCollectibleGoodShipping:ca("COLLECTIBLE_GOOD_SHIPPING",v),groupPriceCollectibleAcceptableShipping:ca("COLLECTIBLE_ACCEPTABLE_SHIPPING",
v),groupPriceListprice:ca("LISTPRICE",v),groupPriceTradeIn:ca("TRADE_IN",v),groupPriceRent:ca("RENT",v),groupPriceEbayNewShipping:ca("EBAY_NEW_SHIPPING",v),groupPriceEbayUsedShipping:ca("EBAY_USED_SHIPPING",v),groupOfferCountNew:N("COUNT_NEW",v),groupOfferSellerCountNew:{headerName:"Count of retrieved live offers",children:[w("FBA"),w("FBM")]},groupOfferCountUsed:N("COUNT_USED",v),groupOfferCountRefurbished:N("COUNT_REFURBISHED",v),groupOfferCountCollectible:N("COUNT_COLLECTIBLE",v),trackingSince:{headerName:"Tracking since",
field:"trackingSince",type:["dateColumn"]},listedSince:{headerName:"Listed since",field:"listedSince",type:["dateColumn"]},groupUrls:{headerName:"URL",children:[{headerName:"Amazon",headerNameGroup:"URL",field:"urlAmazon",cellRenderer:function(E){return"undefined"===typeof E.data?"":'<a href="'+E.value+'" target="_blank">'+E.value+"</a>"},hide:!0,suppressSizeToFit:!0,valueGetter:function(E){return"undefined"===typeof E.data?"":"https://www.amazon."+getTldByDomain(E.data.domainId)+"/dp/"+E.data.asin},
width:120},{headerName:"Keepa",headerNameGroup:"URL",field:"urlKeepa",cellRenderer:function(E){return"undefined"===typeof E.data?"":'<a href="'+E.value+'" target="_blank">'+E.value+"</a>"},hide:!0,suppressSizeToFit:!0,valueGetter:function(E){return"undefined"===typeof E.data?"":"https://keeepa.amztoolz.com/#!product/"+E.data.domainId+"-"+E.data.asin},width:120}]},groupCategories:{headerName:la._202,children:[{headerName:"Root",headerNameGroup:la._202,field:"rootCategory",cellRenderer:function(E){return"undefined"===
typeof E.data||E.data.rootCategory>invalidIfLargerCatId?"":GridHelperCategory.render(E.data.domainId,E.data.rootCategory,E.value,E)},suppressSizeToFit:!0,valueGetter:GridHelperCategory.valueGetterRootCategory,width:160},{headerName:"Sub",headerNameGroup:la._202,field:"categories",cellClass:"cell-wrap",cellRenderer:function(E){if("undefined"===typeof E.data)return"";var U=E.data.categories;if(null==U||"undefined"===typeof U)return"";var ka=E.data.domainId;if("finder"===E.context.pageId){var ma=document.createElement("div");
U.forEach(function(W,ya){var Aa=GridHelperCategory.getName(ka,W);W=GridHelperCategory.render(ka,W,Aa,E);ya<U.length-1?ma.appendChild(W).insertAdjacentHTML("beforeend"," / "):ma.appendChild(W)});return ma}var na="";U.forEach(function(W,ya){var Aa=GridHelperCategory.getName(ka,W);W=GridHelperCategory.render(ka,W,Aa,E);na+=(0<ya?" / ":"")+("object"===typeof W?W.outerHTML:W)});return na},suppressSizeToFit:!0,sortable:!1,valueGetter:GridHelperCategory.valueGetterCategories,width:240},{headerName:"Tree",
headerNameGroup:la._202,field:"categoryTree",cellClass:"cell-wrap",cellRenderer:function(E){if("undefined"===typeof E.data||"undefined"===typeof E.value||null===E.value)return"";var U=E.value,ka=document.createElement("div");U.forEach(function(ma,na){ma=GridHelperCategory.render(E.data.domainId,ma.catId,ma.name,E);na<U.length-1?ka.appendChild(ma).insertAdjacentHTML("beforeend"," &rsaquo; "):ka.appendChild(ma)});return ka.outerHTML},filter:!1,sortable:!1,suppressMenu:!0,suppressSizeToFit:!0,width:240},
{headerName:"Launchpad",headerNameGroup:la._202,field:"launchpad",type:["booleanColumn"],width:95}]},asin:{headerName:"ASIN",field:"asin",cellClass:"cell-id",lockVisible:!0,suppressSizeToFit:!0,width:86},groupProductCodes:{headerName:"Product Codes",children:[{headerName:"EAN",headerNameGroup:"Product Codes",field:"eanList",type:["productCodeColumn"]},{headerName:"UPC",headerNameGroup:"Product Codes",field:"upcList",type:["productCodeColumn"]},{headerName:"PartNumber",headerNameGroup:"Product Codes",
field:"partNumber",type:["productCodeColumn"]}]},parentAsin:{headerName:"Parent ASIN",field:"parentAsin",cellClass:"cell-id",suppressSizeToFit:!0,width:84},variationCSV:{headerName:"Variation ASINs",field:"variationCSV",cellClass:"cell-id cell-wrap",cellRenderer:GridHelper.cellRendererLinkedAsins,suppressSizeToFit:!0,width:102},frequentlyBoughtTogether:{headerName:"Freq. Bought Together",field:"frequentlyBoughtTogether",cellClass:"cell-id cell-wrap",cellRenderer:GridHelper.cellRendererLinkedAsins,
suppressSizeToFit:!0,width:133},manufacturer:{headerName:"Manufacturer",field:"manufacturer",cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTextFinder,suppressSizeToFit:!0,width:114},brand:{headerName:"Brand",field:"brand",cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTextFinder,suppressSizeToFit:!0,width:114},productGroup:{headerName:"Product Group",field:"productGroup",cellRenderer:GridHelper.cellRendererProductGroup,suppressSizeToFit:!0,width:114},model:{headerName:"Model",
field:"model",cellRenderer:function(E){return E.value?GridHelper.defaultTextClamp(E.value,3):""},suppressSizeToFit:!0,width:160},variationAttributes:{headerName:"Variation Attributes",field:"variationAttributes",cellClass:"cell-flex",cellRenderer:function(E){var U="",ka="";if(E=E.value){E=$jscomp.makeIterator(E);for(var ma=E.next();!ma.done;ma=E.next())ma=ma.value,U+="<i>"+ma.dimension+":</i>&emsp;<br>",ka+=ma.value+"<br>"}return"<span>"+U+"</span><span>"+ka+"</span>"},tooltipValueGetter:function(E){var U=
"";if(E=E.value){E=$jscomp.makeIterator(E);for(var ka=E.next();!ka.done;ka=E.next())ka=ka.value,U+=ka.dimension+": "+ka.value+"; "}return U.trim()},filter:!1,suppressMenu:!0,suppressSizeToFit:!0,sortable:!1,width:160},color:{headerName:la._591,field:"color",cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTextFinder,suppressSizeToFit:!0,width:114},size:{headerName:la._592,field:"size",cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTextFinder,suppressSizeToFit:!0,width:114},edition:{headerName:la._593,
field:"edition",cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTextFinder,suppressSizeToFit:!0,width:114},format:{headerName:la._595,field:"format",cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTextFinder,suppressSizeToFit:!0,width:114},author:{headerName:"Author",field:"author",cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTextFinder,suppressSizeToFit:!0,width:114},contributors:{headerName:"Contributors",field:"contributors",cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTwoDimensionalStringArray,
filter:!1,sortable:!1,suppressMenu:!0,suppressSizeToFit:!0,valueGetter:GridHelper.valueGetterTwoDimensionalStringArray,width:200},binding:{headerName:"Binding",field:"binding",cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTextFinder,suppressSizeToFit:!0,width:114},numberOfItems:{headerName:"Number of Items",field:"numberOfItems",cellClass:"cell-number",comparator:GridHelper.comparatorNumberNullLast,filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,
valueGetter:GridHelper.valueGetterNoNegative,width:120},numberOfPages:{headerName:"Number of Pages",field:"numberOfPages",cellClass:"cell-number",comparator:GridHelper.comparatorNumberNullLast,filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueGetter:GridHelper.valueGetterNoNegative,width:120},publicationDate:{headerName:"Publication Date",field:"publicationDate",cellRenderer:GridHelper.cellRendererDateYMD,comparator:GridHelper.comparatorNumberNullLast,
filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,width:129},releaseDate:{headerName:"Release Date",field:"releaseDate",cellRenderer:GridHelper.cellRendererDateYMD,comparator:GridHelper.comparatorNumberNullLast,filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,width:110},languages:{headerName:"Languages",field:"languages",cellRenderer:GridHelper.cellRendererTwoDimensionalStringArray,filter:!1,suppressMenu:!0,suppressSizeToFit:!0,
valueGetter:GridHelper.valueGetterTwoDimensionalStringArray,width:200},groupPackage:{headerName:"Package",children:[{headerName:"Dimension",headerNameGroup:"Package",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+H.measure+"</span>\u00b3)")},field:"packageDimension",cellClass:"cell-number",cellRenderer:GridHelper.cellRendererDimension,comparator:GridHelper.comparatorNumberNullLast,filter:"agNumberColumnFilter",hide:!1,icons:GridHelper.getIconsSortNumeric(),
suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterDimension,valueGetter:GridHelper.valueGetterDimension,width:135},{headerName:"Length",headerNameGroup:"Package",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+H.measure+"</span>)")},field:"packageLength",type:["measureColumn"]},{headerName:"Width",headerNameGroup:"Package",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+
H.measure+"</span>)")},field:"packageWidth",type:["measureColumn"]},{headerName:"Height",headerNameGroup:"Package",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+H.measure+"</span>)")},field:"packageHeight",type:["measureColumn"]},{headerName:"Weight",headerNameGroup:"Package",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+H.weight+"</span>)")},field:"packageWeight",
cellClass:"cell-number",comparator:GridHelper.comparatorNumberNullLast,filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterWeight,valueGetter:GridHelper.valueGetterWeight,width:97},{headerName:"Quantity",headerNameGroup:"Package",field:"packageQuantity",cellClass:"cell-number",comparator:GridHelper.comparatorNumberNullLast,filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueGetter:GridHelper.valueGetterNoNegative,
width:87}]},groupItem:{headerName:"Item",children:[{headerName:"Dimension",headerNameGroup:"Item",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+H.measure+"</span>\u00b3)")},field:"itemDimension",cellClass:"cell-number",cellRenderer:GridHelper.cellRendererDimension,comparator:GridHelper.comparatorNumberNullLast,filter:"agNumberColumnFilter",hide:!1,icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterDimension,
valueGetter:GridHelper.valueGetterDimension,width:135},{headerName:"Length",headerNameGroup:"Item",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+H.measure+"</span>)")},field:"itemLength",type:["measureColumn"]},{headerName:"Width",headerNameGroup:"Item",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+H.measure+"</span>)")},field:"itemWidth",type:["measureColumn"]},
{headerName:"Height",headerNameGroup:"Item",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+H.measure+"</span>)")},field:"itemHeight",type:["measureColumn"]},{headerName:"Weight",headerNameGroup:"Item",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+H.weight+"</span>)")},field:"itemWeight",cellClass:"cell-number",comparator:GridHelper.comparatorNumberNullLast,
filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterWeight,valueGetter:GridHelper.valueGetterWeight,width:97}]},isAdultProduct:{headerName:"Adult Product",field:"isAdultProduct",type:["booleanColumn"],width:95},isEligibleForTradeIn:{headerName:"Trade-In Eligible",field:"isEligibleForTradeIn",type:["booleanColumn"],width:107},isEligibleForSuperSaverShipping:{headerName:"Prime Eligible (Buy Box)",field:"isEligibleForSuperSaverShipping",
type:["booleanColumn"],width:94},isSNS:{headerName:"Subscribe and Save",field:"isSNS",type:["booleanColumn"],width:124},groupCouponOneTime:{headerName:"One Time Coupon",children:[{headerName:"Absolute",headerNameGroup:"One Time Coupon",field:"couponOneTimeAbsolute",cellRenderer:GridHelper.cellRendererMoney,suppressSizeToFit:!0,type:["numberColumn"],valueFormatter:GridHelper.valueFormatterMoney,valueGetter:GridHelper.valueGetterMoney,width:69},{headerName:"Percentage",headerNameGroup:"One Time Coupon",
field:"couponOneTimePercent",cellRenderer:GridHelper.cellRendererCouponPercentage,suppressSizeToFit:!0,type:["numberColumn"],valueFormatter:GridHelper.valueFormatterCouponPercentage,valueGetter:GridHelper.valueGetterCouponPercentage,width:81}]},groupCouponSNS:{headerName:"Subscribe and Save Coupon",children:[{headerName:"Percentage",headerNameGroup:"Subscribe and Save Coupon",field:"couponSNSPercent",cellRenderer:GridHelper.cellRendererCouponPercentage,suppressSizeToFit:!0,type:["numberColumn"],valueFormatter:GridHelper.valueFormatterCouponPercentage,
valueGetter:GridHelper.valueGetterCouponPercentage,width:81}]},promotions:{}}:{checkboxSelection:GridConfig.gridTypesWithCheckboxSelection.includes(v)?{headerName:"",field:"checkboxSelection",checkboxSelection:!0,headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,hide:!0,lockPinned:!0,pinned:"left",filter:!1,suppressMenu:!0,suppressSizeToFit:!0,sortable:!1,suppressToolPanel:!0,width:30}:{},domainId:{headerName:"",field:"domainId",cellClass:"cell-icon",cellRenderer:GridHelper.cellRendererDomainId,
filter:!1,suppressMenu:!0,resizable:!1,suppressSizeToFit:!0,sortable:!1,width:20},imagesCSV:{headerName:la._589,field:"imagesCSV",cellClass:"cell-image",cellRenderer:GridHelper.cellRendererImage,filter:!1,suppressMenu:!0,suppressSizeToFit:!0,sortable:!1,width:54},title:{headerName:la._590,field:"title",cellRenderer:GridHelper.cellRendererTitle,lockVisible:!0,minWidth:140,width:200},groupDescriptionFeatures:pa(),groupSalesRank:ca("SALES",v,p),groupReviews:GridHelperReviews.getColumnGroupReviews(),
dealFound:"asinDeals"===v?{headerName:"Deal found",field:"dealFound",type:["dateAgoColumn"]}:{},lastPriceChange:{headerName:"Last Price Change",field:"lastPriceChange",type:["dateAgoColumn"],width:114},lastUpdate:{headerName:"Last Update",field:"lastUpdate",type:["dateAgoColumn"],hide:!0,width:114},lastOffersUpdate:{headerName:"Last Offer Update",field:"lastOffersUpdate",type:["dateAgoColumn"],hide:!0,valueGetter:function(E){return"undefined"===typeof E.data?null:E.data.stats.lastOffersUpdate},width:114},
groupPriceAmazon:ca("AMAZON",v),newPriceIsMAP:{headerName:""+la._907,headerTooltip:"Whether or not the lowest new price (either price type Amazon or New)<br>is restricted by MAP (Minimum Advertised Price). Use this to differentiate<br>out of stock vs. MAP restriction.",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'<i class="fa fa-info"></i>')},field:"newPriceIsMAP",type:["booleanColumn"],hide:!0,width:120},groupPriceNew:ca("NEW",v),groupPriceNewFBA:ca("NEW_FBA",v),sellerIdsLowestFBA:K("FBA"),
fbaFees:ba(),groupPriceNewFBMShipping:ca("NEW_FBM_SHIPPING",v),sellerIdsLowestFBM:K("FBM"),groupPricePrimeExcl:ca("PRIME_EXCL",v),groupPriceUsed:ca("USED",v),groupPriceListprice:ca("LISTPRICE",v),groupPriceLightningDeal:ca("LIGHTNING_DEAL",v),groupPriceWarehouse:ca("WAREHOUSE",v),groupPriceCollectable:ca("COLLECTIBLE",v),groupPriceRefurbished:ca("REFURBISHED",v),groupOfferCountNew:N("COUNT_NEW",v),groupOfferSellerCountNew:{headerName:"Count of retrieved live offers",children:[w("FBA"),w("FBM")]},
groupOfferCountUsed:N("COUNT_USED",v),groupOfferCountRefurbished:N("COUNT_REFURBISHED",v),groupOfferCountCollectible:N("COUNT_COLLECTIBLE",v),groupPriceBuyBoxShipping:ca("BUY_BOX_SHIPPING",v),buyBoxSellerIdHistory:{headerName:"Buy Box Seller",headerTooltip:"Seller of the Buy Box. (x%) = Rating of the displayed seller",field:"buyBoxSellerIdHistory",cellRenderer:GridHelper.cellRendererBuyBoxSellerId,filter:"agSetColumnFilter",filterParams:{cellHeight:22,suppressAndOrCondition:!0,suppressMiniFilter:!0,
suppressRemoveEntries:!0},filterValueGetter:function(E){if("undefined"===typeof E.data||null==E.data.asin)return"-";var U=E.data.buyBoxSellerIdHistory;if(null==U)return"-";if(!Array.isArray(U))return"3rd Party";if(0>=U.length||E.data.offersOutdated)return"-";U=getLast(U,CsvType.AMAZON);return SellerUtil.getLabel(U,E.data.domainId)},suppressSizeToFit:!0,valueGetter:GridHelper.valueGetterBuyBoxSellerId,width:110},buyBoxIsFBA:{headerName:"Buy Box: Is FBA",headerTooltip:"Whether or not the buy box is fulfilled by Amazon",
headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'<i class="fa fa-info"></i>')},field:"buyBoxIsFBA",type:["booleanColumn"],valueGetter:GridHelper.valueGetterStats,width:135},buyBoxIsUnqualified:{headerName:"Buy Box: Unqualified",headerTooltip:"Whether or not a seller won the buy box. If there are only sellers with bad offers none qualifies for the buy box.",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'<i class="fa fa-info"></i>')},field:"buyBoxIsUnqualified",
type:["booleanColumn"],valueGetter:GridHelper.valueGetterStats,width:135},groupPriceBuyBoxUsedShipping:ca("BUY_BOX_USED_SHIPPING",v),groupPriceUsedNewShipping:ca("USED_NEW_SHIPPING",v),groupPriceUsedVeryGoodShipping:ca("USED_VERY_GOOD_SHIPPING",v),groupPriceUsedGoodShipping:ca("USED_GOOD_SHIPPING",v),groupPriceUsedAcceptableShipping:ca("USED_ACCEPTABLE_SHIPPING",v),groupPriceCollectibleNewShipping:ca("COLLECTIBLE_NEW_SHIPPING",v),groupPriceCollectibleVeryGoodShipping:ca("COLLECTIBLE_VERY_GOOD_SHIPPING",
v),groupPriceCollectibleGoodShipping:ca("COLLECTIBLE_GOOD_SHIPPING",v),groupPriceCollectibleAcceptableShipping:ca("COLLECTIBLE_ACCEPTABLE_SHIPPING",v),groupPriceRefurbishedShipping:ca("REFURBISHED_SHIPPING",v),groupPriceEbayNewShipping:ca("EBAY_NEW_SHIPPING",v),groupPriceEbayUsedShipping:ca("EBAY_USED_SHIPPING",v),groupPriceTradeIn:ca("TRADE_IN",v),groupPriceRent:ca("RENT",v),trackingSince:{headerName:"Tracking since",field:"trackingSince",type:["dateColumn"]},listedSince:{headerName:"Listed since",
field:"listedSince",type:["dateColumn"]},groupUrls:{headerName:"URL",children:[{headerName:"Amazon",headerNameGroup:"URL",field:"urlAmazon",cellRenderer:function(E){return"undefined"===typeof E.data?"":'<a href="'+E.value+'" target="_blank">'+E.value+"</a>"},hide:!0,suppressSizeToFit:!0,valueGetter:function(E){return"undefined"===typeof E.data?"":"https://www.amazon."+getTldByDomain(E.data.domainId)+"/dp/"+E.data.asin},width:120},{headerName:"Keepa",headerNameGroup:"URL",field:"urlKeepa",cellRenderer:function(E){return"undefined"===
typeof E.data?"":'<a href="'+E.value+'" target="_blank">'+E.value+"</a>"},hide:!0,suppressSizeToFit:!0,valueGetter:function(E){return"undefined"===typeof E.data?"":"https://keeepa.amztoolz.com/#!product/"+E.data.domainId+"-"+E.data.asin},width:120}]},groupCategories:{headerName:la._202,children:[{headerName:"Root",headerNameGroup:la._202,field:"rootCategory",cellRenderer:function(E){return"undefined"===typeof E.data||E.data.rootCategory>invalidIfLargerCatId?"":GridHelperCategory.render(E.data.domainId,E.data.rootCategory,
E.value,E)},suppressSizeToFit:!0,valueGetter:GridHelperCategory.valueGetterRootCategory,width:160},{headerName:"Sub",headerNameGroup:la._202,field:"categories",cellClass:"cell-wrap",cellRenderer:function(E){if("undefined"===typeof E.data)return"";var U=E.data.categories;if(null==U||"undefined"===typeof U)return"";var ka=E.data.domainId;if("finder"===E.context.pageId){var ma=document.createElement("div");U.forEach(function(W,ya){var Aa=GridHelperCategory.getName(ka,W);W=GridHelperCategory.render(ka,
W,Aa,E);ya<U.length-1?ma.appendChild(W).insertAdjacentHTML("beforeend"," / "):ma.appendChild(W)});return ma}var na="";U.forEach(function(W,ya){var Aa=GridHelperCategory.getName(ka,W);W=GridHelperCategory.render(ka,W,Aa,E);na+=(0<ya?" / ":"")+("object"===typeof W?W.outerHTML:W)});return na},suppressSizeToFit:!0,sortable:!1,valueGetter:GridHelperCategory.valueGetterCategories,width:240},{headerName:"Tree",headerNameGroup:la._202,field:"categoryTree",cellClass:"cell-wrap",cellRenderer:function(E){if("undefined"===
typeof E.data||"undefined"===typeof E.value||null===E.value)return"";var U=E.value,ka=document.createElement("div");U.forEach(function(ma,na){ma=GridHelperCategory.render(E.data.domainId,ma.catId,ma.name,E);na<U.length-1?ka.appendChild(ma).insertAdjacentHTML("beforeend"," &rsaquo; "):ka.appendChild(ma)});return ka.outerHTML},filter:!1,sortable:!1,suppressMenu:!0,suppressSizeToFit:!0,width:240},{headerName:"Launchpad",headerNameGroup:la._202,field:"launchpad",type:["booleanColumn"],width:95}]},asin:{headerName:"ASIN",
field:"asin",cellClass:"cell-id",lockVisible:!0,suppressSizeToFit:!0,width:86},groupProductCodes:{headerName:"Product Codes",children:[{headerName:"EAN",headerNameGroup:"Product Codes",field:"eanList",type:["productCodeColumn"]},{headerName:"UPC",headerNameGroup:"Product Codes",field:"upcList",type:["productCodeColumn"]},{headerName:"PartNumber",headerNameGroup:"Product Codes",field:"partNumber",type:["productCodeColumn"]}]},parentAsin:{headerName:"Parent ASIN",field:"parentAsin",cellClass:"cell-id",
suppressSizeToFit:!0,width:84},variationCSV:{headerName:"Variation ASINs",field:"variationCSV",cellClass:"cell-id cell-wrap",cellRenderer:GridHelper.cellRendererLinkedAsins,suppressSizeToFit:!0,width:102},frequentlyBoughtTogether:{headerName:"Freq. Bought Together",field:"frequentlyBoughtTogether",cellClass:"cell-id cell-wrap",cellRenderer:GridHelper.cellRendererLinkedAsins,suppressSizeToFit:!0,width:133},manufacturer:{headerName:"Manufacturer",field:"manufacturer",cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTextFinder,
suppressSizeToFit:!0,width:114},brand:{headerName:"Brand",field:"brand",cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTextFinder,suppressSizeToFit:!0,width:114},productGroup:{headerName:"Product Group",field:"productGroup",cellRenderer:GridHelper.cellRendererProductGroup,suppressSizeToFit:!0,width:114},model:{headerName:"Model",field:"model",cellRenderer:function(E){return E.value?GridHelper.defaultTextClamp(E.value,3):""},suppressSizeToFit:!0,width:160},variationAttributes:{headerName:"Variation Attributes",
field:"variationAttributes",cellClass:"cell-flex",cellRenderer:function(E){var U="",ka="";if(E=E.value){E=$jscomp.makeIterator(E);for(var ma=E.next();!ma.done;ma=E.next())ma=ma.value,U+="<i>"+ma.dimension+":</i>&emsp;<br>",ka+=ma.value+"<br>"}return"<span>"+U+"</span><span>"+ka+"</span>"},tooltipValueGetter:function(E){var U="";if(E=E.value){E=$jscomp.makeIterator(E);for(var ka=E.next();!ka.done;ka=E.next())ka=ka.value,U+=ka.dimension+": "+ka.value+"; "}return U.trim()},filter:!1,suppressMenu:!0,
suppressSizeToFit:!0,sortable:!1,width:160},color:{headerName:la._591,field:"color",cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTextFinder,suppressSizeToFit:!0,width:114},size:{headerName:la._592,field:"size",cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTextFinder,suppressSizeToFit:!0,width:114},edition:{headerName:la._593,field:"edition",cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTextFinder,suppressSizeToFit:!0,width:114},format:{headerName:la._595,field:"format",
cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTextFinder,suppressSizeToFit:!0,width:114},author:{headerName:"Author",field:"author",cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTextFinder,suppressSizeToFit:!0,width:114},contributors:{headerName:"Contributors",field:"contributors",cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTwoDimensionalStringArray,filter:!1,sortable:!1,suppressMenu:!0,suppressSizeToFit:!0,valueGetter:GridHelper.valueGetterTwoDimensionalStringArray,
width:200},binding:{headerName:"Binding",field:"binding",cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTextFinder,suppressSizeToFit:!0,width:114},numberOfItems:{headerName:"Number of Items",field:"numberOfItems",cellClass:"cell-number",comparator:GridHelper.comparatorNumberNullLast,filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueGetter:GridHelper.valueGetterNoNegative,width:120},numberOfPages:{headerName:"Number of Pages",field:"numberOfPages",
cellClass:"cell-number",comparator:GridHelper.comparatorNumberNullLast,filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueGetter:GridHelper.valueGetterNoNegative,width:120},publicationDate:{headerName:"Publication Date",field:"publicationDate",cellRenderer:GridHelper.cellRendererDateYMD,comparator:GridHelper.comparatorNumberNullLast,filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,width:129},releaseDate:{headerName:"Release Date",
field:"releaseDate",cellRenderer:GridHelper.cellRendererDateYMD,comparator:GridHelper.comparatorNumberNullLast,filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,width:110},languages:{headerName:"Languages",field:"languages",cellRenderer:GridHelper.cellRendererTwoDimensionalStringArray,filter:!1,suppressMenu:!0,suppressSizeToFit:!0,valueGetter:GridHelper.valueGetterTwoDimensionalStringArray,width:200},groupPackage:{headerName:"Package",children:[{headerName:"Dimension",
headerNameGroup:"Package",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+H.measure+"</span>\u00b3)")},field:"packageDimension",cellClass:"cell-number",cellRenderer:GridHelper.cellRendererDimension,comparator:GridHelper.comparatorNumberNullLast,filter:"agNumberColumnFilter",hide:!1,icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterDimension,valueGetter:GridHelper.valueGetterDimension,
width:135},{headerName:"Length",headerNameGroup:"Package",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+H.measure+"</span>)")},field:"packageLength",type:["measureColumn"]},{headerName:"Width",headerNameGroup:"Package",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+H.measure+"</span>)")},field:"packageWidth",type:["measureColumn"]},{headerName:"Height",
headerNameGroup:"Package",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+H.measure+"</span>)")},field:"packageHeight",type:["measureColumn"]},{headerName:"Weight",headerNameGroup:"Package",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+H.weight+"</span>)")},field:"packageWeight",cellClass:"cell-number",comparator:GridHelper.comparatorNumberNullLast,
filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterWeight,valueGetter:GridHelper.valueGetterWeight,width:97},{headerName:"Quantity",headerNameGroup:"Package",field:"packageQuantity",cellClass:"cell-number",comparator:GridHelper.comparatorNumberNullLast,filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueGetter:GridHelper.valueGetterNoNegative,width:87}]},groupItem:{headerName:"Item",
children:[{headerName:"Dimension",headerNameGroup:"Item",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+H.measure+"</span>\u00b3)")},field:"itemDimension",cellClass:"cell-number",cellRenderer:GridHelper.cellRendererDimension,comparator:GridHelper.comparatorNumberNullLast,filter:"agNumberColumnFilter",hide:!1,icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterDimension,valueGetter:GridHelper.valueGetterDimension,
width:135},{headerName:"Length",headerNameGroup:"Item",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+H.measure+"</span>)")},field:"itemLength",type:["measureColumn"]},{headerName:"Width",headerNameGroup:"Item",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+H.measure+"</span>)")},field:"itemWidth",type:["measureColumn"]},{headerName:"Height",headerNameGroup:"Item",
headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+H.measure+"</span>)")},field:"itemHeight",type:["measureColumn"]},{headerName:"Weight",headerNameGroup:"Item",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'(<span class="toggle-unit" title="Toggle unit">'+H.weight+"</span>)")},field:"itemWeight",cellClass:"cell-number",comparator:GridHelper.comparatorNumberNullLast,filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),
suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterWeight,valueGetter:GridHelper.valueGetterWeight,width:97}]},isAdultProduct:{headerName:"Adult Product",field:"isAdultProduct",type:["booleanColumn"],width:95},isEligibleForTradeIn:{headerName:"Trade-In Eligible",field:"isEligibleForTradeIn",type:["booleanColumn"],width:107},isEligibleForSuperSaverShipping:{headerName:"Prime Eligible (Buy Box)",field:"isEligibleForSuperSaverShipping",type:["booleanColumn"],width:94},isSNS:{headerName:"Subscribe and Save",
field:"isSNS",type:["booleanColumn"],width:124},groupCouponOneTime:{headerName:"One Time Coupon",children:[{headerName:"Absolute",headerNameGroup:"One Time Coupon",field:"couponOneTimeAbsolute",cellRenderer:GridHelper.cellRendererMoney,suppressSizeToFit:!0,type:["numberColumn"],valueFormatter:GridHelper.valueFormatterMoney,valueGetter:GridHelper.valueGetterMoney,width:69},{headerName:"Percentage",headerNameGroup:"One Time Coupon",field:"couponOneTimePercent",cellRenderer:GridHelper.cellRendererCouponPercentage,
suppressSizeToFit:!0,type:["numberColumn"],valueFormatter:GridHelper.valueFormatterCouponPercentage,valueGetter:GridHelper.valueGetterCouponPercentage,width:81}]},groupCouponSNS:{headerName:"Subscribe and Save Coupon",children:[{headerName:"Percentage",headerNameGroup:"Subscribe and Save Coupon",field:"couponSNSPercent",cellRenderer:GridHelper.cellRendererCouponPercentage,suppressSizeToFit:!0,type:["numberColumn"],valueFormatter:GridHelper.valueFormatterCouponPercentage,valueGetter:GridHelper.valueGetterCouponPercentage,
width:81}]},promotions:{}};"undefined"!==typeof L.checkboxSelection.field&&["asinDeals","asinFinder"].includes(v)&&(L.checkboxSelection.headerCheckboxSelection=!1);v={};for(var B in L)L[B].children?(v.$jscomp$loop$prop$keepChildren$728=[],L[B].children.forEach(function(E){return function(U,ka){0<Object.keys(U).length&&E.$jscomp$loop$prop$keepChildren$728.push(U)}}(v)),L[B].children=v.$jscomp$loop$prop$keepChildren$728):0===Object.keys(L[B]).length&&delete L[B],v={$jscomp$loop$prop$keepChildren$728:v.$jscomp$loop$prop$keepChildren$728};
return L},m=function(v,p){var H=h(v);v={};for(var L in H)v.$jscomp$loop$prop$id$730=L,H[v.$jscomp$loop$prop$id$730].children?H[v.$jscomp$loop$prop$id$730].children.forEach(function(B){return function(E,U){H[B.$jscomp$loop$prop$id$730].children[U]=J(E,p)}}(v)):H[v.$jscomp$loop$prop$id$730]=J(H[v.$jscomp$loop$prop$id$730],p),v={$jscomp$loop$prop$id$730:v.$jscomp$loop$prop$id$730};return H},r=function(v){var p=h(v);p.groupHidden={headerName:"[hidden]",children:[]};a.forEach(function(L){"undefined"!==
typeof CsvType[L]&&p.groupHidden.children.push({headerName:CsvType.getName(CsvType[L].index)+": Lowest ever",field:L+"_isLowest",filter:"customBooleanColumnFilter",filterParams:{applyButton:!0,newRowsAction:"keep",isCheckbox:!0,suppressAndOrCondition:!0},type:["hiddenColumn"]})});b.forEach(function(L){p.groupHidden.children.push({headerName:CsvType.getName(CsvType[L].index)+": Out of stock",field:L+"_outOfStock",filter:"customBooleanColumnFilter",filterParams:{applyButton:!0,newRowsAction:"keep",
isCheckbox:!0,suppressAndOrCondition:!0},type:["hiddenColumn"]})});p.groupHidden.children.push({field:"productType",headerName:"Product Type",filter:"agSetColumnFilter",filterParams:{values:[0,1],valueMap:{0:"Physical Product",1:"Digital Product"},suppressAndOrCondition:!0,suppressMiniFilter:!0,suppressRemoveEntries:!0},type:["hiddenColumn"]});p.groupHidden.children.push({field:"hasParentASIN",headerName:"Variations",filter:"customBooleanColumnFilter",filterParams:{applyButton:!0,newRowsAction:"keep",
isCheckbox:!1,suppressAndOrCondition:!0},type:["hiddenColumn"]});p.groupHidden.children.push({field:"singleVariation",headerName:"Show only one variation per product",filter:"customBooleanColumnFilter",filterParams:{applyButton:!0,newRowsAction:"keep",isCheckbox:!0,suppressAndOrCondition:!0},type:["hiddenColumn"]});p.groupHidden.children.push({headerName:"Seller IDs",field:"sellerIds",filter:"agTextColumnFilter",filterParams:{applyButton:!0,caseSensitive:!0,defaultOption:"isOneOf",filterOptions:["isOneOf"],
newRowsAction:"keep",suppressAndOrCondition:!0},type:["hiddenColumn"]});p.groupHidden.children.push({headerName:"Allow products with possibly outdated price information to be included",field:"allowOutdatedOfferData",filter:"customBooleanColumnFilter",filterParams:{applyButton:!0,newRowsAction:"keep",isCheckbox:!0,suppressAndOrCondition:!0},type:["hiddenColumn"]});p.groupHidden.children.push({headerName:"Exclude sub categories",field:"categories_exclude",filter:"customAutocompleteColumnFilter",filterParams:{applyButton:!0,
caseSensitive:!0,filterOptions:["isNoneOf"],newRowsAction:"keep",suppressAndOrCondition:!0},type:["hiddenColumn"]});enableSubcategorySalesRankFilter&&(p.groupHidden.children.push({headerName:"Current",headerNameGroup:"Sales Rank # - Subcategory",field:"salesRankReference_current",filter:"agNumberColumnFilter",filterParams:{applyButton:!0,defaultOption:"lessThanOrEqual",filterOptions:["lessThanOrEqual","greaterThanOrEqual","inRange"],newRowsAction:"keep",suppressAndOrCondition:!0},type:["hiddenColumn"]}),
p.groupHidden.children.push({headerName:"Sales Rank Subcategory",headerNameGroup:"Sales Rank # - Subcategory",field:"salesRankReference",filter:"customAutocompleteColumnFilter",filterParams:{applyButton:!0,caseSensitive:!0,defaultOption:"equals",filterOptions:[{displayKey:"equals",displayName:"equals",test:!0}],newRowsAction:"keep",suppressAndOrCondition:!0},type:["hiddenColumn"]}));v={};for(var H in p)v.$jscomp$loop$prop$id$732=H,p[v.$jscomp$loop$prop$id$732].children?p[v.$jscomp$loop$prop$id$732].children.forEach(function(L){return function(B,
E){p[L.$jscomp$loop$prop$id$732].children[E]=S(B)}}(v)):p[v.$jscomp$loop$prop$id$732]=S(p[v.$jscomp$loop$prop$id$732]),v={$jscomp$loop$prop$id$732:v.$jscomp$loop$prop$id$732};return p},q=function(){return{domainId:{headerName:"",field:"domainId",cellClass:"cell-icon",cellRenderer:GridHelper.cellRendererDomainId,icons:GridHelper.getIconsSortNumeric(),filter:!1,suppressMenu:!0,suppressSizeToFit:!0,suppressToolPanel:!0,width:40},imagesCSV:{headerName:" ",field:"imagesCSV",cellClass:"cell-image",cellRenderer:GridHelper.cellRendererImage,
cellRendererParams:{imageSize:35},filter:!1,suppressMenu:!0,suppressSizeToFit:!0,sortable:!1,width:39},title:{headerName:la._590,field:"title",cellRenderer:function(v){return'<a href="#!product/'+v.data.domainId+"-"+v.data.asin+'">'+GridHelper.defaultTextClamp(v.value,2)+"</a>"},filter:!1,suppressMenu:!0,minWidth:200},LIGHTNING_DEAL_current:{headerName:CsvType.getName(CsvType.LIGHTNING_DEAL.index)+" - "+la._344,headerComponentParams:{template:GridHelper.getHeaderComponentTemplate('<i class="fa fa-circle" style="font-size: 7px;transform: translateY(-1px);color:'+
CsvType.getObject(CsvType.LIGHTNING_DEAL.index).color+'" ></i> ',"")},field:"LIGHTNING_DEAL_current",cellClass:"cell-number cell-number-bold",type:["priceColumn"],filter:!1,suppressMenu:!0,width:153},LIGHTNING_DEAL_start:{headerName:la._648,field:"LIGHTNING_DEAL_start",type:["dateColumn"],cellRenderer:GridHelper.cellRendererDateTimeKeepaTime,width:104,sort:"asc"},LIGHTNING_DEAL_last:{headerName:la._649+" "+la._650,field:"LIGHTNING_DEAL_last",type:["priceColumn"],filter:!1,suppressMenu:!0,width:185},
LIGHTNING_DEAL_lastStart:{headerName:la._649,field:"LIGHTNING_DEAL_lastStart",type:["dateColumn"],cellRenderer:GridHelper.cellRendererDateAgo,width:118}}},u=function(v){v=void 0===v?!1:v;var p={template:GridHelper.getHeaderComponentTemplate("",'<i class="fa fa-info"></i>')};p={percentageWon:{headerName:"% won",headerTooltip:"Percentage the seller won the Buy Box"+(v?" Used":""),headerComponentParams:p,field:"percentageWon",cellClass:"cell-number cell-number-last",comparator:GridHelper.comparatorNumberNullLast,
icons:GridHelper.getIconsSortNumeric(),sort:"desc",valueFormatter:function(H){return 0>=H.value?"-":1>H.value?"<1%":parseInt(Math.round(H.value))+"%"},maxWidth:120,width:120},avgPrice:{headerName:"Avg. price",headerTooltip:"Average price of the Buy Box"+(v?" Used ":"")+" offer of this seller",headerComponentParams:p,field:"avgPrice",cellClass:"cell-number cell-number-last",comparator:GridHelper.comparatorNumberNullLast,icons:GridHelper.getIconsSortNumeric(),valueFormatter:GridHelper.valueFormatterPrice,
maxWidth:120,width:120},avgOfferCount:{headerName:"Avg. "+(v?"Used":"New")+" Offer Count",headerTooltip:"Average "+(v?"Used":"New")+" Offer Count during the time the seller held the Buy Box"+(v?" Used":""),headerComponentParams:p,field:"avgOfferCount",cellClass:"cell-number cell-number-last",comparator:GridHelper.comparatorNumberNullLast,icons:GridHelper.getIconsSortNumeric(),valueFormatter:function(H){return 0<=H.value?H.value:"-"},width:140},stock:v?{}:{headerName:la._632,field:"stock",type:["stockSingleColumn"]},
groupSeller:{headerName:la._554,children:[{headerName:"Name",headerNameGroup:la._554,field:"sellerName",cellRenderer:function(H){return SellerUtil.getHtml(H.data.sellerId,H.data.domainId,H.value)},suppressSizeToFit:!1,minWidth:140,width:140},{headerName:"FBA",headerNameGroup:la._554,field:"isFBA",type:["booleanColumn"],width:54},{headerName:la._440,headerNameGroup:la._554,field:"currentRating",cellClass:"cell-number",cellRenderer:GridHelper.cellRendererRating,comparator:GridHelper.comparatorNumberNullLast,
icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterRatingPercentage,width:56},{headerName:la._441,headerNameGroup:la._554,field:"currentRatingCount",cellClass:"cell-number",cellRenderer:GridHelper.cellRendererRating,comparator:GridHelper.comparatorNumberNullLast,icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterRatingCount,width:92}]},lastSeen:{headerName:"Last won",headerTooltip:"Last time the seller won the Buy Box"+
(v?" Used":""),headerComponentParams:p,field:"lastSeen",type:["dateColumn"],cellRenderer:GridHelper.cellRendererDateTimeKeepaTime,width:120},lastSeenAgo:{headerName:"Last won (ago)",headerTooltip:"How long ago the seller won the Buy Box"+(v?" Used":""),headerComponentParams:p,field:"lastSeen",colId:"lastSeenAgo",type:["dateAgoColumn"]}};(!0===disableStockFeatures||v)&&delete p.stock;return p},D=function(){var v=lastSubUrl.split("-")[0],p=function(L){if(graphIsRestricted(v,CsvType[L].index)||!CsvType[L].isEnabled)return{};
var B="BUY_BOX_SHIPPING"===L?100:"BUY_BOX_USED_SHIPPING"===L?115:70;return{headerName:CsvType.getName(CsvType[L].index),headerTooltip:CsvType.getName(CsvType[L].index),headerComponentParams:{template:GridHelper.getHeaderComponentTemplate('<i class="fa fa-circle" style="font-size: 7px;transform: translateY(-1px);color:'+CsvType.getObject(CsvType[L].index).color+'" ></i> ',"")},field:L+"_current",type:["priceColumn"],cellClass:function(E){return E.data&&E.data[L+"_isLowest"]?"cell-number cell-highlight":
"cell-number"},suppressSizeToFit:!1,minWidth:B}};p={continentId:{headerName:"",field:"continentId",hide:!0,rowGroup:!0,sort:"asc"},domainId:{headerName:"",field:"domainId",cellClass:"cell-icon",cellRenderer:function(L){return'<img title=".'+getTldByDomain(L.value)+'" src="'+flags[L.value]+'" style="margin-top:3px;">'},filter:!1,suppressMenu:!0,resizable:!1,suppressSizeToFit:!1,sortable:!1,width:30},BUY_BOX_SHIPPING:p("BUY_BOX_SHIPPING"),AMAZON_current:p("AMAZON"),NEW_current:p("NEW"),BUY_BOX_USED_SHIPPING:p("BUY_BOX_USED_SHIPPING"),
USED_current:p("USED"),linkAmazon:{headerName:"",field:"linkAmazon",cellClass:"cell-icon",cellRenderer:function(L){return L.value?'<span style="display:inline-block;padding-top:1px;"><a class="gridExternalAmazon" href="'+L.value+'" target="_blank" style><i class="fa fa-amazon"></i></a></span>':""},filter:!1,sortable:!1,suppressMenu:!0,valueGetter:function(L){return getAmazonRedirectByDomain(L.data.domainId,L.data.asin)},tooltipValueGetter:function(L){return la._99+" Amazon"},suppressSizeToFit:!0,
width:20},linkReviews:{headerName:"",field:"linkReviews",cellClass:"cell-icon cell-opaque",cellRenderer:function(L){return L.value?'<a href="'+L.value+'" target="_blank" style><i class="fa fa-star"></i></a>':""},filter:!1,sortable:!1,suppressMenu:!0,valueGetter:function(L){return 0<L.data.COUNT_REVIEWS_current?"http://www.amazon."+getTldByDomain(L.data.domainId)+"/product-reviews/"+L.data.asin:""},tooltipValueGetter:function(L){return 0<L.data.COUNT_REVIEWS_current?la._939:null},suppressSizeToFit:!0,
width:20},linkShipping:{headerName:"",field:"linkShipping",cellClass:"cell-icon cell-opaque",cellRenderer:function(L){return L.value?'<a href="'+L.value+'" target="_blank" style><i class="fa fa-truck fa-flip-horizontal"></i></a>':""},filter:!1,sortable:!1,suppressMenu:!0,valueGetter:function(L){return LocaleType.getShippingInfoLink(L.data.domainId)},tooltipValueGetter:function(L){return LocaleType.getShippingInfoLink(L.data.domainId)?la._314:null},suppressSizeToFit:!0,width:20}};for(var H in p)0===
Object.keys(p[H]).length&&delete p[H];return p},F=function(){for(var v={contextFreeName:{headerName:"Context free name",field:"contextFreeName",cellRenderer:function(L){return'<span style="color:#999;">'+GridHelper.defaultTextClamp(L.value,1)+"</span>"},width:200},catId:{headerName:"Category ID",field:"catId",cellClass:"cell-number"},links:{headerName:" ",field:"links",cellRenderer:function(L){if("undefined"===typeof L.data)return"";var B=L.data.parent,E={};B={f:(E[0===B?"rootCategory":"categories"]=
{filter:0===B?L.data.catId:L.data.catId+""},E),s:null,t:"g"};B=encodeURIComponent(JSON.stringify(B));E=getBaseUrl()+"#!finder/"+B;B=document.createElement("a");B.className="gridFinder";B.href=E;B.innerHTML='&ensp;<i class="fa fa-search"></i>';B.title='Search for "'+L.data.name1.replace(/"/g,"&quot;")+'" in our Product Finder';0===L.data.productCount&&(B.style.visibility="hidden");E=document.createElement("a");E.className="gridBestseller";E.href=getBaseUrl()+"#!bestseller/"+L.data.domainId+"-"+L.data.catId;
E.innerHTML='&ensp;<i class="fa fa-hashtag"></i>';E.title="Show Best Sellers List";0===L.data.productCount&&(E.style.visibility="hidden");var U=document.createElement("a");U.className="gridExternalAmazon";U.href="https://www.amazon."+getTldByDomain(L.data.domainId)+"/b/?node="+L.data.catId;U.innerHTML='&ensp;<i class="fa fa-amazon"></i>';U.target="_blank";U.title=la._99+" Amazon";L=document.createElement("span");L.appendChild(B);L.appendChild(E);L.appendChild(U);return L},width:70},productCount:{headerName:"Number of products",
headerTooltip:"Estimate, as the value is from the Keepa product database and not retrieved from Amazon",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'<i class="fa fa-info"></i>')},field:"productCount",cellClass:"cell-number cell-number-last",valueFormatter:function(L){return null==L.value?"-":NumberUtil.format(L.value)},width:135}},p=1;p<=GridCategoryTree.depth;p++){var H="name"+p;v[H]={field:H,rowGroup:!0,hide:!0}}return v},M=function(){var v=GridManage.pageConfig.activeViewMode===
GridManage.viewModes.COMPACT,p=GridManage.pageConfig.activeViewMode===GridManage.viewModes.COMFORTABLE,H={};H=rearrangeCsvTypes?{imagesCSV:v?{headerName:"",field:"imagesCSV",cellClass:"cell-image cell-image-compact",cellEditor:"cellEditorMetaData",cellEditorParams:{ttlOptions:TrackingComponent.getTtlOptions(),ttlDefault:Number(storage.s_trackingTtl)},cellRenderer:function(B){if(B.data.isDeleted)return"";var E=B.data.product.imagesCSV;if("undefined"===typeof E)return"";var U=document.createElement("div"),
ka=imageToUrl(E,41),ma=E?E.split(",")[0]:"";E=document.createElement("img");E.width=41;E.height=41;E.src=ka?ka:imgCDNUrl+"no-photo-available.png";E.style.height="41px";E.style.width="41px";ka||(E.alt="No image available");ka&&ProductImageHover.preview.add_events(E,ma);ka=document.createElement("div");ka.appendChild(E);U.appendChild(ka);ka=document.createElement("div");if(B.data.conditionsMet.length){E=document.createElement("span");E.className="check";E.innerHTML='<i class="fa fa-check fa-lg"></i>';
E.title=la._87+":\n";ma=$jscomp.makeIterator(B.data.conditionsMet);for(var na=ma.next();!na.done;na=ma.next())na=na.value,E.title+="."+getTldByDomain(na.domainId)+": "+CsvType.getName(na.csvTypeIndex)+"\n";ka.appendChild(E)}B.data.tracking.expiresSoon&&(B=GridHelper.cellRendererDateSpan({value:B.data.tracking.expiresOn}),B=B.replace(/\s\s+/g," "),E=document.createElement("span"),E.className="check",E.innerHTML='<i class="fa fa-clock-o fa-lg"></i>',E.title=la._882+":"+B+"\n"+la._806,ka.appendChild(E));
U.appendChild(ka);return U},editable:function(B){return!0!==B.data.isDeleted&&B.data.tracking.expiresSoon},enableCellChangeFlash:!0,equals:function(){return!1},getQuickFilterText:function(B){return null},lockPosition:!0,lockVisible:!0,lockPinned:!0,pinned:"left",filter:!1,suppressKeyboardEvent:GridHelper.cellSuppressKeyboardEvent,suppressMenu:!0,suppressMovable:!0,resizable:!1,suppressSizeToFit:!0,sortable:!1,suppressToolPanel:!0,valueSetter:GridHelper.valueSetterMetaData,minWidth:88,maxWidth:88,
width:88}:{},metaData:{headerName:la._680,headerTooltip:la._680,headerComponent:"customResetHeader",field:"metaData",cellClass:"cell-meta",cellEditor:"cellEditorMetaData",cellEditorParams:{ttlOptions:TrackingComponent.getTtlOptions(),ttlDefault:Number(storage.s_trackingTtl)},cellRenderer:v?GridHelper.cellRendererMetaDataCompact:GridHelper.cellRendererMetaData,editable:function(B){return!0!==B.data.isDeleted&&B.data.tracking.expiresSoon},enableCellChangeFlash:!0,equals:function(){return!1},getQuickFilterText:function(B){return null},
lockPosition:!0,lockVisible:!0,lockPinned:!0,pinned:"left",filter:!1,suppressKeyboardEvent:GridHelper.cellSuppressKeyboardEvent,suppressMenu:!0,suppressMovable:!0,resizable:!1,suppressSizeToFit:!0,sortable:!1,suppressToolPanel:!0,valueSetter:GridHelper.valueSetterMetaData,minWidth:v?120:155,maxWidth:v?120:155,width:v?120:155},productTitle:v?{headerName:la._676,field:"title",cellRenderer:function(B){if(B.data.isDeleted)return"";var E=Math.max(2,B.data.multiLocaleProductsReduced.length),U="";"Firefox"===
browserInfo().name&&(U=' style="height:'+16*E+'px;display:block;overflow:hidden;"');return"<div"+U+'><a class="href" href="#!product/'+B.data.domainId+"-"+B.data.asin+'">'+GridHelper.defaultTextClamp(B.value,E)+"</a></div>"},cellClass:"cell-text-compact",equals:function(){return!1},valueGetter:function(B){return B.data.product.title},lockPinned:!1,suppressSizeToFit:!0,minWidth:140,maxWidth:400,width:200}:{},groupBuyBoxShipping:Z("BUY_BOX_SHIPPING"),groupAmazon:Z("AMAZON"),groupNew:Z("NEW"),groupNewFBA:Z("NEW_FBA"),
groupNewFBMShipping:Z("NEW_FBM_SHIPPING"),groupPrimeExcl:Z("PRIME_EXCL"),groupLightningDeal:Z("LIGHTNING_DEAL"),groupBuyBoxUsedShipping:Z("BUY_BOX_USED_SHIPPING"),groupUsed:Z("USED"),groupUsedNewShipping:Z("USED_NEW_SHIPPING"),groupUsedVeryGoodShipping:Z("USED_VERY_GOOD_SHIPPING"),groupUsedGoodShipping:Z("USED_GOOD_SHIPPING"),groupUsedAcceptableShipping:Z("USED_ACCEPTABLE_SHIPPING"),groupWarehouse:Z("WAREHOUSE"),groupRefurbished:Z("REFURBISHED"),groupRefurbishedShipping:Z("REFURBISHED_SHIPPING"),
groupCollectable:Z("COLLECTIBLE"),groupCollectibleNewShipping:Z("COLLECTIBLE_NEW_SHIPPING"),groupCollectibleVeryGoodShipping:Z("COLLECTIBLE_VERY_GOOD_SHIPPING"),groupCollectibleGoodShipping:Z("COLLECTIBLE_GOOD_SHIPPING"),groupCollectibleAcceptableShipping:Z("COLLECTIBLE_ACCEPTABLE_SHIPPING"),groupListprice:Z("LISTPRICE"),groupTradeIn:Z("TRADE_IN"),groupEbayNewShipping:Z("EBAY_NEW_SHIPPING"),groupEbayUsedShipping:Z("EBAY_USED_SHIPPING"),groupSales:Z("SALES"),groupRating:Z("RATING"),groupCountReviews:Z("COUNT_REVIEWS"),
groupCountNew:Z("COUNT_NEW"),groupCountUsed:Z("COUNT_USED"),groupCountRefurbished:Z("COUNT_REFURBISHED"),groupCountCollectible:Z("COUNT_COLLECTIBLE"),trackingCreateDate:{headerName:la._197,headerTooltip:la._197,field:"trackingCreateDate",cellClass:v?"cell-text-compact":null,getQuickFilterText:function(B){return null},lockPinned:!0,valueGetter:function(B){return B.data.isDeleted?-2:B.data.tracking.createDate},type:["dateAgoColumn"],suppressSizeToFit:!1,minWidth:120,width:120},trackingExpiresOn:{headerName:la._882,
headerTooltip:la._882,field:"trackingExpiresOn",type:["dateAgoColumn"],cellClass:v?"cell-text-compact":null,cellRenderer:GridHelper.cellRendererDateSpan,comparator:GridHelper.comparatorNumberNullLast,getQuickFilterText:function(B){return null},lockPinned:!0,valueGetter:function(B){return B.data.isDeleted?-2:B.data.tracking.expiresOn},suppressSizeToFit:!1,minWidth:120,width:120},tags:A("tags"),memo:A("memo"),wishListNameInfo:p?{}:{headerName:la._419,headerTooltip:la._419,field:"wishListNameInfo",cellClass:"cell-text-compact cell-wrap",
cellRenderer:function(B){if(B.data.isDeleted||!B.data.tracking.wishListId)return"";var E=v?Math.max(2,B.data.multiLocaleProductsReduced.length):1,U=B.data.wishLists,ka=B.data.tracking.wishListId;return U[ka]?'<a href="'+getAmazonWishListUrl(U[ka])+'" target="_blank">'+GridHelper.defaultTextClamp(B.value,E)+"</a>":""+GridHelper.defaultTextClamp(B.value,E)},getQuickFilterText:function(B){return null},lockPinned:!0,valueGetter:function(B){return B.data.product.wishListName},filter:!1,suppressMenu:!0,
suppressSizeToFit:!1,minWidth:120,width:120},productGroup:{headerName:"Product Group",field:"productGroup",cellClass:v?"cell-text-compact cell-wrap":"cell-wrap",filter:"agSetColumnFilter",filterParams:{cellHeight:22,suppressAndOrCondition:!0,suppressMiniFilter:!0,suppressRemoveEntries:!0},valueGetter:function(B){return B.data.product.productGroup},suppressSizeToFit:!0,type:["manageVariationColumn"],width:114},color:{headerName:la._591,field:"color",cellClass:v?"cell-text-compact cell-wrap":"cell-wrap",
type:["manageVariationColumn"]},size:{headerName:la._592,field:"size",cellClass:v?"cell-text-compact cell-wrap":"cell-wrap",type:["manageVariationColumn"]},edition:{headerName:la._593,field:"edition",cellClass:v?"cell-text-compact cell-wrap":"cell-wrap",type:["manageVariationColumn"]},format:{headerName:la._595,field:"format",cellClass:v?"cell-text-compact cell-wrap":"cell-wrap",type:["manageVariationColumn"]},title:v?{}:{headerName:"Title",field:"title",getQuickFilterText:function(B){var E=[B.value];
if(B.data.multiLocaleProductsReduced.length){B=$jscomp.makeIterator(B.data.multiLocaleProductsReduced);for(var U=B.next();!U.done;U=B.next())E.push(U.value.title)}return E},valueGetter:function(B){return B.data.product.title},type:["hiddenColumn"]},multiDomainIds:{headerName:la._203,field:"multiDomainIds",filter:"agSetColumnFilter",filterParams:{cellHeight:22,suppressAndOrCondition:!0,suppressRemoveEntries:!0,selectAllOnMiniFilter:!0},type:["hiddenColumn"]},rootCategoryName:{headerName:"Root category",
field:"rootCategoryName",filter:"agSetColumnFilter",filterParams:{cellHeight:22,suppressAndOrCondition:!0,suppressRemoveEntries:!0,selectAllOnMiniFilter:!0},valueGetter:function(B){return B.data.product.rootCategory>invalidIfLargerCatId?"-":B.context.categoryHashMap[B.data.product.rootCategory]},type:["hiddenColumn"]},conditionsMet:{headerName:la._87,field:"conditionsMet",filter:"agSetColumnFilter",filterParams:{cellHeight:22,suppressAndOrCondition:!0,suppressRemoveEntries:!0,selectAllOnMiniFilter:!0},
valueGetter:function(B){return B.data.conditionsMet.length?la._88:la._89},type:["hiddenColumn"]},csvTypesWithTracking:{headerName:"Active price trackings",field:"csvTypesWithTracking",filter:"agSetColumnFilter",filterParams:{cellHeight:22,suppressAndOrCondition:!0,suppressRemoveEntries:!0,selectAllOnMiniFilter:!0},valueGetter:function(B){return B.data.product.csvTypesWithTracking.map(function(E){return CsvType.getName(CsvType[E].index)})},type:["hiddenColumn"]},trackingTypes:{headerName:"Tracking type",
field:"trackingTypes",filter:"agSetColumnFilter",filterParams:{cellHeight:22,suppressAndOrCondition:!0,suppressRemoveEntries:!0,selectAllOnMiniFilter:!0},valueGetter:function(B){var E=[];B.data.product.hasPriceDropTracking&&E.push(la._711);B.data.product.hasPriceIncreaseTracking&&E.push(la._712);return E},type:["hiddenColumn"]},wishListName:{headerName:la._419,field:"wishListName",filter:"agSetColumnFilter",filterParams:{cellHeight:22,suppressAndOrCondition:!0,suppressRemoveEntries:!0,selectAllOnMiniFilter:!0},
valueGetter:function(B){return B.data.product.wishListName},type:["hiddenColumn"]},expiresSoon:{headerName:la._889.replace("!",""),field:"expiresSoon",filter:"agSetColumnFilter",filterParams:{cellHeight:22,suppressAndOrCondition:!0,suppressRemoveEntries:!0,selectAllOnMiniFilter:!0},valueGetter:function(B){return B.data.tracking.expiresSoon?la._254:la._255},type:["hiddenColumn"]},maxDelta:{field:"MAX_delta",comparator:GridHelper.comparatorNumberArrayNullLast,valueGetter:GridHelper.valueGetterTracking,
sortingOrder:["desc","asc",null],type:["hiddenColumn"]},maxDeltaCustom:{field:"MAX_deltaCustom",comparator:GridHelper.comparatorNumberArrayNullLast,valueGetter:GridHelper.valueGetterTracking,sortingOrder:["desc","asc",null],type:["hiddenColumn"]},maxDeltaTrackingCreated:{field:"MAX_deltaTrackingCreated",comparator:GridHelper.comparatorNumberArrayNullLast,valueGetter:GridHelper.valueGetterTracking,sortingOrder:["desc","asc",null],type:["hiddenColumn"]},maxLastPriceChange:{field:"MAX_lastPriceChange",
comparator:GridHelper.comparatorNumberArrayOnlyFirstNullLast,valueGetter:GridHelper.valueGetterTrackingNonCsvArray,sortingOrder:["desc","asc",null],type:["hiddenColumn"]},trackingID:{headerName:"Tracking ID",field:"trackingID",valueGetter:function(B){return B.data.asin},type:["hiddenColumn"]},asin:{headerName:"ASIN",field:"asin",getQuickFilterText:function(B){return B.data.asin},valueGetter:function(B){return B.data.asin},type:["hiddenColumn"]},domainId:{headerName:la._203,field:"domainId",type:["hiddenColumn"]},
currency:{headerName:la._685,field:"currency",valueGetter:function(B){return getCurrencyCodeByDomain(B.data.domainId)},type:["hiddenColumn"]},lastUpdate:{headerName:la._540,field:"lastUpdate",valueGetter:function(B){B=Date.now()/6E4-(B.data.product.lastUpdate+60*offsetHours);return prettyDate(B)},type:["hiddenColumn"]},lastPriceChange:{headerName:la._532,field:"lastPriceChange",valueGetter:function(B){B=Date.now()/6E4-(B.data.product.lastPriceChange+60*offsetHours);return prettyDate(B)},type:["hiddenColumn"]},
internalHref:{headerName:"Keepa URL",field:"internalHref",valueGetter:function(B){return"https://keeepa.amztoolz.com/#!product/"+B.data.domainId+"-"+B.data.asin},type:["hiddenColumn"]},externalHref:{headerName:"Amazon URL",field:"externalHref",valueGetter:function(B){return"https://www.amazon."+getTldByDomain(B.data.domainId)+"/dp/"+B.data.asin},type:["hiddenColumn"]}}:{imagesCSV:v?{headerName:"",field:"imagesCSV",cellClass:"cell-image cell-image-compact",cellEditor:"cellEditorMetaData",cellEditorParams:{ttlOptions:TrackingComponent.getTtlOptions(),
ttlDefault:Number(storage.s_trackingTtl)},cellRenderer:function(B){if(B.data.isDeleted)return"";var E=B.data.product.imagesCSV;if("undefined"===typeof E)return"";var U=document.createElement("div"),ka=imageToUrl(E,41),ma=E?E.split(",")[0]:"";E=document.createElement("img");E.width=41;E.height=41;E.src=ka?ka:imgCDNUrl+"no-photo-available.png";E.style.height="41px";E.style.width="41px";ka||(E.alt="No image available");ka&&ProductImageHover.preview.add_events(E,ma);ka=document.createElement("div");ka.appendChild(E);
U.appendChild(ka);ka=document.createElement("div");if(B.data.conditionsMet.length){E=document.createElement("span");E.className="check";E.innerHTML='<i class="fa fa-check fa-lg"></i>';E.title=la._87+":\n";ma=$jscomp.makeIterator(B.data.conditionsMet);for(var na=ma.next();!na.done;na=ma.next())na=na.value,E.title+="."+getTldByDomain(na.domainId)+": "+CsvType.getName(na.csvTypeIndex)+"\n";ka.appendChild(E)}B.data.tracking.expiresSoon&&(B=GridHelper.cellRendererDateSpan({value:B.data.tracking.expiresOn}),
B=B.replace(/\s\s+/g," "),E=document.createElement("span"),E.className="check",E.innerHTML='<i class="fa fa-clock-o fa-lg"></i>',E.title=la._882+":"+B+"\n"+la._806,ka.appendChild(E));U.appendChild(ka);return U},editable:function(B){return!0!==B.data.isDeleted&&B.data.tracking.expiresSoon},enableCellChangeFlash:!0,equals:function(){return!1},getQuickFilterText:function(B){return null},lockPosition:!0,lockVisible:!0,lockPinned:!0,pinned:"left",filter:!1,suppressKeyboardEvent:GridHelper.cellSuppressKeyboardEvent,
suppressMenu:!0,suppressMovable:!0,resizable:!1,suppressSizeToFit:!0,sortable:!1,suppressToolPanel:!0,valueSetter:GridHelper.valueSetterMetaData,minWidth:88,maxWidth:88,width:88}:{},metaData:{headerName:la._680,headerTooltip:la._680,headerComponent:"customResetHeader",field:"metaData",cellClass:"cell-meta",cellEditor:"cellEditorMetaData",cellEditorParams:{ttlOptions:TrackingComponent.getTtlOptions(),ttlDefault:Number(storage.s_trackingTtl)},cellRenderer:v?GridHelper.cellRendererMetaDataCompact:GridHelper.cellRendererMetaData,
editable:function(B){return!0!==B.data.isDeleted&&B.data.tracking.expiresSoon},enableCellChangeFlash:!0,equals:function(){return!1},getQuickFilterText:function(B){return null},lockPosition:!0,lockVisible:!0,lockPinned:!0,pinned:"left",filter:!1,suppressKeyboardEvent:GridHelper.cellSuppressKeyboardEvent,suppressMenu:!0,suppressMovable:!0,resizable:!1,suppressSizeToFit:!0,sortable:!1,suppressToolPanel:!0,valueSetter:GridHelper.valueSetterMetaData,minWidth:v?120:155,maxWidth:v?120:155,width:v?120:155},
productTitle:v?{headerName:la._676,field:"title",cellRenderer:function(B){if(B.data.isDeleted)return"";var E=Math.max(2,B.data.multiLocaleProductsReduced.length),U="";"Firefox"===browserInfo().name&&(U=' style="height:'+16*E+'px;display:block;overflow:hidden;"');return"<div"+U+'><a class="href" href="#!product/'+B.data.domainId+"-"+B.data.asin+'">'+GridHelper.defaultTextClamp(B.value,E)+"</a></div>"},cellClass:"cell-text-compact",equals:function(){return!1},valueGetter:function(B){return B.data.product.title},
lockPinned:!1,suppressSizeToFit:!0,minWidth:140,maxWidth:400,width:200}:{},groupSales:Z("SALES"),groupRating:Z("RATING"),groupCountReviews:Z("COUNT_REVIEWS"),groupAmazon:Z("AMAZON"),groupNew:Z("NEW"),groupNewFBA:Z("NEW_FBA"),groupNewFBMShipping:Z("NEW_FBM_SHIPPING"),groupPrimeExcl:Z("PRIME_EXCL"),groupUsed:Z("USED"),groupListprice:Z("LISTPRICE"),groupLightningDeal:Z("LIGHTNING_DEAL"),groupWarehouse:Z("WAREHOUSE"),groupCollectable:Z("COLLECTIBLE"),groupRefurbished:Z("REFURBISHED"),groupCountNew:Z("COUNT_NEW"),
groupCountUsed:Z("COUNT_USED"),groupCountRefurbished:Z("COUNT_REFURBISHED"),groupCountCollectible:Z("COUNT_COLLECTIBLE"),groupBuyBoxShipping:Z("BUY_BOX_SHIPPING"),groupBuyBoxUsedShipping:Z("BUY_BOX_USED_SHIPPING"),groupUsedNewShipping:Z("USED_NEW_SHIPPING"),groupUsedVeryGoodShipping:Z("USED_VERY_GOOD_SHIPPING"),groupUsedGoodShipping:Z("USED_GOOD_SHIPPING"),groupUsedAcceptableShipping:Z("USED_ACCEPTABLE_SHIPPING"),groupCollectibleNewShipping:Z("COLLECTIBLE_NEW_SHIPPING"),groupCollectibleVeryGoodShipping:Z("COLLECTIBLE_VERY_GOOD_SHIPPING"),
groupCollectibleGoodShipping:Z("COLLECTIBLE_GOOD_SHIPPING"),groupCollectibleAcceptableShipping:Z("COLLECTIBLE_ACCEPTABLE_SHIPPING"),groupRefurbishedShipping:Z("REFURBISHED_SHIPPING"),groupEbayNewShipping:Z("EBAY_NEW_SHIPPING"),groupEbayUsedShipping:Z("EBAY_USED_SHIPPING"),groupTradeIn:Z("TRADE_IN"),trackingCreateDate:{headerName:la._197,headerTooltip:la._197,field:"trackingCreateDate",cellClass:v?"cell-text-compact":null,getQuickFilterText:function(B){return null},lockPinned:!0,valueGetter:function(B){return B.data.isDeleted?
-2:B.data.tracking.createDate},type:["dateAgoColumn"],suppressSizeToFit:!1,minWidth:120,width:120},trackingExpiresOn:{headerName:la._882,headerTooltip:la._882,field:"trackingExpiresOn",type:["dateAgoColumn"],cellClass:v?"cell-text-compact":null,cellRenderer:GridHelper.cellRendererDateSpan,comparator:GridHelper.comparatorNumberNullLast,getQuickFilterText:function(B){return null},lockPinned:!0,valueGetter:function(B){return B.data.isDeleted?-2:B.data.tracking.expiresOn},suppressSizeToFit:!1,minWidth:120,
width:120},tags:A("tags"),memo:A("memo"),wishListNameInfo:p?{}:{headerName:la._419,headerTooltip:la._419,field:"wishListNameInfo",cellClass:"cell-text-compact cell-wrap",cellRenderer:function(B){if(B.data.isDeleted||!B.data.tracking.wishListId)return"";var E=v?Math.max(2,B.data.multiLocaleProductsReduced.length):1,U=B.data.wishLists,ka=B.data.tracking.wishListId;return U[ka]?'<a href="'+getAmazonWishListUrl(U[ka])+'" target="_blank">'+GridHelper.defaultTextClamp(B.value,E)+"</a>":""+GridHelper.defaultTextClamp(B.value,
E)},getQuickFilterText:function(B){return null},lockPinned:!0,valueGetter:function(B){return B.data.product.wishListName},filter:!1,suppressMenu:!0,suppressSizeToFit:!1,minWidth:120,width:120},productGroup:{headerName:"Product Group",field:"productGroup",cellClass:v?"cell-text-compact cell-wrap":"cell-wrap",filter:"agSetColumnFilter",filterParams:{cellHeight:22,suppressAndOrCondition:!0,suppressMiniFilter:!0,suppressRemoveEntries:!0},valueGetter:function(B){return B.data.product.productGroup},suppressSizeToFit:!0,
type:["manageVariationColumn"],width:114},color:{headerName:la._591,field:"color",cellClass:v?"cell-text-compact cell-wrap":"cell-wrap",type:["manageVariationColumn"]},size:{headerName:la._592,field:"size",cellClass:v?"cell-text-compact cell-wrap":"cell-wrap",type:["manageVariationColumn"]},edition:{headerName:la._593,field:"edition",cellClass:v?"cell-text-compact cell-wrap":"cell-wrap",type:["manageVariationColumn"]},format:{headerName:la._595,field:"format",cellClass:v?"cell-text-compact cell-wrap":
"cell-wrap",type:["manageVariationColumn"]},title:v?{}:{headerName:"Title",field:"title",getQuickFilterText:function(B){var E=[B.value];if(B.data.multiLocaleProductsReduced.length){B=$jscomp.makeIterator(B.data.multiLocaleProductsReduced);for(var U=B.next();!U.done;U=B.next())E.push(U.value.title)}return E},valueGetter:function(B){return B.data.product.title},type:["hiddenColumn"]},multiDomainIds:{headerName:la._203,field:"multiDomainIds",filter:"agSetColumnFilter",filterParams:{cellHeight:22,suppressAndOrCondition:!0,
suppressRemoveEntries:!0,selectAllOnMiniFilter:!0},type:["hiddenColumn"]},rootCategoryName:{headerName:"Root category",field:"rootCategoryName",filter:"agSetColumnFilter",filterParams:{cellHeight:22,suppressAndOrCondition:!0,suppressRemoveEntries:!0,selectAllOnMiniFilter:!0},valueGetter:function(B){return B.data.product.rootCategory>invalidIfLargerCatId?"-":B.context.categoryHashMap[B.data.product.rootCategory]},type:["hiddenColumn"]},conditionsMet:{headerName:la._87,field:"conditionsMet",filter:"agSetColumnFilter",
filterParams:{cellHeight:22,suppressAndOrCondition:!0,suppressRemoveEntries:!0,selectAllOnMiniFilter:!0},valueGetter:function(B){return B.data.conditionsMet.length?la._88:la._89},type:["hiddenColumn"]},csvTypesWithTracking:{headerName:"Active price trackings",field:"csvTypesWithTracking",filter:"agSetColumnFilter",filterParams:{cellHeight:22,suppressAndOrCondition:!0,suppressRemoveEntries:!0,selectAllOnMiniFilter:!0},valueGetter:function(B){return B.data.product.csvTypesWithTracking.map(function(E){return CsvType.getName(CsvType[E].index)})},
type:["hiddenColumn"]},trackingTypes:{headerName:"Tracking type",field:"trackingTypes",filter:"agSetColumnFilter",filterParams:{cellHeight:22,suppressAndOrCondition:!0,suppressRemoveEntries:!0,selectAllOnMiniFilter:!0},valueGetter:function(B){var E=[];B.data.product.hasPriceDropTracking&&E.push(la._711);B.data.product.hasPriceIncreaseTracking&&E.push(la._712);return E},type:["hiddenColumn"]},wishListName:{headerName:la._419,field:"wishListName",filter:"agSetColumnFilter",filterParams:{cellHeight:22,
suppressAndOrCondition:!0,suppressRemoveEntries:!0,selectAllOnMiniFilter:!0},valueGetter:function(B){return B.data.product.wishListName},type:["hiddenColumn"]},expiresSoon:{headerName:la._889.replace("!",""),field:"expiresSoon",filter:"agSetColumnFilter",filterParams:{cellHeight:22,suppressAndOrCondition:!0,suppressRemoveEntries:!0,selectAllOnMiniFilter:!0},valueGetter:function(B){return B.data.tracking.expiresSoon?la._254:la._255},type:["hiddenColumn"]},maxDelta:{field:"MAX_delta",comparator:GridHelper.comparatorNumberArrayNullLast,
valueGetter:GridHelper.valueGetterTracking,sortingOrder:["desc","asc",null],type:["hiddenColumn"]},maxDeltaCustom:{field:"MAX_deltaCustom",comparator:GridHelper.comparatorNumberArrayNullLast,valueGetter:GridHelper.valueGetterTracking,sortingOrder:["desc","asc",null],type:["hiddenColumn"]},maxDeltaTrackingCreated:{field:"MAX_deltaTrackingCreated",comparator:GridHelper.comparatorNumberArrayNullLast,valueGetter:GridHelper.valueGetterTracking,sortingOrder:["desc","asc",null],type:["hiddenColumn"]},maxLastPriceChange:{field:"MAX_lastPriceChange",
comparator:GridHelper.comparatorNumberArrayOnlyFirstNullLast,valueGetter:GridHelper.valueGetterTrackingNonCsvArray,sortingOrder:["desc","asc",null],type:["hiddenColumn"]},trackingID:{headerName:"Tracking ID",field:"trackingID",valueGetter:function(B){return B.data.asin},type:["hiddenColumn"]},asin:{headerName:"ASIN",field:"asin",getQuickFilterText:function(B){return B.data.asin},valueGetter:function(B){return B.data.asin},type:["hiddenColumn"]},domainId:{headerName:la._203,field:"domainId",type:["hiddenColumn"]},
currency:{headerName:la._685,field:"currency",valueGetter:function(B){return getCurrencyCodeByDomain(B.data.domainId)},type:["hiddenColumn"]},lastUpdate:{headerName:la._540,field:"lastUpdate",valueGetter:function(B){B=Date.now()/6E4-(B.data.product.lastUpdate+60*offsetHours);return prettyDate(B)},type:["hiddenColumn"]},lastPriceChange:{headerName:la._532,field:"lastPriceChange",valueGetter:function(B){B=Date.now()/6E4-(B.data.product.lastPriceChange+60*offsetHours);return prettyDate(B)},type:["hiddenColumn"]},
internalHref:{headerName:"Keepa URL",field:"internalHref",valueGetter:function(B){return"https://keeepa.amztoolz.com/#!product/"+B.data.domainId+"-"+B.data.asin},type:["hiddenColumn"]},externalHref:{headerName:"Amazon URL",field:"externalHref",valueGetter:function(B){return"https://www.amazon."+getTldByDomain(B.data.domainId)+"/dp/"+B.data.asin},type:["hiddenColumn"]}};p={};for(var L in H)H[L].children?(p.$jscomp$loop$prop$keepChildren$734=[],H[L].children.forEach(function(B){return function(E,U){0<Object.keys(E).length&&
B.$jscomp$loop$prop$keepChildren$734.push(E)}}(p)),H[L].children=p.$jscomp$loop$prop$keepChildren$734):0===Object.keys(H[L]).length&&delete H[L],p={$jscomp$loop$prop$keepChildren$734:p.$jscomp$loop$prop$keepChildren$734};return H},Q=function(){var v=GridManage.pageConfig.activeViewMode===GridManage.viewModes.DEFAULT;return{imagesCSV:{headerName:la._589,field:"imagesCSV",cellClass:v?"cell-image cell-image-default":"cell-image",cellRenderer:function(p){if(p.data.isDeleted)return"";var H=p.data.detailsPerDomain[p.data.detailDomainId],
L=H.imagesCSV;if("undefined"===typeof L)return"";var B=document.createElement("div"),E=v?90:135,U=imageToUrl(L,E),ka=L?L.split(",")[0]:"";L=document.createElement("img");L.width=E;L.height=E;L.src=U?U:imgCDNUrl+"no-photo-available.png";L.style.height=E+"px";L.style.width=E+"px";U||(L.alt="No image available");U&&ProductImageHover.preview.add_events(L,ka);E=document.createElement("div");E.appendChild(L);B.appendChild(E);if(p.data.conditionsMet.length){E=document.createElement("span");E.className="check";
E.innerHTML='<i class="fa fa-check fa-2x"></i>';E.title=la._87+":\n";p=$jscomp.makeIterator(p.data.conditionsMet);for(U=p.next();!U.done;U=p.next())U=U.value,E.title+="."+getTldByDomain(U.domainId)+": "+CsvType.getName(U.csvTypeIndex)+"\n";B.appendChild(E)}p=document.createElement("a");p.href=getAmazonRedirectByDomain(H.domainId,H.asin);p.innerHTML='<img src="'+imgCDNUrl+"amazon/small/"+getTldByDomain(H.domainId)+'.png">';p.className="amazonLink";p.target="_blank";p.title=la._99+" Amazon";U=keepaTime.now();
E=!1;if(0>=H.lastEbayUpdate||0<H.lastEbayUpdate&&20160<U-H.lastEbayUpdate)E=!0;U=document.createElement("a");U.href=getEbayRedirectByDomain(H.domainId,H.asin,!0);U.innerHTML="ebay";U.className="ebayLink";U.style.color=E?"#aaaaaa":"#666666";U.target="_blank";U.title=E?"unverified if sold on ebay":la._99+" eBay";E=document.createElement("div");E.appendChild(p);globalEbayArray[H.domainId]&&E.appendChild(U);B.appendChild(E);return B},equals:function(){return!1},filter:!1,suppressMenu:!0,suppressMovable:!0,
resizable:!1,suppressSizeToFit:!0,sortable:!1,width:155},graphData:{field:"graphData",cellClass:"cell-graph",cellRenderer:function(p){if(p.data.isDeleted)return"";var H=p.data.detailsPerDomain[p.data.detailDomainId],L=p.data.wishLists,B=H.graphData,E=H.title,U=H.asin,ka=H.domainId,ma=document.createElement("div"),na=document.createElement("div");na.className="head";v&&(na.className+=" head-default");var W=document.createElement("a");W.className="href";W.href="#!product/"+ka+"-"+U;W.innerHTML=""+E;
W.title=""+escapeHTML(E);na.appendChild(W).insertAdjacentHTML("beforebegin",'<img class="flag" title="'+getTldByDomain(ka)+'" src="'+flags[ka]+'" />&emsp;');ma.appendChild(na);v||(E=document.createElement("div"),E.className="info",na=Date.now()/6E4-(H.lastUpdate+60*offsetHours),H=Date.now()/6E4-(H.lastPriceChange+60*offsetHours),W=document.createElement("span"),W.innerHTML="("+la._123+prettyDate(na)+", "+la._532+": "+prettyDate(H)+")",E.appendChild(W),H=B.tracking.wishListId,L[H]&&(na=document.createElement("span"),
na.innerHTML=la._558+': <a href="'+getAmazonWishListUrl(L[H])+'">'+L[H].name+"</a>",E.appendChild(na).insertAdjacentHTML("beforebegin","&emsp;|&emsp;")),ma.appendChild(E));L="historyGraphCache"+ka;p.data[L]||(E=$("<div/>",{id:"graph-historyGraph-"+ka+"-"+U,class:"graph",style:"line-height: 12px"}),H=$("<div/>",{style:"visibility: hidden;"}),H.append(E),$("body").append(H),ka=graph.prepare(ka),ka.asin=U,ka.buyBoxSellerIdHistory=B.buyBoxSellerIdHistory,ka.csv=B.csv,ka.offers=B.offers,ka.stats=getStatistics(B),
ka.graphIndex=0,ka.isOnTrackingPage=!0,ka.showOnlyTracked=v,ka.$container=E,ka.$container.show(),ka.parameter.tracking=B.tracking,ka.parameter.height="110px",ka.parameter.width=p.column.actualWidth-10-(ka.showOnlyTracked?140:215)+"px",ka.parameter.interval=GridManage.pageConfig.graphRange,graph.create(ka),H.detach(),p.data.isEmptyGraph=ka.showOnlyTracked&&0===Object.keys(ka.data).length,p.data[L]=E.get(0));ma.appendChild(p.data[L]);p.data.isEmptyGraph&&(p=document.createElement("span"),p.style.color=
"#7d7d7d",p.style.fontSize="11px",p.style.position="relative",p.style.top="-12px",p.innerHTML='<i class="fa fa-exclamation"></i>&ensp;'+la._716,ma.appendChild(p));return ma},equals:function(){return!1},minWidth:720,width:Math.max(720,window.innerWidth-275),filter:!1,suppressMenu:!0,suppressMovable:!0,resizable:!1,suppressSizeToFit:!1,sortable:!1}}},T=function(){var v={offerCSV:{headerName:la._634,field:"offerCSV",cellClass:"cell-number",cellRenderer:GridHelper.cellRendererOfferCSV,comparator:GridHelper.comparatorNumberNullLast,
icons:GridHelper.getIconsSortNumeric(),pinnedRowCellRenderer:function(p){var H=Money.format(p.data.offerCSV,{sourceDomainId:p.data.domainId}),L="";showReferencePrice(p.data.domainId)&&(L=Money.format(p.data.offerCSV,{sourceDomainId:p.data.domainId,targetDomainId:p.data.domainId}),L='<span style="color:#ccc">'+L+"</span>&ensp;");return"<span>"+la._385+"</span><br>"+L+H},sort:"asc",lockVisible:!0,valueGetter:function(p){var H=p.node.rowPinned?p.data.offerCSV:p.data.offerCSV?p.data.offerCSV[p.data.offerCSV.length-
2]+p.data.offerCSV[p.data.offerCSV.length-1]:-1;return 0>H?null:H=Money.raw(H,{sourceDomainId:p.data.domainId})},minWidth:186,width:186},externalLink:{headerName:"",field:"externalLink",cellClass:"cell-icon",cellRenderer:function(p){p=p.data;return'<a href="https://www.amazon.'+(getTldByDomain(p.domainId)+"/dp/"+p.asin+"/?m="+p.sellerId+'&psc=1" target="_blank"><i class="fa fa-external-link"></i></a>')},pinnedRowCellRenderer:GridHelper.cellRendererEmpty,sortable:!1,suppressToolPanel:!0,width:50},
condition:{headerName:la._553,field:"condition",cellRenderer:function(p){return p.value?GridHelper.defaultTextClamp(p.value,2):""},pinnedRowCellRenderer:GridHelper.cellRendererEmpty,valueGetter:function(p){return ConditionType.getName(p.data.condition)},minWidth:72,width:72},priceHistory:{headerName:"Price History",field:"priceHistory",type:["graphColumn"],cellRenderer:function(p){return GridHelper.cellRendererGraph(p,"price",p.data.offerId,graph.insertOfferGraph,p.data.priceHistory?p.data.priceHistory:
p.data.ageInHours)},minWidth:200,maxWidth:200,resizable:!1},groupStock:{headerName:la._632,children:[{headerName:la._632,headerNameGroup:la._632,field:"stockCSV",cellClass:"cell-number",cellRenderer:function(p){return null==p.value?"?":""+p.value+(p.data.stockIsMax?"+":"")},comparator:GridHelper.comparatorNumberNullLast,icons:GridHelper.getIconsSortNumeric(),pinnedRowCellRenderer:function(p){return"undefined"===typeof p.value||null==p.value?"":"<span>Stock Total</span><br>"+p.value+(p.data.stockHasMax?
"+":"")},suppressSizeToFit:!0,valueGetter:function(p){return p.node.rowPinned?p.data.stockCSV:p.data.stock},width:80},{headerName:"Sold",headerTooltip:la._659,headerNameGroup:la._632,headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'<i class="fa fa-info"></i>')},field:"sold",cellClass:"cell-number",cellRenderer:function(p){p=p.value;return-1==p?"?":"~"+p},comparator:GridHelper.comparatorNumberNullLast,icons:GridHelper.getIconsSortNumeric(),pinnedRowCellRenderer:function(p){return"<span>Total</span><br>~"+
p.value},suppressSizeToFit:!0,valueGetter:function(p){return p.node.rowPinned?p.data.totalSold:p.data.sold},width:60},{headerName:"Sold 30 days",headerNameGroup:la._632,field:"sold30Day",cellClass:"cell-number",cellRenderer:function(p){return-1==p.value?"?":"~"+p.value},comparator:GridHelper.comparatorNumberNullLast,icons:GridHelper.getIconsSortNumeric(),pinnedRowCellRenderer:function(p){return"<span>Total</span><br>~"+p.value},suppressSizeToFit:!0,valueGetter:function(p){return p.node.rowPinned?
p.data.totalSold30Day:p.data.sold30Day},width:90},{headerName:"Stock History",headerNameGroup:la._632,field:"stockHistory",type:["graphColumn"],cellRenderer:function(p){return GridHelper.cellRendererGraph(p,"stock",p.data.offerId,graph.insertOfferGraph,p.data.stockHistory?p.data.stockHistory:p.data.ageInHours)}}]},isPrime:{headerName:la._619,headerTooltip:la._620,field:"isPrime",type:["booleanColumn"],width:54},isFBA:{headerName:"FBA",headerTooltip:"Whether or not this offer is fulfilled by Amazon.",
field:"isFBA",type:["booleanColumn"],width:54},groupSeller:{headerName:la._554,children:[{headerName:"Name",headerNameGroup:la._554,field:"sellerName",cellRenderer:function(p){p=p.data;return SellerUtil.getHtml(p.sellerId,p.domainId,p.sellerName,null,!0)},pinnedRowCellRenderer:GridHelper.cellRendererEmpty,minWidth:140,width:140},{headerName:la._440,headerNameGroup:la._554,field:"sellerCurrentRating",cellClass:"cell-number",cellRenderer:GridHelper.cellRendererRating,comparator:GridHelper.comparatorNumberNullLast,
icons:GridHelper.getIconsSortNumeric(),pinnedRowCellRenderer:GridHelper.cellRendererEmpty,suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterRatingPercentage,width:56},{headerName:la._441,headerNameGroup:la._554,field:"sellerCurrentRatingCount",cellClass:"cell-number",cellRenderer:GridHelper.cellRendererRating,comparator:GridHelper.comparatorNumberNullLast,icons:GridHelper.getIconsSortNumeric(),pinnedRowCellRenderer:GridHelper.cellRendererEmpty,suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterRatingCount,
width:92}]},coupon:{headerName:"Coupon",field:"coupon",cellRenderer:function(p){return null===p.value?"":0>p.value?Math.abs(p.value)+" %":Money.format(p.value,{sourceDomainId:p.data.domainId,targetDomainId:p.data.domainId})},suppressSizeToFit:!0,type:["numberColumn"],valueGetter:function(p){return"undefined"===typeof p.data?null:p.data[p.colDef.field]?p.data[p.colDef.field]:null},width:69},groupPricePrimeExcl:{headerName:la._631,children:[{headerName:"?",field:"isPrimeExcl",type:["booleanColumn"],
width:50},{headerName:la._344,field:"primeExclCSV",cellClass:"cell-number",cellRenderer:function(p){return'<span style="color:'+CsvType.PRIME_EXCL.color+'">'+Money.format(p.value,{sourceDomainId:p.data.domainId})+"</span>"},comparator:GridHelper.comparatorNumberNullLast,icons:GridHelper.getIconsSortNumeric(),sort:"asc",suppressSizeToFit:!0,valueGetter:function(p){p=p.data.primeExclCSV?p.data.primeExclCSV[p.data.primeExclCSV.length-1]:-1;return 0>p?null:p},width:81}]},lastSeen:{headerName:la._635,
field:"lastSeen",type:["dateAgoColumn"]},firstSeen:{headerName:la._636,field:"firstSeen",type:["dateAgoColumn"],valueGetter:function(p){return p.data.offerCSV[0]}},conditionComment:{headerName:la._24,field:"conditionComment",cellRenderer:function(p){return p.value?GridHelper.defaultTextClamp(p.value,6):""},pinnedRowCellRenderer:GridHelper.cellRendererEmpty,suppressMenu:!0,minWidth:300,width:300},isWarehouseDeal:{headerName:la._626,field:"isWarehouseDeal",type:["booleanColumn"],width:104},isScam:{headerName:la._627,
headerTooltip:la._628,field:"isScam",type:["booleanColumn"],cellRenderer:function(p){return p.value?'<i title="'+la._628+'" style="color:#f00 !important;font-size: 21px !important;" class="fa fa-exclamation-triangle"></i>':""},width:98},isMAP:{headerName:la._622,headerTooltip:la._623,field:"isMAP",type:["booleanColumn"],width:58},isAmazon:{headerName:la._629,headerTooltip:la._630,field:"isAmazon",type:["booleanColumn"],width:104},isShippable:{headerName:la._621,field:"isShippable",type:["booleanColumn"],
width:72},isAddonItem:{headerName:la._624,field:"isAddonItem",type:["booleanColumn"],width:86},isPreorder:{headerName:la._625,field:"isPreorder",type:["booleanColumn"],width:72}};!0===disableStockFeatures?delete v.groupStock:!0===disableSoldNumbers&&(v.groupStock.children=v.groupStock.children.filter(function(p){return"sold"!==p.field&&"sold30Day"!==p.field}));return v},ha=function(){return{productKey:{headerName:"Details",field:"productKey",cellClass:"cell-wrap",cellRenderer:"cellRendererAutoHeightRow",
filter:!1,suppressMenu:!0,resizable:!1,suppressSizeToFit:!0,sortable:!1,width:170},productValue:{headerName:"",field:"productValue",cellClass:"cell-wrap",cellRenderer:"cellRendererAutoHeightRow",filter:!1,suppressMenu:!0,resizable:!1,suppressSizeToFit:!0,sortable:!1,valueFormatter:function(v){return v.data.productValueFormatted},width:320}}},P=function(){return{productKey:{headerName:la._344+" & "+la._385,field:"productKey",cellRenderer:function(v){return v.valueFormatted?v.valueFormatted:v.value},
filter:!1,suppressMenu:!0,resizable:!1,suppressSizeToFit:!0,sortable:!1,width:230},productValue:{headerName:"",field:"productValue",cellClass:function(v){return v.data.cellClass},cellRenderer:function(v){return v.data.realCellRenderer(v)},filter:!1,suppressMenu:!0,resizable:!1,suppressSizeToFit:!0,sortable:!1,valueFormatter:function(v){return v.data.productValueFormatted},width:140}}},R=function(){var v=la._440,p=function(B){return{headerName:["30 Days","90 Days","180 Days","Lifetime"][B],headerNameGroup:"Review Count",
field:"positiveRating."+B,cellClass:"cell-number",cellRenderer:GridHelper.cellRendererRating,comparator:GridHelper.comparatorNumberNullLast,filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterRatingPercentage,width:76}},H=function(B){return{headerName:["30 Days","90 Days","180 Days","Lifetime"][B],headerNameGroup:"Review Count",field:"ratingCount."+B,cellClass:"cell-number",cellRenderer:GridHelper.cellRendererRating,comparator:GridHelper.comparatorNumberNullLast,
filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterRatingCount,width:70}};v={rank:{headerName:" ",field:"rank",cellClass:"cell-number",icons:GridHelper.getIconsSortNumeric(),sort:"asc",suppressMenu:!0,suppressSizeToFit:!0,suppressToolPanel:!0,width:64},sellerName:{headerName:"Name",field:"sellerName",cellRenderer:function(B){return SellerUtil.getHtml(B.data.sellerId,B.data.domainId,B.value)},lockVisible:!0,minWidth:100},
groupPositiveRating:{headerName:v,children:[p(3),p(0),p(1),p(2)]},groupRatingCount:{headerName:"Review Count",children:[H(3),H(0),H(1),H(2)]},hasFBA:{headerName:"Uses FBA",field:"hasFBA",type:["booleanColumn"],width:72},totalStorefrontAsins:{headerName:"Verified Listings",field:"totalStorefrontAsins",cellClass:"cell-number",comparator:GridHelper.comparatorNumberNullLast,filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueFormatter:function(B){return null==
B.value?"-":NumberUtil.format(B.value)},valueGetter:function(B){var E=null;B.data.totalStorefrontAsins&&2==B.data.totalStorefrontAsins.length&&(E=B.data.totalStorefrontAsins[1]);if(null==E||0===E)E=null!=B.data.totalProductCountFromStatistics?B.data.totalProductCountFromStatistics:E;return E},minWidth:104,width:104},topCategory:{headerName:"Selling primarily",field:"topCategory",cellRenderer:function(B){if(null==B.value)return"-";var E={f:{rootCategory:{filter:B.data.topCategory},sellerIds:{filter:B.data.sellerId,
type:"isOneOf"}},s:null,t:"g"};B.data.topCategory>invalidIfLargerCatId&&delete E.f.rootCategory;E=encodeURIComponent(JSON.stringify(E));E=getBaseUrl()+"#!finder/"+E;var U=B.value,ka=B.data.sellerName,ma=document.createElement("div"),na=document.createElement("a");na.href=E;na.innerHTML=""+B.value;na.title='Search for "'+ka.replace(/\\"/g,"&quot;")+'"'+(U.length?' and "'+U.replace(/"/g,"&quot;")+'"':"")+" in our Product Finder";ma.appendChild(na).insertAdjacentHTML("beforeend",' <span style="color:#999;">('+
NumberUtil.format(B.data.topCategoryProductCountPercentage)+" %)</span>");return ma},suppressSizeToFit:!1,minWidth:100,valueGetter:function(B){return"undefined"===typeof B.data.topCategory?null:GridHelperCategory.getName(B.data.domainId,B.data.topCategory)},width:150},sellerId:{headerName:la._618,field:"sellerId",cellClass:"cell-id",suppressSizeToFit:!0,width:126},addressCountry:{headerName:"Country",field:"addressCountry",filter:"agSetColumnFilter",suppressSizeToFit:!0,valueGetter:function(B){if("undefined"===
typeof B.data)return"";B=B.data.address?B.data.address[B.data.address.length-1]:"";return 2===B.length?B:"-"},width:80}};for(var L in v)0===Object.keys(v[L]).length&&delete v[L];return v},Y=function(){return{catName:{headerName:"Brand",field:"brand",cellRenderer:function(v){if(null==v.value)return"-";var p=encodeURIComponent(JSON.stringify({f:{brand:{filter:v.value,type:"isOneOf"},sellerIds:{filter:v.context.data.sellerId,type:"isOneOf"}},s:null,t:"g"}));p=getBaseUrl()+"#!finder/"+p;var H=v.value,
L=v.context.data.sellerName,B=document.createElement("div"),E=document.createElement("a");E.href=p;E.innerHTML=""+v.value;E.title='Search for "'+L.replace(/\\"/g,"&quot;")+'" and "'+H.replace(/"/g,"&quot;")+'" in our Product Finder';B.appendChild(E);return B},suppressSizeToFit:!1,width:280},productCountPercentage:{headerName:"Listings",field:"productCountPercentage",sort:"desc",type:["numberColumn"],valueFormatter:function(v){return NumberUtil.format(v.value,2)+" %"},width:85},productCountWithAmazonOfferPercentage:{headerName:"Listings with Amazon offer",
field:"productCountWithAmazonOfferPercentage",type:["numberColumn"],valueFormatter:function(v){return NumberUtil.format(v.value,2)+" %"},width:180},avg30SalesRank:{headerName:"30 days avg. sales rank",field:"avg30SalesRank",type:["numberColumn","numberSalesRankColumn"],width:150}}},ja=function(){return{catName:{headerName:"Category",field:"catName",cellRenderer:function(v){if(null==v.value)return"-";var p=encodeURIComponent(JSON.stringify({f:{rootCategory:{filter:v.data.catId},sellerIds:{filter:v.context.data.sellerId,
type:"isOneOf"}},s:null,t:"g"}));p=getBaseUrl()+"#!finder/"+p;var H=v.value,L=v.context.data.sellerName,B=document.createElement("div"),E=document.createElement("a");E.href=p;E.innerHTML=""+v.value;E.title='Search for "'+L.replace(/\\"/g,"&quot;")+'" and "'+H.replace(/"/g,"&quot;")+'" in our Product Finder';B.appendChild(E);return B},suppressSizeToFit:!1,width:280},productCountPercentage:{headerName:"Listings",field:"productCountPercentage",sort:"desc",type:["numberColumn"],valueFormatter:function(v){return NumberUtil.format(v.value,
2)+" %"},width:85},productCountWithAmazonOfferPercentage:{headerName:"Listings with Amazon offer",field:"productCountWithAmazonOfferPercentage",type:["numberColumn"],valueFormatter:function(v){return NumberUtil.format(v.value,2)+" %"},width:180},avg30SalesRank:{headerName:"30 days avg. sales rank",field:"avg30SalesRank",type:["numberColumn","numberSalesRankColumn"],width:150}}},ra=function(){return{imagesCSV:{headerName:la._589,field:"imagesCSV",cellClass:"cell-image",cellRenderer:GridHelper.cellRendererImage,
cellRendererParams:{imageSize:99},suppressSizeToFit:!0,sortable:!1,width:101},title:{headerName:la._590,field:"title",cellRenderer:function(v){return'<a href="#!product/'+v.data.domainId+"-"+v.data.asin+'">'+GridHelper.defaultTextClamp(v.value,6)+"</a>"},width:200},AMAZON_current:{headerName:CsvType.getName(CsvType.AMAZON.index),field:"AMAZON_current",type:["priceColumn"],minWidth:74,width:74},NEW_current:{headerName:CsvType.getName(CsvType.NEW.index),field:"NEW_current",type:["priceColumn"],minWidth:74,
width:74},USED_current:{headerName:CsvType.getName(CsvType.USED.index),field:"USED_current",type:["priceColumn"],minWidth:74,width:74},color:{headerName:la._591,field:"color",cellRenderer:function(v){return GridHelper.defaultTextClamp(v.value,6)},width:120},size:{headerName:la._592,field:"size",cellRenderer:function(v){return GridHelper.defaultTextClamp(v.value,6)},width:120},edition:{headerName:la._593,field:"edition",cellRenderer:function(v){return GridHelper.defaultTextClamp(v.value,6)},width:120},
format:{headerName:la._595,field:"format",cellRenderer:function(v){return GridHelper.defaultTextClamp(v.value,6)},width:120},asin:{headerName:"ASIN",field:"asin",cellClass:"cell-id",width:90}}},ta=function(){var v={checkboxSelection:GridConfig.gridTypesWithCheckboxSelection.includes("variation")?{headerName:"",field:"checkboxSelection",checkboxSelection:!0,headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,hide:!0,lockPinned:!0,pinned:"left",filter:!1,suppressMenu:!0,suppressSizeToFit:!0,
sortable:!1,suppressToolPanel:!0,width:30}:{},imagesCSV:{headerName:la._589,field:"imagesCSV",cellClass:"cell-image",cellRenderer:GridHelper.cellRendererImage,cellRendererParams:{imageSize:99},filter:!1,suppressMenu:!0,suppressSizeToFit:!0,sortable:!1,width:101},title:{headerName:la._590,field:"title",cellRenderer:function(L){var B="#!product/"+L.data.domainId+"-"+L.data.asin,E="";iframe.isIframe&&(B="http://www.amazon."+getTldByDomain(L.data.domainId)+"/dp/"+L.data.asin+"?psc=1",E=' target="_parent"');
return'<a class="href" href="'+B+'"'+E+">"+GridHelper.defaultTextClamp(L.value,6)+"</a>"},lockVisible:!0,minWidth:100,width:200},groupPriceBuyBoxShipping:enableVariationGridPriceGraphs?sa("BUY_BOX_SHIPPING"):{},groupPriceAmazon:enableVariationGridPriceGraphs?sa("AMAZON"):{},groupPriceNew:enableVariationGridPriceGraphs?sa("NEW"):{},groupPriceUsed:enableVariationGridPriceGraphs?sa("USED"):{},BUY_BOX_SHIPPING_current:graphIsRestricted(storage.domain,CsvType.BUY_BOX_SHIPPING.index)||enableVariationGridPriceGraphs?
{}:{headerName:CsvType.getName(CsvType.BUY_BOX_SHIPPING.index),headerComponentParams:{template:GridHelper.getHeaderComponentTemplate('<i class="fa fa-circle" style="font-size: 7px;transform: translateY(-1px);color:'+CsvType.getObject(CsvType.BUY_BOX_SHIPPING.index).color+'" ></i> ',"")},field:"BUY_BOX_SHIPPING_current",type:["priceColumn"],sort:"asc"},AMAZON_current:enableVariationGridPriceGraphs?{}:{headerName:CsvType.getName(CsvType.AMAZON.index),headerComponentParams:{template:GridHelper.getHeaderComponentTemplate('<i class="fa fa-circle" style="font-size: 7px;transform: translateY(-1px);color:'+
CsvType.getObject(CsvType.AMAZON.index).color+'" ></i> ',"")},field:"AMAZON_current",type:["priceColumn"],sort:"asc"},NEW_current:enableVariationGridPriceGraphs?{}:{headerName:CsvType.getName(CsvType.NEW.index),headerComponentParams:{template:GridHelper.getHeaderComponentTemplate('<i class="fa fa-circle" style="font-size: 7px;transform: translateY(-1px);color:'+CsvType.getObject(CsvType.NEW.index).color+'" ></i> ',"")},field:"NEW_current",type:["priceColumn"]},USED_current:enableVariationGridPriceGraphs?
{}:{headerName:CsvType.getName(CsvType.USED.index),headerComponentParams:{template:GridHelper.getHeaderComponentTemplate('<i class="fa fa-circle" style="font-size: 7px;transform: translateY(-1px);color:'+CsvType.getObject(CsvType.USED.index).color+'" ></i> ',"")},field:"USED_current",type:["priceColumn"]},variationAttributes:{headerName:"Variation Attributes",field:"variationAttributes",cellClass:"cell-flex",cellRenderer:function(L){var B="",E="";if(L=L.value){L=$jscomp.makeIterator(L);for(var U=
L.next();!U.done;U=L.next())U=U.value,B+="<i>"+U.dimension+":</i>&emsp;<br>",E+=U.value+"<br>"}return"<span>"+B+"</span><span>"+E+"</span>"},tooltipValueGetter:function(L){var B="";if(L=L.value){L=$jscomp.makeIterator(L);for(var E=L.next();!E.done;E=L.next())E=E.value,B+=E.dimension+": "+E.value+"; "}return B.trim()},filter:!1,suppressMenu:!0,suppressSizeToFit:!0,sortable:!1,width:160},color:{headerName:la._591,field:"color",cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTextFinder,suppressSizeToFit:!1,
minWidth:80,width:120},size:{headerName:la._592,field:"size",cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTextFinder,suppressSizeToFit:!1,minWidth:80,width:120},edition:{headerName:la._593,field:"edition",cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTextFinder,suppressSizeToFit:!1,minWidth:80,width:120},format:{headerName:la._595,field:"format",cellClass:"cell-wrap",cellRenderer:GridHelper.cellRendererTextFinder,suppressSizeToFit:!1,minWidth:80,width:120},groupReviews:GridHelperReviews.getColumnGroupReviewsFormatSpecific(),
asin:{headerName:"ASIN",field:"asin",cellClass:"cell-id",suppressSizeToFit:!0,width:90},eanList:{headerName:"EAN",field:"eanList",type:["productCodeColumn"],cellRenderer:GridHelper.cellRendererProductCodeSingle},upcList:{headerName:"UPC",field:"upcList",type:["productCodeColumn"],cellRenderer:GridHelper.cellRendererProductCodeSingle},COUNT_NEW_current:{headerName:CsvType.getName(CsvType.COUNT_NEW.index),headerComponentParams:{template:GridHelper.getHeaderComponentTemplate('<i class="fa fa-circle" style="font-size: 7px;transform: translateY(-1px);color:'+
CsvType.getObject(CsvType.COUNT_NEW.index).color+'" ></i> ',"")},field:"COUNT_NEW_current",type:["offerCountColumn"],width:120},COUNT_USED_current:{headerName:CsvType.getName(CsvType.COUNT_USED.index),headerComponentParams:{template:GridHelper.getHeaderComponentTemplate('<i class="fa fa-circle" style="font-size: 7px;transform: translateY(-1px);color:'+CsvType.getObject(CsvType.COUNT_USED.index).color+'" ></i> ',"")},field:"COUNT_USED_current",type:["offerCountColumn"],width:120},COUNT_REFURBISHED_current:{headerName:CsvType.getName(CsvType.COUNT_REFURBISHED.index),
headerComponentParams:{template:GridHelper.getHeaderComponentTemplate('<i class="fa fa-circle" style="font-size: 7px;transform: translateY(-1px);color:'+CsvType.getObject(CsvType.COUNT_REFURBISHED.index).color+'" ></i> ',"")},field:"COUNT_REFURBISHED_current",type:["offerCountColumn"],width:140},COUNT_COLLECTIBLE_current:{headerName:CsvType.getName(CsvType.COUNT_COLLECTIBLE.index),headerComponentParams:{template:GridHelper.getHeaderComponentTemplate('<i class="fa fa-circle" style="font-size: 7px;transform: translateY(-1px);color:'+
CsvType.getObject(CsvType.COUNT_COLLECTIBLE.index).color+'" ></i> ',"")},field:"COUNT_COLLECTIBLE_current",type:["offerCountColumn"],width:140},trackingSince:{headerName:"Tracking since",field:"trackingSince",type:["dateAgoColumn"],cellRenderer:function(L){if("undefined"===typeof L.value||null==L.value)return"";if(-1==L.value)return"-";if(-2==L.value)return"?";L=Math.floor(60*(keepaTime.now()-L.value));return Math.floor(L/86400)+" "+la._143}}},p={},H;for(H in v)v[H].children?(p.$jscomp$loop$prop$keepChildren$736=
[],v[H].children.forEach(function(L){return function(B,E){0<Object.keys(B).length&&L.$jscomp$loop$prop$keepChildren$736.push(B)}}(p)),v[H].children=p.$jscomp$loop$prop$keepChildren$736):0===Object.keys(v[H]).length&&delete v[H],p={$jscomp$loop$prop$keepChildren$736:p.$jscomp$loop$prop$keepChildren$736};return v},pa=function(){for(var v=la._557+" & "+la._981,p={headerName:v,children:[{headerName:la._557,headerNameGroup:v,field:"description",cellRenderer:GridHelper.cellRendererDescription,minWidth:140,
width:200,hide:!0}]},H={$jscomp$loop$prop$i$738:0};5>H.$jscomp$loop$prop$i$738;H={$jscomp$loop$prop$i$738:H.$jscomp$loop$prop$i$738},H.$jscomp$loop$prop$i$738++)p.children.push({headerName:la._982+" "+(H.$jscomp$loop$prop$i$738+1),headerNameGroup:v,field:"feature"+H.$jscomp$loop$prop$i$738,cellRenderer:function(L){return function(B){return GridHelper.cellRendererFeatures(B,L.$jscomp$loop$prop$i$738)}}(H),minWidth:140,width:200,hide:!0});return p},ca=function(v,p,H){if(!CsvType[v].isEnabled&&("RENT"!==
v||"RENT"===v&&Number(storage.domain)!==getDomainByTld("com")))return{};var L=CsvType[v].index,B=CsvType.getName(L),E="SALES"===v?["salesRankColumn"]:["priceColumn"],U="asinDeals"===p,ka="asinFinder"===p,ma="asinViewer"===p;p="asin"===p&&"bestseller"===H;H=null;GridHelper.isOfferData(v)&&(H="? = last offer update older than 72 hours\nitalic = last offer update older than 24 hours");L={headerName:CsvType.getNameWithCircle(L),children:[{headerName:la._344,headerNameGroup:B,headerTooltip:H,field:v+"_current",
type:E},U&&"LIGHTNING_DEAL"!==v?{headerName:"1 day avg.",headerNameGroup:B,field:v+"_avg1",type:E,hide:!0}:{},U&&"LIGHTNING_DEAL"!==v?{headerName:"7 days avg.",headerNameGroup:B,field:v+"_avg7",type:E,hide:!0}:{},"LIGHTNING_DEAL"!==v?{headerName:"30 days avg.",headerNameGroup:B,field:v+"_avg30",type:E,hide:!0}:{},"LIGHTNING_DEAL"!==v?{headerName:"90 days avg.",headerNameGroup:B,field:v+"_avg90",type:E}:{},"LIGHTNING_DEAL"===v||U?{}:{headerName:"180 days avg.",headerNameGroup:B,field:v+"_avg180",type:E,
hide:!0},U&&"LIGHTNING_DEAL"!==v?V({headerNameGroup:B,csvType:v,range:1}):{},U&&"LIGHTNING_DEAL"!==v?V({headerNameGroup:B,csvType:v,range:7}):{},U&&"LIGHTNING_DEAL"!==v?V({headerNameGroup:B,csvType:v,range:30}):"LIGHTNING_DEAL"!==v?C({headerNameGroup:B,csvType:v,range:30,hide:!0}):{},U&&"LIGHTNING_DEAL"!==v?V({headerNameGroup:B,csvType:v,range:90}):"LIGHTNING_DEAL"!==v?C({headerNameGroup:B,csvType:v,range:90,hide:!ka}):{},ma&&"LIGHTNING_DEAL"!==v?f({headerNameGroup:B,csvType:v,range:"custom",hide:ma}):
{},ma&&"LIGHTNING_DEAL"!==v?C({headerNameGroup:B,csvType:v,range:"custom",hide:ma}):{},ma&&"LIGHTNING_DEAL"!==v?{headerName:"Last visit",headerTooltip:"("+prettyDate((Date.now()-(Number(storage.lastViewerVisit)||Date.now()))/6E4).replace(/&nbsp;/g," ")+")",headerNameGroup:B,field:v+"_atIntervalStart",type:E,hide:!0}:{},"LIGHTNING_DEAL"!==v?{headerName:"Lowest",headerNameGroup:B,headerTooltip:"The all time lowest price.",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'<i class="fa fa-info"></i>')},
field:v+"_lowest",type:E,hide:!0}:{},"LIGHTNING_DEAL"!==v?{headerName:"Highest",headerNameGroup:B,headerTooltip:"The all time highest price.",headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'<i class="fa fa-info"></i>')},field:v+"_highest",type:E,hide:!0}:{}]};"SALES"===v&&(L.groupId="groupSalesRank",L.children[0].sort="asc",p&&L.children.unshift({headerName:"Historical",headerNameGroup:B,headerTooltip:null,field:v+"_avgHistorical",type:E}),U||(L.children.push(O(30)),L.children.push(O(90)),
L.children.push(O(180)),L.children.push(z()),L.children.push(I())));"AMAZON"===v&&(!0!==disableStockFeatures&&L.children.push({headerName:"Stock",headerNameGroup:CsvType.getName(CsvType.AMAZON.index),field:"stockAmazon",type:["stockSingleColumn"],hide:!0}),L.children.push(GridHelperCsvType.getColumnOutOfStockPercentage(v)),L.children.push({headerName:"Availability of the Amazon offer",headerNameGroup:CsvType.getName(CsvType.AMAZON.index),headerTooltip:"Availability of the Amazon offer",field:"availabilityAmazon",
cellRenderer:function(na){return GridHelper.defaultTextClamp(na.valueFormatted,3,!0)},filter:"agSetColumnFilter",filterParams:{cellHeight:22,cellRenderer:function(na){return'<span title="'+na.valueFormatted+'" class="text-clamp clamp-lines-1">'+na.valueFormatted+"</span>"},suppressAndOrCondition:!0,suppressMiniFilter:!0,suppressRemoveEntries:!0,values:ka?[-1,0,1,2,3,4]:null,valueMap:ka?GridHelper.availabilityAmazonValueMap:null},hide:!0,sortable:!1,suppressSizeToFit:!0,valueFormatter:function(na){return GridHelper.availabilityAmazonValueMap[na.value]},
width:150}),L.children.push({headerName:"Amazon offer shipping delay",headerNameGroup:CsvType.getName(CsvType.AMAZON.index),headerTooltip:"Amazon offer shipping delay",field:"availabilityAmazonDelay",cellRenderer:GridHelper.cellRendererAvailabilityAmazonDelay,filter:!1,hide:!0,sortable:!1,suppressSizeToFit:!0,width:150}));["NEW","USED"].includes(v)&&L.children.push(GridHelperCsvType.getColumnOutOfStockPercentage(v));"BUY_BOX_SHIPPING"===v&&(!0!==disableStockFeatures&&L.children.push({headerName:"Stock",
headerNameGroup:CsvType.getName(CsvType.BUY_BOX_SHIPPING.index),field:"stockBuyBox",type:["stockSingleColumn"]}),L.children.push(GridHelperCsvType.getColumnOutOfStockPercentage(v)));"LIGHTNING_DEAL"===v&&L.children.push({headerName:"Upcoming Deal",headerNameGroup:CsvType.getName(CsvType.LIGHTNING_DEAL.index),field:"LIGHTNING_DEAL_upcoming",type:["booleanColumn"],valueGetter:function(na){return"undefined"===typeof na.data?!1:(na=na.data.stats.lightningDealInfo?na.data.stats.lightningDealInfo[0]:-1)&&
na>keepaTime.now()}});return L},sa=function(v){var p=CsvType[v].index;if(graphIsRestricted(storage.domain,p))return{};var H=CsvType.getName(p),L=v+"History";return{headerName:CsvType.getNameWithCircle(p),children:[{headerName:la._344,headerNameGroup:H,field:v+"_current",type:["priceColumn"]},{field:L,headerName:"History",headerNameGroup:H,type:["graphColumn"],cellRenderer:function(B){if("undefined"===typeof B.data)return"";var E=B.data.csv[p]?B.data.csv[p]:null,U=CsvType[v].isWithShipping;if(!E||
E.length===(U?3:2)&&0>=E[U?2:1])return"-";E=B.data[L]?B.data[L]:B.context.oldestHistoricalDataInHours;U=L+"Cache";if(!B.data[U]){var ka=$("<div/>",{id:"graph-"+L+"-"+B.data.asin}),ma=$("<div/>",{style:"visibility: hidden;"});ma.append(ka);$("body").append(ma);graph.insertPriceGraph(B.data,ka,p,E);B.data[U]=ka.get(0);ma.detach()}return B.data[U]},minWidth:200,maxWidth:200,resizable:!1}]}},Z=function(v){if(!CsvType[v].isEnabled)return{};var p=function(W){return CsvType[v].isTrackable?la._746:""},H=
function(W,ya,Aa){Aa&&reportBug(null,ya);showPopup(W,ya,!0)},L=GridManage.pageConfig.activeViewMode===GridManage.viewModes.COMPACT,B=GridHelper.csvTypeIsTrackable(v),E=CsvType[v].index,U=CsvType.getName(E),ka=CsvType[v].currency,ma=E===CsvType.LIGHTNING_DEAL.index,na=Number(storage.lastManageVisit)||Date.now();return{headerName:CsvType.getNameWithCircle(E),headerTooltip:U,children:[L&&CsvType[v].graphAPI?{headerName:la._692,headerNameGroup:U,headerTooltip:la._692,field:v+"_graph",cellClass:"cell-graph-compact",
cellRenderer:function(W){if(W.data.isDeleted||-2===W.data.product[v+"_current"])return"";var ya=GridManage.graphRanges,Aa=ya.MONTH;Aa=-1<GridManage.pageConfig.graphRange?GridManage.pageConfig.graphRange:2399976;var Da=Math.ceil(Aa/24),va="1 "+la._136;Aa==ya.WEEK?va="1 "+la._137:Aa==ya.MONTH?va="1 "+la._139:Aa==ya.QUARTER?va=""+la._140:Aa==ya.YEAR?va="1 "+la._141:GridManage.pageConfig.graphRange==ya.ALL&&(va="");var za=W.data.detailDomainId;ya=W.data.product.csvTypesWithData;W.data.product.domainId!==
za&&(Aa=W.data.multiLocaleProductsReduced.find(function(Ha){return Ha.domainId===za}))&&(ya=Aa.csvTypesWithData);Aa="";ya.includes(v)&&(ya=GraphService.getWebGraphTypeAllOff(),ya[CsvType[v].index]=1,Aa=GraphService.getUrl(W.data.asin,za,103,37,ya,Da,1));Da=document.createElement("span");Da.title="Amazon."+getTldByDomain(za)+": "+va+" "+U+" "+("SALES"!==v?"price ":"")+"history";Da.style.background=Aa?"url("+Aa+") no-repeat left":"none";Da.style.height="37px";Da.style.width="103px";W.data.multiLocaleProductsReduced.length&&
(Da.style.cursor="pointer",Da.dataset.domainid=za,Da.addEventListener("click",function(){var Ha=getTldByDomain($(this).data("domainid"));Ha=W.data.multiDomainIds.indexOf(Ha);Ha=getDomainByTld(W.data.multiDomainIds[Ha+1]?W.data.multiDomainIds[Ha+1]:W.data.multiDomainIds[0]);var ea=W.node.data;ea.detailDomainId=Ha;W.api.updateRowData({update:[ea]})}));va=document.createElement("span");va.appendChild(Da);return va},filter:!1,getQuickFilterText:function(W){return""},lockPinned:!0,suppressMenu:!0,suppressSizeToFit:!0,
sortable:!1,suppressToolPanel:!1,valueGetter:function(W){return"graph-"+W.data.detailDomainId},minWidth:101,maxWidth:101,width:101}:{},{headerName:la._344,headerNameGroup:U,headerTooltip:la._344,headerClass:"header-cell-align-right",field:v+"_current",cellClass:"cell-number cell-number-bold",type:["trackingColumn"]},B&&ma?{headerName:la._869,headerNameGroup:U,headerTooltip:la._431,headerClass:"header-cell-align-right",field:v+"_upcoming",cellClass:"cell-icon cell-right cell-text-compact",cellRenderer:function(W){return W.value?
'<span><i class="fa fa-check" style="color:rgba(255, 0, 0, 0.7);"></i></span>':""},filter:"customBooleanColumnFilter",getQuickFilterText:null,icons:GridHelper.getIconsSortNumeric(),lockPinned:!0,suppressSizeToFit:!0,valueGetter:function(W){return W.data.product[v+"_upcoming"]},minWidth:100,width:100,editable:!0,cellEditor:"cellEditorThresholdBooleanValues",cellEditorParams:{isMultiLocaleData:!1},enableCellChangeFlash:!0,suppressKeyboardEvent:GridHelper.cellSuppressKeyboardEvent,tooltipValueGetter:p,
valueSetter:function(W){W.data.domainId!=getDomainByTld("in")&&W.data.domainId!=getDomainByTld("com.br")||0!==W.data.multiLocaleProductsReduced.length||(W.newValue=!1);if(W.newValue===W.oldValue)return!1;var ya=function(Aa,Da){var va=Aa.node.data;va.product[v+"_upcoming"]=Da;setTimeout(function(){Aa.api.updateRowData({update:[va]})},0)};(function(Aa){var Da=GridManage.getTrackingUpdateObject();Da.lightningDealsAlerts=Aa.newValue;var va={path:"track",type:"updateTracking",asin:Aa.data.asin,trackingUpdate:Da};
isTest&&console.info("%ctrackingUpdateRequest","color:green;",Da);network.request(va).done(function(za){null==za.error?ya(Aa,Da.lightningDealsAlerts):H("Tracking Update Error",za.error,!0)}).fail(function(za){H("Tracking Update Error",za.error,!0)})})(W);return!0}}:{},B&&ma?{headerName:la._870,headerNameGroup:U,headerTooltip:la._713,headerClass:"header-cell-align-right",field:v+"_backInStock",cellClass:"cell-icon cell-right cell-boolean",cellRenderer:function(W){var ya=W.colDef.field;if("undefined"!==
typeof W.data.isUpdating&&!0===W.data.isUpdating[ya])return'<div style="text-align:right;padding-top:5px;"><i class="fa fa-spinner fa-spin"></i></div>';ya=W.data.product[v+"_backInStock"]?'<span><i class="fa fa-check" style="color:rgba(255, 0, 0, 0.7);"></i></span><br>':"<span><i>&nbsp;</i></span><br>";if(W.data.multiLocaleProductsReduced.length){W=$jscomp.makeIterator(W.data.multiLocaleProductsReduced);for(var Aa=W.next();!Aa.done;Aa=W.next())ya+=Aa.value[v+"_backInStock"]?'<span><i class="fa fa-check" style="color:rgba(255, 0, 0, 0.7);"></i></span><br>':
"<span><i>&nbsp;</i><span><br>"}return ya},filter:"customBooleanColumnFilter",filterValueGetter:function(W){var ya=W.data.product[v+"_backInStock"];if(W.data.multiLocaleProductsReduced.length){W=$jscomp.makeIterator(W.data.multiLocaleProductsReduced);for(var Aa=W.next();!Aa.done;Aa=W.next())Aa.value[v+"_backInStock"]&&(ya=!0)}return ya},getQuickFilterText:null,icons:GridHelper.getIconsSortNumeric(),lockPinned:!0,suppressSizeToFit:!0,valueGetter:function(W){var ya={};ya[W.data.product.domainId]=W.data.product[v+
"_backInStock"];if(W.data.multiLocaleProductsReduced.length){W=$jscomp.makeIterator(W.data.multiLocaleProductsReduced);for(var Aa=W.next();!Aa.done;Aa=W.next())Aa=Aa.value,ya[Aa.domainId]=Aa[v+"_backInStock"]}return ya},minWidth:130,width:130,editable:!0,cellEditor:"cellEditorThresholdBooleanValues",cellEditorParams:{isMultiLocaleData:!0},enableCellChangeFlash:!0,suppressKeyboardEvent:GridHelper.cellSuppressKeyboardEvent,tooltipValueGetter:p,valueSetter:function(W){var ya=W.colDef.field,Aa=W.newValue;
Aa[getDomainByTld("in")]&&(Aa[getDomainByTld("in")]=!1);Aa[getDomainByTld("com.br")]&&(Aa[getDomainByTld("com.br")]=!1);var Da=function(za){var Ha=NotifyIfType.indexOf("BACK_IN_STOCK"),ea=W.node,ia=ea.data;ia.isUpdating[ya]=!1;if(!0!==za)ea.setData(ia);else{za=ia.multiLocaleProductsReduced;var ua={},fa;for(fa in Aa){ua.$jscomp$loop$prop$domainId$271$746=fa;a:{var oa=Aa[ua.$jscomp$loop$prop$domainId$271$746],G=!1;if(ua.$jscomp$loop$prop$domainId$271$746==ia.domainId){if(oa==ia.product[ya])break a;
ia.product[ya]=oa;!0===oa&&(ia.product[v+"_desired"]=-1,ia.product[v+"_delta"]=null);0<ia.product[v+"_current"]&&(ia.product[v+"_isDrop"]&&0>=ia.product[v+"_delta"]||!ia.product[v+"_isDrop"]&&0<=ia.product[v+"_delta"])&&(G=!0)}else{var X=za.findIndex(function(aa){return function(da){return da.domainId==aa.$jscomp$loop$prop$domainId$271$746}}(ua));if(-1<X){if(oa==ia.multiLocaleProductsReduced[X][ya])break a;ia.multiLocaleProductsReduced[X][ya]=oa;!0===oa&&(ia.multiLocaleProductsReduced[X][v+"_desired"]=
-1,ia.multiLocaleProductsReduced[X][v+"_delta"]=null);0<ia.multiLocaleProductsReduced[X][v+"_current"]&&(ia.multiLocaleProductsReduced[X][v+"_isDrop"]&&0>=ia.multiLocaleProductsReduced[X][v+"_delta"]||!ia.multiLocaleProductsReduced[X][v+"_isDrop"]&&0<=ia.multiLocaleProductsReduced[X][v+"_delta"])&&(G=!0)}}X=ia.conditionsMet.findIndex(function(aa){return function(da){return da.domainId==aa.$jscomp$loop$prop$domainId$271$746&&da.csvTypeIndex==CsvType[v].index}}(ua));G&&-1==X?ia.conditionsMet.push({domainId:Number(ua.$jscomp$loop$prop$domainId$271$746),
csvTypeIndex:CsvType[v].index}):!G&&-1<X&&ia.conditionsMet.splice(X,1);null==ia.tracking.thresholdValues&&(ia.tracking.thresholdValues=[]);G=ia.tracking.thresholdValues.findIndex(function(aa){return function(da){return da.csvType==CsvType[v].index&&da.domain==aa.$jscomp$loop$prop$domainId$271$746}}(ua));!0===oa&&-1<G&&(ia.tracking.thresholdValues=ia.tracking.thresholdValues.filter(function(aa){return function(da){return!(da.csvType==CsvType[v].index&&da.domain==aa.$jscomp$loop$prop$domainId$271$746)}}(ua)));
!0===oa?ia.tracking.notifyIf.push({domain:Number(ua.$jscomp$loop$prop$domainId$271$746),csvType:CsvType[v].index,notifyIfType:Ha}):ia.tracking.notifyIf=ia.tracking.notifyIf.filter(function(aa){return function(da){return!(da.domain===Number(aa.$jscomp$loop$prop$domainId$271$746)&&da.csvType===CsvType[v].index&&da.notifyIfType===Ha)}}(ua))}ua={$jscomp$loop$prop$domainId$271$746:ua.$jscomp$loop$prop$domainId$271$746}}setTimeout(function(){ea.setData(ia);if(!L){var aa=W.api.getDetailGridInfo(W.node.detailNode.id);
aa.api.forEachNode(function(da){var qa=da.data;qa.detailsPerDomain=[];for(var xa=1;xa<numberOfDomains;xa++)delete qa["historyGraphCache"+xa];network.request({path:"product",asin:ia.asin,domainId:ia.detailDomainId,getTracking:!0,history:!0,maxAge:15,offerPages:0,refreshProduct:!1,type:"manage"}).done(function(wa){null==wa||null==wa.products||1!=wa.products.length?(qa.detailDomainId=ia.detailDomainId,da.setData(qa)):(wa=GridHelper.prepareProductTrackingDetail(wa.products[0]),qa.detailDomainId=ia.detailDomainId,
qa.detailsPerDomain[ia.detailDomainId]={asin:wa.asin,domainId:wa.domainId,imagesCSV:wa.imagesCSV,title:wa.title,lastUpdate:wa.lastUpdate,lastEbayUpdate:wa.lastEbayUpdate,lastPriceChange:wa.lastPriceChange,graphData:{buyBoxSellerIdHistory:wa.buyBoxSellerIdHistory,csv:wa.csv,offers:wa.offers,tracking:ia.tracking},detailRowHeight:GridManage.calculateDetailRowHeight(wa)},qa.wishLists=ia.wishLists,qa.detailRowHeight=ia.detailRowHeight,da.setData(qa),da.setRowHeight(qa.detailsPerDomain[ia.detailDomainId].detailRowHeight),
ia.detailNode&&ia.detailNode.setRowHeight(qa.detailsPerDomain[ia.detailDomainId].detailRowHeight),W.api.onRowHeightChanged(),aa.api.onRowHeightChanged())}).fail(showErrorPopup)})}},0)}},va=function(){var za=NotifyIfType.indexOf("BACK_IN_STOCK"),Ha=function(G,X){X===CsvType.LIGHTNING_DEAL.index&&(ia.desiredPrices=ia.desiredPrices.filter(function(aa){return!(aa.domain===G&&aa.csvType===X)}))},ea=W.data.tracking,ia=GridManage.getTrackingCreationObject(ea,!0,!1),ua=Object.keys(Aa),fa=ea.notifyIf;if("undefined"!==
fa&&null!=fa){ea={};fa=$jscomp.makeIterator(fa);for(var oa=fa.next();!oa.done;ea={$jscomp$loop$prop$existingNotifyIf$748:ea.$jscomp$loop$prop$existingNotifyIf$748},oa=fa.next())ea.$jscomp$loop$prop$existingNotifyIf$748=oa.value,ea.$jscomp$loop$prop$existingNotifyIf$748.csvType!==CsvType[v].index||ea.$jscomp$loop$prop$existingNotifyIf$748.notifyIfType!==za?ia.notifyIf.push(ea.$jscomp$loop$prop$existingNotifyIf$748):ea.$jscomp$loop$prop$existingNotifyIf$748.csvType===CsvType[v].index&&ea.$jscomp$loop$prop$existingNotifyIf$748.notifyIfType===
za&&!0===W.newValue[ea.$jscomp$loop$prop$existingNotifyIf$748.domain]&&(ia.notifyIf.push(ea.$jscomp$loop$prop$existingNotifyIf$748),ua=ua.filter(function(G){return function(X){return Number(X)!==G.$jscomp$loop$prop$existingNotifyIf$748.domain}}(ea)),Ha(ea.$jscomp$loop$prop$existingNotifyIf$748.domain,ea.$jscomp$loop$prop$existingNotifyIf$748.csvType))}if(ua.length)for(ua=$jscomp.makeIterator(ua),ea=ua.next();!ea.done;ea=ua.next())ea=ea.value,ea=Number(ea),!0===W.newValue[ea]&&(ia.notifyIf.push({domain:ea,
csvType:CsvType[v].index,notifyIfType:za}),Ha(ea,CsvType[v].index));isTest&&console.info("%ctrackingCreationObject","color:green;",ia);network.request({path:"track",type:"addTracking",trackingRequest:ia}).done(function(G){if(null==G.error)Da(!0),$("#fab-refresh").show();else{switch(G.error.type){case "productNotKnown":H("Tracking Error","Product is invalid and can not be tracked.",!1);break;case "maxTrackingReached":H("Tracking Limit Reached",la._920.replace("#maxTrackingAllowed#",maxTrackingAllowed)+
"<br><br><b>"+la._921+"</b>",!1);break;default:H("Tracking Error",G.error,!0)}Da(!1)}}).fail(function(G){H("Tracking Error",G.error,!0);Da(!1)})};return function(){var za=W.data.multiLocaleProductsReduced,Ha={},ea;for(ea in Aa){Ha.$jscomp$loop$prop$domainId$270$740=ea;var ia=Aa[Ha.$jscomp$loop$prop$domainId$270$740];if(Ha.$jscomp$loop$prop$domainId$270$740==W.data.domainId&&ia!==W.data.product[ya])return!0;var ua=za.findIndex(function(fa){return function(oa){return oa.domainId==fa.$jscomp$loop$prop$domainId$270$740}}(Ha));
if(-1<ua&&W.data.multiLocaleProductsReduced[ua][ya]!==ia)return!0;Ha={$jscomp$loop$prop$domainId$270$740:Ha.$jscomp$loop$prop$domainId$270$740}}return!1}()?("undefined"===typeof W.data.isUpdating&&(W.data.isUpdating={}),W.data.isUpdating[ya]=!0,va(),!0):!1}}:{},B?{headerName:ka?la._342.replace("&nbsp;"," "):la._860,headerNameGroup:U,headerTooltip:ka?la._342.replace("&nbsp;"," "):la._860,headerClass:"header-cell-align-right",field:v+"_desired",cellClass:function(W){var ya=["cell-number"],Aa=W.data.product;
if(!Aa.csvTypesWithTracking.includes(v)||!0!==W.context.hasPriceIncreaseTracking)return ya;Aa[v+"_isDrop"]?ya.push("cell-desired-drop"):ya.push("cell-desired-increase");return ya},cellStyle:function(W){if(W.data.isDeleted||!W.data.product.csvTypesWithTracking.includes(v))return null;W=CsvType[v].bg;var ya=CsvType[v].color;W=W.replace(/0.[1-9]/,"0.2");return{"background-color":W,"--csvtype-color":ya}},type:["trackingColumn"],editable:function(W){if(!CsvType[v].isTrackable)return!1;W=$jscomp.makeIterator(W.data.multiDomainIds);
for(var ya=W.next();!ya.done;ya=W.next())if(ya=getDomainByTld(ya.value),graphIsRestricted(ya,CsvType[v].index))return!1;return!0},cellEditor:"cellEditorThresholdValues",enableCellChangeFlash:!0,suppressKeyboardEvent:GridHelper.cellSuppressKeyboardEvent,tooltipValueGetter:p,valueParser:function(W){isTest&&console.info("%cvalueParser","color:orange;","newValue:",W.newValue);return W.newValue},valueSetter:function(W){var ya=v+"_desired",Aa=function(za,Ha,ea){var ia=keepaTime.now(),ua=za.node,fa=ua.data;
fa.isUpdating[ya]=!1;if(!0!==ea)ua.setData(fa);else{ea=fa.multiLocaleProductsReduced;var oa={},G;for(G in Ha){oa.$jscomp$loop$prop$domainId$277$755=G;a:{var X=Ha[oa.$jscomp$loop$prop$domainId$277$755];if(-2<X){var aa=null,da=X,qa=!1;if(oa.$jscomp$loop$prop$domainId$277$755==fa.domainId){if(X==fa.product[ya])break a;fa.product[ya]=X;0<fa.product[v+"_current"]&&0<da&&(aa=fa.product[v+"_current"]-da);fa.product[v+"_delta"]=aa;0<fa.product[v+"_current"]&&(fa.product[v+"_isDrop"]&&0>=fa.product[v+"_delta"]||
!fa.product[v+"_isDrop"]&&0<=fa.product[v+"_delta"])&&(qa=!0);CsvType[v].index===CsvType.LIGHTNING_DEAL.index&&0<=X&&(fa.product[v+"_backInStock"]=!1)}else{var xa=ea.findIndex(function(wa){return function(Ca){return Ca.domainId==wa.$jscomp$loop$prop$domainId$277$755}}(oa));if(-1<xa){if(X==fa.multiLocaleProductsReduced[xa][ya])break a;fa.multiLocaleProductsReduced[xa][ya]=X;currencies[fa.domainId]!==currencies[oa.$jscomp$loop$prop$domainId$277$755]&&(da=Money.raw(da,{sourceDomainId:fa.domainId,targetDomainId:oa.$jscomp$loop$prop$domainId$277$755,
keepUnit:!0,noDigits:!0}));0<fa.multiLocaleProductsReduced[xa][v+"_current"]&&0<da&&(aa=fa.multiLocaleProductsReduced[xa][v+"_current"]-da);fa.multiLocaleProductsReduced[xa][v+"_delta"]=aa;0<fa.multiLocaleProductsReduced[xa][v+"_current"]&&(fa.multiLocaleProductsReduced[xa][v+"_isDrop"]&&0>=fa.multiLocaleProductsReduced[xa][v+"_delta"]||!fa.multiLocaleProductsReduced[xa][v+"_isDrop"]&&0<=fa.multiLocaleProductsReduced[xa][v+"_delta"])&&(qa=!0);CsvType[v].index===CsvType.LIGHTNING_DEAL.index&&0<=X&&
(fa.multiLocaleProductsReduced[xa][v+"_backInStock"]=!1)}}aa=fa.conditionsMet.findIndex(function(wa){return function(Ca){return Ca.domainId==wa.$jscomp$loop$prop$domainId$277$755&&Ca.csvTypeIndex==CsvType[v].index}}(oa));qa&&-1==aa?fa.conditionsMet.push({domainId:Number(oa.$jscomp$loop$prop$domainId$277$755),csvTypeIndex:CsvType[v].index}):!qa&&-1<aa&&fa.conditionsMet.splice(aa,1);null==fa.tracking.thresholdValues&&(fa.tracking.thresholdValues=[]);qa=fa.tracking.thresholdValues.findIndex(function(wa){return function(Ca){return Ca.csvType==
CsvType[v].index&&Ca.domain==wa.$jscomp$loop$prop$domainId$277$755}}(oa));-1<qa?(fa.tracking.thresholdValues[qa].thresholdValueCSV.push(ia),fa.tracking.thresholdValues[qa].thresholdValueCSV.push(X)):fa.tracking.thresholdValues.push({csvType:CsvType[v].index,deltasAreBetweenNotifications:null,domain:Number(oa.$jscomp$loop$prop$domainId$277$755),isDrop:fa.product[v+"_isDrop"],minDeltaAbsolute:null,minDeltaPercentage:null,thresholdValueCSV:[ia,X]});CsvType[v].index===CsvType.LIGHTNING_DEAL.index&&0<=
X&&(fa.tracking.notifyIf=fa.tracking.notifyIf.filter(function(wa){return function(Ca){return!(Ca.domain===Number(wa.$jscomp$loop$prop$domainId$277$755)&&Ca.csvType===CsvType[v].index&&1===Ca.notifyIfType)}}(oa)))}}oa={$jscomp$loop$prop$domainId$277$755:oa.$jscomp$loop$prop$domainId$277$755}}setTimeout(function(){ua.setData(fa);if(!L){var wa=za.api.getDetailGridInfo(za.node.detailNode.id);wa.api.forEachNode(function(Ca){var Ba=Ca.data;Ba.detailsPerDomain=[];for(var Fa=1;Fa<numberOfDomains;Fa++)delete Ba["historyGraphCache"+
Fa];network.request({path:"product",asin:fa.asin,domainId:fa.detailDomainId,getTracking:!0,history:!0,maxAge:15,offerPages:0,refreshProduct:!1,type:"manage"}).done(function(Ea){null==Ea||null==Ea.products||1!=Ea.products.length?(Ba.detailDomainId=fa.detailDomainId,Ca.setData(Ba)):(Ea=GridHelper.prepareProductTrackingDetail(Ea.products[0]),Ba.detailDomainId=fa.detailDomainId,Ba.detailsPerDomain[fa.detailDomainId]={asin:Ea.asin,domainId:Ea.domainId,imagesCSV:Ea.imagesCSV,title:Ea.title,lastUpdate:Ea.lastUpdate,
lastEbayUpdate:Ea.lastEbayUpdate,lastPriceChange:Ea.lastPriceChange,graphData:{buyBoxSellerIdHistory:Ea.buyBoxSellerIdHistory,csv:Ea.csv,offers:Ea.offers,tracking:fa.tracking},detailRowHeight:GridManage.calculateDetailRowHeight(Ea)},Ba.wishLists=fa.wishLists,Ba.detailRowHeight=fa.detailRowHeight,Ca.setData(Ba),Ca.setRowHeight(Ba.detailsPerDomain[fa.detailDomainId].detailRowHeight),fa.detailNode&&fa.detailNode.setRowHeight(Ba.detailsPerDomain[fa.detailDomainId].detailRowHeight),za.api.onRowHeightChanged(),
wa.api.onRowHeightChanged())}).fail(showErrorPopup)})}},0)}},Da=function(za,Ha){var ea=function(X,aa){aa===CsvType.LIGHTNING_DEAL.index&&(ua.notifyIf=ua.notifyIf.filter(function(da){return!(da.domain===X&&da.csvType===aa&&1===da.notifyIfType)}))},ia=za.data.tracking,ua=GridManage.getTrackingCreationObject(ia,!1,!0),fa=ia.thresholdValues;if("undefined"!==fa&&null!=fa){var oa=Object.keys(Ha);ia={};fa=$jscomp.makeIterator(fa);for(var G=fa.next();!G.done;ia={$jscomp$loop$prop$existingThresholdValue$757:ia.$jscomp$loop$prop$existingThresholdValue$757},
G=fa.next())ia.$jscomp$loop$prop$existingThresholdValue$757=G.value,G=ia.$jscomp$loop$prop$existingThresholdValue$757.thresholdValueCSV[ia.$jscomp$loop$prop$existingThresholdValue$757.thresholdValueCSV.length-1],ia.$jscomp$loop$prop$existingThresholdValue$757.csvType===CsvType[v].index&&"undefined"!==typeof Ha[ia.$jscomp$loop$prop$existingThresholdValue$757.domain]&&(G=Ha[ia.$jscomp$loop$prop$existingThresholdValue$757.domain],oa=oa.filter(function(X){return function(aa){return Number(aa)!==X.$jscomp$loop$prop$existingThresholdValue$757.domain}}(ia))),
0>G||(ua.desiredPrices.push({domain:ia.$jscomp$loop$prop$existingThresholdValue$757.domain,csvType:ia.$jscomp$loop$prop$existingThresholdValue$757.csvType,isDrop:ia.$jscomp$loop$prop$existingThresholdValue$757.isDrop,thresholdValue:G}),ea(ia.$jscomp$loop$prop$existingThresholdValue$757.domain,ia.$jscomp$loop$prop$existingThresholdValue$757.csvType));oa=$jscomp.makeIterator(oa);for(ia=oa.next();!ia.done;ia=oa.next())if(ia=ia.value,ia=Number(ia),"AMAZON"!==v||ia!=getDomainByTld("in"))fa=Ha[ia],0>fa||
(ua.desiredPrices.push({domain:ia,csvType:CsvType[v].index,isDrop:za.data.product[v+"_isDrop"],thresholdValue:fa}),ea(ia,CsvType[v].index))}else for(oa in Ha)if("AMAZON"!==v||oa!=getDomainByTld("in"))ia=Ha[oa],0>ia||(ua.desiredPrices.push({domain:oa,csvType:CsvType[v].index,isDrop:!0,thresholdValue:ia}),ea(oa,CsvType[v].index));isTest&&console.info("%ctrackingCreationObject","color:green;",ua);network.request({path:"track",type:"addTracking",trackingRequest:ua}).done(function(X){if(null==X.error)Aa(za,
Ha,!0),$("#fab-refresh").show();else{switch(X.error.type){case "productNotKnown":H("Tracking Error","Product is invalid and can not be tracked.",!1);break;case "maxTrackingReached":H("Tracking Limit Reached",la._920.replace("#maxTrackingAllowed#",maxTrackingAllowed)+"<br><br><b>"+la._921+"</b>",!1);break;default:H("Tracking Error",X.error,!0)}Aa(za,Ha,!1)}}).fail(function(X){H("Tracking Error",X.error,!0);Aa(za,Ha,!1)})},va=function(za){var Ha={},ea;for(ea in za){var ia=za[ea];"string"===typeof ia&&
(ia=ia.replace(/(\d)\.(\d\d)/g,"$1$2"),ia=ia.replace(/(\d),(\d)/g,"$1$2"),ia=ia.replace(/^0+/,""),ia="-"===ia?-1:parseFloat(ia));Ha[ea]=ia}return Ha}(W.newValue);"AMAZON"===v&&(va[getDomainByTld("in")]=-1);return function(za,Ha){var ea=za.data.multiLocaleProductsReduced,ia={},ua;for(ua in Ha){ia.$jscomp$loop$prop$domainId$276$750=ua;var fa=Ha[ia.$jscomp$loop$prop$domainId$276$750];if(-2<fa){if(ia.$jscomp$loop$prop$domainId$276$750==za.data.domainId&&fa!==za.data.product[ya])return!0;var oa=ea.findIndex(function(G){return function(X){return X.domainId==
G.$jscomp$loop$prop$domainId$276$750}}(ia));if(-1<oa&&za.data.multiLocaleProductsReduced[oa][ya]!==fa)return!0}ia={$jscomp$loop$prop$domainId$276$750:ia.$jscomp$loop$prop$domainId$276$750}}return!1}(W,va)?("undefined"===typeof W.data.isUpdating&&(W.data.isUpdating={}),W.data.isUpdating[ya]=!0,Da(W,va),!0):!1}}:{},B?{headerName:ka?la._198:la._861,headerNameGroup:U,headerTooltip:ka?la._198:la._861,headerClass:"header-cell-align-right",field:v+"_delta",cellRenderer:function(W){if("undefined"===typeof W.data||
W.data.isDeleted)return"";var ya=W.colDef.field,Aa=GridHelper.getCsvObjectName(ya),Da=W.data.product[v+"_isDrop"],va="",za=W.value[0],Ha=null!=za&&(Da&&0>=za||!Da&&0<=za);za=Ha?"fa-caret-down":"fa-caret-up";Da||(za=Ha?"fa-caret-up":"fa-caret-down");"-"!=W.valueFormatted&&(va=' <i class="fa '+za+'" style="color:'+(Ha?"limegreen":"red")+';"></i>');var ea="";"-"!=W.valueFormatted&&(ea=NumberUtil.format(W.data.product[v+"_deltaPercent"],0)+"%&ensp;&hybull;&ensp;");va='<span class="delta'+(Ha?"-good":
"")+'" style="color:'+CsvType[Aa].color+";border-color:"+CsvType[Aa].bg+';">'+ea+W.valueFormatted+va+"</span>";if(W.data.multiLocaleProductsReduced.length)for(Ha=$jscomp.makeIterator(W.data.multiLocaleProductsReduced),ea=Ha.next();!ea.done;ea=Ha.next()){ea=ea.value;var ia=ea[ya],ua="-",fa="",oa="",G="",X=null!=ia&&(Da&&0>=ia||!Da&&0<=ia);null!=ia&&0!=ia&&(ua={sourceDomainId:ea.domainId,targetDomainId:W.data.domainId,acceptMinusOne:ya.includes("delta")},ka?(ua=Money.format(ia,ua),ea.domainId!==W.data.domainId&&
currencies[ea.domainId]!==currencies[W.data.domainId]&&(oa=Money.format(ia,{sourceDomainId:ea.domainId,targetDomainId:ea.domainId,acceptMinusOne:ya.includes("delta")}))):ua=CsvType.format(Aa,ia),fa=' <i class="fa '+za+'" style="color:'+(X?"limegreen":"red")+';"></i>',G=NumberUtil.format(ea[v+"_deltaPercent"],0)+"%&ensp;&hybull;&ensp;");va+='<br><span class="delta'+(0<X?"-good":"")+'" style="color:'+CsvType[Aa].color+";border-color:"+CsvType[Aa].bg+';font-style:italic;opacity:0.8;"'+(oa?'title="'+
oa+'"':"")+">"+G+ua+fa+"</span>"}return va},sortingOrder:["asc","desc",null],type:["trackingColumn"],enableCellChangeFlash:!0}:{},B&&!ma?{headerName:la._701,headerNameGroup:U,headerTooltip:la._701+" ("+prettyDate((Date.now()-na)/6E4).replace(/&nbsp;/g," ")+")",headerClass:"header-cell-align-right",field:v+"_deltaCustom",cellRenderer:GridHelper.cellRendererTrackingDelta,hide:!0,sortingOrder:["asc","desc",null],type:["trackingColumn"],width:150}:{},B&&!ma?{headerName:la._702,headerNameGroup:U,headerTooltip:""+
la._702,headerClass:"header-cell-align-right",field:v+"_deltaTrackingCreated",cellRenderer:GridHelper.cellRendererTrackingDelta,hide:!0,sortingOrder:["asc","desc",null],type:["trackingColumn"],width:186}:{},B?{headerName:la._977,headerNameGroup:U,headerTooltip:""+la._977,field:v+"_lastPriceChange",type:["dateAgoColumn"],valueGetter:GridHelper.valueGetterTrackingNonCsvArray,comparator:GridHelper.comparatorNumberArrayOnlyFirstNullLast,cellClass:"cell-boolean",cellRenderer:GridHelper.cellRendererDateAgoArray,
hide:!0}:{}]}},N=function(v,p){p="asinFinder"===p;var H=CsvType[v].index,L=CsvType.getName(H);return{headerName:CsvType.getNameWithCircle(H),children:[{headerName:la._344,headerNameGroup:L,field:v+"_current",type:["offerCountColumn"]},{headerName:"30 days avg.",headerNameGroup:L,field:v+"_avg30",type:["offerCountColumn"]},{headerName:"90 days avg.",headerNameGroup:L,field:v+"_avg90",type:["offerCountColumn"]},{headerName:"180 days avg.",headerNameGroup:L,field:v+"_avg180",type:["offerCountColumn"]},
C({headerNameGroup:L,csvType:v,range:90,hide:!p})]}},f=function(v){var p=v.range,H=p+" day"+(1<p?"s":"")+" drop";"custom"===p&&(H=la._199);var L=Number(storage.lastViewerVisit)||Date.now();return{headerName:H,headerTooltip:"custom"===p?"("+prettyDate((Date.now()-L)/6E4).replace(/&nbsp;/g," ")+")":null,headerNameGroup:v.headerNameGroup,field:v.csvType+"_delta"+("custom"===p?"Custom":p),cellRenderer:function(B){if("undefined"===typeof B.data)return"";var E=B.colDef.field,U=GridHelper.getCsvObjectName(E),
ka=CsvType[U].currency,ma="",na="";null!=B.value&&(0==B.value?(ma=' <i class="fa fa-arrow-circle-right" style="color:#ccc;"></i>',na=' <i class="fa fa-arrow-circle-right" style="color:#ccc;"></i> '):(na=0<B.value,ma=' <i class="fa fa-arrow-circle-'+(na?"down":"up")+'" style="color:'+(na?"green":"red")+';"></i>',na=' <i class="fa fa-arrow-circle-'+(na?"down":"up")+'" style="color:#ccc"></i> '));U='<span style="color:'+CsvType[U].color+'">'+B.valueFormatted+"</span>"+ma;ka&&showReferencePrice(B.data.domainId)&&
(E=B.data[E],B=null==B.value?"-":Money.format(E,{sourceDomainId:B.data.domainId,targetDomainId:B.data.domainId}),U=U+'<br><span style="color:#ccc;">'+(B+"</span> "+na));return U},type:["deltaColumn"],hide:v.hide||!1,width:"custom"===p?128:88,valueFormatter:GridHelper.valueFormatterDelta,valueGetter:function(B){if("undefined"===typeof B.data)return null;var E=B.colDef.field,U=GridHelper.getCsvObjectName(E);if(GridHelper.isOfferData(U)&&(B.data.offersOutdated||B.data.offersNeverUpdated)||-1===B.data[U+
"_current"])return null;E=B.data[E];return"SALES"===U||null==E?E:Money.raw(E,{sourceDomainId:B.data.domainId,targetDomainId:0<currencyDomainId?currencyDomainId:Number(B.data.domainId)})}}},C=function(v){var p=v.range,H=p+" day"+(1<p?"s":"")+" drop %";"custom"===p&&(H="Drop % since last visit");"COUNT_REVIEWS"===v.csvType&&(H=CsvType.getName(CsvType.COUNT_REVIEWS.index)+" - "+H);var L=Number(storage.lastViewerVisit)||Date.now();return{headerName:H,headerTooltip:"custom"===p?"("+prettyDate((Date.now()-
L)/6E4).replace(/&nbsp;/g," ")+")":null,headerNameGroup:v.headerNameGroup,field:v.csvType+"_deltaPercent"+("custom"===p?"Custom":p),cellRenderer:function(B){var E=GridHelper.getCsvObjectName(B.colDef.field),U="";null!=B.value&&(0==B.value?U=' <i class="fa fa-arrow-circle-right" style="color:#ccc;"></i> ':(U=0<B.value,U=' <i class="fa fa-arrow-circle-'+(U?"down":"up")+'" style="color:'+(U?"green":"red")+';"></i> '));return'<span style="color:'+CsvType[E].color+'">'+B.valueFormatted+"</span>"+U},type:["deltaPercentColumn"],
hide:v.hide||!1,width:"custom"===p?138:98,valueFormatter:function(B){return null==B.value?"-":B.value+" %"},valueGetter:function(B){if("undefined"===typeof B.data)return null;var E=B.colDef.field,U=GridHelper.getCsvObjectName(E);if(GridHelper.isOfferData(U)&&(B.data.offersOutdated||B.data.offersNeverUpdated)||-1===B.data[U+"_current"])return null;var ka=B.data[E];if("undefined"===typeof ka){isTest&&!E.includes("_deltaPercentCustom")&&console.log("ATTENTION: values are calculated",E);E=B.data[U+"_current"];
ka=B.data[U+"_avg"+p];"custom"===p&&(ka=B.data.stats.atIntervalStart[CsvType[U].index]);"WAREHOUSE"===U&&"custom"!==p&&(B.data["AMAZON_avg"+p]&&0<B.data["AMAZON_avg"+p]?ka=B.data["AMAZON_avg"+p]:B.data["NEW_avg"+p]&&0<B.data["NEW_avg"+p]&&(ka=B.data["NEW_avg"+p]));if(0>E||0>ka||0==ka)return null;B=Math.round(100*(1-E/ka));99<B&&(B=99);-99>B&&(B=-99);ka=B}return ka}}},V=function(v){var p=v.range;return{headerName:p+" day"+(1<p?"s":"")+" drop",headerNameGroup:v.headerNameGroup,field:v.csvType+"_deltaPercent"+
p,cellClass:"cell-number cell-deal",cellRenderer:function(H){var L=GridHelper.getCsvObjectName(H.colDef.field),B="",E="";null!=H.value&&(0==H.value?E=' <i class="fa fa-arrow-circle-right" style="color:#ccc;"></i> ':(E=0<H.value,E=' <i class="fa fa-arrow-circle-'+(E?"down":"up")+'" style="color:'+(E?"green":"red")+';"></i> '),0!==H.value&&(B=H.data[L+"_delta"+p],B="SALES"===L?NumberUtil.format(B):Money.format(B,{sourceDomainId:H.data.domainId})));return'<span class="drop" style="color:'+CsvType[L].color+
'">'+H.valueFormatted+"</span>"+E+'\n\t\t\t\t\t\t<br><span style="color:'+CsvType[L].color+'">'+B+"</span>"},type:["deltaPercentColumn"],valueFormatter:function(H){return null==H.value?"-":H.value+" %"},valueGetter:function(H){if("undefined"===typeof H.data)return null;var L=H.colDef.field,B=GridHelper.getCsvObjectName(L);return GridHelper.isOfferData(B)&&(H.data.offersOutdated||H.data.offersNeverUpdated)||-1===H.data[B+"_current"]?null:H.data[L]}}},ba=function(){return{headerName:"FBA Pick&Pack Fee",
field:"fbaFees",cellClass:"cell-number",cellRenderer:GridHelper.cellRendererFbaFees,comparator:GridHelper.comparatorNumberNullLast,filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterMoney,valueGetter:function(v){if("undefined"===typeof v.data||null==v.data.fbaFees)return null;var p=v.data.domainId;return Money.raw(v.data[v.colDef.field+"Total"],{sourceDomainId:p,targetDomainId:p})},width:190}},w=function(v){var p="offerCount"+
v,H="FBM"===v?"NEW_FBM_SHIPPING":"NEW_FBA";return{headerName:"New, "+v,headerNameGroup:"Count of retrieved live offers",field:p,cellClass:"cell-number",cellRenderer:function(L){if("undefined"===typeof L.data)return"";var B="";L.data.offersOutworn&&!L.data.offersOutdated&&(B="font-style:italic;");return'<span style="color:'+CsvType[H].color+";"+B+'">'+L.valueFormatted+"</span>"},comparator:GridHelper.comparatorNumberNullLast,equals:function(){return!1},filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),
suppressSizeToFit:!0,valueFormatter:function(L){return null==L.value?"-":L.value},valueGetter:function(L){if("undefined"===typeof L.data)return null;L=L.data.stats[p];return 0>L?null:L},width:110}},O=function(v){var p="salesRankDrops"+v;return{headerName:"Drops last "+v+" days",headerNameGroup:CsvType.getName(CsvType.SALES.index),field:p,type:["numberColumn"],cellRenderer:function(H){return'<span style="color:'+CsvType.SALES.color+';">'+H.valueFormatted+"</span>"},suppressSizeToFit:!0,width:110}},
z=function(){return{headerName:"Reference",headerNameGroup:CsvType.getName(CsvType.SALES.index),field:"salesRankReference",cellRenderer:function(v){return"undefined"===typeof v.data||v.data.salesRankReference>invalidIfLargerCatId||-1===v.data.salesRankReference?"":-2===v.data.salesRankReference?"Launchpad":GridHelperCategory.render(v.data.domainId,v.data.salesRankReference,v.value,v)},filter:!1,sortable:!1,suppressMenu:!0,suppressSizeToFit:!0,valueGetter:GridHelperCategory.valueGetterSalesRankReference,
width:160}},I=function(){return{headerName:"Subcategory Sales Ranks",headerNameGroup:CsvType.getName(CsvType.SALES.index),field:"subcategorySalesRanks",cellRenderer:function(v){var p=v.value;if(!p||0===p.length)return"-";v="";p=$jscomp.makeIterator(p);for(var H=p.next();!H.done;H=p.next())currentRank=H.value,H=100<currentRank.topPct?"":'Top <span style="width: 30px; display: inline-block; text-align: right;">'+currentRank.topPct+"%</span>",v+='\n                        <span style="width: 65px; display: inline-block; margin-right: 8px; text-align: right; color:'+
CsvType.SALES.color+';">'+CsvType.format("SALES",currentRank.rank)+'</span>\n                        <span style="width: 65px; display: inline-block;color:#40bdb2;" title="Products in Category: '+NumberUtil.format(currentRank.cr.productCount)+'">'+H+'</span>\n                        <span style="color:#333;" title="'+(currentRank.cr.contextFreeName==currentRank.tree?"":currentRank.tree)+'">'+currentRank.cr.contextFreeName+"</span>\n                        <br>\n                    ";return v},filter:!1,
sortable:!1,suppressMenu:!0,suppressSizeToFit:!0,width:300}},K=function(v){var p="sellerIdsLowest"+v,H="FBM"===v?"NEW_FBM_SHIPPING_current":"NEW_FBA_current";return{headerName:"Lowest "+v+" Seller",headerTooltip:"Seller of the lowest priced live "+v+" offer(s). Multiple entries if multiple offers share the same price. (x%) = Rating of the displayed seller.",field:p,cellRenderer:GridHelper.cellRendererSellerIdsLowest,hide:!0,valueFormatter:GridHelper.valueFormatterSellerIdsLowest,valueGetter:function(L){return"undefined"===
typeof L.data||null==L.data.asin||L.data.offersOutdated||L.data.offersNeverUpdated||0>L.data[H]||(null==L.data.stats[p]||0==L.data.stats[p].length)&&"undefined"==typeof L.data[p]?null:L.data[p]?L.data[p]:L.data.stats[p]},filter:!1,suppressMenu:!0,sortable:!1,suppressSizeToFit:!0,width:220}},A=function(v){var p=GridManage.pageConfig.activeViewMode===GridManage.viewModes.COMPACT,H="tags"===v,L={tags:la._807,memo:la._808},B="agLargeTextCellEditor",E={maxLength:100,rows:4,cols:30},U="agTextColumnFilter",
ka={suppressAndOrCondition:!0};H&&(B="cellEditorAutocompleteChips",E={},U="agSetColumnFilter",ka={cellHeight:22,suppressAndOrCondition:!0,suppressMiniFilter:!0,suppressRemoveEntries:!0});return{headerName:L[v],field:v,cellClass:p?"cell-text-compact cell-wrap":"cell-wrap",cellEditor:B,cellEditorParams:E,cellRenderer:function(ma){if("undefined"!==typeof ma.data.isUpdating&&!0===ma.data.isUpdating[v])return'<div><i class="fa fa-spinner fa-spin"></i></div>';var na="",W="";"string"===typeof ma.value?(na=
ma.value.replace(/[\r\n]+/g,"<br>"),W=escapeHTML(ma.value)):ma.value instanceof Array&&ma.value.length&&(na=ma.value.map(function(ya){return null==ya?"":'<span class="chip"><span>'+ya+"</span></span>"}).filter(function(ya){return ya.length}).join(" "),W=ma.value.join(" "));return'<span class="text-clamp clamp-lines-'+Math.max(2,ma.data.multiLocaleProductsReduced.length)+'" title="'+W+'">'+na+"</span>"},editable:function(ma){return!0!==ma.data.isDeleted},enableCellChangeFlash:!0,filter:U,filterParams:ka,
suppressMenu:H,suppressSizeToFit:!0,suppressKeyboardEvent:GridHelper.cellSuppressKeyboardEvent,tooltipValueGetter:function(ma){return!0===ma.data.isDeleted?"":la._806},valueGetter:function(ma){var na=H?[null]:"";if(ma.data.isDeleted)return na;try{var W=JSON.parse(ma.data.tracking.metaData);if("undefined"!==typeof W[v]){var ya=W[v];H&&("string"===typeof W[v]&&(ya=[W[v]]),0<ya.length&&ya.sort(),0===ya.length&&(ya=na));return ya}}catch(Aa){}return na},valueSetter:function(ma){var na=function(W,ya){var Aa=
W.node.data;Aa.tracking.metaData=ya;setTimeout(function(){W.api.updateRowData({update:[Aa]});if(H){var Da=W.api.getFilterInstance(v),va=Da.getModel();Da.resetFilterValues();null!==va&&Da.setModel(va);GridManage.updateFilterToolbar(["tags"])}},0)};(function(W){var ya=H?200:100,Aa=W.newValue;if(H)for(;Aa.join('","').length>ya;)Aa.pop();else Aa=Aa.slice(0,ya);var Da=GridManage.getTrackingUpdateObject();try{var va=JSON.parse(W.data.tracking.metaData);va[v]=Aa}catch(za){ya={},va=(ya[v]=Aa,ya)}Da.metaData=
JSON.stringify(va);Aa={path:"track",type:"updateTracking",asin:W.data.asin,trackingUpdate:Da};isTest&&console.info("%ctrackingUpdateRequest","color:green;",Da);network.request(Aa).done(function(za){null==za.error?na(W,Da.metaData):(za=za.error,reportBug(null,za),showPopup("Tracking Update Error",za,!0))}).fail(function(za){za=za.error;reportBug(null,za);showPopup("Tracking Update Error",za,!0)})})(ma);return!0},minWidth:80,width:100}},J=function(v,p){var H=!0;"domainId asin imagesCSV title dealFound eanList upcList color size edition format".split(" ").includes(v.field)?
H=!1:v.field.includes("_current")&&v.type&&v.type.some(function(L){return["priceColumn","salesRankColumn"].includes(L)})?H=!1:v.type&&v.type.some(function(L){return["deltaColumn","deltaPercentColumn"].includes(L)})&&(H=!1);v.hide=H;p.filterFields.includes(v.field)&&(v.cellClass="cell-number cell-deal-filtered");v.filter=!1;v.sortable=!1;v.suppressMenu=!0;return v},S=function(v){var p=v.field,H=v.type?v.type[0]:null,L="_highest _lowest COLLECTIBLE_ACCEPTABLE_SHIPPING_ COLLECTIBLE_GOOD_SHIPPING_ COLLECTIBLE_NEW_SHIPPING_ COLLECTIBLE_VERY_GOOD_SHIPPING_".split(" ");
isTest||L.push("_deltaPercent30");var B=["_deltaPercent30"];Number(storage.domain)!==getDomainByTld("com")&&(L.push("TRADE_IN_"),L.push("RENT_"));var E="COUNT_REVIEWS_current COUNT_REVIEWS_avg30 COUNT_REVIEWS_avg90 COUNT_REVIEWS_avg180 itemWeight numberOfItems numberOfPages packageWeight packageQuantity RATING_current AMAZON_outOfStockPercentage90 NEW_outOfStockPercentage90 USED_outOfStockPercentage90 BUY_BOX_SHIPPING_outOfStockPercentage90 salesRankDrops30 salesRankDrops90 salesRankDrops180".split(" ");
switch(p){case "title":v.filter="agTextColumnFilter";v.filterParams={applyButton:!0,caseSensitive:!0,filterOptions:["contains"],newRowsAction:"keep",suppressAndOrCondition:!0};break;case "partNumber":v.filter="agTextColumnFilter";v.filterParams={applyButton:!0,caseSensitive:!0,defaultOption:"isOneOf",filterOptions:[{displayKey:"isOneOf",displayName:"isOneOf",test:!0},{displayKey:"isNoneOf",displayName:"isNoneOf",test:!0}],newRowsAction:"keep",suppressAndOrCondition:!0};break;case "categories":v.filter=
"customAutocompleteColumnFilter";v.filterParams={applyButton:!0,caseSensitive:!0,defaultOption:"isOneOf",filterOptions:[{displayKey:"isOneOf",displayName:"isOneOf",test:!0}],newRowsAction:"keep",suppressAndOrCondition:!0};v.suppressMenu=!1;break;case "categories_exclude":v.filter="customAutocompleteColumnFilter";v.filterParams={applyButton:!0,caseSensitive:!0,defaultOption:"isNoneOf",filterOptions:[{displayKey:"isNoneOf",displayName:"isNoneOf",test:!0}],newRowsAction:"keep",suppressAndOrCondition:!0};
v.suppressMenu=!1;break;case "author":case "binding":case "brand":case "color":case "edition":case "format":case "languages":case "manufacturer":case "model":case "productGroup":case "size":v.filter="customAutocompleteColumnFilter";v.filterParams={applyButton:!0,caseSensitive:!0,defaultOption:"isOneOf",filterOptions:[{displayKey:"isOneOf",displayName:"isOneOf",test:!0},{displayKey:"isNoneOf",displayName:"isNoneOf",test:!0}],newRowsAction:"keep",suppressAndOrCondition:!0};v.suppressMenu=!1;break;case "buyBoxSellerIdHistory":case "buyBoxUsed.seller":v.filter=
"customDynamicColumnFilter";v.filterParams={applyButton:!0,newRowsAction:"keep",suppressAndOrCondition:!0};v.suppressMenu=!1;break;case "availabilityAmazonDelay":case "categoryTree":case "contributors":case "description":case "eanList":case "feature0":case "feature1":case "feature2":case "feature3":case "feature4":case "frequentlyBoughtTogether":case "linkReviews":case "parentAsin":case "reviews.ratingCount":case "reviews.reviewCount":case "sellerIdsLowestFBA":case "sellerIdsLowestFBM":case "subcategorySalesRanks":case "stockAmazon":case "stockBuyBox":case "upcList":case "urlAmazon":case "urlKeepa":case "variationCSV":v.filter=
!1;v.suppressMenu=!0;break;case "packageQuantity":v.filter=!1;v.suppressMenu=!0;break;case "asin":case "domainId":case "imagesCSV":v.filter=!1;v.suppressMenu=!0;break;case "lastUpdate":case "lastOffersUpdate":v.filter=!1;v.suppressMenu=!0;break;case "lastPriceChange":case "listedSince":case "publicationDate":case "releaseDate":case "trackingSince":v.filter="agDateColumnFilter";v.filterParams={applyButton:!0,defaultOption:"lessThanOrEqual",filterOptions:["lessThanOrEqual","greaterThanOrEqual","inRange"],
newRowsAction:"keep",suppressAndOrCondition:!0};v.suppressMenu=!1;break;case "rootCategory":E=GridHelperCategory.getRootHashMap(storage.domain);B=[];for(var U in E)E=GridHelperCategory.getRoot(storage.domain,U),B.push({value:E.catId,label:E.name+" ("+E.productCount+")"});B.sort(function(ka,ma){ka=ka.label.toUpperCase();ma=ma.label.toUpperCase();return ka<ma?-1:ka>ma?1:0});v.filter="customSingleChoiceColumnFilter";v.filterParams={applyButton:!0,valueOptions:B,newRowsAction:"keep",suppressAndOrCondition:!0};
v.suppressMenu=!1;break;case "couponOneTimeAbsolute":case "couponOneTimePercent":case "couponSNSPercent":v.suppressMenu=!1;break;case "offerCountFBA":case "offerCountFBM":case "fbaFees":v.filter="agNumberColumnFilter";v.filterParams={applyButton:!0,defaultOption:"lessThanOrEqual",filterOptions:["lessThanOrEqual","greaterThanOrEqual","inRange"],newRowsAction:"keep",suppressAndOrCondition:!0};break;case "availabilityAmazon":case "buyBoxUsed.condition":case "checkboxSelection":case "itemDimension":case "packageDimension":case "salesRankReference":case "variationAttributes":break;
default:p.includes("LIGHTNING_DEAL")&&Number(storage.domain)===getDomainByTld("in")?(v.filter=!1,v.suppressMenu=!0):"deltaPercentColumn"===H||"measureColumn"===H||"offerCountColumn"===H||"priceColumn"===H||"salesRankColumn"===H||E.includes(p)?"priceColumn"!==H&&"salesRankColumn"!==H&&"deltaPercentColumn"!==H||!B.concat(L).some(function(ka){return 0<=p.indexOf(ka)})?(v.filter="agNumberColumnFilter",v.filterParams={applyButton:!0,defaultOption:"lessThanOrEqual",filterOptions:["lessThanOrEqual","greaterThanOrEqual",
"inRange"],newRowsAction:"keep",suppressAndOrCondition:!0}):(v.filter=!1,v.suppressMenu=!0):"booleanColumn"===H?(v.filter="customBooleanColumnFilter",v.filterParams={applyButton:!0,newRowsAction:"keep",isCheckbox:!1,suppressAndOrCondition:!0},v.suppressMenu=!1):"hiddenColumn"===H?v.suppressMenu=!1:(v.filter=!1,v.suppressMenu=!0,isTest&&console.warn("Missing filter setting: "+v.field+" | "+H))}switch(p){case "availabilityAmazon":case "availabilityAmazonDelay":case "buyBoxSellerIdHistory":case "buyBoxIsFBA":case "buyBoxUsed.seller":case "buyBoxUsed.isFBA":case "buyBoxUsed.condition":case "domainId":case "eanList":case "frequentlyBoughtTogether":case "imagesCSV":case "isAdultProduct":case "isEligibleForSuperSaverShipping":case "isEligibleForTradeIn":case "isSNS":case "languages":case "parentAsin":case "promotions":case "sellerIdsLowestFBA":case "sellerIdsLowestFBM":case "subcategorySalesRanks":case "upcList":case "variationCSV":v.sortable=
!1;break;case "asin":case "categoryTree":case "contributors":case "description":case "feature0":case "feature1":case "feature2":case "feature3":case "feature4":case "linkReviews":case "reviews.ratingCount":case "reviews.reviewCount":case "stockAmazon":case "stockBuyBox":case "urlAmazon":case "urlKeepa":case "variationAttributes":v.sortable=!1;break;case "packageQuantity":v.sortable=!1;break;case "categories":case "rootCategory":case "salesRankReference":v.sortable=!1;break;default:"priceColumn"!==
H&&"salesRankColumn"!==H&&"deltaPercentColumn"!==H||!L.some(function(ka){return 0<=p.indexOf(ka)})?v.sortable="hiddenColumn"===H?!1:!0:v.sortable=!1}return v};return{csvTypesEnableLowestEver:a,csvTypesEnableOutOfStock:b,csvTypesOfferCounts:["COUNT_NEW","COUNT_USED","COUNT_REFURBISHED","COUNT_COLLECTIBLE"],gridTypesWithCheckboxSelection:enableListTrackingComponent?["asinViewer","variation"]:[],maxValuesPerFinderFilter:50,maxRowsFreeUser:5,rowHeight:d,unitSystem:{METRIC:{measure:"cm",weight:"g"},IMPERIAL:{measure:"in",
weight:"lb"}},get:n,getColumns:t,getColumnDeltaPercent:C,getNewColumns:function(v){switch(v){case "bestseller":case "deals":case "storefront":var p="asin";break;case "viewer":p="asinViewer";break;case "finder":p="asinFinder";break;default:p=v}var H={asin:[],asinViewer:[],asinFinder:[],manage:[],offer:[],buyBoxStatistics:[],buyBoxUsedStatistics:[],variation:[]};if(["asin","asinViewer","asinFinder"].includes(p)){"bestseller"===v&&H.asin.push({colState:{colId:"SALES_avgHistorical",hide:!1},insertAfterColId:"title"});
H.asin.push({colState:{colId:"AMAZON_outOfStockPercentage90",hide:"deals"===v?!0:!1},insertAfterColId:"AMAZON_highest"},{colState:{colId:"NEW_outOfStockPercentage90",hide:"deals"===v?!0:!1},insertAfterColId:"NEW_highest"},{colState:{colId:"USED_outOfStockPercentage90",hide:"deals"===v?!0:!1},insertAfterColId:"USED_highest"});for(var L=$jscomp.makeIterator(GridConfig.csvTypesOfferCounts),B=L.next();!B.done;B=L.next())B=B.value,H.asin.push({colState:{colId:B+"_avg30",hide:"finder"===v?!1:!0},insertAfterColId:B+
"_current"},{colState:{colId:B+"_avg180",hide:"finder"===v?!1:!0},insertAfterColId:B+"_avg90"},{colState:{colId:B+"_deltaPercent90",hide:"finder"===v?!1:!0},insertAfterColId:B+"_avg180"});H.asin.push({colState:{colId:"description",hide:!0},insertAfterColId:"title"},{colState:{colId:"feature0",hide:!0},insertAfterColId:"description"});for(v=0;5>v;v++)H.asin.push({colState:{colId:"feature"+v,hide:!0},insertAfterColId:0===v?"description":"feature"+(v-1)});H.asin.push({colState:{colId:"COUNT_REVIEWS_deltaPercent90",
hide:!0},insertAfterColId:"COUNT_REVIEWS_avg180"});H.asin.push({colState:{colId:"contributors",hide:!1},insertAfterColId:"author"});v=$jscomp.makeIterator([{csvTypeName:"BUY_BOX_USED_SHIPPING",insertAfterColId:rearrangeCsvTypes?"LIGHTNING_DEAL_upcoming":"buyBoxIsUnqualified"},{csvTypeName:"PRIME_EXCL",insertAfterColId:"sellerIdsLowestFBM"}]);for(L=v.next();!L.done;L=v.next())L=L.value,CsvType[L.csvTypeName].isEnabled&&(H.asin.push({colState:{colId:L.csvTypeName+"_current",hide:!1},insertAfterColId:L.insertAfterColId},
{colState:{colId:L.csvTypeName+"_avg30",hide:!1},insertAfterColId:L.csvTypeName+"_current"},{colState:{colId:L.csvTypeName+"_avg90",hide:!1},insertAfterColId:L.csvTypeName+"_avg30"},{colState:{colId:L.csvTypeName+"_avg180",hide:!1},insertAfterColId:L.csvTypeName+"_avg90"},{colState:{colId:L.csvTypeName+"_deltaPercent30",hide:!1},insertAfterColId:L.csvTypeName+"_avg180"},{colState:{colId:L.csvTypeName+"_deltaPercent90",hide:!1},insertAfterColId:L.csvTypeName+"_deltaPercent30"},{colState:{colId:L.csvTypeName+
"_deltaCustom",hide:!1},insertAfterColId:L.csvTypeName+"_deltaPercent90"},{colState:{colId:L.csvTypeName+"_deltaPercentCustom",hide:!1},insertAfterColId:L.csvTypeName+"_deltaCustom"},{colState:{colId:L.csvTypeName+"_atIntervalStart",hide:!1},insertAfterColId:L.csvTypeName+"_deltaPercentCustom"},{colState:{colId:L.csvTypeName+"_lowest",hide:!1},insertAfterColId:L.csvTypeName+"_atIntervalStart"},{colState:{colId:L.csvTypeName+"_highest",hide:!1},insertAfterColId:L.csvTypeName+"_lowest"}),"BUY_BOX_USED_SHIPPING"===
L.csvTypeName&&H.asin.push({colState:{colId:"buyBoxUsed.seller",hide:!1},insertAfterColId:L.csvTypeName+"_highest"},{colState:{colId:"buyBoxUsed.isFBA",hide:!1},insertAfterColId:"buyBoxUsed.seller"},{colState:{colId:"buyBoxUsed.condition",hide:!1},insertAfterColId:"buyBoxUsed.isFBA"}));H.asin.push({colState:{colId:"availabilityAmazonDelay",hide:!0},insertAfterColId:"availabilityAmazon"});H.asinFinder=H.asin.slice(0);H.asinViewer=H.asin.slice(0)}if("manage"===p){v=["COLLECTIBLE_NEW_SHIPPING","COLLECTIBLE_VERY_GOOD_SHIPPING",
"COLLECTIBLE_GOOD_SHIPPING","COLLECTIBLE_ACCEPTABLE_SHIPPING","REFURBISHED_SHIPPING"];CsvType.BUY_BOX_USED_SHIPPING.isEnabled&&CsvType.BUY_BOX_USED_SHIPPING.isTrackable&&v.push("BUY_BOX_USED_SHIPPING");CsvType.PRIME_EXCL.isEnabled&&v.push("PRIME_EXCL");L=CsvType.getObjectNamesSortedTracking();for(var E in CsvType)if("object"===typeof CsvType[E]&&(B=GridHelper.csvTypeIsTrackable(E),v.includes(E))){var U=CsvType[E].index;U=rearrangeCsvTypes?L[L.indexOf(E)-1]:CsvType.getObjectName(U-1);var ka=GridHelper.csvTypeIsTrackable(U);
H.manage.push({colState:{colId:E+"_current",hide:!1},insertAfterColId:ka?U+"_deltaTrackingCreated":U+"_current"});B&&(H.manage.push({colState:{colId:E+"_desired",hide:!1},insertAfterColId:E+"_current"}),H.manage.push({colState:{colId:E+"_delta",hide:!1},insertAfterColId:E+"_desired"}),H.manage.push({colState:{colId:E+"_deltaCustom",hide:!1},insertAfterColId:E+"_delta"}),H.manage.push({colState:{colId:E+"_deltaTrackingCreated",hide:!1},insertAfterColId:E+"_deltaCustom"}))}}"offer"===p&&H.offer.push({colState:{colId:"coupon",
hide:!1},insertAfterColId:"sellerCurrentRatingCount"},{colState:{colId:"isPrimeExcl",hide:!1},insertAfterColId:"coupon"},{colState:{colId:"primeExclCSV",hide:!1},insertAfterColId:"isPrimeExcl"});"variation"===p&&(graphIsRestricted(storage.domain,CsvType.BUY_BOX_SHIPPING.index)||H.variation.push({colState:{colId:"BUY_BOX_SHIPPING_current",hide:!1},insertAfterColId:"title"}),enableVariationGridPriceGraphs&&H.variation.push({colState:{colId:"BUY_BOX_SHIPPINGHistory",hide:!1},insertAfterColId:"BUY_BOX_SHIPPING_current"},
{colState:{colId:"AMAZONHistory",hide:!1},insertAfterColId:"AMAZON_current"},{colState:{colId:"NEWHistory",hide:!1},insertAfterColId:"NEW_current"},{colState:{colId:"USEDHistory",hide:!1},insertAfterColId:"USED_current"}));enableListTrackingComponent&&GridConfig.gridTypesWithCheckboxSelection.includes(p)&&H[p].push({colState:{colId:"checkboxSelection",hide:!0},insertAfterColId:!1});return H[p]?H[p]:[]},getRowCountOptions:function(v){var p=!hasDataAccessSubscription;return{asin:{values:[5,20,100,500,
1E3,2E3,5E3],disabled:[!1,p,p,p,p,p,p]},asinFinder:{values:[5,20,100,500,1E3,2E3,5E3],disabled:[!1,p,p,p,p,p,p]},seller:{values:[5,1E3,2E3,5E3,1E4,2E4,5E4,1E5],disabled:[!1,p,p,p,p,p,p,p]}}[v]}}}(),GridCellEditorComponents=function(){function a(){}function b(){}function d(){}function g(){}a.prototype.init=function(n){var t=this,h=this;this.eGui=document.createElement("div");this.eGui.className="cell-editing--autocomplete-chips";this.eDivTags=document.createElement("div");n.value.length&&n.value.forEach(function(r){null!=
r&&t.addChip(r.trim())});this.eGui.appendChild(this.eDivTags);var m=document.createElement("div");m.className="flex filter-text--autocomplete ui-front";this.input=document.createElement("input");this.addAutocompleter(n);m.appendChild(this.input).insertAdjacentHTML("beforeend","&emsp;");this.addButton=document.createElement("button");this.addButton.innerHTML='<i class="fa fa-plus"></i>';this.addButton.addEventListener("click",function(r){if(r=h.input.value.trim().replace(/\s\s+/g," "))r.split(" ").forEach(function(q){h.addChip(q,
h.ul)}),h.input.value=""});m.appendChild(this.addButton);this.eGui.appendChild(m);m=document.createElement("div");this.saveButton=document.createElement("button");this.saveButton.innerHTML='<i class="fa fa-caret-right"></i> Ok';this.saveButton.addEventListener("click",function(r){h.addButton.click();n.stopEditing()});m.appendChild(this.saveButton);this.eGui.appendChild(m)};a.prototype.addAutocompleter=function(n){var t=n.api.getFilterInstance(n.column.colDef.field).valueModel.allUniqueValues.filter(function(m){return null!=
m}),h=[];$(this.input).autocomplete({classes:{"ui-autocomplete":"ag-custom-component-popup"},source:function(m,r){var q=m.term;if(q.length){m=t.filter(function(D){return 0===D.indexOf(q)});var u=t.filter(function(D){return 0<D.indexOf(q)});h=m.concat(u)}else h=t;r(h)},autoFocus:!0,delay:200,minLength:0,close:function(m,r){m.stopPropagation()},position:{my:"left top",at:"left bottom",collision:"none"}}).focus(function(){$(this).data("ui-autocomplete").search($(this).val())})};a.prototype.addChip=function(n){if(0!==
n.length){n=n.replace(/\s/g,"");var t=this,h=document.createElement("span");h.className="chip";var m=document.createElement("span");m.innerHTML=""+n;h.appendChild(m).insertAdjacentHTML("beforeend"," ");n=document.createElement("i");n.className="fa fa-times";h.appendChild(n);this.eDivTags.appendChild(h);n.addEventListener("click",function(r){t.eDivTags.removeChild(this.parentElement)})}};a.prototype.getValue=function(){var n=[];this.eDivTags.querySelectorAll("span > span").forEach(function(t){n.push(t.innerHTML.trim())});
return Array.from(new Set(n))};a.prototype.getGui=function(){return this.eGui};a.prototype.afterGuiAttached=function(){};a.prototype.destroy=function(){};a.prototype.isPopup=function(){return!0};b.prototype.init=function(n){var t=this;this.ttlOptions=n.ttlOptions;this.ttlDefault=n.ttlDefault;this.eGui=document.createElement("div");this.eGui.className="cell-editing--images-csv";var h=document.createElement("div"),m=material.getSelect("tracking-ttl","tracking-ttl",this.ttlDefault,this.ttlOptions,"",
!0,!0);h.innerHTML="<span>"+la._906+":</span>&emsp;"+m+"&emsp;";this.hiddenInput=document.createElement("input");this.hiddenInput.hidden=!0;this.hiddenInput.value=0;h.appendChild(this.hiddenInput);this.submitButton=document.createElement("button");this.submitButton.innerHTML='<i class="fa fa-caret-right"></i> Ok';this.submitButton.addEventListener("click",function(r){t.hiddenInput.value=Number($(t.eGui.querySelector("select")).val());n.stopEditing()});h.appendChild(this.submitButton);this.eGui.appendChild(h)};
b.prototype.getValue=function(){var n=Number(this.hiddenInput.value);0<n&&"undefined"===typeof this.ttlOptions.find(function(t){return t.value==n})&&(n=this.ttlDefault);return n};b.prototype.getGui=function(){return this.eGui};b.prototype.afterGuiAttached=function(){};b.prototype.destroy=function(){};b.prototype.isPopup=function(){return!0};d.prototype.init=function(n){var t=n.isMultiLocaleData?n.isMultiLocaleData:!1,h=function(u,D){var F=document.createElement("div");if(t){var M=document.createElement("img");
M.title="."+getTldByDomain(u);M.src=flags[u];F.appendChild(M)}M=function(Q,T,ha){var P=document.createElement("input");P.checked=ha;P.className="ag-filter-checkbox";P.name=u;P.type="radio";P.value=T;T=document.createElement("label");T.appendChild(P);T.insertAdjacentHTML("beforeend"," "+Q);return T};F.appendChild(M(la._254,1,D));F.appendChild(M(la._255,0,!D));return F},m=n.column.colId,r=n.node.data;n=document.createElement("div");n.className="cell-editing--threshold-boolean";n.appendChild(h(r.product.domainId,
r.product[m]));if(t&&r.multiLocaleProductsReduced.length){r=$jscomp.makeIterator(r.multiLocaleProductsReduced);for(var q=r.next();!q.done;q=r.next())q=q.value,n.appendChild(h(q.domainId,q[m]))}this.eGui=n;this.isMultiLocaleData=t};d.prototype.getValue=function(){var n=this.eGui.querySelectorAll("input:checked");if(this.isMultiLocaleData){var t={};n.forEach(function(h){t[Number(h.name)]=1===Number(h.value)});return t}return 1===Number(n[0].value)};d.prototype.getGui=function(){return this.eGui};d.prototype.destroy=
function(){};d.prototype.isPopup=function(){return!1};g.prototype.init=function(n){var t=function(F,M,Q){var T=document.createElement("div"),ha=document.createElement("img");ha.title="."+getTldByDomain(F);ha.src=flags[F];T.appendChild(ha);ha=document.createElement("input");ha.name=F;ha.pattern="^\\d*(\\.\\d{1,2}$)?";ha.title=la._745;ha.value="";r&&0<Q?ha.value=Money.format(Q,{sourceDomainId:M,targetDomainId:M,skipSymbol:!0}).replace(",",""):!r&&0<=Q&&(ha.value="RATING"==m?(Q/10).toFixed(1):Q);T.appendChild(ha);
F=document.createElement("span");F.innerHTML='<i class="fa fa-exclamation" title="'+la._105+'"></i>';T.appendChild(F);return T},h=n.column.colId,m=GridHelper.getCsvObjectName(h),r=CsvType[m].currency;n=n.node.data;var q=document.createElement("div");q.className="cell-editing--threshold";q.appendChild(t(n.product.domainId,n.product.domainId,n.product[h]));if(n.multiLocaleProductsReduced.length)for(var u=$jscomp.makeIterator(n.multiLocaleProductsReduced),D=u.next();!D.done;D=u.next())D=D.value,q.appendChild(t(D.domainId,
n.product.domainId,D[h]));this.eGui=q;this.domainId=n.product.domainId;this.csvTypeName=m;this.isCurrency=r};g.prototype.isValid=function(n){return!isNaN(parseFloat(n))&&isFinite(n)};g.prototype.getValue=function(){var n=this,t={};this.eGui.querySelectorAll("input").forEach(function(h){var m=h.value.trim();m=0===m.length?-1:n.isValid(m)?n.isCurrency?Money.format(Money.unformat(m),{sourceDomainId:n.domainId,targetDomainId:n.domainId,isDivided:!0,skipSymbol:!0}):"RATING"===n.csvTypeName?10*Money.unformat(m):
Money.unformat(m):-2;t[h.name]=m});return t};g.prototype.getGui=function(){return this.eGui};g.prototype.destroy=function(){};g.prototype.isPopup=function(){return!1};return{AutocompleteChips:a,MetaData:b,ThresholdBooleanValues:d,ThresholdValues:g}}(),GridCellRendererComponents=function(){function a(){}a.prototype.init=function(b){this.params=b;this.eGui=document.createElement("div");b=this.getContent();"object"===typeof b?this.eGui.appendChild(b):this.eGui.innerHTML=this.getContent()};a.prototype.getGui=
function(){return this.eGui};a.prototype.refresh=function(b){this.updateRowHeight();return!1};a.prototype.getContent=function(){var b=this;if("productKey"===this.params.column.colId)return this.params.valueFormatted?this.params.valueFormatted:this.params.value;var d="",g=this.params.data.realField,n=this.params.data.realType,t=this.params.data.cellClass;t&&(d+='<div class="'+t+'">');if(n&&n.includes("booleanColumn"))d+=GridHelper.cellRendererBoolean(this.params);else if((g.includes("_current")||g.includes("_avg"))&&
"RATING_current"!==g)d+=GridHelper.cellRendererCsvType(this.params);else switch(g){case "domainId":g=this.params.value;d+='<div class="gridDomainCell">\n\t\t\t\t\t\t\t<img title=".'+getTldByDomain(g)+'" src="'+flags[g]+'">\n\t\t\t\t\t\t</div>';break;case "imagesCSV":this.params.colDef.cellRendererParams={imageSize:36};d+=GridHelper.cellRendererImage(this.params);break;case "title":d+=this.params.value;break;case "lastPriceChange":d+=GridHelper.cellRendererDateAgo(this.params);break;case "trackingSince":d+=
GridHelper.cellRendererDateKeepaTime(this.params);break;case "listedSince":d+=GridHelper.cellRendererDateKeepaTime(this.params);break;case "RATING_current":d+=GridHelper.cellRendererRatingStar(this.params).replace("<br>"," ");break;case "rootCategory":case "salesRankReference":this.params.value<invalidIfLargerCatId&&(g=GridHelperCategory.getName(this.params.data.domainId,this.params.value),g=GridHelperCategory.render(this.params.data.domainId,this.params.value,g),d+="object"===typeof g?g.outerHTML:
g);break;case "categories":this.params.value.forEach(function(r,q){var u=GridHelperCategory.getName(b.params.data.domainId,r);r=GridHelperCategory.render(b.params.data.domainId,r,u);d+=(0<q?" / ":"")+("object"===typeof r?r.outerHTML:r)});break;case "categoryTree":if(null==this.params.value||""===this.params.value)d+="";else{var h=this.params.value,m=document.createElement("div");h.forEach(function(r,q){r=GridHelperCategory.render(b.params.data.domainId,r.catId,r.name);q<h.length-1?m.appendChild(r).insertAdjacentHTML("beforeend",
" &rsaquo; "):m.appendChild(r)});d+=m.outerHTML}break;case "eanList":case "upcList":case "partNumber":return GridHelper.cellRendererProductCodes(this.params);case "manufacturer":case "brand":case "color":case "size":case "edition":case "format":case "author":case "binding":d+=GridHelper.cellRendererTextFinder(this.params);break;case "model":d+=GridHelper.defaultTextClamp(this.params.value);break;case "variationCSV":case "frequentlyBoughtTogether":d+=GridHelper.cellRendererLinkedAsins(this.params);
break;case "productGroup":d+=GridHelper.cellRendererProductGroup(this.params);break;case "publicationDate":case "releaseDate":d+=GridHelper.cellRendererDateYMD(this.params);break;case "packageDimension":case "itemDimension":d+=GridHelper.cellRendererDimension(this.params);break;case "buyBoxSellerIdHistory":d+=GridHelper.cellRendererBuyBoxSellerId(this.params);break;case "buyBoxUsed.seller":d+=GridHelper.cellRendererBuyBoxUsedSeller(this.params);break;case "sellerIdsLowestFBA":case "sellerIdsLowestFBM":d+=
GridHelper.cellRendererSellerIdsLowest(this.params);break;case "couponOneTimeAbsolute":d+=GridHelper.cellRendererMoney(this.params);break;case "fbaFees":d+=GridHelper.cellRendererFbaFees(this.params);break;default:d+=this.params.valueFormatted?this.params.valueFormatted:this.params.value}t&&(d+="</div>");return d};a.prototype.updateRowHeight=function(){var b=this.params.api.getCellRendererInstances({rowNodes:[this.params.node]}).reduce(function(d,g){g.eGui.offsetHeight>d&&(d=g.eGui.offsetHeight);
return d},0);this.params.node.setRowHeight(b+8);this.params.api.onRowHeightChanged()};return{AutoHeightRow:a}}(),GridComponents=function(){function a(){}a.prototype.init=function(b){this.eGui=document.createElement("div");this.eGui.innerHTML='<div class="ag-cell-label-container" role="presentation">\n\t\t\t\t<div ref="eLabel" class="ag-header-cell-label custom-reset-header-cell" role="presentation">\n\t\t\t\t\t<span ref="eText" class="ag-header-cell-text" role="columnheader">'+b.displayName+'&ensp;<i class="fa fa-undo"></i></span>\n\t\t\t\t</div>\n\t\t\t</div>';
this.eLabel=this.eGui.querySelector(".ag-header-cell-label");this.eLabel.addEventListener("click",function(){b.columnApi.resetColumnState();b.api.sizeColumnsToFit();GridState.saveColumnState(b)})};a.prototype.getGui=function(){return this.eGui};a.prototype.destroy=function(){};return{CustomResetHeader:a}}(),GridFilter=function(){function a(){}function b(){}function d(){}function g(){}function n(){}function t(){}var h=null,m=function(u){var D=$(u).attr("name").replace("autocomplete-",""),F=$(u).parent().parent(),
M=F.children("p").first(),Q=F.find('input[type="hidden"]'),T=[],ha=function(P){P=Array.from(new Set(P)).filter(function(ra){return ra.length});var R=Q.val().split("###").filter(function(ra){return ra}),Y=!1;P=$jscomp.makeIterator(P);for(var ja=P.next();!ja.done;ja=P.next())if(ja=ja.value,-1===R.indexOf(ja)){if(0===R.length)M.append(GridFilter.getClearAllItem()).find("i").on("click",function(){q(this)});R.length<GridConfig.maxValuesPerFinderFilter?(M.append("<span><span>"+ja+'</span> <i class="fa fa-times"></i></span>').find("i").on("click",
function(){q(this)}),R.push(ja)):Y=!0}R.length&&(R.sort(),R=R.map(function(ra){return ra.replace(/"/g,"&quot;")}),Q.val(R.join("###")).change());Y&&GridFinder.showPopupMaxValuesPerFinderFilter()};$(u).autocomplete({source:function(P,R){var Y=P.term;Y.includes("###")?R([{data:Y,label:"Multiple values: "+Y,value:" "}]):network.request({path:"pro/autocomplete",content:Y,domainId:Number(storage.domain),maxResults:25,type:D}).done(function(ja){if(null!=ja.suggestions){for(var ra=[],ta=[],pa=0;pa<ja.suggestions.length;pa++){var ca=
ja.suggestions[pa],sa=ca.value+" ("+ca.count+")";ra.push(ca.value);ta.push({label:sa,value:ca.value})}ta.unshift({selectAll:!0,data:ra.join("###"),label:"Select all",value:" "});T=ra;R(ta)}else T=[],R([{label:Y+" (?)",value:Y}])}).fail(function(ja){showErrorPopup("Status: "+ja.status)})},autoFocus:!0,delay:200,minLength:0,close:function(P,R){P=$(u).val();-1<T.indexOf(P)&&ha([P]);$(u).val("")},select:function(P,R){if(""!=R.item.value||""!=R.item.data)return P=[],R.item.data?P=R.item.data.split("###"):
P.push(R.item.value),ha(P),$(u).val(""),!1},position:{my:"left top",at:"left bottom",collision:"none"}}).focus(function(){$(this).data("ui-autocomplete").search($(this).val())}).data("ui-autocomplete")._renderItem=function(P,R){var Y=$("<li>"),ja=$("<div>"),ra=R.label;R.disabled&&(Y.addClass("ui-state-disabled"),ra='<i class="fa fa-ban"></i>&ensp;'+ra);R.selectAll&&(Y.addClass("ui-item-select-all"),ra='<i class="fa fa-check-circle-o"></i>&ensp;'+ra);ja.html(ra);return Y.append(ja).appendTo(P)}},r=
function(u){var D=$(u).attr("name").replace("autocomplete-",""),F=$(u).parent().parent(),M=F.children("p").first(),Q=F.find('input[type="hidden"]'),T="salesRankReference"===D;$(u).autocomplete({source:function(ha,P){ha=ha.term;var R=-1,Y=$("#singleChoice-rootCategory");$(Y).is(":visible")?R=Number(Y.val()):h&&h.api&&(Y=h.api.getFilterInstance("rootCategory").getModel())&&Y.filterActive&&(R=Number(Y.filter));ha={path:"service/search",type:"category",domainId:Number(storage.domain),rootCategory:isNaN(R)?
-1:R,content:ha};isTest&&console.info("%cGrid: searchCategory \u27fc ","color:#6666bf;font-weight:bold;",ha,[JSON.stringify(ha)]);network.request(ha).always(function(ja){if(null!=ja&&null!=ja.categories){ja=ja.categories;var ra=[],ta=[],pa="?;Categories;Kategorien;Categor\u00edas;Categorie;Categorias;\u30ab\u30c6\u30b4\u30ea\u30fc\u5225;Products;Produkte;Departments;Special Feature Stores;Custom Stores".split(";"),ca;for(ca in ja){var sa=ja[ca];if("undefined"!=typeof sa.matched&&sa.productCount&&
sa.name&&"?"!=sa.name&&0<sa.parent&&(!T||T&&(null==sa.children||0===sa.children.length))){var Z={id:ca,name:sa.name,count:sa.productCount};T||ra.push(Z);for(var N=[],f=sa;null!=f&&0!=f.parent;)f=ja[f.parent],null==f||pa.includes(f.name)||N.unshift(f.name);ta.push({data:[Z],prefix:N.length?N.join(" &raquo; ")+" &raquo;":null,label:sa.name+" ("+sa.productCount+")",value:ca,count:sa.productCount})}}ta.sort(function(C,V){return C.count<V.count?1:C.count>V.count?-1:0});ta.length?(T||ta.unshift({selectAll:!0,
data:ra,label:"Select all",value:" "}),P(ta)):P([{disabled:!0,label:"No matches found",value:"No matches found"}])}else P([{disabled:!0,label:"No matches found",value:"No matches found"}])})},autoFocus:!0,delay:200,minLength:[5,7].includes(Number(storage.domain))?1:2,close:function(ha,P){$(u).val("")},select:function(ha,P){if(""!=P.item.value||P.item.data){var R=P.item.data||{id:P.item.value,name:P.item.label};R.sort(function(ja,ra){return ja.count<ra.count?1:ja.count>ra.count?-1:0});ha=T?[]:Q.val().split("###").filter(function(ja){return ja});
P=!1;R=$jscomp.makeIterator(R);for(var Y=R.next();!Y.done;Y=R.next())if(Y=Y.value,-1===ha.indexOf(Y.id)){if(0===ha.length&&!T)M.append(GridFilter.getClearAllItem()).find("i").on("click",function(){q(this)});ha.length<GridConfig.maxValuesPerFinderFilter?(T&&M.html("&thinsp;"),M.append("<span><span>"+Y.name+'</span> <i class="fa fa-times" data-id="'+Y.id+'"></i></span>').find("i").on("click",function(){q(this)}),ha.push(Y.id)):P=!0}ha.length&&Q.val(ha.join("###")).change();$(u).val("");P&&GridFinder.showPopupMaxValuesPerFinderFilter();
return!1}},position:{my:"left top",at:"left bottom",collision:"none"}}).data("ui-autocomplete")._renderItem=function(ha,P){var R=$("<li>"),Y=$("<div>"),ja=P.label;P.disabled&&(R.addClass("ui-state-disabled"),ja='<i class="fa fa-ban"></i>&ensp;'+ja);P.selectAll&&(R.addClass("ui-item-select-all"),ja='<i class="fa fa-check-circle-o"></i>&ensp;'+ja);Y.addClass("item--categories");ja=P.prefix?"<span>"+(P.prefix?P.prefix:"-")+"<br></span>"+ja:""+ja;Y.html(ja);return R.append(Y).appendTo(ha)}},q=function(u){var D=
$(u).closest("div"),F=D.find('input[type="hidden"]');D=D.find(".mdc-text-field-helper-text--persistent");if(F.length)if(-1===$(u).data("id"))F.val("").change(),D.html("&thinsp;");else{var M=$(u).prev().text();$(u).data("id")&&(M=$(u).data("id")+"");D=F.val().split("###").filter(function(Q){return Q});D=D.filter(function(Q){return Q!==M});D.sort();D=D.map(function(Q){return Q.replace(/"/g,"&quot;")});F.val(D.join("###")).change();$(u).parent().remove()}};a.prototype.init=function(u){var D="autocomplete-"+
u.colDef.field,F=!("categories"===u.colDef.field||"categories_exclude"===u.colDef.field);this.eGui=document.createElement("div");this.eGui.innerHTML='\n\t\t\t<div class="filter-text--autocomplete ui-front">\n\t\t\t\t<div>\n\t\t\t\t\t<select class="ag-filter-select" id="filterType"'+(F?"":" disabled")+'>\n\t\t\t\t\t\t<option value="isOneOf">Is one of</option>\n\t\t\t\t\t\t'+(F?'<option value="isNoneOf">Is none of</option>':"")+'\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div class="ag-filter-body">\n\t\t\t\t\t<input class="ag-filter-filter" id="filterText" name="'+
D+'" type="text" placeholder="Filter">\n\t\t\t\t</div>\n\t\t\t\t<p></p>\n\t\t\t\t<input type="hidden" name="'+D+'" value="">\n\t\t\t\t<div class="ag-filter-apply-panel" id="applyPanel">\n\t\t\t\t\t<button type="button" id="clearButton"'+(u.clearButton?"":' class="ag-hidden"')+'>Clear Filter</button>\n\t\t\t\t\t<button type="button" id="applyButton"'+(u.applyButton?"":' class="ag-hidden"')+'><i class="fa fa-caret-right"></i> Apply</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t';u.applyButton&&(this.applyButton=
this.eGui.querySelector("#applyButton"),this.applyButton.addEventListener("click",this.onFilterChanged.bind(this)));this.select=this.eGui.querySelector("#filterType");this.input=this.eGui.querySelector("#filterText");this.wrapper=$(this.input).parent().parent();this.hidden=$(this.wrapper).find('input[type="hidden"]');"categories"===u.colDef.field||"categories_exclude"===u.colDef.field?r(this.input):m(this.input);this.filterField=u.colDef.field;this.filter="";this.type="isOneOf";this.filterActive=
""!==this.filter;this.filterChangedCallback=u.filterChangedCallback;this.valueGetter=u.valueGetter};a.prototype.getGui=function(){return this.eGui};a.prototype.afterGuiAttached=function(u){this.hidePopup=u.hidePopup};a.prototype.isFilterActive=function(){return this.filterActive};a.prototype.getModel=function(){return this.filterActive?{filterType:"autocomplete",filter:this.filter,type:this.type}:null};a.prototype.setModel=function(u){if(u){var D="",F="",M=u.filter?u.filter.split("###").map(function(T){return T.trim()}).filter(function(T){return""!=
T}):[];if(M.length){var Q="categories"===this.filterField||"categories_exclude"===this.filterField;M=Array.from(new Set(M));M.sort();M.forEach(function(T){D=Q?D+("<span><span>"+T+'</span> <i class="fa fa-times" data-id="'+T+'"></i></span>'):D+("<span><span>"+T+'</span> <i class="fa fa-times"></i></span>')});F=M.join("###")}M=$(this.wrapper).children("p").first();M.html(D);M.find("i").on("click",function(){GridFilter.autocompleterRemoveItem(this)});$(this.hidden).val(F);this.filter=u.filter;this.type=
u.type;this.filterActive=0<this.filter.length;$(this.select).val(this.type)}else this.filter="",this.type="isOneOf",this.filterActive=!1,$(this.hidden).val(""),$(this.select).val("isOneOf")};a.prototype.onFilterChanged=function(){this.filter=$(this.hidden).val();this.type=$(this.select).val();this.filterActive=""!==this.filter;this.filterChangedCallback()};b.prototype.init=function(u){var D="manage"===u.context.pageId,F=u.colDef.field+"Filter";!0===u.isCheckbox?this.eGui=document.createElement("div"):
(this.eGui=document.createElement("div"),this.eGui.innerHTML='\n\t\t\t\t<div class="ag-filter-body">\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type="radio" name="'+F+'" value="-1" checked="true" class="ag-filter-checkbox" /> All\n\t\t\t\t\t</label>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type="radio" name="'+F+'" value="1" class="ag-filter-checkbox" /> Yes\n\t\t\t\t\t</label>\n\t\t\t\t\t'+("LIGHTNING_DEAL_upcoming"!==u.colDef.field||D?'<label>\n\t\t\t\t\t\t<input type="radio" name="'+F+'" value="0" class="ag-filter-checkbox" /> No\n\t\t\t\t\t</label> ':
"")+'\t\t\t&ensp;\n\t\t\t\t</div>\n\t\t\t\t<div class="ag-filter-apply-panel" id="applyPanel">\n\t\t\t\t\t<button type="button" id="clearButton"'+(u.clearButton?"":' class="ag-hidden"')+'>Clear Filter</button>\n\t\t\t\t\t<button type="button" id="applyButton"'+(u.applyButton?"":' class="ag-hidden"')+'><i class="fa fa-caret-right"></i> Apply</button>\n\t\t\t\t</div>\n\t\t\t');this.radios=this.eGui.querySelectorAll('input[name="'+F+'"]');if(u.applyButton)(this.applyButton=this.eGui.querySelector("#applyButton"))&&
this.applyButton.addEventListener("click",this.onFilterChanged.bind(this));else for(F=0;F<this.radios.length;F++)this.radios[F].addEventListener("change",this.onFilterChanged.bind(this));this.isManage=D;this.isCheckbox=u.isCheckbox;this.filterField=u.colDef.field;this.filter=!0===this.isCheckbox?"":-1;this.filterActive=!this.isCheckbox&&-1<this.filter||!0===this.isCheckbox&&"on"===this.filter;this.filterChangedCallback=u.filterChangedCallback;this.filterValueGetter=u.colDef.filterValueGetter;this.type=
"equals";this.valueGetter=u.colDef.valueGetter};b.prototype.getGui=function(){return this.eGui};b.prototype.afterGuiAttached=function(u){this.hidePopup=u.hidePopup};b.prototype.isFilterActive=function(){return this.filterActive};b.prototype.doesFilterPass=function(u){var D=u.data[this.filterField];!this.isManage||"LIGHTNING_DEAL_upcoming"!==this.filterField&&"LIGHTNING_DEAL_backInStock"!==this.filterField||(D="LIGHTNING_DEAL_upcoming"===this.filterField?this.valueGetter(u):this.filterValueGetter(u));
return D==this.filter};b.prototype.getModel=function(){return this.filterActive?{filterType:"boolean",filter:this.filter,type:this.type}:null};b.prototype.setModel=function(u){u?($(this.eGui.querySelector('input[value="'+u.filter+'"]')).prop("checked",!0),this.filter=u.filter):this.filter=!0===this.isCheckbox?"":-1;this.filterActive=!this.isCheckbox&&-1<this.filter||!0===this.isCheckbox&&"on"===this.filter};b.prototype.onFilterChanged=function(){this.filter=$(this.eGui.querySelector("input:checked")).val();
this.filterActive=!this.isCheckbox&&-1<this.filter||!0===this.isCheckbox&&"on"===this.filter;this.filterChangedCallback()};d.prototype.init=function(u){var D=this;this.eGui=document.createElement("div");if(["buyBoxSellerIdHistory","buyBoxUsed.seller"].includes(u.colDef.field)){var F=Number(storage.domain),M=[],Q="",T="",ha="";switch(u.colDef.field){case "buyBoxSellerIdHistory":M=SellerUtil.getAmazonSellerIds(F);Q="Amazon";T="dynamic-"+u.colDef.field;ha="dynamicAnyOfDetail-"+u.colDef.field;break;case "buyBoxUsed.seller":M=
SellerUtil.getAmazonWarehouseSellerIds(F),Q="Amazon Warehouse",T="dynamicUsed-"+u.colDef.field,ha="dynamicUsedAnyOfDetail-"+u.colDef.field}F=Array.from(M,function(P){return"-"+P});M=M.join(",");F=F.join(",");this.eGui.innerHTML='\n                <div class="ag-filter-body" style="width:200px;">\n                    <label>\n                        <input type="radio" name="'+T+'" value="-1" class="ag-filter-checkbox" /> All\n                    </label><br>\n                    '+(M.length?'\n                    <label>\n                        <input type="radio" name="'+
T+'" value="'+M+'" class="ag-filter-checkbox" /> '+Q+"\n                    </label><br>":"")+"\n                    "+(F.length?'\n                    <label>\n                        <input type="radio" name="'+T+'" value="'+F+'" class="ag-filter-checkbox" /> 3rd Party\n                    </label><br>':"")+'\n                    <label>\n                        <input type="radio" name="'+T+'" value="1" class="ag-filter-checkbox" /> Seller IDs:\n                    </label><br>\n                    <input type="text" name="'+
ha+'" class="ag-filter-filter" style="width:92%;" />\n                </div>\n                <div class="ag-filter-apply-panel" id="applyPanel">\n                    <button type="button" id="clearButton"'+(u.clearButton?"":' class="ag-hidden"')+'>Clear Filter</button>\n                    <button type="button" id="applyButton"'+(u.applyButton?"":' class="ag-hidden"')+'><i class="fa fa-caret-right"></i> Apply</button>\n                </div>\n            ';this.radios=this.eGui.querySelectorAll('input[type="radio"]');
u.applyButton&&(this.applyButton=this.eGui.querySelector("#applyButton"))&&this.applyButton.addEventListener("click",this.onFilterChanged.bind(this));M=function(P){var R=P.target;P=R.value;"radio"===R.type?(R=D.eGui.querySelector('input[name="'+ha+'"'),1==P?R.focus():R.value=""):D.eGui.querySelector('input[value="1"]').checked=!0};Q=this.eGui.querySelectorAll('input[name^="dynamic"]');for(T=0;T<Q.length;T++)Q[T].addEventListener("focus",M)}this.filterField=u.colDef.field;this.filter=-1;this.filterDetail=
"";this.filterActive=-1!=this.filter;this.filterChangedCallback=u.filterChangedCallback;this.type="equals";this.valueGetter=u.valueGetter};d.prototype.getGui=function(){return this.eGui};d.prototype.afterGuiAttached=function(u){this.hidePopup=u.hidePopup};d.prototype.isFilterActive=function(){return this.filterActive};d.prototype.getModel=function(){return this.filterActive?{filterType:"dynamic",filter:this.filter,filterDetail:this.filterDetail,type:this.type}:null};d.prototype.setModel=function(u){var D=
u?$(this.eGui.querySelector('input[value="'+u.filter+'"]')):[];D=u&&D.length;var F="";switch(this.filterField){case "buyBoxSellerIdHistory":F="dynamicAnyOfDetail-"+this.filterField;break;case "buyBoxUsed.seller":F="dynamicUsedAnyOfDetail-"+this.filterField}D?($(this.eGui.querySelector('input[value="'+u.filter+'"]')).prop("checked",!0),$(this.eGui.querySelector('input[name="'+F+'"')).val(u.filterDetail),this.filter=u.filter,this.filterDetail=u.filterDetail):(this.filter=-1,this.filterDetail="");this.filterActive=
-1!=this.filter};d.prototype.onFilterChanged=function(){var u="";switch(this.filterField){case "buyBoxSellerIdHistory":u="dynamicAnyOfDetail-"+this.filterField;break;case "buyBoxUsed.seller":u="dynamicUsedAnyOfDetail-"+this.filterField}this.filter=$(this.eGui.querySelector("input:checked")).val();this.filterDetail=$(this.eGui.querySelector('input[name="'+u+'"')).val();this.filterActive=-1!=this.filter;this.filterChangedCallback()};n.prototype.init=function(u){var D=u.colDef.field+"Filter",F=u.colDef.filterParams.valueOptions,
M='<option value="-1">All</option>',Q;for(Q in F){var T=F[Q];M+='<option value="'+T.value+'">'+T.label+"</option>"}this.eGui=document.createElement("div");this.eGui.innerHTML='\n\t\t\t<div class="ag-filter-body">\n\t\t\t\t<select id="'+D+'" class="ag-filter-select">\n\t\t\t\t\t'+M+'\n\t\t\t\t</select>\n\t\t\t&ensp;\n\t\t\t</div>\n\t\t\t<div class="ag-filter-apply-panel" id="applyPanel">\n\t\t\t\t<button type="button" id="clearButton"'+(u.clearButton?"":' class="ag-hidden"')+'>Clear Filter</button>\n\t\t\t\t<button type="button" id="applyButton"'+
(u.applyButton?"":' class="ag-hidden"')+'><i class="fa fa-caret-right"></i> Apply</button>\n\t\t\t</div>\n\t\t';this.select=this.eGui.querySelector("#"+D);u.applyButton?(this.applyButton=this.eGui.querySelector("#applyButton"),this.applyButton.addEventListener("click",this.onFilterChanged.bind(this))):this.select.addEventListener("change",this.onFilterChanged.bind(this));this.valueOptions=F;this.filter=-1;this.filterActive=-1<this.filter;this.filterChangedCallback=u.filterChangedCallback;this.type=
"equals";this.valueGetter=u.valueGetter};n.prototype.getGui=function(){return this.eGui};n.prototype.afterGuiAttached=function(u){this.hidePopup=u.hidePopup};n.prototype.isFilterActive=function(){return this.filterActive};n.prototype.getModel=function(){return-1<this.filter?{filterType:"singleChoice",filter:this.filter,type:this.type}:null};n.prototype.setModel=function(u){u?($(this.select).val(u.filter),this.filter=u.filter):this.filter=-1;this.filterActive=-1<this.filter};n.prototype.onFilterChanged=
function(){this.filter=$(this.select).val();this.filterActive=-1<this.filter;this.filterChangedCallback()};t.prototype.init=function(u){var D="singleChoiceRadio-"+u.colDef.field+"Filter",F=u.colDef.filterParams.valueOptions,M=F.find(function(P){return!0===P.default}),Q="",T;for(T in F){var ha=F[T];Q+='<label>\n\t\t\t\t\t<input type="radio" name="'+D+'" value="'+ha.value+'" class="ag-filter-checkbox" /> '+ha.label+"\n\t\t\t\t</label><br>"}this.eGui=document.createElement("div");this.eGui.innerHTML=
'\n\t\t\t<div class="ag-filter-body" style="width:120px;margin-top:10px;">\n\t\t\t\t'+Q+'\n\t\t\t&ensp;\n\t\t\t</div>\n\t\t\t<div class="ag-filter-apply-panel" id="applyPanel">\n\t\t\t\t<button type="button" id="clearButton"'+(u.clearButton?"":' class="ag-hidden"')+'>Clear Filter</button>\n\t\t\t\t<button type="button" id="applyButton"'+(u.applyButton?"":' class="ag-hidden"')+'><i class="fa fa-caret-right"></i> Apply</button>\n\t\t\t</div>\n\t\t';this.radios=this.eGui.querySelectorAll('input[type="radio"]');
u.applyButton?(this.applyButton=this.eGui.querySelector("#applyButton"),this.applyButton.addEventListener("click",this.onFilterChanged.bind(this))):this.select.addEventListener("change",this.onFilterChanged.bind(this));this.valueOptions=F;this.filter=this.filterDefault=M.value;this.filterActive=this.filter!=this.filterDefault;this.filterChangedCallback=u.filterChangedCallback;this.type="equals"};t.prototype.getGui=function(){return this.eGui};t.prototype.afterGuiAttached=function(u){this.hidePopup=
u.hidePopup};t.prototype.isFilterActive=function(){return this.filterActive};t.prototype.getModel=function(){return this.filter!=this.filterDefault?{filterType:"singleChoiceRadio",filter:this.filter,type:this.type}:null};t.prototype.setModel=function(u){var D=u?$(this.eGui.querySelector('input[value="'+u.filter+'"]')):[];u&&D.length?($(this.eGui.querySelector('input[value="'+u.filter+'"]')).prop("checked",!0),this.filter=u.filter):this.filter=-1;this.filterActive=this.filter!=this.filterDefault};
t.prototype.onFilterChanged=function(){this.filter=$(this.eGui.querySelector("input:checked")).val();this.filterActive=this.filter!=this.filterDefault;this.filterChangedCallback()};return{autocompleterAdd:m,autocompleterAddCategories:r,autocompleterRemoveItem:q,getClearAllItem:function(){return'<span style="background-color:#f3f3f3;"><span style="font-style:italic;">Clear all <i class="fa fa-times" data-id="-1"></i></span></span>'},initCustomNumberArrayColumnFilter:function(){g.prototype=new agGrid.NumberFilter;
g.NULL_VALUE="nullValue";g.prototype.afterGuiAttached=function(){var u=GridHelper.getCsvObjectName(this.providedFilterParams.colDef.field);if(3>this.eGui.children.length&&"manage"===this.gridOptionsWrapper.gridOptions.context.pageId&&CsvType[u].currency){var D=getCurrencyCodeByDomain(0<currencyDomainId?currencyDomainId:Number(storage.domain)),F=this.eGui.children[this.eGui.children.length-1],M=document.createElement("div");M.className="custom-filter-info-panel";M.innerHTML='<i class="fa fa-info-circle"></i> '+
la._700.replace("#currency#",D);F.parentNode.appendChild(M)}"SALES"===u&&(u=$(this.eGui.querySelector('[ref="eOptions1"] option[value="nullValue"]')).get(0))&&(u.innerHTML="No Sales Rank");this.eValueFrom1.focus()};g.prototype.updateUiVisibility=function(u){u=this.allowTwoConditions;agGrid.Utils.setVisible(this.eCondition2Body,u);agGrid.Utils.setVisible(this.eType2,u);agGrid.Utils.setVisible(this.eJoinOperatorPanel,u);var D=this.showValueFrom(this.getCondition1Type()),F=this.showValueTo(this.getCondition1Type());
this.getCondition1Type()===g.NULL_VALUE&&(F=D=!1);agGrid.Utils.setVisible(this.eValueFrom1,D);agGrid.Utils.setVisible(this.eValueTo1,F);D=u?this.showValueFrom(this.getCondition2Type()):!1;agGrid.Utils.setVisible(this.eValueFrom2,D);u=u?this.showValueTo(this.getCondition2Type()):!1;agGrid.Utils.setVisible(this.eValueTo2,u);this.getCondition1Type()===g.NULL_VALUE?(this.eValueFrom1.value=-1,this.eValueTo1.value=-1):-1==this.eValueFrom1.value&&-1==this.eValueTo1.value&&(this.eValueFrom1.value=null,this.eValueTo1.value=
null)};g.prototype.individualConditionPasses=function(u,D){var F=this;u=this.scalarFilterParams.valueGetter(u.node);var M=this.mapRangeFromModel(D),Q=M.from,T=M.to,ha=D.type,P=this.scalarFilterParams.inRangeInclusive;if((D=this.optionsFactory.getCustomOption(ha))&&(null!=Q||D.hideFilterInput))return D.test(Q,u);if(Array.isArray(u))return u.some(function(R){var Y=F.nullComparator(ha,Q,R);R=null==T?null:F.nullComparator(ha,T,R);return F.getPassResult(ha,Y,R,P)});D=this.nullComparator(ha,Q,u);u=null==
T?null:this.nullComparator(ha,T,u);return this.getPassResult(ha,D,u,P)};g.prototype.getPassResult=function(u,D,F,M){if(u===agGrid.ScalerFilter.EQUALS)return 0===D;if(u===agGrid.ScalerFilter.GREATER_THAN)return 0<D;if(u===agGrid.ScalerFilter.GREATER_THAN_OR_EQUAL)return 0<=D;if(u===agGrid.ScalerFilter.LESS_THAN_OR_EQUAL)return 0>=D;if(u===agGrid.ScalerFilter.LESS_THAN)return 0>D;if(u===agGrid.ScalerFilter.NOT_EQUAL)return 0!=D;if(u===agGrid.ScalerFilter.IN_RANGE)return M?0<=D&&0>=F:0<D&&0>F;throw Error("Unexpected type of filter: "+
u);}},setGridApi:function(u){h=u},AutocompleteFilter:a,BooleanFilter:b,DynamicFilter:d,NumberArrayFilter:g,SingleChoiceFilter:n,SingleChoiceRadioFilter:t}}(),GridHelper=function(){var a=!1,b={"-1":"no Amazon offer exists",0:"Amazon offer is in stock and shippable",1:"Amazon offer is a pre-order",2:"Amazon offer availability is &quot;unknown&quot;",3:"Amazon offer is back-ordered",4:"Amazon offer shipping is delayed"},d=function(f,C){if(null!=f.api&&"undefined"!==typeof f.api){C=$(C).parent('[role="row"]');
if("infinite"===f.rowModelType)return C=C.attr("row-index"),f.api.getDisplayedRowAtIndex(C);if("serverSide"===f.rowModelType){var V=C.attr("row-id"),ba=null;f.api.forEachNode(function(w){w.id==V&&(ba=w)});return ba}C=C.attr("row-id");return f.api.getRowNode(C)}},g={},n=function(f){var C=M(f.colDef.field),V=CsvType[C].color,ba=f.data.domainId,w=f.data.casin,O=[],z="";Object.keys(w).forEach(function(I){var K=w[I][C];-1<K&&O.push({price:K,domainId:I})});0<O.length&&(O.sort(function(I,K){return I.price-
K.price}),O.forEach(function(I){var K=Money.format(I.price,{sourceDomainId:ba,targetDomainId:ba});if(I.domainId!=ba){var A=getAmazonRedirectByDomain(I.domainId,f.data.asin);z+='<a href="'+A+'" title="'+la._99+' Amazon" target="_blank" class="external"><img title=".'+getTldByDomain(I.domainId)+'" src="'+flags[I.domainId]+'" style="opacity:0.8;"></a>\n\t\t\t\t\t<span style="color:'+V+';opacity:0.8;margin-top:-4px;">'+K+"</span><br>"}else z+='<img title=".'+getTldByDomain(I.domainId)+'" src="'+flags[I.domainId]+
'" style="opacity:1;box-shadow:1px 1px 1px 0px rgba(0,0,0,0.75)">\n                            <span style="color:'+V+';opacity:0.8;margin-top:-4px;">'+K+"</span><br>"}));return z},t=function(f){return"undefined"===typeof f.value||null==f.value?"":-1==f.value?"-":-2==f.value?"?":prettyDate(keepaTime.now()-f.value)},h=function(f){return"undefined"===typeof f.value||null===f.value?"":(new Date(keepaTime.minutesToEpoch(f.value))).formatDate("Y/m/d")},m=function(f){return"undefined"===typeof f.value||
null==f.value?"":-2==f.value?"?":-1==f.value?"":(new Date(keepaTime.minutesToEpoch(f.value))).formatDate("Y/m/d H:i")},r=function(f){if("undefined"===typeof f.value)return"";f=f.value.toString();var C=f.length;return 8===C?f.substring(0,4)+"-"+f.substring(4,6)+"-"+f.substring(6,8):6===C?f.substring(0,4)+"-"+f.substring(4,6):4===C?f:""},q=function(f){var C=f.value;if(null==C||0==C.length)return"";"string"===typeof C&&(C=[C]);var V=document.createElement("div");V.className="text-clamp clamp-lines-"+
F(f);V.title=C.join(", ");for(var ba=0;ba<C.length;ba++){var w=C[ba],O=document.createElement("span");O.innerHTML=w+(ba!==C.length-1?", ":"");var z="undefined"!==typeof f.data.realField?f.data.realField:f.colDef.field;["upcList","eanList"].includes(z)&&ProductImageHover.preview.add_events(O,{type:"svgBarcode",value:w,format:"upcList"===z?"upc":"ean13"});V.appendChild(O)}return V},u=function(f){var C=document.createElement("span");C.className="toggle-filter text-clamp clamp-lines-3";C.innerHTML=f.value;
C.title='Toggle filter: "'+f.value+'"';C.addEventListener("click",function(){D(f,this)});return C},D=function(f,C){var V=f.api.getFilterInstance(f.colDef.field),ba=null;switch(f.colDef.filter){case "customAutocompleteColumnFilter":ba="categories"===f.colDef.field?$(C).data("id").toString():f.value.toLowerCase();C=V.filter.split("###").map(function(O){return O.trim()}).filter(function(O){return""!=O});var w=C.indexOf(ba);-1!==w?C.splice(w,1):C.push(ba);C.length?V.setModel({filterType:"autocomplete",
type:"isOneOf",filter:C.join("###")}):V.setModel(null);break;case "customSingleChoiceColumnFilter":ba=f.data[f.colDef.field],V.setModel({filterType:"singleChoice",filter:ba===V.filter?-1:ba,type:"equals"})}f.api.onFilterChanged()},F=function(f){return(f=f.node.rowHeight)?(f-8)/16:1},M=function(f){f=f.split("_");f.pop();return f.join("_")},Q=function(f){var C="undefined"!==typeof f.data.deleteCounter&&!1!==f.data.deleteCounter,V=GridManage.pageConfig.activeViewMode===GridManage.viewModes.COMPACT?'<span><i class="fa fa-ban fa-lg"></i><span>(3)</span></span>':
la._84,ba=document.createElement("div");ba.innerHTML=C?V.replace(/(\d+)/,f.data.deleteCounter):V;ba.className="cancel";C||(ba.style.display="none");ba.addEventListener("click",function(w){$(this).html(V);$(this).closest(".ag-cell").find("div").each(function(O,z){"flags"===z.className||"links"===z.className?$(z).css({opacity:1}):"delete"===z.className?$(z).fadeIn(250):$(z).hide()});w=f.node;w.data.deleteCounter=!1;w.setData(w.data)});return ba},T=function(f){var C=GridManage.pageConfig.activeViewMode===
GridManage.viewModes.COMPACT,V="undefined"!==typeof f.data.deleteCounter&&!1!==f.data.deleteCounter,ba=document.createElement("div");ba.className="delete";ba.title=la._100;V&&(ba.style.display="none");ba.appendChild(function(){var w=document.createElement("span");w.innerHTML='<i class="fa fa-trash-o fa-lg"></i>';C||(w.innerHTML+="<span>"+la._379+"</span>");w.addEventListener("click",function(O){var z=f.node,I=z.data.asin;$(this).closest(".ag-cell").find("div").each(function(){if("flags"===this.className||
"links"===this.className||"check"===this.className)$(this).css({opacity:.1});else if("cancel"===this.className){$(this).fadeIn(250);var K=function(){"undefined"===typeof z.data.isDeleted&&!1!==z.data.deleteCounter&&(z.data.deleteCounter--,z.setData(z.data),0===z.data.deleteCounter?network.request({path:"track",type:"deleteTracking",asinBatch:[I]}).done(function(A){null==A.error&&("undefined"===typeof f.context.deletedAsins&&(f.context.deletedAsins=[]),f.context.deletedAsins.push(I),z.data.isDeleted=
!0,z.setData(z.data),z.detailNode&&(A=f.api.getDetailGridInfo(z.detailNode.id),"undefined"!==typeof A&&A.api.forEachNode(function(J){var S=J.data;S.isDeleted=!0;J.setData(S)})))}).fail(showErrorPopup):window.setTimeout(function(){K()},1E3))};z.data.deleteCounter=3;z.setData(z.data);window.setTimeout(function(){K()},1E3)}else $(this).hide()})});return w}());return ba},ha=function(f){f=P(f||!1);return GridConfig.unitSystem[f]},P=function(f){f&&(a=!1);if(!a&&(f=Object.keys(GridConfig.unitSystem),a=f[0],
"undefined"!==typeof storage.gridConfig)){var C=JSON.parse(storage.gridConfig);(C=C.unitSystem?C.unitSystem:!1)&&f.includes(C)&&(a=C)}return a},R=function(f,C){return f.toLocaleString(["en-US","en-US"],C)},Y=function(f,C){var V=d(f,C);"undefined"!==typeof V&&(C={columnKeys:[$(C).attr("col-id")],processCellCallback:GridHelper.processCellCallback,skipHeader:!0,shouldRowBeSkipped:function(ba){return V.id!==ba.node.id},suppressQuotes:!0},f.context.isCopyToClipboard=!0,C=f.api.getDataAsCsv(C),ra(C),f.context.isCopyToClipboard=
!1)},ja=function(f,C,V){var ba=d(f,C);"undefined"!==typeof ba&&(C={processCellCallback:GridHelper.processCellCallback,skipHeader:V,shouldRowBeSkipped:function(w){return ba.id!==w.node.id},suppressQuotes:!0},f.context.isCopyToClipboard=!0,C=f.api.getDataAsCsv(C),ra(C),f.context.isCopyToClipboard=!1)},ra=function(f){isTest&&console.log("copied \u2192",f);if(window.clipboardData&&window.clipboardData.setData)return clipboardData.setData("Text",f);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var C=
document.createElement("textarea");C.textContent=f;C.style.position="fixed";document.body.appendChild(C);C.select();try{return document.execCommand("copy")}catch(V){return isTest&&console.warn("Copy to clipboard failed.",V),!1}finally{document.body.removeChild(C)}}},ta=function(f){var C="undefined"!==typeof f.colDef?f.colDef.field:f.column.colDef.field;if("undefined"===typeof C)return"-";var V="undefined"!==typeof f.node?f.node.data:f.data;return"undefined"===typeof V?"":null==f.value?(V.offersOutdated||
V.offersNeverUpdated)&&null!=V[C]?"?":"-":f.value+" %"},pa=function(f){if(null==f.value)return"-";var C=("undefined"===typeof f.colDef?f.column.colDef:f.colDef).field;if("SALES"===M(C))return NumberUtil.format(f.value);f="undefined"===typeof f.data?f.node.data:f.data;return Money.format(f[C],{sourceDomainId:f.domainId})},ca=function(f){var C="undefined"!==typeof f.colDef?f.colDef.field:f.column.colDef.field;if("undefined"===typeof C)return"-";f="undefined"!==typeof f.node?f.node.data:f.data;if("undefined"===
typeof f)return"";var V=f[C];"fbaFees"===C&&(V=f[C+"Total"]);return null==V?(f.offersOutdated||f.offersNeverUpdated)&&null!=f[C]?"?":"-":Money.format(V,{sourceDomainId:f.domainId,targetDomainId:"fbaFees"===C?Number(f.domainId):0<currencyDomainId?currencyDomainId:Number(f.domainId)})},sa=function(f){var C="undefined"!==typeof f.colDef?f.colDef.field:f.column.colDef.field;if("undefined"===typeof C)return isTest&&console.warn("missing field, check out valueFormatterPrice"),"-";var V="undefined"!==typeof f.node?
f.node.data:f.data;if("undefined"===typeof V)return"";if(null==f.value)return f=M(C),("NEW_FBA"==f||"NEW_FBM_SHIPPING"==f)&&1==V.COUNT_NEW_current&&0<V.AMAZON_current?"-":GridHelper.isOfferData(f)&&(V.offersOutdated||V.offersNeverUpdated)&&(0<C.indexOf("_current")||0<C.indexOf("_atIntervalStart"))||["EBAY_NEW_SHIPPING","EBAY_USED_SHIPPING"].includes(f)&&V.ebayOutdated&&0<V.lastEbayUpdate?"?":"-";var ba=("undefined"===typeof f.context||"lightningdeal"!==f.context.pageId)&&0<currencyDomainId?currencyDomainId:
Number(V.domainId);"undefined"!==typeof f.context&&f.context.mainDomainId&&!currencyDomainId&&(ba=f.context.mainDomainId);return Money.format(V[C],{sourceDomainId:V.domainId,targetDomainId:ba})},Z=function(f){var C="-";if(Array.isArray(f.value))C=f.value.join(", ");else if("object"===typeof f.value&&null!=f.value){C=[];for(var V in f.value){var ba=f.value[V];C.push(ba.sellerName+" ("+ba.currentRating+"%)")}C=C.join(", ")}return C},N=function(f,C){C=void 0===C?!1:C;if(C){var V=f.column.colDef.field;
var ba=f.node.data.product}else V=f.colDef.field,ba=f.data.product;var w=ba[V];if(V.includes("current")&&-2===w&&!C)return'<i class="fa fa-lock"'+(V.includes("SALES")?' title="'+la._909+'"':"")+"></i>";if(null==w||!V.includes("delta")&&0>w||!C&&f.data.isDeleted)return"-";w=M(V);var O=CsvType[w].currency;return C&&-1===(f.context.exportOptions||[]).indexOf("exportFormatted")?O?Money.format(ba[V],{sourceDomainId:ba.domainId,targetDomainId:ba.domainId,acceptMinusOne:V.includes("delta"),skipSymbol:!0}).replace(",",
""):ba[V]:O?Money.format(ba[V],{sourceDomainId:ba.domainId,targetDomainId:ba.domainId,acceptMinusOne:V.includes("delta")}):CsvType.format(w,ba[V])};return{availabilityAmazonValueMap:b,addContextMenu:function(f){if(!1!==f.suppressContextMenu){var C="#"+f.context.gridWrapperId+" .ag-body-viewport .ag-cell";$.contextMenu("destroy",C);var V={copy:{name:"Copy",icon:"fa-files-o",accesskey:"c",callback:function(ba,w){Y(f,w.$trigger[0])}},copyRow:{name:"Copy row",icon:"fa-clipboard",accesskey:"r",callback:function(ba,
w){ja(f,w.$trigger[0],!0)}},track:{name:"Track product",icon:"fa-bell-o",accesskey:"t",callback:function(ba,w){ba=d(f,w.$trigger[0]);"undefined"!==typeof ba&&(ba="#!track/"+ba.data.domainId+"-"+ba.data.asin,iframe.isIframe?window.open(getBaseUrl()+ba,"_blank").focus():window.open(ba,"_self"))}}};f.context.config&&("asin"!==f.context.config.type&&"variation"!==f.context.config.type&&delete V.track,"productDetail"!==f.context.config.type&&"productPrice"!==f.context.config.type||delete V.copyRow);$.contextMenu({selector:C,
callback:function(ba,w){},items:V})}},addCopyByKeyboard:function(f){var C=toCamelCase(f.context.gridWrapperId),V=g[C];"undefined"===typeof g[C]&&(g[C]=f,V=g[C]);["categorytree","manage"].includes(V.context.pageId)||($.ctrl=function(ba,w){var O=!1;$(document).on("keydown.copyByKeyboard",function(z){var I=[V];if(z.ctrlKey||z.metaKey)O=!0;if(z.keyCode==ba.charCodeAt(0)&&O){var K=z.target.classList.value,A=$(z.target).closest("#"+V.context.gridWrapperId);if(K.includes("ag-cell")&&A.length)return I.push(z.target),
w.apply($jscomp$this,I),!1}}).on("keyup.copyByKeyboard",function(z){z.ctrlKey&&(O=!1)})},$.ctrl("C",Y),onPageNavigation.progress(function(){$(document).off("keydown.copyByKeyboard");$(document).off("keyup.copyByKeyboard")}))},addToggleUnitEvents:function(f){try{var C=$("#"+f.context.config.gridWrapperId+" .toggle-unit:not(.done)");C.length&&C.each(function(){$(this).addClass("done");$(this).on("click",function(){GridApi.toggleUnit(f);return!1})})}catch(V){reportBug(V)}},getCsvObjectName:M,cellRendererAvailabilityAmazonDelay:function(f){return"undefined"===
typeof f.data||"undefined"===typeof f.value||null===f.value?"":hoursToMaxTimeUnit(f.value[0],f.value[1])},cellRendererBoolean:function(f){return f.value?'<i class="fa fa-check"></i>':""},cellRendererBuyBoxSellerId:function(f){if("undefined"===typeof f.value)return"";if(null==f.value)return!0===f.data.stats.buyBoxIsUsed||-1===f.data.stats.buyBoxPrice?"-":"?";var C=f.data.buyBoxSeller?f.data.buyBoxSeller[f.data.buyBoxSellerId]:f.value[f.data.buyBoxSellerId];if("undefined"===typeof C||-2==f.data.buyBoxSellerId)return"-";
if("3rd Party"!=C.sellerName)return SellerUtil.getHtml(f.data.buyBoxSellerId,f.data.domainId,C.sellerName,C.currentRating,"finder"===f.context.pageId);var V=f.colDef.field;f.context.sellerHashMap&&f.context.sellerHashMap[f.data.buyBoxSellerId]?setTimeout(function(){f.node.setDataValue(V,f.context.sellerHashMap[f.data.buyBoxSellerId])},0):networkHelper.loadSellers({path:"pro/seller",history:!1},f.data.domainId,[f.data.buyBoxSellerId]).done(function(ba){var w={},O;for(O in ba){var z=ba[O];w[O]={sellerName:z.sellerName,
currentRating:z.positiveRating?z.positiveRating[3]:-1}}f.context.sellerHashMap||(f.context.sellerHashMap={});f.context.sellerHashMap[f.data.buyBoxSellerId]=w;f.node.setDataValue("undefined"!==typeof f.data.realField?"productValue":V,w)});return'<span style="color:#ccc">'+f.data.buyBoxSellerId+'&ensp;<i class="fa fa-spinner fa-spin"></i></span>'},cellRendererBuyBoxUsedSeller:function(f){if("undefined"===typeof f.value||0>=f.data.BUY_BOX_USED_SHIPPING_current)return"";var C=f.value;if(C.sellerName)return SellerUtil.getHtml(C.sellerId,
f.data.domainId,C.sellerName,C.currentRating,"finder"===f.context.pageId);var V=f.colDef.field;f.context.sellerHashMap&&f.context.sellerHashMap[C.sellerId]?setTimeout(function(){f.node.setDataValue(V,f.context.sellerHashMap[C.sellerId][C.sellerId])},0):networkHelper.loadSellers({path:"pro/seller",history:!1},f.data.domainId,[C.sellerId]).done(function(ba){var w={},O;for(O in ba){var z=ba[O];w[O]={sellerId:z.sellerId,sellerName:z.sellerName,currentRating:z.positiveRating?z.positiveRating[3]:-1}}f.context.sellerHashMap||
(f.context.sellerHashMap={});f.context.sellerHashMap[C.sellerId]=w;f.node.setDataValue("undefined"!==typeof f.data.realField?"productValue":V,w[C.sellerId])});return'<span style="font-family:monospace;color:#ccc;">'+C.sellerId+'&ensp;<i class="fa fa-spinner fa-spin"></i></span>'},cellRendererChangeFilterModel:u,cellRendererCouponPercentage:function(f){if("undefined"===typeof f.data)return"";var C="undefined"!==typeof f.data.realField?f.data.realField:f.colDef.field,V="";f.data.offersOutworn&&!f.data.offersOutdated&&
C.includes("coupon")&&(V=";font-style:italic;");return'<span style="'+V+'">'+f.valueFormatted+"</span>"},cellRendererCsvType:function(f){if("undefined"===typeof f.data)return"";var C="undefined"!==typeof f.data.realField?f.data.realField:f.colDef.field,V=M(C),ba=CsvType[V].currency,w="";GridHelper.isOfferData(V)&&f.data.offersOutworn&&!f.data.offersOutdated&&(0<C.indexOf("_current")||0<C.indexOf("_atIntervalStart"))&&"COUNT_REVIEWS_current"!=C&&(w=";font-style:italic;");var O="";GridHelper.isOfferData(V)&&
(f.data.offersOutdated||f.data.offersNeverUpdated)&&(0<C.indexOf("_current")||0<C.indexOf("_atIntervalStart"))&&"?"===f.valueFormatted&&(O="Only outdated data available.\nYou can force an update via the Product Viewer.");["EBAY_NEW_SHIPPING","EBAY_USED_SHIPPING"].includes(V)&&f.data.ebayOutdated&&0<f.data.lastEbayUpdate&&(O="Only outdated data available.");var z="";ba&&"undefined"!==typeof f.data.casin&&0<Object.keys(f.data.casin).length?z=n(f):(z='<span style="color:'+CsvType[V].color+w+'"'+(O?' title="'+
O+'"':"")+">"+f.valueFormatted+"</span>",O="",O="lightningdeal"===f.context.pageId,ba&&!O&&showReferencePrice(f.data.domainId)&&(ba=f.data[C],ba=null==f.value||0>ba?"-":Money.format(ba,{sourceDomainId:f.data.domainId,targetDomainId:f.data.domainId}),O='<span style="color:#ccc;'+w+'">'+ba+"</span>",z="undefined"!==typeof f.data.realField?O+"&ensp;"+z:z+"<br>"+O));null!=f.value&&"left"===f.column.pinned&&"SALES"!==V&&-1<C.indexOf("_current")&&CsvType[V].graphAPI&&-2!==f.value&&(w="1 month "+CsvType.getName(CsvType[V].index)+
" price history",ba=GraphService.getWebGraphTypeAllOff(),ba[CsvType[V].index]=1,ba=GraphService.getUrl(f.data.asin,f.data.domainId,78,28,ba,31,1),z+='<br><span name="minigraph" title="'+w+'" style="height:28px;width:78px;margin-top:2px;margin-right:-9px;display:inline-block;background:url('+(ba+') no-repeat right;"></span>'));"deals"===f.context.pageId&&"SALES"===V&&-1<C.indexOf("_current")&&-2!==f.value&&f.data.stats.min.map(function(I){return null!==I})[CsvType.SALES.index]&&(C="1 month Sales Rank history. Current Rank: "+
f.valueFormatted,w=GraphService.getWebGraphTypeAllOff(),w[CsvType[V].index]=1,f=GraphService.getUrl(f.data.asin,f.data.domainId,78,28,w,31,1),z+='<br><span name="minigraphSales" title="'+C+'" style="height:28px;width:78px;margin-top:2px;margin-right:-9px;display:inline-block;background:url('+(f+') no-repeat right;"></span>'));return z},cellRendererDateAgo:t,cellRendererDateAgoArray:function(f){if("undefined"===typeof f.data||f.data.isDeleted||0===f.value.length)return"";var C="";f=$jscomp.makeIterator(f.value);
for(var V=f.next();!V.done;V=f.next())C+='<span style="'+(C.length?"color:#999999;":"")+'">'+t({value:V.value})+"</span><br>";return C},cellRendererDateKeepaTime:h,cellRendererDateSpan:function(f){if("undefined"===typeof f.value)return"";if(null==f.value||-2==f.value)return"-";var C=f.value-keepaTime.now();f=Math.floor(C/525600);var V=Math.floor(C%525600/1440),ba=Math.floor(C%525600%1440/60);C=Math.floor(C%525600%1440%60);return(0<f?f+" "+(1<f?la._880:la._879):"")+"\n\t\t\t"+(0<V?V+" "+(1<V?la._143:
la._887):"")+"\n\t\t\t"+(0<ba?ba+" "+(1<ba?la._884:la._883):"")+"\n\t\t\t"+(0<C?C+" "+(1<C?la._886:la._885):"")},cellRendererDateTimeKeepaTime:m,cellRendererDateYMD:r,cellRendererDescription:function(f){if("undefined"===typeof f.value||null==f.value)return"";var C=F(f);return GridHelper.defaultTextClamp(f.value,C)},cellRendererDimension:function(f){if("-"===f.valueFormatted)return f.valueFormatted;if("packageDimension"===("undefined"!==typeof f.data.realField?f.data.realField:f.colDef.field)){var C=
f.data.packageLength/10;var V=f.data.packageWidth/10;var ba=f.data.packageHeight/10}else C=f.data.itemLength/10,V=f.data.itemWidth/10,ba=f.data.itemHeight/10;var w=ha().measure;w&&"in"===w&&(C=parseFloat((.3937*C).toFixed(1)),V=parseFloat((.3937*V).toFixed(1)),ba=parseFloat((.3937*ba).toFixed(1)));var O={minimumFractionDigits:1};C=R(C,O);V=R(V,O);ba=R(ba,O);return C+" x "+V+" x "+ba+" "+w+"\n\t\t<br>(= "+f.valueFormatted+" "+w+"\u00b3 )"},cellRendererDomainId:function(f){if("undefined"===typeof f.value)return'<i class="fa fa-spinner fa-spin"></i>';
if(null==f.value)return"";var C=f.value,V='<div class="gridDomainCell"><img title=".'+getTldByDomain(C)+'" src="'+flags[C]+'">';if(!iframe.isIframe){var ba=getAmazonRedirectByDomain(C,f.data.asin);V+=' <a class="gridExternalAmazon" href="'+ba+'" title="'+la._99+' Amazon" target="_blank"><i class="fa fa-amazon"></i></a>'}if(globalEbayArray[C]){ba="#aaaaaa";var w="unverified if sold on ebay";f.data.ebayOutdated||(ba="#666666",w=la._99+" eBay");V+=' <a class="gridExternalEbay" href="'+getEbayRedirectByDomain(C,
f.data.asin,!0)+'" rel="ebay" title="'+w+'" target="_blank" style="color:'+ba+';">\n\t\t\t\t<span>e</span>\n\t\t\t\t</a>'}return V+"</div>"},cellRendererEmpty:function(){return""},cellRendererFbaFees:function(f){if("undefined"===typeof f.data)return"";var C=f.data.domainId,V=f.valueFormatted;if(null==f.data.fbaFees)return V;var ba=Money.format(f.data.fbaFees.pickAndPackFee,{sourceDomainId:C,targetDomainId:C});C=Money.format(f.data.fbaFees.pickAndPackFeeTax,{sourceDomainId:C,targetDomainId:C});V=""+
V;0<f.data.fbaFees.pickAndPackFeeTax&&(V+='<br>\n\t\t\t\t\t\t<span style="font-size:10px;line-height:16px;color:#999;">\n\t\t\t\t\t\tPick and Pack Fees: '+ba+" (+"+C+" tax)</span>");return V},cellRendererFeatures:function(f,C){if("undefined"===typeof f.data)return!1;if("undefined"===typeof f.data.features||null==f.data.features||!f.data.features.length)return"";C=f.data.features[C];if(!C||!C.length)return"";f=F(f);return GridHelper.defaultTextClamp(C,f)},cellRendererGraph:function(f,C,V,ba,w){var O=
C+"Cache";if(!f.data[O]){V="graph-"+C+"-"+V;var z=$("<div/>",{id:V}),I=$("<div/>",{style:"visibility: hidden;"});I.append(z);$("body").append(I);ba(f.data,V,z,C,w);f.data[O]=z.get(0);I.detach()}return f.data[O]},cellRendererLinkedAsins:function(f){var C=f.value;if(null==C||0==C.length)return"";"string"===typeof C&&(C=C.split(","));var V=[];C.forEach(function(ba){var w="#!product/"+f.data.domainId+"-"+ba,O="";iframe.isIframe&&(w="http://www.amazon."+getTldByDomain(f.data.domainId)+"/dp/"+ba+"?psc=1",
O=' target="_parent"');V.push('<a href="'+w+'"'+O+">"+ba+"</a>")});return V.join(", ")},cellRendererMetaData:function(f){if(f.data.isDeleted)return'<div class="delete" style="cursor:default;"><span><i class="fa fa-trash fa-lg"></i><span>'+la._687+"</span></span></div>";var C="undefined"!==typeof f.data.deleteCounter&&!1!==f.data.deleteCounter,V=f.data.domainId,ba=f.data.detailDomainId,w=document.createElement("span");w.appendChild(T(f));w.appendChild(Q(f));if(f.data.tracking.expiresSoon){var O=GridHelper.cellRendererDateSpan({value:f.data.tracking.expiresOn});
O=O.replace(/\s\s+/g," ");var z=document.createElement("div");z.className="check";C&&(z.style.opacity="0.1");z.innerHTML='<i class="fa fa-clock-o fa-lg"></i>';z.title=la._882+":"+O+"\n"+la._806;w.appendChild(z)}O=document.createElement("div");O.className="flags";C&&(O.style.opacity="0.1");C=function(K){var A=document.createElement("img");A.title=K===ba?"amazon."+getTldByDomain(K)+" - "+la._673:la._672+"."+getTldByDomain(K);K===V&&(A.title+=" ("+la._674+")");K===ba&&(A.className="detail");A.src=flags[K];
A.dataset.domain=K;A.addEventListener("click",function(J){var S=Number(this.dataset.domain);if(S!==ba){var v=f.node;v.data.detailDomainId=S;v.setData(v.data);var p=f.api.getDetailGridInfo(f.node.detailNode.id);p.api.forEachNode(function(H){var L=H.data;if("undefined"!==typeof L.detailsPerDomain[S]){L.detailDomainId=S;H.setData(L);var B=L.detailsPerDomain[S].detailRowHeight;H.setRowHeight(B);v.detailNode.setRowHeight(B);p.api.onRowHeightChanged();f.api.onRowHeightChanged()}else network.request({path:"product",
asin:f.data.asin,domainId:S,getTracking:!0,history:!0,maxAge:15,offerPages:0,refreshProduct:!1,type:"manage"}).done(function(E){null==E||null==E.products||1!=E.products.length?(L.detailDomainId=S,H.setData(L)):(E=GridHelper.prepareProductTrackingDetail(E.products[0]),L.detailDomainId=f.data.detailDomainId,L.detailsPerDomain[E.domainId]={asin:E.asin,domainId:E.domainId,imagesCSV:E.imagesCSV,title:E.title,lastUpdate:E.lastUpdate,lastEbayUpdate:E.lastEbayUpdate,lastPriceChange:E.lastPriceChange,graphData:{buyBoxSellerIdHistory:E.buyBoxSellerIdHistory,
csv:E.csv,offers:E.offers,tracking:f.data.tracking},detailRowHeight:GridManage.calculateDetailRowHeight(E)},L.wishLists=f.data.wishLists,L.detailRowHeight=f.data.detailRowHeight,H.setData(L),H.setRowHeight(L.detailsPerDomain[S].detailRowHeight),v.detailNode.setRowHeight(L.detailsPerDomain[S].detailRowHeight),f.api.onRowHeightChanged(),p.api.onRowHeightChanged())}).fail(showErrorPopup)})}});return A};O.appendChild(C(V)).insertAdjacentHTML("afterend","<br>");if(f.data.multiLocaleProductsReduced.length){z=
$jscomp.makeIterator(f.data.multiLocaleProductsReduced);for(var I=z.next();!I.done;I=z.next())O.appendChild(C(I.value.domainId)).insertAdjacentHTML("afterend","<br>")}w.appendChild(O);return w},cellRendererMetaDataCompact:function(f){if(f.data.isDeleted)return'<div class="delete" style="cursor:default;"><i class="fa fa-trash fa-lg"></i></div>';var C="undefined"!==typeof f.data.deleteCounter&&!1!==f.data.deleteCounter,V=f.data.domainId,ba=f.data.detailDomainId,w=document.createElement("span");w.appendChild(T(f));
w.appendChild(Q(f));var O=function(A){var J=document.createElement("a");J.href=getAmazonRedirectByDomain(A,f.data.asin);J.innerHTML='<i class="fa fa-amazon"></i>';J.className="gridExternalAmazon";J.target="_blank";J.title=la._99+" Amazon."+getTldByDomain(A);return J},z=document.createElement("div");z.className="links";z.appendChild(O(V)).insertAdjacentHTML("afterend","<br>");if(f.data.multiLocaleProductsReduced.length)for(var I=$jscomp.makeIterator(f.data.multiLocaleProductsReduced),K=I.next();!K.done;K=
I.next())z.appendChild(O(K.value.domainId)).insertAdjacentHTML("afterend","<br>");w.appendChild(z);O=function(A,J){if(!globalEbayArray[A])return A=document.createElement("span"),A.innerHTML="<span>&nbsp;</span>",A.className="gridExternalEbay",A;var S=document.createElement("a");S.href=getEbayRedirectByDomain(A,f.data.asin,!0);S.innerHTML="<span>e</span>";S.className="gridExternalEbay";S.style.color=J?"#aaaaaa":"#666666";S.target="_blank";S.title=J?"unverified if sold on ebay":la._99+" eBay."+getTldByDomain(A);
return S};z=document.createElement("div");z.className="links";z.style.marginTop="-6px";z.appendChild(O(V,f.data.product.ebayOutdated)).insertAdjacentHTML("afterend","<br>");if(f.data.multiLocaleProductsReduced.length)for(I=$jscomp.makeIterator(f.data.multiLocaleProductsReduced),K=I.next();!K.done;K=I.next())K=K.value,z.appendChild(O(K.domainId,K.ebayOutdated)).insertAdjacentHTML("afterend","<br>");w.appendChild(z);O=document.createElement("div");O.className="flags";C&&(O.style.opacity="0.1");C=function(A){var J=
document.createElement("img");A===ba&&(J.className="detail");J.src=flags[A];var S=document.createElement("a");S.href="#!product/"+A+"-"+f.data.asin;S.title=la._699+"."+getTldByDomain(A);A===V&&(S.title+=" ("+la._674+")");S.appendChild(J);return S};O.appendChild(C(V)).insertAdjacentHTML("afterend","<br>");if(f.data.multiLocaleProductsReduced.length)for(z=$jscomp.makeIterator(f.data.multiLocaleProductsReduced),K=z.next();!K.done;K=z.next())O.appendChild(C(K.value.domainId)).insertAdjacentHTML("afterend",
"<br>");w.appendChild(O);return w},cellRendererMoney:function(f){if("undefined"===typeof f.data)return"";var C="undefined"!==typeof f.data.realField?f.data.realField:f.colDef.field,V="";f.data.offersOutworn&&!f.data.offersOutdated&&C.includes("coupon")&&(V="font-style:italic;");var ba='<span style="'+V+'">'+f.valueFormatted+"</span>";showReferencePrice(f.data.domainId)&&(C=f.data[C],C=null==f.value||0>C?"-":Money.format(C,{sourceDomainId:f.data.domainId,targetDomainId:f.data.domainId}),V='<span style="color:#ccc;'+
V+'">'+C+"</span>",ba="undefined"!==typeof f.data.realField?V+"&ensp;"+ba:ba+"<br>"+V);return ba},cellRendererImage:function(f){if("undefined"===typeof f.value)return"";var C="undefined"===typeof f.colDef.cellRendererParams?51:f.colDef.cellRendererParams.imageSize;if("undefined"!==typeof f.context.pageId&&"variation"!==f.context.pageId){var V=imageToUrl(f.value,C);f=f.value?f.value.split(",")[0]:"";var ba=document.createElement("img");ba.width=C;ba.height=C;ba.src=V?V:imgCDNUrl+"no-photo-available.png";
ba.style.height=C+"px";ba.style.width=C+"px";V||(ba.alt="No image available");V&&ProductImageHover.preview.add_events(ba,f);return ba}return imageToHtml(f.value,C,"",C)},cellRendererOfferCSV:function(f){f=f.data;var C=f.offerCSV[f.offerCSV.length-2],V=f.offerCSV[f.offerCSV.length-1],ba=C+V,w=1;1<f.condition&&6>f.condition&&(w=2);6==f.condition&&(w=6);6<f.condition&&(w=5);11==f.condition&&(w=31);f.isAmazon&&(w=0);w=CsvType.getObjectName(w);var O=Money.format(ba,{sourceDomainId:f.domainId});if(0<V){var z=
Money.format(C,{sourceDomainId:f.domainId});var I=Money.format(V,{sourceDomainId:f.domainId});z='<span style="color:#999">('+z+" + "+I+")</span>&ensp;"}else z=f.isPrime?'<span style="color:#2692c2;font-style: italic;">&ensp;Prime</span>&emsp;':"";w='<span style="color:'+CsvType[w].color+';">'+z+O+"</span>";O="";showReferencePrice(f.domainId)&&(ba=Money.format(ba,{sourceDomainId:f.domainId,targetDomainId:f.domainId}),0<V?(C=Money.format(C,{sourceDomainId:f.domainId,targetDomainId:f.domainId}),f=Money.format(V,
{sourceDomainId:f.domainId,targetDomainId:f.domainId}),f="<span>("+C+" + "+f+")</span>&ensp;"):f=f.isPrime?'<span style="font-style: italic;">&ensp;Prime</span>&emsp;':"",O='<span style="color:#ccc;">'+f+ba+"</span>");return w+"<br>"+O},cellRendererProductCodes:q,cellRendererProductCodeSingle:function(f){if(null==f.value||0==f.value.length)return"";f.value instanceof Array&&(f.value=f.value[0]);return q(f)},cellRendererProductGroup:function(f){if("undefined"===typeof f.value)return"";if("finder"===
f.context.pageId)return u(f);var C=F(f),V=iframe.isIframe?' target="_blank"':"";return 14==f.data.domainId?GridHelper.defaultTextClamp(f.value,C):'<a class="href" href="'+getBaseUrl()+"#!bestseller/"+f.data.domainId+"-"+encodeURIComponent(f.value)+'"'+V+">"+GridHelper.defaultTextClamp(f.value,C)+"</a>"},cellRendererRating:function(f){return'<span style="color:'+CsvType.RATING.color+'">'+f.valueFormatted+"</span>"},cellRendererRatingStar:function(f){if("undefined"===typeof f.data)return"";var C="undefined"!==
typeof f.data.realField?f.data.realField:f.colDef.field,V="";(f.data.offersOutdated||f.data.offersNeverUpdated)&&0<C.indexOf("_current")&&"?"===f.valueFormatted&&(V="Only outdated data available.\nYou can force an update via the Product Viewer.");return null==f.value?'<span style="color:'+CsvType.RATING.color+'"'+(V?' title="'+V+'"':"")+">"+f.valueFormatted+"</span>":getStarsFromRating(10*f.value)+'<br><span style="color:'+CsvType.RATING.color+'">'+f.valueFormatted+"</span>"},cellRendererSellerIdsLowest:function(f){if(null==
f.value)return"-";var C="undefined"!==typeof f.data.realField?f.data.realField:f.colDef.field,V="undefined"!==typeof f.data.realField;if("undefined"!=typeof f.data[C]){var ba=f.data[C],w=f.data.offersOutworn?'<div style="font-style:italic;">':"<div>",O=0,z;for(z in ba){O++;var I=ba[z];I=SellerUtil.getHtml(z,I.domainId,I.sellerName,I.currentRating);w+=(!V&&3<O?", ":1<O?"<br>":"")+I}return w+"</div>"}V=f.data.stats[C];var K=V.join(",");f.context.sellerHashMap&&f.context.sellerHashMap[K]?setTimeout(function(){f.node.setDataValue(C,
f.context.sellerHashMap[K])},0):networkHelper.loadSellers({path:"pro/seller",history:!1},f.data.domainId,[K]).done(function(J){var S={},v;for(v in J){var p=J[v];S[v]={sellerName:p.sellerName,currentRating:p.positiveRating?p.positiveRating[3]:-1}}f.context.sellerHashMap||(f.context.sellerHashMap={});f.context.sellerHashMap[K]=S;f.node.setDataValue("undefined"!==typeof f.data.realField?"productValue":C,S)});var A=f.data.offersOutworn?'<div style="font-style:italic;">':"<div>";V.forEach(function(J,S){A+=
'<span style="color:#ccc">'+J+'&ensp;<i class="fa fa-spinner fa-spin"></i></span><br>'});return A+="</div>"},cellRendererStockSingle:function(f){if("undefined"===typeof f.data)return"";var C="undefined"!==typeof f.data.realField?f.data.realField:f.colDef.field;if("stock"===C)return f.valueFormatted;C=C.replace("stock","").toUpperCase();return'<span style="color:'+CsvType["BUYBOX"===C?"BUY_BOX_SHIPPING":C].color+'">'+f.valueFormatted+"</span>"},cellRendererTitle:function(f){if("undefined"===typeof f.value)return"";
var C=F(f),V="";3===f.data.productType&&(--C,V='<i class="fa fa-exclamation-triangle" title="\u271c Keepa: Amazon does not provide any data for this product. This might be temporary and change in a few hours. As for now, Keepa is unable to track it."></i>');var ba=document.createElement("a");ba.className="href href--title";ba.href="#!product/"+f.data.domainId+"-"+f.data.asin;ba.innerHTML=V+GridHelper.defaultTextClamp(f.data.title?f.data.title:f.value,C);"deals"===f.context.pageId&&(ba.className="href",
ba.addEventListener("click",function(){if(!f.data.isVisited){var w=f.node;w.data.isVisited=!0;w.setData(w.data);w=f.data.domainId+"-"+f.data.asin;sessionStorage[w]=1;databaseDeals&&databaseDeals.setItem(w,keepaTime.now())}}));"undefined"!==get("overlayPriceGraph")&&1==get("overlayPriceGraph")&&(C=GraphService.getUrl(f.data.asin,f.data.domainId),ProductImageHover.preview.add_events(ba,C));return ba},cellRendererTextFinder:function(f){if(!f.value)return"";if("finder"===f.context.pageId)return u(f);
if(14==f.data.domainId)return f.value;var C={};C={f:(C["undefined"!==typeof f.data.realField?f.data.realField:f.colDef.field]={filter:f.value.toLowerCase()},C),s:null,t:"g"};C=encodeURIComponent(JSON.stringify(C));C=getBaseUrl()+"#!finder/"+C;var V="Search for &quot;"+f.value.replace(/"/g,"&quot;")+"&quot; in our Product Finder";return'<a href="'+C+'" target="_blank" title="'+V+'">'+f.value+"</a>"},cellRendererTracking:function(f){if("undefined"===typeof f.data||f.data.isDeleted)return"";var C=f.colDef.field;
if("undefined"!==typeof f.data.isUpdating&&!0===f.data.isUpdating[C])return'<div style="text-align:right;padding-top:5px;"><i class="fa fa-spinner fa-spin"></i></div>';var V=GridHelper.getCsvObjectName(C),ba=CsvType[V].index,w=CsvType[V].currency,O="color:"+CsvType[V].color+";",z=f.data.multiLocaleProductsReduced.length?'<i class="fa fa-circle" style="font-size:5px;transform:translateY(-2px);color:#444;"></i>&ensp;':"";ba=C.includes("current")?f.data.lowestDomainIdsPerCsv[ba]?f.data.lowestDomainIdsPerCsv[ba]:
[]:[];var I=(ba.includes(f.data.domainId)?z:"")+'<span style="'+O+'">'+f.valueFormatted+"</span>";if(f.data.multiLocaleProductsReduced.length)for(var K=$jscomp.makeIterator(f.data.multiLocaleProductsReduced),A=K.next();!A.done;A=K.next()){A=A.value;var J=A[C],S="-",v="";-1!=J&&-2!=J?w?(S=C.includes("desired")?f.data.domainId:A.domainId,S=Money.format(J,{sourceDomainId:S,targetDomainId:f.data.domainId,acceptMinusOne:C.includes("delta")}),A.domainId!==f.data.domainId&&currencies[A.domainId]!==currencies[f.data.domainId]&&
(v=C.includes("desired")?f.data.domainId:A.domainId,v=Money.format(J,{sourceDomainId:v,targetDomainId:A.domainId,acceptMinusOne:C.includes("delta")}))):S=CsvType.format(V,J):-2===J&&(S='<i class="fa fa-lock"></i>');I+="<br>"+(ba.includes(A.domainId)?z:"")+'<span style="'+O+';font-style:italic;opacity:0.8;"'+(v?' title="'+v+'"':"")+">"+S+"</span>"}return I},cellRendererTrackingDelta:function(f){if("undefined"===typeof f.data||f.data.isDeleted)return"";var C=f.colDef.field,V=GridHelper.getCsvObjectName(C),
ba=CsvType[V].currency,w=f.data.product[V+"_isDrop"],O=f.value[0],z=null!=O&&(w&&0>=O||!w&&0<=O),I=z?"fa-arrow-circle-down":"fa-arrow-circle-up";w||(I=z?"fa-arrow-circle-up":"fa-arrow-circle-down");O="";"-"!=f.valueFormatted&&(O=' <i class="fa '+I+'" style="color:'+(z?"green":"red")+';"></i>');z="";"-"!=f.valueFormatted&&(z=NumberUtil.format(f.data.product[C+"Percent"],0)+"%&ensp;&hybull;&ensp;");O='<span style="color:'+CsvType[V].color+';">'+z+f.valueFormatted+"</span>"+O;if(f.data.multiLocaleProductsReduced.length)for(z=
$jscomp.makeIterator(f.data.multiLocaleProductsReduced),I=z.next();!I.done;I=z.next()){I=I.value;var K=I[C],A="-",J="",S="",v="";null!=K&&0!=K&&(ba?(A=Money.format(K,{sourceDomainId:I.domainId,targetDomainId:f.data.domainId,acceptMinusOne:C.includes("delta")}),I.domainId!==f.data.domainId&&currencies[I.domainId]!==currencies[f.data.domainId]&&(J=C.includes("desired")?f.data.domainId:I.domainId,J=Money.format(K,{sourceDomainId:J,targetDomainId:I.domainId,acceptMinusOne:C.includes("delta")}))):A=CsvType.format(V,
K),S=(K=null!=K&&(w&&0>=K||!w&&0<=K))?"fa-arrow-circle-down":"fa-arrow-circle-up",w||(S=K?"fa-arrow-circle-up":"fa-arrow-circle-down"),S=' <i class="fa '+S+'" style="color:'+(K?"green":"red")+';"></i>',v=NumberUtil.format(I[C+"Percent"],0)+"%&ensp;&hybull;&ensp;");O+='<br><span style="color:'+CsvType[V].color+';font-style:italic;opacity:0.8;"'+(J?' title="'+J+'"':"")+">"+v+A+"</span>"+S}return O},cellRendererTwoDimensionalStringArray:function(f){return GridHelper.defaultTextClamp(f.value,3)},cellSuppressKeyboardEvent:function(f){return f.editing&&
![13,27].includes(f.event.keyCode)},comparatorDateAgo:function(f,C){return C-f},comparatorNumberNullLast:function(f,C,V,ba,w){return null===C?w?1:-1:null===f?w?-1:1:f-C},comparatorNumberArrayNullLast:function(f,C,V,ba,w){f=null==f?[null]:Object.values(f);C=null==C?[null]:Object.values(C);var O,z;1==f.length&&null==f[0]&&(O=null);1==C.length&&null==C[0]&&(z=null);w?("undefined"==typeof O&&(O=Math.max.apply(Math,$jscomp.arrayFromIterable(f.filter(function(I){return null!=I})))),"undefined"==typeof z&&
(z=Math.max.apply(Math,$jscomp.arrayFromIterable(C.filter(function(I){return null!=I}))))):("undefined"==typeof O&&(O=Math.min.apply(Math,$jscomp.arrayFromIterable(f.filter(function(I){return null!=I})))),"undefined"==typeof z&&(z=Math.min.apply(Math,$jscomp.arrayFromIterable(C.filter(function(I){return null!=I})))));return null===z?w?1:-1:null===O?w?-1:1:O-z},csvTypeIsTrackable:function(f){return"object"!==typeof CsvType[f]?!1:CsvType[f].isTrackable||["EBAY_NEW_SHIPPING","EBAY_USED_SHIPPING"].includes(f)},
defaultTextClamp:function(f,C,V){if(null==f)return"";C=C?C:1;f=V?f:escapeHTML(f);V=f.replace(/"/g,"&quot;");return f?'<span title="'+V+'" class="text-clamp clamp-lines-'+C+'">'+f+"</span>":""},getCurrentUnits:ha,getCurrentUnitSystem:P,getHeaderComponentTemplate:function(f,C){return'<div class="ag-cell-label-container" role="presentation">\n\t\t\t\t<span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n\t\t\t\t<div ref="eLabel" class="ag-header-cell-label" role="presentation" unselectable="on">\n\t\t\t\t\t'+
(f?"<span>"+f+"&thinsp;</span>":"")+'\n\t\t\t\t\t<span ref="eText" class="ag-header-cell-text" role="columnheader" unselectable="on"></span>\n\t\t\t\t\t'+(C?'<span class="ag-header-cell-text">&thinsp;'+C+"</span>":"")+'\n\t\t\t\t\t<span ref="eFilter" class="ag-header-icon ag-filter-icon" aria-hidden="true"></span>\n\t\t\t\t\t<span ref="eSortOrder" class="ag-header-icon ag-sort-order" aria-hidden="true"></span>\n\t\t\t\t\t<span ref="eSortAsc" class="ag-header-icon ag-sort-ascending-icon" aria-hidden="true"></span>\n\t\t\t\t\t<span ref="eSortDesc" class="ag-header-icon ag-sort-descending-icon" aria-hidden="true"></span>\n\t\t\t\t\t<span ref="eSortNone" class="ag-header-icon ag-sort-none-icon" aria-hidden="true"></span>\n\t\t\t\t</div>\n\t\t\t</div>'},
getIconsDefault:function(){return{sortAscending:'<i class="fa fa-sort-alpha-asc"></i>',sortDescending:'<i class="fa fa-sort-alpha-desc"></i>'}},getIconsSortNumeric:function(){return{sortAscending:'<i class="fa fa-sort-numeric-asc"></i>',sortDescending:'<i class="fa fa-sort-numeric-desc"></i>'}},isOfferData:function(f){return CsvType[f].isOfferData&&"BUY_BOX_SHIPPING"!==f},isValidRowsPerPage:function(f,C){f=GridConfig.getRowCountOptions(f);if("undefined"===typeof f)return!1;C=f.values.indexOf(C);return-1<
C&&!f.disabled[C]},prepareProduct:function(f,C){C=void 0===C?null:C;var V=[],ba=keepaTime.now();for(O in CsvType)if("object"===typeof CsvType[O]&&!(-1<V.indexOf(CsvType[O].index))){var w=CsvType[O].index;if(CsvType[O].index==CsvType.EXTRA_INFO_UPDATES.index){f.offersNeverUpdated=!1;f.offersOutdated=!1;f.offersOutworn=!1;f.ratingOutdated=!1;f.ebayOutdated=!1;0>f.stats.lastOffersUpdate?f.offersNeverUpdated=!0:4320<ba-f.stats.lastOffersUpdate?f.offersOutdated=!0:1440<ba-f.stats.lastOffersUpdate&&(f.offersOutworn=
!0);if(0>=f.lastRatingUpdate||0<f.lastRatingUpdate&&20160<ba-f.lastRatingUpdate)f.ratingOutdated=!0,0>=f.stats.current[CsvType.COUNT_NEW.index]&&0>=f.stats.current[CsvType.COUNT_USED.index]&&0>=f.stats.current[CsvType.COUNT_COLLECTIBLE.index]&&0>=f.stats.current[CsvType.COUNT_REFURBISHED.index]&&(f.ratingOutdated=!1);if(0>=f.lastEbayUpdate||0<f.lastEbayUpdate&&20160<ba-f.lastEbayUpdate)f.ebayOutdated=!0}else f[O+"_avg30"]=f.stats.avg30?f.stats.avg30[w]:-1,f[O+"_avg90"]=f.stats.avg90?f.stats.avg90[w]:
-1,f[O+"_avg180"]=f.stats.avg180?f.stats.avg180[w]:-1,f[O+"_current"]=f.stats.current?f.stats.current[w]:-1,f[O+"_lowest"]=f.stats.min&&null!=f.stats.min[w]?f.stats.min[w][1]:-1,f[O+"_highest"]=f.stats.max&&null!=f.stats.max[w]?f.stats.max[w][1]:-1,f[O+"_atIntervalStart"]=-1,f[O+"_deltaCustom"]=null,"undefined"!==typeof f.stats.atIntervalStart&&(f[O+"_atIntervalStart"]=f.stats.atIntervalStart[w],f[O+"_deltaCustom"]=0<f.stats.current[w]&&0<f.stats.atIntervalStart[w]?f.stats.atIntervalStart[w]-f.stats.current[w]:
null),"undefined"!==typeof f.deal&&(f[O+"_avg1"]=f.deal.avg[0][w],f[O+"_avg7"]=f.deal.avg[1][w],f[O+"_delta1"]=f.deal.delta[0][w],f[O+"_delta7"]=f.deal.delta[1][w],f[O+"_delta30"]=f.deal.delta[2][w],f[O+"_delta90"]=f.deal.delta[3][w],f[O+"_deltaPercent1"]=f.deal.deltaPercent[0][w],f[O+"_deltaPercent7"]=f.deal.deltaPercent[1][w],f[O+"_deltaPercent30"]=f.deal.deltaPercent[2][w],f[O+"_deltaPercent90"]=f.deal.deltaPercent[3][w],f.dealFound=f.deal.creationDate),[CsvType.AMAZON.index,CsvType.NEW.index,
CsvType.USED.index,CsvType.BUY_BOX_SHIPPING.index].includes(w)&&(f[O+"_outOfStockPercentage90"]=f.stats.outOfStockPercentage90[w])}f.couponOneTimeAbsolute=f.coupon&&0<f.coupon[0]?f.coupon[0]:null;f.couponOneTimePercent=f.coupon&&0>f.coupon[0]?-1*f.coupon[0]:null;f.couponSNSPercent=f.coupon&&0>f.coupon[1]?-1*f.coupon[1]:null;f.fbaFeesTotal=null;null!=f.fbaFees&&(V=f.fbaFees.pickAndPackFee,0<f.fbaFees.pickAndPackFeeTax&&(V+=f.fbaFees.pickAndPackFeeTax),0<=V?f.fbaFeesTotal=V:f.fbaFees=null);f.subcategorySalesRanks=
[];if(null!==f.salesRanks){V=GridHelperCategory.getHashMap(f.domainId);ba=GridHelperCategory.getTreeHashMap(f.domainId);var O={};for(var z in f.salesRanks)ba&&ba[z]&&(O[z]=ba[z]);z=getCategorySalesRanks(O,V,f.salesRanks,f.stats?f.stats.subRankAvg:null);z=$jscomp.makeIterator(z);for(V=z.next();!V.done;V=z.next())categorySalesRank=V.value,-1!==categorySalesRank.rank&&categorySalesRank.cr.catId!==f.rootCategory&&f.subcategorySalesRanks.push(categorySalesRank)}f.salesRankDrops30=f.stats&&0<f.stats.salesRankDrops30?
f.stats.salesRankDrops30:null;f.salesRankDrops90=f.stats&&0<f.stats.salesRankDrops90?f.stats.salesRankDrops90:null;f.salesRankDrops180=f.stats&&0<f.stats.salesRankDrops180?f.stats.salesRankDrops180:null;f.variationAttributes=[];f.variations&&(z=f.variations.find(function(I){return I.asin===f.asin}))&&(f.variationAttributes=z.attributes);if(C){f.sellerIdsLowestFBA={};f.sellerIdsLowestFBM={};f.buyBoxSellerId=null;f.buyBoxSeller={};V=f.stats.sellerIdsLowestFBA;z=f.stats.sellerIdsLowestFBM;if(f.offersOutdated||
f.offersNeverUpdated)z=V=null;0>f.NEW_FBA_current&&(V=null);0>f.NEW_FBM_SHIPPING_current&&(z=null);if(V)for(V=[].concat($jscomp.arrayFromIterable(new Set(V))),V=$jscomp.makeIterator(V),ba=V.next();!ba.done;ba=V.next())ba=ba.value,(O=C[ba])&&(f.sellerIdsLowestFBA[ba]=O);if(z)for(z=[].concat($jscomp.arrayFromIterable(new Set(z))),z=$jscomp.makeIterator(z),ba=z.next();!ba.done;ba=z.next())V=ba.value,(ba=C[V])&&(f.sellerIdsLowestFBM[V]=ba);f.buyBoxSellerIdHistory&&(f.buyBoxSellerId=getLast(f.buyBoxSellerIdHistory,
CsvType.AMAZON),(z=C[f.buyBoxSellerId])&&(f.buyBoxSeller[f.buyBoxSellerId]=z))}f.buyBoxUsed=null;f.buyBoxUsedHistory&&4<=f.buyBoxUsedHistory.length&&(z=f.buyBoxUsedHistory.slice(f.buyBoxUsedHistory.length-4,f.buyBoxUsedHistory.length),z[1]&&(f.buyBoxUsed={seller:{sellerId:z[1],sellerName:"",currentRating:-1},isFBA:"1"===z[3],condition:z[2]},C&&C[z[1]]&&(f.buyBoxUsed.seller.sellerName=C[z[1]].sellerName,f.buyBoxUsed.seller.currentRating=C[z[1]].positiveRating?C[z[1]].positiveRating[3]:-1)));return f},
prepareProductCasin:function(f,C){if(!f)return null;var V={};V.asin=f.asin;V.domainId=f.domainId;V.continentId=LocaleType.getContinentId(f.domainId);for(var ba=$jscomp.makeIterator(["AMAZON","NEW","USED","BUY_BOX_SHIPPING","COUNT_REVIEWS"]),w=ba.next();!w.done;w=ba.next())if(w=w.value,"object"===typeof CsvType[w]){var O=CsvType[w].index;V[w+"_current"]=f.stats[O]&&"undefined"!==typeof f.stats[O].current.val?f.stats[O].current.val:-1;V[w+"_isLowest"]=-1<V[w+"_current"]&&C[O]===f.domainId}return V},
prepareProductLightningDeal:function(f){var C=keepaTime.now(),V=f.csv[CsvType.LIGHTNING_DEAL.index],ba=getValueAtTimeWithExactTime(V,C,CsvType.LIGHTNING_DEAL),w=0,O=0,z=-1,I=V.length;if(3<I&&-1===V[I-1]){try{for(;-1===V[I-5];)I-=2;w=V[I-2];for(var K=I;w<keepaTime.now()&&K+2<=V.length;)K+=2,w=V[K-2]}catch(A){console.error(A,V,I)}C>w&&(w=0);5<I&&0<V[I-5]&&(O=V[I-6],z=V[I-5])}return{asin:f.asin,domainId:f.domainId,title:f.title,imagesCSV:f.imagesCSV,LIGHTNING_DEAL_current:ba[1],LIGHTNING_DEAL_start:ba&&
-1<ba[1]?ba[0]:w?w:-2,LIGHTNING_DEAL_last:z,LIGHTNING_DEAL_lastStart:O?O:-2}},prepareProductSearch:function(f){var C={};C.asin=f.asin;C.domainId=f.domainId;C.title=f.title;C.imagesCSV=f.imagesCSV;C.color=f.color;C.size=f.size;C.edition=f.edition;C.format=f.format;for(var V=$jscomp.makeIterator(["AMAZON","NEW","USED","SALES"]),ba=V.next();!ba.done;ba=V.next())ba=ba.value,"object"===typeof CsvType[ba]&&(C[ba+"_current"]=f.stats.current[CsvType[ba].index]);return C},prepareProductTracking:function(f,
C,V,ba){var w=keepaTime.now();null==f.title&&(f.title="Delete me");var O=0,z=[],I=[],K=[];f.MAX_delta=null;f.MAX_deltaCustom=null;f.MAX_deltaTrackingCreated=null;f.MAX_lastPriceChange=null;f.hasPriceIncreaseTracking=!1;f.hasPriceDropTracking=!1;var A={},J;for(J in CsvType){if("object"===typeof CsvType[J])if(A.$jscomp$loop$prop$index$760=CsvType[J].index,CsvType[J].index==CsvType.EXTRA_INFO_UPDATES.index)if(f.ebayOutdated=!1,"undefined"===typeof f.lastEbayUpdate)f.ebayOutdated=-1===f.stats.current[CsvType.EBAY_NEW_SHIPPING.index]&&
-1===f.stats.current[CsvType.EBAY_USED_SHIPPING.index];else{if(0>=f.lastEbayUpdate||0<f.lastEbayUpdate&&20160<w-f.lastEbayUpdate)f.ebayOutdated=!0}else{f[J+"_current"]=f.stats.current[A.$jscomp$loop$prop$index$760];f[J+"_desired"]=-1;f[J+"_delta"]=null;f[J+"_isDrop"]=!0;if("undefined"!==typeof C.thresholdValues&&null!=C.thresholdValues){var S=C.thresholdValues.find(function(H){return function(L){return L.csvType==H.$jscomp$loop$prop$index$760&&L.domain==f.domainId&&0<=L.thresholdValueCSV[L.thresholdValueCSV.length-
1]}}(A));"undefined"!==typeof S&&(f[J+"_desired"]=S.thresholdValueCSV[S.thresholdValueCSV.length-1],f[J+"_isDrop"]=S.isDrop,f.hasPriceIncreaseTracking=f.hasPriceIncreaseTracking||!S.isDrop,f.hasPriceDropTracking=f.hasPriceDropTracking||S.isDrop);S=f[J+"_desired"];CsvType[J].currency&&f.domainId!==V&&currencies[V]!==currencies[f.domainId]&&(S=Money.raw(S,{sourceDomainId:V,targetDomainId:f.domainId,keepUnit:!0,noDigits:!0}));0<f[J+"_current"]&&0<S&&(f[J+"_delta"]=f[J+"_current"]-S,f[J+"_deltaPercent"]=
Math.round(100*f[J+"_delta"]/f[J+"_current"]),(f[J+"_isDrop"]&&0>=f[J+"_delta"]||!f[J+"_isDrop"]&&0<=f[J+"_delta"])&&K.push({domainId:f.domainId,csvTypeIndex:A.$jscomp$loop$prop$index$760}))}f[J+"_atIntervalStart"]=-1;f[J+"_deltaCustom"]=null;"undefined"!==typeof f.stats.atIntervalStart&&(f[J+"_atIntervalStart"]=f.stats.atIntervalStart[A.$jscomp$loop$prop$index$760],f[J+"_deltaCustom"]=0<f.stats.current[A.$jscomp$loop$prop$index$760]&&0<f.stats.atIntervalStart[A.$jscomp$loop$prop$index$760]?f.stats.current[A.$jscomp$loop$prop$index$760]-
f.stats.atIntervalStart[A.$jscomp$loop$prop$index$760]:null,0==f[J+"_deltaCustom"]&&(f[J+"_deltaCustom"]=null),f[J+"_deltaCustomPercent"]=f[J+"_deltaCustom"]?Math.round(100*f[J+"_deltaCustom"]/f.stats.current[A.$jscomp$loop$prop$index$760]):null);f[J+"_atTrackingCreated"]=-1;f[J+"_deltaTrackingCreated"]=null;"undefined"!==typeof f.stats.atTrackingCreated&&(f[J+"_atTrackingCreated"]=f.stats.atTrackingCreated[A.$jscomp$loop$prop$index$760],f[J+"_deltaTrackingCreated"]=0<f.stats.current[A.$jscomp$loop$prop$index$760]&&
0<f.stats.atTrackingCreated[A.$jscomp$loop$prop$index$760]?f.stats.current[A.$jscomp$loop$prop$index$760]-f.stats.atTrackingCreated[A.$jscomp$loop$prop$index$760]:null,0==f[J+"_deltaTrackingCreated"]&&(f[J+"_deltaTrackingCreated"]=null),f[J+"_deltaTrackingCreatedPercent"]=f[J+"_deltaTrackingCreated"]?Math.round(100*f[J+"_deltaTrackingCreated"]/f.stats.current[A.$jscomp$loop$prop$index$760]):null);f[J+"_lastPriceChange"]=-1;"undefined"!==typeof f.stats.lastPriceChange&&(f[J+"_lastPriceChange"]=f.stats.lastPriceChange[A.$jscomp$loop$prop$index$760],
GridHelper.csvTypeIsTrackable(J)&&(S=f[J+"_lastPriceChange"],null!==S&&(f.MAX_lastPriceChange=null===f.MAX_lastPriceChange?S:Math.max(f.MAX_lastPriceChange,S))));CsvType[J].isEnabled&&CsvType[J].isTopGraph&&(-1!=f.stats.current[A.$jscomp$loop$prop$index$760]||-1!=f.stats.avg30[A.$jscomp$loop$prop$index$760]||null!=f.stats.min[A.$jscomp$loop$prop$index$760])&&(O++,z.push(J));0<=f[J+"_desired"]&&I.push(J);if(CsvType[J].isTrackable&&CsvType[J].currency){S=$jscomp.makeIterator(["delta","deltaCustom",
"deltaTrackingCreated"]);for(var v=S.next();!v.done;v=S.next()){v=v.value;var p=f[J+"_"+v];null!=p&&(f["MAX_"+v]=null==f["MAX_"+v]?p:Math.max(f["MAX_"+v],p));p=f[J+"_"+v+"Percent"];null!=p&&(f["MAX_"+v+"Percent"]=null==f["MAX_"+v+"Percent"]?p:Math.max(f["MAX_"+v+"Percent"],p))}}CsvType[J].index===CsvType.LIGHTNING_DEAL.index&&(f[J+"_upcoming"]=f.domainId===V&&C.lightningDealsAlerts,S=null!==C.notifyIf&&C.notifyIf.find(function(H){return function(L){return L.csvType==H.$jscomp$loop$prop$index$760&&
L.domain==f.domainId&&1===L.notifyIfType}}(A)),f[J+"_backInStock"]=S?!0:!1,!0!==f[J+"_upcoming"]&&!0!==f[J+"_backInStock"]||I.includes(J)||I.push(J))}A={$jscomp$loop$prop$index$760:A.$jscomp$loop$prop$index$760}}f.countTypesTopGraph=O;f.csvTypesWithData=z;f.csvTypesWithTracking=I;f.conditionsMet=K;f.wishListName="-";ba&&Object.keys(ba).length&&(f.wishListName=null==C.wishListId?"-":ba[C.wishListId].name);return f},prepareProductTrackingDetail:function(f){null==f.title&&(f.title="Delete me");f.countTypesTopGraph=
0;for(var C in CsvType)if("object"===typeof CsvType[C]){var V=CsvType[C].index;CsvType[C].index!=CsvType.EXTRA_INFO_UPDATES.index&&CsvType[C].isEnabled&&CsvType[C].isTopGraph&&null!=f.csv[V]&&(2<f.csv[V].length||2===f.csv[V].length&&-1!==f.csv[V][1])&&f.countTypesTopGraph++}return f},processCellCallback:function(f){try{var C=f.column.colDef,V="undefined"!==typeof C.type?C.type[0]:!1,ba=f.column.colId;C=!1;"productValue"===ba&&(ba=f.node.data.realField,V="undefined"!==typeof f.node.data.realType?f.node.data.realType[0]:
V,C=!0);var w="buyBoxStatistics"===f.context.config.pageId||"buyBoxUsedStatistics"===f.context.config.pageId,O=null==f.value?"":f.value;switch(V){case "booleanColumn":O=f.value?"yes":"no";break;case "dateColumn":O=w?GridHelper.cellRendererDateTimeKeepaTime(f):h(f);break;case "dateAgoColumn":O=Array.isArray(f.value)?m({value:f.value[0]}):"lastSeenAgo"!==ba||"buyBoxStatistics"!==f.context.pageId&&"buyBoxUsedStatistics"!==f.context.pageId?"trackingSince"===ba&&"variation"===f.context.pageId?h(f):m(f):
t(f);break;case "deltaColumn":""!==O&&(O=pa(f));break;case "deltaPercentColumn":""!==O&&(O+=" %");break;case "graphColumn":O="(Graph n.a.)";break;case "priceColumn":C?O=f.node.data.productValueFormatted:""!==f.value&&null!=f.value&&(O=sa(f));break;case "offerCountColumn":case "salesRankColumn":case "stockSingleColumn":break;case "productCodeColumn":O=null==f.value?"":f.value;O instanceof Array&&(O=O.join(", ",O));break;case "trackingColumn":O=N(f,!0);break;default:switch(V={},ba){case "domainId":O=
getTldByDomain(f.value);break;case "imagesCSV":var z=f.value?f.value:[];"string"==typeof z&&(z=z.split(","));var I=[];if(z instanceof Array)for(var K=$jscomp.makeIterator(z),A=K.next();!A.done;A=K.next())I.push(imageToUrl(A.value));O=I.length?I.join(";"):"";break;case "externalLink":var J=f.node.data;O="https://www.amazon."+getTldByDomain(J.domainId)+"/dp/"+J.asin+"/?m="+J.sellerId+"&psc=1";break;case "publicationDate":case "releaseDate":O=r(f);break;case "variationCSV":case "frequentlyBoughtTogether":O=
null==f.value?"":f.value;O instanceof Array&&(O=O.join(", ",O));break;case "offerCSV":V={data:f.node.data};O=GridHelper.cellRendererOfferCSV(V);O=O.replace(/(<([^>]+)>)/ig,"").replace(/&e[mn]sp;/g," ");break;case "sold":case "sold30Day":O=0<O?""+O:"?";break;case "stockCSV":O=""==O?"?":""+O+(f.node.data.stockIsMax?"+":"");break;case "buyBoxSellerIdHistory":if("object"===typeof O){var S=Object.keys(O)[0],v=SellerUtil.isSellerIdAmazon(S,f.node.data.domainId);O=v||f.context.isCopyToClipboard?""+O[S].sellerName+
(v?"":" ("+O[S].currentRating+"%)"):"3rd Party ("+(-2==S?"?":S)+")"}break;case "buyBoxUsed.seller":if("object"===typeof O){var p=O.sellerId,H=SellerUtil.isSellerIdAmazon(p,f.node.data.domainId);O=H||f.context.isCopyToClipboard?""+O.sellerName+(H?"":" ("+O.currentRating+"%)"):"3rd Party ("+(-2==p?"?":p)+")"}break;case "currentRating":case "sellerCurrentRating":case "positiveRating.0":case "positiveRating.1":case "positiveRating.2":case "positiveRating.3":O=0<O?O+" %":w?"-":"0 %";break;case "currentRatingCount":case "sellerCurrentRatingCount":O=
0<O?O:w?"-":0;break;case "AMAZON_outOfStockPercentage90":case "NEW_outOfStockPercentage90":case "USED_outOfStockPercentage90":case "BUY_BOX_SHIPPING_outOfStockPercentage90":O="number"!=typeof O?"-":O+" %";break;case "availabilityAmazon":O=b[O];break;case "buyBoxUsed.condition":O=ConditionType.getBuyBoxUsedConditionMap()[O];break;case "rootCategory":C&&(O=GridHelperCategory.getName(f.node.data.domainId,O));break;case "categories":if(C){var L=[];f.node.data.productValue.forEach(function(Da,va){Da=GridHelperCategory.getName(f.node.data.domainId,
Da);L.push(Da)});O=L.join(", ")}break;case "topCategory":O=""===O?"-":O+" ("+NumberUtil.format(f.node.data.topCategoryProductCountPercentage)+" %)";break;case "categoryTree":""!==O&&(O=getSimpleTreeToString(O));break;case "couponOneTimePercent":case "couponSNSPercent":O=ta(f);break;case "avgPrice":case "couponOneTimeAbsolute":O=ca(f);break;case "coupon":O=null===O?"":0>O?Math.abs(O)+" %":Money.format(O,{sourceDomainId:f.node.data.domainId,targetDomainId:f.node.data.domainId});break;case "primeExclCSV":O=
0<O?Money.format(O,{sourceDomainId:f.node.data.domainId,targetDomainId:f.node.data.domainId}):"-";break;case "sellerIdsLowestFBA":case "sellerIdsLowestFBM":!0!==f.context.isCopyToClipboard&&(f.value=f.node.data.stats[ba]);O=Z(f);break;case "fbaFees":O="undefined"===typeof f.node.data?"":f.node.data.productValueFormatted?f.node.data.productValueFormatted:ca(f);break;case "subcategorySalesRanks":O="";I=f.value;if(0<I.length){z=[];for(var B=$jscomp.makeIterator(I),E=B.next();!E.done;E=B.next()){currentRank=
E.value;var U=100<currentRank.topPct?"-":currentRank.topPct;z.push(CsvType.format("SALES",currentRank.rank)+" | Top "+U+"% | "+currentRank.cr.contextFreeName)}O=z.join("; ")}break;case "salesRankReference":-2===O&&(O="Launchpad");break;case "variationAttributes":O="";var ka=f.value;if(ka)for(var ma=$jscomp.makeIterator(ka),na=ma.next();!na.done;na=ma.next()){var W=na.value;O+=W.dimension+": "+W.value+"; "}O=O.trim();break;case "percentageWon":O=0>=O?"-":1>O?"<1%":parseInt(Math.round(O))+"%";break;
case "feature0":case "feature1":case "feature2":case "feature3":case "feature4":O="";var ya=ba.slice(-1);f.node.data.features&&f.node.data.features.length&&(O=f.node.data.features[ya]?f.node.data.features[ya]:"");break;case "contributors":case "languages":C&&(O=f.node.data.productValueFormatted);break;case "availabilityAmazonDelay":var Aa=f.node.data.availabilityAmazonDelay;O=Aa?hoursToMaxTimeUnit(Aa[0],Aa[1]):"";break;default:"string"===typeof O&&(O=O.replace(/&nbsp;/g," ")),ba.includes("_backInStock")&&
(O=(O=f.value[f.node.data.product.domainId])?"yes":"no")}}return O}catch(Da){O={lastUrl:lastUrl,lastSubUrl:lastSubUrl,"params.node":f.node},reportBug(Da,O),isTest&&console.log(O)}},processHeaderCallback:function(f){var C="manage"===f.context.pageId,V=f.column.colId,ba=f.column.colDef;f=ba.headerName;!ba.headerNameGroup||"undefined"!==typeof ba.type&&ba.type.includes("hiddenColumn")||(f=ba.headerNameGroup+": "+f);switch(V){case "rank":f=" ";break;case "domainId":f=C?ba.headerName:"Locale";break;case "externalLink":f=
"Deeplink";break;case "currentRating":f=ba.headerName+" %";break;case "packageDimension":case "packageLength":case "packageWidth":case "packageHeight":case "packageWeight":case "itemDimension":case "itemLength":case "itemWidth":case "itemHeight":case "itemWeight":C=ha();V=V.includes("Weight")?C.weight:V.includes("Dimension")?C.measure+"\u00b3":C.measure;f=f+" ("+V+")";break;case "trackingExpiresOn":f=la._888;break;default:f=f.replace(/&nbsp;/g," ")}return f},processCellForClipboard:function(f){var C=
f.column.colDef,V=null==f.value?"":f.value;switch("undefined"!==typeof C.type?C.type[0]:!1){case "trackingColumn":V=N(f,!0)}return V},processHeaderForClipboard:function(f){return f.column.getColDef().headerName},removeColumnsEmpty:function(f,C){f.forEach(function(V,ba){if(V.children){if(2===V.children.length&&V.children[1].type.includes("graphColumn")){var w=M(V.children[0].field);C.some(function(I){I=I.csv[CsvType[w].index];var K=CsvType[w].isWithShipping;return null!==I&&(I.length>(K?3:2)||-1<I[K?
2:1])?!0:!1})||delete f[ba]}}else{var O=V.field;if("checkboxSelection"!==O){var z=O.split(".");V=!1;1===z.length?V=C.some(function(I){return null!=I[O]&&-1!=I[O]}):2===z.length?V=C.some(function(I){return I[z[0]]?null!=I[z[0]][z[1]]&&-1!=I[z[0]][z[1]]:!1}):isTest&&console.log("removeColumnsEmpty: missing field format handling");V||delete f[ba]}}});return f=f.filter(function(V){return V})},removeColumnsOffer:function(f,C,V){V=void 0===V?!1:V;var ba=["conditionComment"],w=["isMAP"],O="isPrime isWarehouseDeal isScam isAmazon isPrimeExcl isShippable isAddonItem isPreorder".split(" ");
f.forEach(function(z,I){var K=z.field;if(ba.includes(K))C.some(function(J){return null!=J[K]&&-1!=J[K]})||(V?f[I].hide=!0:delete f[I]);else if(w.includes(K))C.some(function(J){return J[K]})||(V?f[I].hide=!0:delete f[I]);else if(O.includes(K)){z=C.some(function(J){return J[K]});var A=C.some(function(J){return!J[K]});z&&A||(V?f[I].hide=!0:delete f[I])}});V||(f=f.filter(function(z){return z}));return f},valueFormatterCouponPercentage:ta,valueFormatterCsvType:function(f){if("undefined"===typeof f.data)return"";
var C=f.colDef.field;if(null==f.value)return"COUNT_REVIEWS_current"===C&&f.data.ratingOutdated?"?":"-";if(-2===f.value)return'<i class="fa fa-lg fa-lock"></i>';C=M(C);return CsvType.format(C,f.value)},valueFormatterDelta:pa,valueFormatterDimension:function(f){f=f.value;return null===f?"-":R(f,{maximumFractionDigits:0})},valueFormatterMeasure:function(f){f=f.value;return null===f?"-":R(f,{minimumFractionDigits:1})},valueFormatterMoney:ca,valueFormatterPrice:sa,valueFormatterRating:function(f){if("undefined"===
typeof f.data)return"";var C=f.value;return null===C?f.data.ratingOutdated?"?":"-":R(C,{minimumFractionDigits:1})},valueFormatterRatingCount:function(f){if(f.data&&f.data.isAmazon)return"-";f=f.value;return"undefined"===typeof f||0>f?0:NumberUtil.format(f)},valueFormatterRatingPercentage:function(f){if(f.data&&f.data.isAmazon)return"-";f=f.value;if("undefined"===typeof f||0>f)f=0;return f+" %"},valueFormatterSellerIdsLowest:Z,valueFormatterStockSingle:function(f){return"undefined"===typeof f.data?
"?":isStockMax(f.value,f.data.stockLimit)?f.value+"+":null===f.value?"?":f.value},valueFormatterTracking:N,valueFormatterWeight:function(f){f=f.value;if(null===f)return"-";var C=0,V=ha().weight;V&&"lb"===V&&(C=3);return R(f,{maximumFractionDigits:C,minimumFractionDigits:C})},valueGetterBuyBoxSellerId:function(f){if("undefined"!==typeof f.data&&null!=f.data.asin){var C=f.data.buyBoxSellerIdHistory;if(null==C)return null;if(f.data.buyBoxSeller)return f.data.buyBoxSeller;if(!Array.isArray(C))return C;
if(0>=C.length||!0===f.data.stats.buyBoxIsUsed||-1===f.data.stats.buyBoxPrice)return null;C=getLast(C,CsvType.AMAZON);if(-1==C)return null;f.data.buyBoxSellerId=C;var V={};return V[C]={sellerName:SellerUtil.getLabel(C,f.data.domainId),currentRating:null},V}},valueGetterCouponPercentage:function(f){return"undefined"===typeof f.data||f.data.offersOutdated||f.data.offersNeverUpdated?null:f.data[f.colDef.field]},valueGetterDateKeepaTime:function(f){if("undefined"===typeof f.data)return null;f=f.data[f.colDef.field];
return 0===f||-1===f?null:f},valueGetterDimension:function(f){if("undefined"===typeof f.data)return null;var C=f.data;if("packageDimension"===f.colDef.field){f=C.packageLength;var V=C.packageWidth;C=C.packageHeight}else f=C.itemLength,V=C.itemWidth,C=C.itemHeight;if("undefined"===typeof f||0>=f||"undefined"===typeof V||0>=V||"undefined"===typeof C||0>=C)return null;C=f*V*C/1E3;(f=ha().measure)&&"in"===f&&(C*=.061024);return parseFloat(C.toFixed(0))},valueGetterMeasure:function(f){if("undefined"===
typeof f.data)return null;f=f.data[f.colDef.field];if("undefined"===typeof f||0>=f)return null;f/=10;var C=ha().measure;C&&"in"===C&&(f*=.3937);return parseFloat(f.toFixed(1))},valueGetterMoney:function(f){if("undefined"===typeof f.data)return null;var C="undefined"!==typeof f.data.realField?f.data.realField:f.colDef.field;return null==f.data[C]||(f.data.offersOutdated||f.data.offersNeverUpdated)&&C.includes("coupon")?null:Money.raw(f.data[C],{sourceDomainId:f.data.domainId,targetDomainId:0<currencyDomainId?
currencyDomainId:Number(f.data.domainId)})},valueGetterNoNegative:function(f){if("undefined"===typeof f.data)return null;f=f.data[f.colDef.field];return 0>f?null:f},valueGetterPrice:function(f){if("undefined"===typeof f.data)return null;var C=f.colDef.field;if(0>f.data[C])return null;var V=M(C);if(GridHelper.isOfferData(V)&&(f.data.offersOutdated||f.data.offersNeverUpdated)&&(0<f.colDef.field.indexOf("_current")||0<f.colDef.field.indexOf("_atIntervalStart"))||["EBAY_NEW_SHIPPING","EBAY_USED_SHIPPING"].includes(V)&&
f.data.ebayOutdated)return null;V=("undefined"===typeof f.context||"lightningdeal"!==f.context.pageId)&&0<currencyDomainId?currencyDomainId:Number(f.data.domainId);"undefined"!==typeof f.context&&f.context.mainDomainId&&!currencyDomainId&&(V=f.context.mainDomainId);return Money.raw(f.data[C],{sourceDomainId:f.data.domainId,targetDomainId:V})},valueGetterRating:function(f){if("undefined"===typeof f.data)return null;var C=f.data[f.colDef.field];return-1==C||f.data.ratingOutdated?null:parseFloat((C/
10).toFixed(1))},valueGetterReviewCount:function(f){if("undefined"===typeof f.data)return null;var C=f.data[f.colDef.field];return-1==C||f.data.ratingOutdated?null:C},valueGetterSalesRank:function(f){if("undefined"===typeof f.data)return null;f=f.data[f.colDef.field];return-1==f?null:f},valueGetterStats:function(f){return"undefined"===typeof f.data||"undefined"===typeof f.data.stats||null===f.data.stats?null:f.data.stats[f.colDef.field]},valueGetterStockSingle:function(f){if("undefined"===typeof f.data)return null;
var C="undefined"!==typeof f.data.realField?f.data.realField:f.colDef.field;if("stock"===C&&"undefined"===typeof f.data.stats)return f.data.stock;f=f.data.stats[C]||-2;return-2==f?null:f},valueGetterTracking:function(f){if("undefined"===typeof f.data||f.data.isDeleted)return[null];var C=f.colDef.field;if("undefined"!==typeof f.data.isUpdating&&!0===f.data.isUpdating[C])return[null];var V=f.data.product,ba=C.includes("delta")&&GridManage.pageConfig.sortFilterReference===GridManage.sortFilterReferences.PERCENTAGE;
ba&&(C+="Percent");var w=V[C];if(!C.includes("delta")&&0>w||C.includes("delta")&&null==w)w=null;var O=M(C),z="undefined"!==typeof CsvType[O]&&CsvType[O].currency||"MAX"===O,I=0<currencyDomainId?currencyDomainId:Number(storage.domain),K=function(S,v){return ba?S:z?null==S?S:Money.raw(S,{sourceDomainId:v,targetDomainId:I}):CsvType[O].index===CsvType.RATING.index?S/10:S};V=[K(w,V.domainId)];if(f.data.multiLocaleProductsReduced.length){w=$jscomp.makeIterator(f.data.multiLocaleProductsReduced);for(var A=
w.next();!A.done;A=w.next()){var J=A.value;A=J[C];if(!C.includes("delta")&&0>A||C.includes("delta")&&null==A)A=null;J=C.includes("desired")?f.data.domainId:J.domainId;V.push(K(A,J))}}return V},valueGetterTrackingNonCsvArray:function(f){if("undefined"===typeof f.data||f.data.isDeleted)return[null];var C=f.colDef.field,V=[f.data.product[C]];if(f.data.multiLocaleProductsReduced.length){f=$jscomp.makeIterator(f.data.multiLocaleProductsReduced);for(var ba=f.next();!ba.done;ba=f.next())V.push(ba.value[C])}return V},
valueGetterTwoDimensionalStringArray:function(f){if("undefined"===typeof f.data)return null;f=f.data[f.colDef.field];if(null==f)return"";for(var C="",V=0;V<f.length;V++){var ba=f[V];ba&&(C=1===ba.length?C+ba[0]:C+(2===ba.length?ba[0]+": "+toSpecialCamelCase(ba[1]):ba[0]+": "+ba[1]+", "+ba[2]),V!=f.length-1&&(C+="; "))}return C},valueGetterWeight:function(f){if("undefined"===typeof f.data)return null;f=f.data[f.colDef.field];if("undefined"===typeof f||0>=f)return null;var C=ha().weight;C&&"lb"===C&&
(f*=.0022046);return parseFloat(f.toFixed(3))},valuesAreEqual:function(f,C){return f instanceof Array?C.length===f.length&&C.every(function(V,ba){return V===f[ba]}):"object"===typeof f?JSON.stringify(f)===JSON.stringify(C):f===C},valueSetterMetaData:function(f){if(0>=f.newValue)return!1;var C=function(V,ba){var w=V.node.data;w.tracking.ttl=Math.round((keepaTime.now()-w.tracking.createDate)/60)+ba;ba=keepaTime.now()+60*ba;w.tracking.expiresOn=5256E3<ba-keepaTime.now()?null:ba;w.tracking.expiresSoon=
10080>ba-keepaTime.now();setTimeout(function(){V.api.updateRowData({update:[w]})},0)};(function(V){var ba=GridManage.getTrackingUpdateObject();ba.ttl=V.newValue;var w={path:"track",type:"updateTracking",asin:V.data.asin,trackingUpdate:ba};isTest&&console.info("%ctrackingUpdateRequest","color:green;",ba);network.request(w).done(function(O){null==O.error?C(V,ba.ttl):updateFailed("Tracking Update Error",O.error,!0)}).fail(function(O){updateFailed("Tracking Update Error",O.error,!0)})})(f);return!0}}}(),
GridHelperReviews=function(){var a=function(m){var r="current"===m,q=CsvType.getName(CsvType.COUNT_REVIEWS.index);r||(q+=" - "+m.replace("avg","")+" days avg.");return{headerName:q,headerTooltip:q,headerNameGroup:"Reviews",field:"COUNT_REVIEWS_"+m,cellClass:"cell-number",cellRenderer:GridHelper.cellRendererCsvType,comparator:GridHelper.comparatorNumberNullLast,equals:function(){return!1},hide:!r,filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterCsvType,
valueGetter:GridHelper.valueGetterReviewCount,width:r?100:140}},b=function(m,r){r=void 0===r?!1:r;var q={"reviews.ratingCount":!0===r?"Ratings":"Ratings - Format Specific","reviews.reviewCount":!0===r?"Reviews":"Review Count - Format Specific"};return{field:m,headerName:q[m],headerTooltip:q[m],valueGetter:g,valueFormatter:n,cellRenderer:t,cellClass:"cell-number",comparator:GridHelper.comparatorNumberNullLast,icons:GridHelper.getIconsSortNumeric(),filter:"agNumberColumnFilter",width:!0===r?80:120,
suppressSizeToFit:!0}},d=function(m,r){r=void 0===r?!1:r;var q="reviews.ratingCount"===m?"rating":"review";return{field:m+"History",headerName:{"reviews.ratingCount":!0===r?"Ratings":"Ratings - Format Specific","reviews.reviewCount":!0===r?"Reviews":"Review Count - Format Specific"}[m]+" History",type:["graphColumn"],cellRenderer:function(u){if("undefined"===typeof u.data)return"";var D=m.split(".");D=u.data[D[0]]?u.data[D[0]][D[1]]:null;if(!D||0>=D[D.length-1])return"-";D=u.data.reviews.ratingCountHistory?
u.data.reviews.ratingCountHistory:u.context.oldestHistoricalDataInHours;var F=q+"Cache";if(!u.data[F]){var M=$("<div/>",{id:"graph-"+q+"-"+u.data.asin}),Q=$("<div/>",{style:"visibility: hidden;"});Q.append(M);$("body").append(Q);graph.insertRatingGraph(u.data,M,q,D);u.data[F]=M.get(0);Q.detach()}return u.data[F]},minWidth:200,maxWidth:200,resizable:!1}},g=function(m){if("undefined"===typeof m.data||!m.data.reviews)return-1;var r=m.data.reviews,q=keepaTime.now(),u=r.lastUpdate;if(0>=u||0<u&&20160<
q-u)return null;m=m.colDef.field.split(".")[1];return"undefined"===typeof r[m]?null:r[m][r[m].length-1]},n=function(m){return null===m.value?"?":0>m.value?"-":NumberUtil.format(m.value)},t=function(m){if("undefined"===typeof m.data)return"";var r=m.colDef.field.split(".")[1],q=("ratingCount"===r&&m.data.reviewsRatingIsMax?'<span title="Format with the most ratings"><i class="fa fa-trophy"></i></span>&emsp;':"")+'<span style="color:'+CsvType["ratingCount"===r?"RATING":"COUNT_REVIEWS"].color+'">'+m.valueFormatted+
"</span>";"ratingCount"===r&&0<m.data.ratingCountAcrossVariations&&0<m.value&&(m=Math.round(100*m.value/m.data.ratingCountAcrossVariations),r=NumberUtil.format(m),1>m&&(r="<1"),q+='<br><span style="color:#999">'+r+"%</span>");return q},h=function(){return{field:"linkReviews",headerName:"",valueGetter:function(m){var r=m.data.reviews;return r&&r.ratingCount?0<r.ratingCount[r.ratingCount.length-1]?"http://www.amazon."+getTldByDomain(m.data.domainId)+"/product-reviews/"+m.data.asin+"/?ie=UTF8&formatType=current_format&sortBy=recent":
"":""},tooltipValueGetter:function(m){return 0<m.data.COUNT_REVIEWS_current?la._939:null},cellRenderer:function(m){return m.value?'<a href="'+m.value+'" target="_blank" style><i class="fa fa-star"></i></a>':""},cellClass:"cell-icon cell-opaque",filter:!1,sortable:!1,suppressMenu:!0,suppressSizeToFit:!0,width:20}};return{getColumnGroupReviews:function(){return{headerName:'<i class="fa fa-circle" style="font-size: 7px;transform: translateY(-1px);color:'+CsvType.RATING.color+'"></i> Reviews',children:[{headerName:CsvType.getName(CsvType.RATING.index),
headerNameGroup:"Reviews",field:"RATING_current",cellClass:"cell-number",cellRenderer:GridHelper.cellRendererRatingStar,comparator:GridHelper.comparatorNumberNullLast,equals:function(){return!1},filter:"agNumberColumnFilter",icons:GridHelper.getIconsSortNumeric(),suppressSizeToFit:!0,valueFormatter:GridHelper.valueFormatterRating,valueGetter:GridHelper.valueGetterRating,width:76},a("current"),a("avg30"),a("avg90"),a("avg180"),GridConfig.getColumnDeltaPercent({headerNameGroup:"Reviews",csvType:"COUNT_REVIEWS",
range:90,hide:!0}),b("reviews.ratingCount"),b("reviews.reviewCount")]}},getColumnGroupReviewsFormatSpecific:function(){return{headerName:"Reviews",children:[b("reviews.ratingCount",!0),d("reviews.ratingCount",!0),b("reviews.reviewCount",!0),d("reviews.reviewCount",!0),h()]}}}}(),GridHelperCsvType=function(){getColumnOutOfStockPercentage=function(g){var n={};n=(n[CsvType.AMAZON.index]={headerTooltip:"The Amazon out of stock percentage of the last 90 days.<br>The higher the number, the less time Amazon was in stock."},
n[CsvType.NEW.index]={headerTooltip:"The out of stock percentage of any offer in the New condition of the last 90 days.<br>The higher the number, the less time an offer in the New condition was in stock."},n[CsvType.USED.index]={headerTooltip:"The out of stock percentage of any offer in the Used condition of the last 90 days.<br>The higher the number, the less time an offer in the Used condition was in stock."},n[CsvType.BUY_BOX_SHIPPING.index]={headerTooltip:"The Box out of stock / suppressed percentage of the last 90 days.<br>The higher the number, the less time a Buy Box offer was available."},
n);var t=CsvType[g];return{field:g+"_outOfStockPercentage90",headerName:"90 days OOS",headerNameGroup:CsvType.getName(t.index),headerTooltip:n[t.index]?n[t.index].headerTooltip:null,headerComponentParams:{template:GridHelper.getHeaderComponentTemplate("",'<i class="fa fa-info"></i>')},valueGetter:a,valueFormatter:b,cellRenderer:d,cellClass:"cell-number",comparator:GridHelper.comparatorNumberNullLast,icons:GridHelper.getIconsSortNumeric(),filter:"agNumberColumnFilter",width:110,suppressSizeToFit:!0}};
var a=function(g){if("undefined"===typeof g.data)return null;var n="undefined"!==typeof g.data.realField?g.data.realField:g.colDef.field;return 0>g.data[n]?null:g.data[n]},b=function(g){return null==g.value?"-":g.value+" %"},d=function(g){if("undefined"===typeof g.data)return"";var n=GridHelper.getCsvObjectName("undefined"!==typeof g.data.realField?g.data.realField:g.colDef.field);return'<span style="color:'+CsvType[n].color+'">'+g.valueFormatted+"</span>"};return{getColumnOutOfStockPercentage:getColumnOutOfStockPercentage}}(),
GridHelperCategory=function(){var a={},b={},d={},g=function(t,h,m){m=void 0===m?!1:m;return h>invalidIfLargerCatId||-1===h?"":d[t]&&d[t][h]?m?d[t][h].contextFreeName:d[t][h].name:a[t]&&a[t][h]?m?a[t][h].contextFreeName:a[t][h].name:h},n=function(t,h){return $.Deferred(function(m){0===h.length||null===t||"null"===t||0==storage.accountType?m.resolve():network.request({path:"pro/category",domainId:t,categoryIds:h,includeTrees:!0}).done(function(r){var q=r.categories;a[t]=a[t]||{};Object.assign(a[t],
q);r=r.categoryTrees;b[t]=b[t]||{};Object.assign(b[t],r);m.resolve()}).fail(function(r){reportBug("Category data could not be loaded.",JSON.stringify({domainId:t,categoryIds:h,response:r}));m.resolve()})})};return{getHashMap:function(t){return a[t]},getName:g,getRoot:function(t,h){return d[t][h]},getRootHashMap:function(t){return d[t]},getTreeHashMap:function(t){return b[t]},load:function(t,h,m){return $.Deferred(function(r){var q={};h&&m&&(q[h]=m);if(null!==t)for(var u=0;u<t.length;u++){var D=t[u];
q[D.domainId]=q[D.domainId]||[];q[D.domainId].push(D.rootCategory);D.categories&&(q[D.domainId]=[].concat($jscomp.arrayFromIterable(q[D.domainId]),$jscomp.arrayFromIterable(D.categories)));q[D.domainId].push(D.salesRankReference)}u=[];for(var F in q)D=Array.from(new Set(q[F])),u.push(n(F,D));isTest&&console.time("load categories");$.when.apply($,$jscomp.arrayFromIterable(u)).done(function(){isTest&&console.timeEnd("load categories");r.resolve()})})},render:function(t,h,m,r){if("undefined"===typeof h)return"";
var q=!1;if("undefined"!==typeof r&&(q="finder"===r.context.pageId)&&!["categoryTree","salesRankReference"].includes(r.colDef.field))return r.value=m,q=GridHelper.cellRendererChangeFilterModel(r),q.className="toggle-filter",q.dataset.id=h,r=document.createElement("a"),r.href="https://www.amazon."+getTldByDomain(t)+"/b/?node="+h,r.innerHTML='<i class="fa fa-external-link"></i>',r.title=la._99+" Amazon",r.target="_blank",t=document.createElement("span"),t.appendChild(q).insertAdjacentHTML("afterend",
"&ensp;"),t.appendChild(r),t;r=14==t;var u=document.createElement("span");u.innerHTML=m;var D=document.createElement("a");D.className="href";D.href=getBaseUrl()+"#!bestseller/"+t+"-"+h;D.innerHTML=m;D.target=iframe.isIframe?"_blank":"";m=document.createElement("a");m.href="https://www.amazon."+getTldByDomain(t)+"/b/?node="+h;m.innerHTML='&ensp;<i class="fa fa-external-link"></i>';m.target="_blank";m.title=la._99+" Amazon";t=document.createElement("span");t.appendChild(q||r?u:D);t.appendChild(m);return t},
setRootHashMap:function(t,h){d[t]=d[t]||{};Object.assign(d[t],h)},valueGetterCategories:function(t){if("undefined"===typeof t.data||null==t.data.categories)return"";var h=[];t.data.categories.forEach(function(m){m=g(t.data.domainId,m);h.push(m)});return h.join(", ")},valueGetterRootCategory:function(t){return"undefined"===typeof t.data||null==t.data.asin?"":g(t.data.domainId,t.data.rootCategory)},valueGetterSalesRankReference:function(t){return"undefined"===typeof t.data||null==t.data.asin?"":g(t.data.domainId,
t.data.salesRankReference)}}}(),GridPage=function(){var a=function(b,d,g){var n=$("#"+b.gridWrapperId),t=110;"deals"===b.pageId&&(t=628);"manage"===b.pageId&&(t=400);"search"===b.pageId&&(t=220);var h=420;if("manage"===b.pageId||"lightningdeal"===b.pageId)h=900;"search"===b.pageId&&(h=860);var m=$(window).height(),r=$(window).width();m-=220;!1!==b.showTools&&(m-=20);b.containerId&&(m-=120);"bestseller"===b.pageId&&(m-=g?-40:100);"finder"===b.pageId&&(m+=40);"manage"===b.pageId&&(m+=75);"topseller"===
b.pageId&&(m+=40);"search"===b.pageId&&(m=Math.min(m+110,1065));"deals"===b.pageId&&(g=$("#dealsGrid").offset(),m-=(g?g.top:0)+-320);m=Math.max(m,t);t=r-(b.containerId?110:80);"deals"===b.pageId&&(t-=150);"search"===b.pageId&&(t+=30);"manage"===b.pageId&&(t-=20);"lightningdeal"===b.pageId&&(t=$("#grid-wrapper-manage").width());t=Math.max(t,h);if(!hasDataAccessSubscription&&!["manage","search","categorytree"].includes(b.pageId)){r=h=GridConfig.rowHeight.balham;m=h+8;g=0;"asin"===b.template&&(r=56,
g=8);if("finder"===b.pageId||"deals"===b.pageId)m=56;m=2*h+r*GridConfig.maxRowsFreeUser+m+g}"lightningdeal"===b.pageId&&(h=GridConfig.rowHeight.balham,m=h+5*(2*(h-8)+8)+0);"manage"===b.pageId&&d&&b.neededHeight&&b.neededHeight<m&&(m=b.neededHeight);n.height(m+"px");n.width(t+"px")};return{init:function(b){document.title=docTitlePrefix+b.title;var d=getLoaderBox(!0),g="",n="";b.showTools&&!1!==b.showTools.filter&&(g='<div id="grid-form-'+b.pageId+'" class="grid-filter-form"></div>');!1!==b.showTools&&
(n='<div id="grid-tools-'+b.pageId+'" class="grid-wrapper-tools"></div>');insertPage(g+'\n\t\t\t\n\t\t\t<div class="data-container text_long '+b.template+'">\n\t\t\t\t'+n+'\t\n\t\t\t\t<div id="'+b.gridWrapperId+'" class="grid-wrapper '+b.template+'"> \n\t\t\t\t'+d+"\n\t\t\t\t</div>\n\t\t\t</div>");$("#contentAlign").css({marginRight:"40px",marginLeft:"40px",minWidth:"420px",width:$(window).width()-80+"px"});"manage"===b.pageId&&$("#contentAlign").css({marginTop:"125px"});b.resizeToViewport&&a(b)},
initContainer:function(b){var d=getLoaderBox(!0),g="",n="",t="";!1!==b.showTools&&(g='<div id="grid-tools-'+b.pageId+'" class="grid-wrapper-tools"></div>');b.showFilterTop&&(n='<div id="'+b.gridWrapperId+'-filter" class="grid-filter-top"></div>');!1!==b.showTools&&!0===b.showTools.track&&"variation"===b.pageId&&(t='<div id="'+b.gridWrapperId+'-tracking" style="display: none;'+(iframe.isIframe?"margin: 0px 0px 0px 23px;":"")+'"></div>');replaceHtml(b.containerId,g+"\n\t\t\t"+n+'\n\t\t\t<div id="'+
b.gridWrapperId+'" class="grid-wrapper '+b.template+'">\n\t\t\t\t'+d+"\n\t\t\t</div>\n\t\t\t"+t);b.resizeToIframeTab&&(d=$("#"+b.gridWrapperId),g=d.parent(),n=$(g).data("wrapper"),"undefined"!==typeof n&&(g=$("#"+n)),t=g.width()-4,"undefined"!==typeof n&&(t-=50),g&&0<t&&d.width(t));b.resizeToViewport&&("deals"!==b.pageId&&$("#contentAlign").css({marginRight:"40px",marginLeft:"40px",minWidth:"420px",width:$(window).width()-80+"px"}),a(b))},initGridContainer:function(b){replaceHtml(b.gridWrapperId,
'<div id="'+b.gridId+'" class="'+b.gridClass+'"></div>')},resizeToViewPort:a}}(),GridTools=function(){var a=function(m){var r={};m.context.config&&m.context.config.showTools&&(r=m.context.config.showTools);var q="<div>";r.info&&(q+='<div class="tool__info"></div>');r.enlarge&&(q+='<span class="tool__enlarge">\n                        <span class="trigger">\n                            <i class="fa fa-expand"></i>&emsp;'+la._993+"&emsp; \n                        </span>\n                    </span>");
r.column&&(q+='\n\t\t\t\t<span class="tool__column">\n\t\t\t\t\t<span class="trigger">\n\t\t\t\t\t\t<i class="fa fa-columns fa-lg"></i>&ensp;Configure Columns&emsp;\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t');r.filter&&(q+='\n\t\t\t\t<span class="tool__filter">\n\t\t\t\t\t<span class="trigger">\n\t\t\t\t\t\t<i class="fa fa-filter fa-lg"></i>&ensp;Advanced Filter&emsp;\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t');if(r.row){for(var u=GridConfig.getRowCountOptions(m.context.config.type),D=[],F=0;F<
u.values.length;F++){var M=u.values[F];D.push({content:M,value:M,disabled:u.disabled[F]})}u=material.getMenu("tool-row-menu",D);D=GridApi.getRowsPerPage(m);q+='\n\t\t\t\t<span class="tool__row mdc-menu-anchor">\n\t\t\t\t\t<span class="trigger">\n\t\t\t\t\t\t<i class="fa fa-list-ol fa-lg"></i><span>&ensp;'+D+" rows&emsp;</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t"+u+"\n\t\t\t\t</span>\n\t\t\t"}r.import&&(q+='\n\t\t\t\t<span class="tool__import">\n\t\t\t\t\t<span class="trigger">\n\t\t\t\t\t\t<i class="fa fa-upload fa-lg"></i>&ensp;Import list&emsp;\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t');
r.export&&(q+='\n\t\t\t\t<span class="tool__export">\n\t\t\t\t\t<span class="trigger">\n\t\t\t\t\t\t<i class="fa fa-download fa-lg"></i>&ensp;Export&emsp;\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t');r.delete&&(q+='\n\t\t\t\t<span class="tool__delete">\n\t\t\t\t\t<span class="trigger" title="Remove selected rows (hold down<br>ctrl + click to select or deselect rows)">\n\t\t\t\t\t\t<span><i class="fa fa-trash-o fa-lg"></i>&ensp;Remove&emsp;</span>\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t');r.update&&
(q+='\n\t\t\t\t<span class="tool__update">\n\t\t\t\t\t<span class="trigger" title="Force an update of all product data<br>older than a couple of hours.">\n\t\t\t\t\t\t<i class="fa fa-refresh fa-lg"></i>&ensp;Update product data&emsp;\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t');if(r.range){var Q="";r.rangeConfig.options.forEach(function(ja){Q+='<span data-range="'+ja+'" class="trigger">&thinsp;'+ja+"&thinsp;</span>"});q+='\n\t\t\t\t<span class="tool__range">\n\t\t\t\t\t<span class="">\n\t\t\t\t\t\t<i class="fa fa-calendar fa-lg"></i>&ensp;Range in days: '+
Q+"&emsp;\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t"}r.results&&(q+='<span class="tool__results"></span>');r.viewer&&(q+='\n\t\t\t\t<span class="tool__viewer">\n\t\t\t\t\t<span class="trigger">\n\t\t\t\t\t\t<i class="fa fa-fw fa-th"></i>&ensp;'+la._670+"&emsp;\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t");r.track&&(u=la._917,"inMemory"===m.rowModelType&&(u+="<br>"+la._923),q+='\n\t\t\t\t<span class="tool__tracktoggle">\n\t\t\t\t\t<span class="trigger">\n\t\t\t\t\t\t<i class="fa fa-fw fa-eye-slash"></i>&ensp;'+
la._915+'&emsp;\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t<span class="tool__track">\n\t\t\t\t\t<span class="trigger" style="display: none;" title="'+u+'">\n\t\t\t\t\t\t<i class="fa fa-fw fa-bell-o"></i>&ensp;'+la._916.replace("#selectedAsinCount#","")+"&emsp;\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t");r.filterinfo&&(q+='\n\t\t\t\t<span class="tool__filterinfo">\n\t\t\t\t\t<span class="trigger">\n\t\t\t\t\t\t<i class="fa fa-fw fa-file-o fa-lg"></i>&ensp;Show active filters&emsp;\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t');
r.query&&(q+='\n\t\t\t\t<span class="tool__query">\n\t\t\t\t\t<span class="trigger">\n\t\t\t\t\t\t<i class="fa fa-file-code-o fa-lg"></i>&ensp;Show API query&emsp;\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t');if(r.graph){var T="";[7,30,90,180,365,"all"].forEach(function(ja){T+='<span data-range="'+ja+'" class="trigger">&thinsp;'+ja+"&thinsp;</span>"});q+='\n\t\t\t\t<span class="tool__graph">\n\t\t\t\t\t<span class="">\n\t\t\t\t\t\t<i class="fa fa-calendar fa-lg"></i>&ensp;Graph range in days: '+
T+"&emsp;\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t"}q+="</div>";if(r.column){var ha={},P=[],R=function(ja){return ja.toLowerCase().replace(/[-_]+/g," ").replace(/[.:,;()]/g,"").replace(/ (.)/g,function(ra){return ra.toUpperCase()}).replace(/ /g,"")};m.columnApi.getColumnState().forEach(function(ja){var ra=m.columnApi.getColumn(ja.colId);if(!ra.colDef.suppressToolPanel){var ta=ra.colDef.headerName;["linkReviews"].includes(ra.colDef.field)?ta=toSpecialCamelCase(ra.colDef.field.replace(/([A-Z]+)/g,
" $1")):"domainId"===ra.colDef.field&&(ta="Locale");var pa=ra.colDef.headerNameGroup?ra.colDef.headerNameGroup.replace(/<i [\w ="-;]+><\/i>/g,"")+": ":"",ca=R(pa.replace("\ud83d\ude9a","X")+ta.replace("%","X"));ha[ca]={colId:ra.colId,checked:!1===ja.hide||!0===ra.colDef.lockVisible?' checked="checked"':"",disabled:!0===ra.colDef.lockVisible?' disabled="disabled"':"",name:pa+ta};P.push(ca)}});P.sort();q+='\n\t\t\t\t<div class="content-column mdc-elevation--z10">\n\t\t\t\t\t<p>Only selected columns will be shown</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<input class="filter-columns" type="text" placeholder="Filter columns..." />\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<span class="show-all">Show all</span> - <span class="hide-all">Hide all</span> - <span class="reset-all">Reset columns</span>'+
(r.columnPresets?' - <span class="open-presets">Load/save preset</span>':"")+'\n\t\t\t\t\t</p>\n\t\t\t\t\t<div class="scroll">\n\t\t\t';var Y=Date.now();P.forEach(function(ja){ja=ha[ja];var ra=ja.colId+"-"+Y;q+='\n\t\t\t\t\t<p data-search="'+escapeHTML(ja.name)+'">\n\t\t\t\t\t\t<input id="'+ra+'" data-col-id="'+ja.colId+'" type="checkbox"'+ja.checked+ja.disabled+"' />\n\t\t\t\t\t\t<label for=\""+ra+'"'+(ja.disabled?' class="disabled"':"")+">"+ja.name+"</label>\n\t\t\t\t\t</p>\n\t\t\t\t"});q+="\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t "}r=
"grid-tools-"+m.context.pageId;replaceHtml(r,q);b(m,r)},b=function(m,r){var q={};m.context.config&&m.context.config.showTools&&(q=m.context.config.showTools);var u=$("#"+r);if(q.filter)u.find(".tool__filter .trigger").on("click",function(){"finder"===m.context.pageId?GridFinder.initFilter(!0):isTest&&console.warn('GridTools "filter" not yet supported for this grid')});if(q.enlarge){var D=$(".tool__enlarge > .trigger");D.on("click",function(){if("bestseller"===m.context.pageId){var ca=$("#besteller-category-container");
m.context.isEnlarged?(ca.velocity("slideDown",{duration:250}),D[0].innerHTML='<i class="fa fa-expand"></i>&emsp;'+la._993+"&emsp;"):(ca.velocity("slideUp",{duration:250}),D[0].innerHTML='<i class="fa fa-compress"></i>&emsp;'+la._994+"&emsp;");setTimeout(function(){m.context.isEnlarged=!m.context.isEnlarged;GridPage.resizeToViewPort(m.context.config,!1,m.context.isEnlarged)},250)}else isTest&&console.warn('GridTools "enlarge" not yet supported for this grid')})}if(q.column){r=u.find(".scroll");var F=
$("#"+m.context.gridWrapperId).height()-120;$(r).css({maxHeight:Math.min(350,F)+"px"});r.mCustomScrollbar({theme:"minimal-dark"});var M=$("#overlayShadow"),Q=!1,T=function(){Q=!Q;if(!$("#productOverlay").is(":visible")){M.unbind("click.singleton");if(Q)M.one("click.singleton",T);M.toggle("fade","fast")}u.find(".content-column").toggle()};u.find(".tool__column .trigger").on("click",T);u.find(".reset-all").on("click",function(){m.columnApi.resetColumnState();GridState.saveColumnState(m);"deals"===m.context.config.pageId&&
GridDeals.adjustColumnDisplay();M.toggle("fade","fast");a(m)});u.find(".filter-columns").keyup(function(){var ca=$(this).val();(function(){var sa=new RegExp("\\b\\w*"+ca+"\\w*\\b","i");$("p[data-search]").hide().filter(function(){return sa.test($(this).data("search"))}).show()})()});u.find('.scroll input[type="checkbox"]').on("change",function(){m.columnApi.setColumnVisible($(this).data("col-id"),$(this).prop("checked"))});u.find(".show-all,.hide-all").on("click",function(){var ca=$(this).hasClass("show-all"),
sa=".scroll p:visible input:checkbox:not(:checked)";ca||(sa=".scroll p:visible input:checkbox:checked:not(:disabled)");sa=u.find(sa);var Z=sa.length-1;if(-1<Z){var N=[];sa.each(function(f,C){$(C).prop("checked")!==ca&&($(C).prop("checked",ca),N.push($(C).data("col-id")));f===Z&&m.columnApi.setColumnsVisible(N,ca)})}});u.find(".open-presets").on("click",function(){T();GridState.openColumnPresetPopup(m)})}if(q.row){r=document.querySelector(".mdc-menu");var ha=new mdc.menu.MDCMenu(r);u.find(".tool__row .trigger").on("click",
function(){if(ha.open)ha.hide();else{var ca=GridConfig.getRowCountOptions(m.context.config.type),sa=0;"undefined"!==typeof ca&&(sa=ca.values.indexOf(m.context.config.currentRowsPerPage));ha.show({focusIndex:sa})}});r.addEventListener("MDCMenu:selected",function(ca){ca=parseInt(parseInt(ca.detail.item.dataset.value));GridApi.setRowsPerPage(m,ca)})}if(q.import)u.find(".tool__import .trigger").on("click",function(){"viewer"===m.context.pageId?GridViewer.initImportPopup():isTest&&console.warn('GridTools "import" not yet supported for this grid')});
if(q.export)u.find(".tool__export .trigger").on("click",function(){var ca=m.context.config.type,sa=h(m),Z=showPopup("Export Data",sa.html,!0);sa.onExport.done(function(N){var f=$("#exportSubmit");f.prop("disabled",!0);f.html(la._600+' &ensp;<i class="fa fa-spinner fa-spin"></i>');if("buyBoxStatistics"===ca||"buyBoxUsedStatistics"===ca)N.onlyLimited=!1;switch(N.format){case "csv":f=[];if(N.onlyLimited)f="seller"===ca?["sellerId"]:"offer"===ca?["externalLink"]:["asin"];else{N="checkboxSelection priceHistory stockHistory linkReviews reviews.ratingCountHistory reviews.reviewCountHistory BUY_BOX_SHIPPINGHistory AMAZONHistory NEWHistory USEDHistory".split(" ");
var C=m.columnApi.getColumnState();for(var V in C){var ba=C[V];ba.hide||N.includes(ba.colId)||f.push(ba.colId)}}C=GridExport.exportCsv(m,0<f.length?{columnKeys:f}:{});break;case "xls":C="seller"===ca?g(m,N.onlyLimited):"offer"===ca?n(m,N.onlyLimited):"buyBoxStatistics"===ca||"buyBoxUsedStatistics"===ca?t(m,N.onlyLimited,"buyBoxUsedStatistics"===ca):d(m,N.onlyLimited)}C.done(function(){Z.close();getBucketInformation()}).fail(showErrorPopup)})});if(q.delete){var P=function(ca){var sa={};ca.api.forEachNode(function(Z){var N=
Z.data.asin;Z=Z.data.domainId;sa[Z]=sa[Z]||[];sa[Z].push(N)});sa.listId=ca.context.importListId||Guid.newGuid();sa.includeInaccessibleAsins=ca.context.includeInaccessibleAsins||!1;ca=encodeURIComponent(JSON.stringify(sa));window.location.hash="!viewer"+(6E4>ca.length?"/"+ca:"");preOverlayUrl=window.location.hash},R=$(".tool__delete > .trigger"),Y=$($(".tool__delete > .trigger span")[0]);R.colorTip({color:"data"});R.on("click",function(){if(R.hasClass("undo"))R.removeClass("undo"),Y.html('<i class="fa fa-trash-o fa-lg"></i>&ensp;Remove&emsp;'),
GridHelper.addContextMenu(m),m.api.updateRowData({add:m.context.deletedItems}),m.context.deletedItems=[],P(m);else{m.context.deletedItems=[];var ca=m.api.getSelectedRows();ca.length&&(GridHelper.addContextMenu(m),m.api.updateRowData({remove:ca}),m.context.deletedItems=ca,R.addClass("undo"),Y.html('<i class="fa fa-undo fa-lg"></i>&ensp;Undo&emsp;'),setTimeout(function(){R.removeClass("undo");Y.html('<i class="fa fa-trash-o fa-lg"></i>&ensp;Remove&emsp;')},5E3),P(m))}})}q.update&&(r=$(".tool__update > .trigger"),
r.colorTip({color:"data"}),r.on("click",function(){"viewer"===m.context.pageId?GridViewer.initUpdatePopup():isTest&&console.warn('GridTools "update" not yet supported for this grid')}));if(q.range){var ja=$(".tool__range .trigger");ja.on("click",function(ca){ja.css({"font-weight":"normal"});ca=$(ca.currentTarget);ca.css({"font-weight":"500"});ca=ca.data("range");ca="all"==ca?99999:ca;switch(m.context.pageId){case "buyBoxStatistics":GridBuyBoxStatistics.updateInterval(ca);break;case "buyBoxUsedStatistics":GridBuyBoxUsedStatistics.updateInterval(ca);
break;default:isTest&&console.warn('GridTools "range" not yet supported for this grid')}})}if(q.viewer)$(".tool__viewer > .trigger").on("click",function(){var ca={};m.api.forEachNodeAfterFilterAndSort(function(sa){ca[sa.data.domainId]||(ca[sa.data.domainId]=[]);ca[sa.data.domainId].push(sa.data.asin)});ca.listId=Guid.newGuid();window.open(getBaseUrl()+"#!viewer/"+encodeURIComponent(JSON.stringify(ca)),"_blank").focus()});if(q.track){r=$(".tool__tracktoggle > .trigger");var ra=$(".tool__track > .trigger"),
ta=!1;r.on("click",function(){ra.toggle();m.columnApi.setColumnVisible("checkboxSelection",!ta);"infinite"!==m.rowModelType?ta?m.api.deselectAll():m.api.selectAllFiltered():m.api.forEachNode(function(ca){ca.setSelected(!ta)});ta=!ta});ra.colorTip({color:"data"});ra.on("click",function(){var ca=[];m.api.getSelectedRows().forEach(function(Z){Z.asin&&ca.push(Z.asin)});if(ca.length)network.request({path:"user/trackinglist"}).done(function(Z){var N=Z.maxTrackingAllowed?Z.maxTrackingAllowed:maxTrackingAllowed;
Z.trackingCount&&N-Z.trackingCount<ca.length?showPopup(la._916.replace("#selectedAsinCount#",""),'<div class="popup--medium popup--medium-fixed">\n\t\t\t\t\t\t\t\t\t<p class="mdc-typography--body2">'+la._920.replace("#maxTrackingAllowed#",maxTrackingAllowed)+'</p>\n\t\t\t\t\t\t\t\t\t<p class="mdc-typography--body2">'+la._922.replace("#trackingCount#",Z.trackingCount).replace("#selectedAsinCount#",ca.length)+'</p>\n\t\t\t\t\t\t\t\t\t<p class="mdc-typography--body2"><a href="#!manage" class="href"><i class="fa fa-angle-double-right"></i> '+
la._20+'</a></p>\n\t\t\t\t\t\t\t\t\t<p class="mdc-typography--body2"><b>'+la._921+"</b></p>\n\t\t\t\t\t\t\t\t</div>",!0):"variation"===m.context.pageId?($("#grid-tools-"+m.context.pageId).hide(),$("#"+m.context.gridWrapperId).hide(),$("#"+m.context.gridWrapperId+"-filter").hide(),$("#"+m.context.gridWrapperId+"-tracking").show(),TrackingComponent.initList({asinList:ca,domainId:Number(storage.domain),containerId:m.context.gridWrapperId+"-tracking",showAsPopup:!1})):TrackingComponent.initList({asinList:ca,
domainId:Number(storage.domain),containerId:"tracklist",showAsPopup:!0})}).fail(showErrorPopup);else{var sa=la._917;"inMemory"===m.rowModelType&&(sa+=" "+la._923);showPopup(la._916.replace("#selectedAsinCount#",""),'<div class="popup--medium popup--medium-fixed">\n\t\t\t\t\t\t\t<p class="mdc-typography--body2">'+la._918+'</p>\n\t\t\t\t\t\t\t<p class="mdc-typography--body2">'+sa+"</p>\n\t\t\t\t\t\t</div>",!0)}})}if(q.filterinfo)u.find(".tool__filterinfo .trigger").on("click",GridFinder.showFilterInfo);
if(q.query)u.find(".tool__query .trigger").on("click",GridFinder.showApiQuery);if(q.graph){var pa=$(".tool__graph .trigger");pa.on("click",function(ca){pa.css({"font-weight":"normal"});"offer"===m.context.pageId||"variation"===m.context.pageId?(ca=$(ca.currentTarget),ca.css({"font-weight":"500"}),ca=ca.data("range"),ca="all"==ca?-1:24*ca,"offer"===m.context.pageId?GridOffer.updateGraphIntervalData(ca):"variation"===m.context.pageId&&GridVariation.updateGraphIntervalData(ca)):isTest&&console.warn('GridTools "graph" not yet supported for this grid')})}},
d=function(m,r){return $.Deferred(function(q){setTimeout(function(){var u=[];if(r)u=["asin"];else{var D="checkboxSelection linkReviews reviews.ratingCountHistory reviews.reviewCountHistory BUY_BOX_SHIPPINGHistory AMAZONHistory NEWHistory USEDHistory".split(" "),F=m.columnApi.getColumnState();for(P in F){var M=F[P];M.hide||D.includes(M.colId)||u.push(M.colId)}}var Q=[],T=[],ha=[];"infinite"==m.rowModelType?m.api.forEachNode(function(R){R=R.data;if("undefined"!==typeof R&&null!==R.asin){var Y=R.title&&
1<R.title.length?R.title[0]+R.title[R.title.length-1]:"";Q.push(R.asin);T.push(R.domainId);ha.push(Y)}}):m.api.forEachNodeAfterFilterAndSort(function(R){R=R.data;if((3!==R.productType||m.context.includeInaccessibleAsins)&&4!==R.productType&&null!==R.asin){var Y=R.title&&1<R.title.length?R.title[0]+R.title[R.title.length-1]:"";Q.push(R.asin);T.push(R.domainId);ha.push(Y)}});if(0>=Q.length)q.resolve();else{D=GridHelper.getCurrentUnitSystem();F=m.context.statsStart||Number(storage.lastViewerVisit)||
Date.now();var P=m.context.statsEnd||Date.now();7E4>P-F&&(F=P-7E4);network.request({path:"pro/export",fileType:"XLSX",type:"product",domainBatch:T,asinBatch:Q,keyBatch:ha,currency:currencyDomainId,columns:u,unit:D,stats:F+","+P,bestSellerRange:m.context&&m.context.bestSellerRange?m.context.bestSellerRange:null}).done(function(R){q.resolve();var Y=GridExport.getFilename(m.context.config.type);null!=R.hash?document.location="https://"+window.server[0]+"/v2/service/download/?type=xlsx&hash="+R.hash+
"&name="+encodeURIComponent(Y):showErrorPopup()}).fail(showErrorPopup)}},0)}).promise()},g=function(m,r){return $.Deferred(function(q){setTimeout(function(){var u=[];if(r)u=["sellerId"];else{var D=m.columnApi.getColumnState(),F;for(F in D){var M=D[F];M.hide||u.push(M.colId)}}D=Number(storage.domain);var Q=[],T=[];m.api.forEachNodeAfterFilterAndSort(function(ha){ha=ha.data;Q.push(ha.sellerId);T.push(ha.rank)});null==D||0>=Q.length?q.resolve():network.request({path:"pro/export",fileType:"XLSX",type:"seller",
domainId:D,sellerIdBatch:Q,sellerRankBatch:T,columns:u}).done(function(ha){q.resolve();var P=GridExport.getFilename(m.context.config.type);null!=ha.hash?document.location="https://"+window.server[0]+"/v2/service/download/?type=xlsx&hash="+ha.hash+"&name="+encodeURIComponent(P):showErrorPopup()}).fail(showErrorPopup)},0)}).promise()},n=function(m,r){return $.Deferred(function(q){setTimeout(function(){var u=[];if(r)u=["externalLink"];else{var D=m.columnApi.getColumnState(),F;for(F in D){var M=D[F];
M.hide||"priceHistory"==M.colId||"stockHistory"==M.colId||u.push(M.colId)}}var Q=null,T="",ha=[];m.api.forEachNodeAfterFilterAndSort(function(P){P=P.data;Q||(Q=P.domainId);T||(T=P.asin);ha.push(P.offerId)});null==Q||0>=ha.length?q.resolve():network.request({path:"pro/export",fileType:"XLSX",type:"offer",domainId:Q,asin:T,offerIdBatch:ha,columns:u}).done(function(P){q.resolve();var R=GridExport.getFilename(m.context.config.type);null!=P.hash?document.location="https://"+window.server[0]+"/v2/service/download/?type=xlsx&hash="+
P.hash+"&name="+encodeURIComponent(R):showErrorPopup()}).fail(showErrorPopup)},0)}).promise()},t=function(m,r,q){q=void 0===q?!1:q;return $.Deferred(function(u){setTimeout(function(){var D=[],F=m.columnApi.getColumnState();for(P in F){var M=F[P];if(!M.hide){var Q=M.colId;"avgOfferCount"===M.colId&&(Q=q?"avgUsedOfferCount":"avgNewOfferCount");D.push(Q)}}var T=null;F=m.context.asin;var ha=[];var P=m.context.range?m.context.range:m.context.config.showTools.rangeConfig.default;m.api.forEachNodeAfterFilterAndSort(function(R){R=
R.data;T||(T=R.domainId);ha.push(R.sellerId)});null==T||0>=ha.length?u.resolve():network.request({path:"pro/export",fileType:"XLSX",type:q?"buyBoxUsedStatistics":"buyBoxStatistics",domainId:T,asin:F,sellerIdBatch:ha,range:P,columns:D}).done(function(R){u.resolve();var Y=GridExport.getFilename(m.context.config.type);null!=R.hash?document.location="https://"+window.server[0]+"/v2/service/download/?type=xlsx&hash="+R.hash+"&name="+encodeURIComponent(Y):showErrorPopup()}).fail(showErrorPopup)},0)}).promise()},
h=function(m){var r=$.Deferred(),q="seller"===m.context.config.type,u="offer"===m.context.config.type,D="buyBoxStatistics"===m.context.config.type,F=q?"sellerIdCh":u?"deeplinkCh":"asinCh",M="variation"==m.context.pageId&&!hasDataAccessSubscription,Q="csv"===storage.exportFormat||M,T="allCh"===storage.exportSelection&&!M;q=material.getRadio(F,q?"Only seller ids":u?"Only offer deeplink":"Only ASINs",!T,"type",!1);T=material.getRadio("allCh","All active columns",T,"type",M);u=material.getRadio("csv",
"CSV",Q,"format",!1);Q=material.getRadio("xls","Excel (.xlsx)",!Q,"format",M);var ha=material.getButton("exportSubmit","Export",null,"download");m='<div style="width:400px;margin-bottom:10px;">Export the table in the currently displayed order.</div>\n\t\t\t\t\t<form name="loadForm" id="exportForm">\n\t\t\t\t\t    <div'+(D?' style="display:none;"':"")+'>\n                            <div class="mdc-typography--caption" style="margin-top:15px;">What to export?</div>\n                            <section id="typeRadio" style="width: 400px;">'+
T+q+'</section>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="mdc-typography--caption" style="margin-top:15px;">What format should the export have?</div>\n\t\t\t\t\t\t<section id="formatRadio" style="width: 400px;">'+Q+u+"</section>\n\t\t\t\t\t\t<br>\n\t\t\t\t\t\t"+ha+"\n\t\t\t\t\t\t"+("finder"===m.context.pageId?'<p style="margin-top:20px;"><i class="fa fa-info-circle" style="color:tomato;"></i>&ensp;\n\t\t\t\t\t\t\tNote: The export contains only the currently displayed page (not all possible results).\n\t\t\t\t\t\t</p>':
"")+"\n\t\t\t\t\t\t"+("variation"===m.context.pageId&&M?'<p style="margin-top:20px;"><i class="fa fa-info-circle"></i>&ensp;\n\t\t\t\t\t\t\tNote: <a href="'+rootURL+'#!settings/1"'+(iframe.isIframe?' target="_blank"':"")+'>Subscribe now</a> to get access to all export options and full access to all <a href="'+rootURL+'#!data"'+(iframe.isIframe?' target="_blank"':"")+">Data features</a>.\n\t\t\t\t\t\t</p>":"")+"\n\t\t\t\t\t</form>";material.init("#exportForm");setTimeout(function(){$("#exportForm").on("submit",
function(P){var R=$("#formatRadio").find(":checked")[0].id.substr(0,3),Y=$("#typeRadio").find(":checked")[0].id==F+"-radio"||M;storage.exportFormat=M?"csv":R;storage.exportSelection=Y&&!D?"":"allCh";r.resolve({format:R,onlyLimited:Y});P.preventDefault()})},0);return{onExport:r.promise(),html:m}};return{init:a,setInfoBlock:function(m,r){m=$("#grid-tools-"+m+" .tool__info");m.length&&r.length&&m.html(r)},updateResults:function(m,r,q){m=$("#grid-tools-"+m+" .tool__results");if(m.length){var u="";r&&
q?u='<i class="fa fa-info-circle fa-lg"></i>&ensp;Displaying <b>'+NumberUtil.format(r)+"</b> rows (out of a total result of "+NumberUtil.format(q)+")&emsp;":r&&(u='<i class="fa fa-info-circle fa-lg"></i>&ensp;Displaying <b>'+NumberUtil.format(r)+"</b> rows &emsp;");m.html(u)}}}}(),GridRequest=function(){return{getLoadASINs:function(a){a=void 0===a?!1:a;return{path:"pro/product",type:"",getSubSalesRankAvg:!0,history:!1,includeDeals:!0,maxAge:60,offerPages:a?3:0,refreshProduct:a}}}}(),GridBestSeller=
function(){var a,b={pageId:"bestseller",resizeToViewport:!0,showTools:{column:!0,columnPresets:!0,enlarge:!0,export:!0,row:!0,track:GridConfig.gridTypesWithCheckboxSelection.includes("asin")},template:"asin",title:"Best Sellers List",type:"asin"},d=function(q){t();var u=lastSubUrl.split("-"),D=u[0],F=decodeURIComponent(u[1].trim()),M=u[2]&&[0,30,90,180].concat(n).includes(Number(u[2]))?Number(u[2]):0;if(2>u.length||3<u.length||!verifyRegExp.domainId.test(D)||""==F)h();else{var Q=isNaN(F);h(!1,null,
F,M);u=GridApi.getRowsPerPage(q);var T=function(ha){var P=q.columnApi.getColumnState(),R=P.findIndex(function(Y){return"SALES_avgHistorical"===Y.colId});P[R].hide=ha;q.columnApi.setColumnState(P)};[30,90,180].includes(M)?(q.api.setSortModel([{colId:"SALES_avg"+M,sort:"asc"}]),T(!0)):n.includes(M)?(q.api.setSortModel([{colId:"SALES_avgHistorical",sort:"asc"}]),T(!1),q.context.bestSellerRange=M):(q.api.setSortModel([{colId:"SALES_current",sort:"asc"}]),T(!0));network.request({path:"pro/bestseller",
domainId:D,bestSellerKey:F,bestSellerRange:M,page:0,perPage:u}).done(function(ha){var P=ha.queryResult;"undefined"==typeof P||0===ha.listSize?(429==ha.status?(showPopup("Quota exceeded",quotaExceeded,!0),h(!0),addDataUpdateHandler()):showPopup("No products found","Sorry, no products found for this category / product group.",!0),GridApi.setData(q,[])):(ha=GridRequest.getLoadASINs(),ha.type="bestseller",networkHelper.loadASINs(ha,P,".loadingFlipper").done(function(R){m(D,R,F,M)}).fail(function(R){if(429==
R.status){var Y=quotaExceeded;"undefined"!=typeof R.products&&0<R.products.length?(Y+="<br>"+quotaLastedFor.replace("#count#",10<R.products.length?10*Math.round(R.products.length/10):R.products.length).replace("#type#","products"),showPopup("Quota exceeded",Y,!0),m(D,R.products,F,M)):(showPopup("Quota exceeded",Y,!0),h(!0));addDataUpdateHandler()}else showErrorPopup("Status: "+R.status)}))}).fail(function(ha){Q||network.request({path:"pro/category",domainId:D,categoryIds:[F]}).done(function(P){P=
P.categories[F].name;429==ha.status?(showPopup("Quota exceeded",quotaExceeded,!0),h(!0),addDataUpdateHandler()):h(!0,P,F)}).fail(showErrorPopup)})}},g=[],n=[],t=function(){if(!g.length){for(var q=(new Date).getFullYear(),u=(new Date).getMonth(),D=1;36>=D;D++){var F=new Date(q,u-D,1),M=parseInt("8"+F.getFullYear()%3+F.getMonth().toString().padStart(2,"0"));g.push({label:F.formatDate("M")+" "+F.formatDate("Y"),value:M})}n=g.map(function(Q){return Q.value})}},h=function(q,u,D,F){q=void 0===q?!0:q;if(!(0<
$(".category-wrapper").length)||q){var M=Number(storage.domain);D&&GridApi.getRowsPerPage(a);F=F||0;var Q=function(R,Y){GridHelperCategory.setRootHashMap(M,R.categories);var ja;for(ja in R.categories)if(ja!==Y){var ra=R.categories[ja];T.push({catId:ra.catId,contextFreeName:ra.contextFreeName,displayName:0<ra.parent?ra.contextFreeName:ra.name,domainId:ra.domainId,name:ra.name})}},T=[],ha=network.request({path:"pro/category",domainId:M,categoryIds:[-1]}).done(function(R){Q(R,D?D:!1)}),P=D&&!isNaN(D)?
network.request({path:"pro/category",domainId:M,categoryIds:[D]}).done(function(R){Q(R)}):$.Deferred().resolve();$.when(ha,P).done(function(){D&&isNaN(D)&&T.push({catId:D,domainId:M,name:D});T.sort(function(N,f){N=N.displayName.toUpperCase();f=f.displayName.toUpperCase();return N<f?-1:N>f?1:0});var R=getBaseUrl(),Y='<div id="besteller-category-container" class="card m-b-20 p-x-15 p-y-10">\n                <div class="category-wrapper">';u&&(Y+="<span>"+la._658.replace("{NAME}",u)+'</span><hr class="-purple">');
T.forEach(function(N){var f="",C="";N.catId==D&&(f=' class="mdc-typography--body2" style="color:#000;font-weight:500;"',C=' id="activeCategory"');Y+="<a"+C+' href="'+R+"#!bestseller/"+N.domainId+"-"+N.catId+(0<F?"-"+F:"")+'" '+f+">"+N.displayName+"</a> "});if(D){var ja=material.getRadio("bestSellerRange0",la._344,0===F,"bestSellerRange",!1,0),ra=material.getRadio("bestSellerRange30","30 days avg.",30===F,"bestSellerRange",!1,30),ta=material.getRadio("bestSellerRange90","90 days avg.",90===F,"bestSellerRange",
!1,90),pa=material.getRadio("bestSellerRange180","180 days avg.",180===F,"bestSellerRange",!1,180),ca=material.getRadio("bestSellerRangeHistorical","Historical",n.includes(F),"bestSellerRange",!1,-1),sa=material.getSelect("bestSellerHistorical","bestSellerHistorical",F,g,"",!0);Y+='<hr class="-purple"><div style="text-align: center;">\n                        <span>Sales Rank interval:</span>\n                        '+ja+"\n                        "+ra+"\n                        "+ta+"\n                        "+
pa+'\n                        <span style="white-space: nowrap;">'+ca+sa+"</span>\n\t\t\t\t\t</div>\n\t\t\t\t"}Y+="</div>\n\t\t\t\t</div>\n\t\t\t";q?(Y+='<div class="card m-b-20 p-15">\n                        <p class="mdc-typography--body2 -center">'+la._943+"</p>\n                    </div>",replaceHtml("bodyPanel",Y)):$("#grid-form-bestseller").before(Y);var Z=$("select#bestSellerHistorical");Z.on("change",function(){$("input#bestSellerRangeHistorical").prop("checked",!0);var N=$(this).val();
window.location.hash="#!bestseller/"+M+"-"+D+"-"+N});ja=function(N){N=parseInt(N.target.value);-1===N?(N=Z.val(),window.location.hash="#!bestseller/"+M+"-"+D+"-"+N):window.location.hash="#!bestseller/"+M+"-"+D+(0<N?"-"+N:"")};ra=$('input[name^="bestSellerRange"]');for(ta=0;ta<ra.length;ta++)ra[ta].addEventListener("focus",ja)}).fail(showErrorPopup)}},m=function(q,u,D,F){var M=n.includes(F),Q=M?r(F):0;GridHelperCategory.load(u).done(function(){for(var T=0;T<u.length;T++)u[T]=GridHelper.prepareProduct(u[T]),
M&&(u[T].SALES_avgHistorical=u[T].historicalSalesRankAverages[Q]);delete a.context.config.perPage;replaceHtml("activeCategory",GridHelperCategory.getName(q,D,!0));GridApi.setData(a,u)})},r=function(q){var u=[].concat($jscomp.arrayFromIterable(q.toString())),D=parseInt(u[1]);u=parseInt(u[2].concat(u[3]));var F=u+12*D;isTest&&console.log({bestSellerRange:q,i:D,month:u,avgIndex:F});return F};return{init:function(){var q=lastSubUrl.split("-"),u=q[0];if(2>q.length||3<q.length||!verifyRegExp.domainId.test(u)||
"undefined"===typeof q[1]||""==q[1].trim())$("#contentAlign").css({marginRight:"40px",marginLeft:"40px",marginTop:"160px",minWidth:"420px",width:$(window).width()-80+"px"}),h();else return GridApi.load().then(function(){var D=GridConfig.get(b.type,null,b.pageId);D.pageId=b.pageId;hasDataAccessSubscription||(D.gridOptions.pinnedBottomRowData=[{freeAccessRow:!0,message:'<a href="'+rootURL+'#!settings/1"'+(iframe.isIframe?' target="_blank"':"")+'>Subscribe now</a> to view up to 5000 rows and get full access to all <a href="'+
rootURL+'#!data"'+(iframe.isIframe?' target="_blank"':"")+">Data features</a>."}]);b.gridWrapperId=D.gridWrapperId;GridPage.init(b);GridPage.initGridContainer(D);a=GridApi.init(D);null!==a&&(a.context.config=b,!1!==b.showTools&&(GridTools.init(a),a.context.isEnlarged=!1),d(a))}).fail(showErrorPopup)},initData:d}}(),GridHelperBuyBoxStatistics=function(){return{getPageConfig:function(a){return $.extend(!0,{pageId:"",resizeToIframeTab:!0,showTools:{export:!0,info:!0,range:!0,rangeConfig:{options:[30,
90,180,365],default:30},results:!0},template:"",type:""},a)},getRowData:function(a,b,d,g,n,t,h,m){var r=keepaTime.now();b=getWeightedMeanSellerInInterval(a,b,d,g,h,m);if(0===Object.keys(b).length)return[];d=[];g={};h={};for(var q=a.length-1;0<=q;h={$jscomp$loop$prop$sellerId$762:h.$jscomp$loop$prop$sellerId$762},q-=2)if(h.$jscomp$loop$prop$sellerId$762=a[q],!g[h.$jscomp$loop$prop$sellerId$762]&&!["-1","-2"].includes(h.$jscomp$loop$prop$sellerId$762)){var u=n[h.$jscomp$loop$prop$sellerId$762]||{},
D=u.csv||[],F=b[h.$jscomp$loop$prop$sellerId$762]||null,M=SellerUtil.isSellerIdAmazon(h.$jscomp$loop$prop$sellerId$762,t.domainId);M&&(u.sellerName="Amazon");var Q=null,T=t.offers?t.offers.filter(function(R){return function(Y){return Y.sellerId===R.$jscomp$loop$prop$sellerId$762}}(h)):null;T&&(1!==T.length&&T.sort(function(R,Y){return Y.lastSeen-R.lastSeen}),Q=T[0]);T=!1;var ha=null,P=null;Q&&(T=Q.isFBA,Q.lastSeen&&1440>=r-Q.lastSeen&&Q.stockCSV&&(ha=Q.stockCSV[Q.stockCSV.length-1],P=Q.stockLimit));
g[h.$jscomp$loop$prop$sellerId$762]={domainId:t.domainId,sellerId:h.$jscomp$loop$prop$sellerId$762,sellerName:u?u.sellerName:"(just launched)",currentRating:u.positiveRating&&u.positiveRating[3]?u.positiveRating[3]:D[0]?D[0][D[0].length-1]:-1,currentRatingCount:u.ratingCount&&u.ratingCount[3]?u.ratingCount[3]:D[1]?D[1][D[1].length-1]:-1,lastSeen:F?F.lastSeen:-1,percentageWon:F?F.pct:-1,avgPrice:F?F.price:-1,avgOfferCount:F?m?F.uoc:F.oc:-1,isAmazon:M,isFBA:T,stock:ha,stockLimit:P};0<g[h.$jscomp$loop$prop$sellerId$762].percentageWon&&
d.push(g[h.$jscomp$loop$prop$sellerId$762])}isTest&&(a=d.reduce(function(R,Y){return R+(0<Y.percentageWon?Y.percentageWon:0)},0),console.info("%cBuy Box History \u27fc weightedMeanSellerInInterval","color:green;",b),console.info("%cBuy Box History \u27fc rowData","color:green;",d),console.info("%cBuy Box History \u27fc totalPercentageWon","color:green;",a));return d},initTools:function(a,b){if(!1!==a.context.config.showTools){var d=keepaTime.now(),g=Math.ceil(d-Number(b[0])),n=Math.ceil(g/1440);d-
changeV5<1440*a.context.config.showTools.rangeConfig.default?(isTest&&console.warn("%cBuy Box History \u27fc now - changeV5 < gridApi.context.config.showTools.rangeConfig.default * 60 * 24","color:orange;"),g=d-changeV5,n=Math.ceil(g/1440),a.context.config.showTools.rangeConfig.default=n,a.context.config.showTools.rangeConfig.options=[n]):d-changeV5<d-Number(b[0])&&(g=d-changeV5,n=Math.ceil(g/1440));isTest&&console.info("%cBuy Box History \u27fc oldestBuyBoxAgeInDays","color:green;",n);b="";switch(a.context.config.pageId){case "buyBoxStatistics":b=
"The Buy Box can be shared between multiple sellers. The following table gives an overview of the percentage each seller held the <b>New</b> Buy Box.";break;case "buyBoxUsedStatistics":b="The Buy Box can be shared between multiple sellers. The following table gives an overview of the percentage each seller held the <b>Used</b> Buy Box. Data may be limited."}GridTools.init(a);GridTools.setInfoBlock(a.context.config.pageId,b);b="#grid-tools-"+a.context.config.pageId;d=$(b+" .tool__range .trigger");
var t=!1;d.css({"font-weight":"normal"});d.each(function(h,m){h=$(m).data("range");"all"!=h&&(n>h?$(m).css({display:""}):($(m).css({display:t?"none":""}),t=!0))});a.context.config.showTools.rangeConfig.options.includes(n)?$(b+' .tool__range .trigger[data-range="'+n+'"]').css({"font-weight":"500"}):$(b+' .tool__range .trigger[data-range="'+a.context.config.showTools.rangeConfig.default+'"]').css({"font-weight":"500"})}},updateGridLayout:function(a,b){var d=$("#"+a.context.gridWrapperId),g=GridConfig.rowHeight.balham;
a=2*GridConfig.rowHeight.balham+a.scrollbarWidth;b&&(a+=Math.min(25,b)*g);d.height(a)},updateTools:function(a,b){a.context.config.showTools.results&&GridTools.updateResults(a.context.pageId,b);a.context.range&&a.context.range!==a.context.config.showTools.rangeConfig.default&&(b="#grid-tools-"+a.context.config.pageId,$(b+" .tool__range .trigger").css({"font-weight":"normal"}),$(b+' .tool__range .trigger[data-range="'+a.context.range+'"]').css({"font-weight":"500"}))}}}(),GridBuyBoxStatistics=function(){var a,
b={},d,g,n,t,h,m,r=function(q,u){var D=GridHelperBuyBoxStatistics.getRowData(n,t,h,m,g,d,q,!1);if(0===D.length&&u&&(q=365,D=GridHelperBuyBoxStatistics.getRowData(n,t,h,m,g,d,q,!1),0===D.length&&u)){replaceHtml(b.containerId,"No (recent) statistical Buy Box data available.");return}GridApi.setData(a,D);a.context.range=q;GridHelperBuyBoxStatistics.updateTools(a,D.length);GridHelperBuyBoxStatistics.updateGridLayout(a,D.length)};return{init:function(q,u){return GridApi.load().then(function(){b=GridHelperBuyBoxStatistics.getPageConfig({pageId:"buyBoxStatistics",
template:"buyBoxStatistics",type:"buyBoxStatistics"});var D=GridConfig.get(b.type);D.pageId=b.pageId;b.gridWrapperId=D.gridWrapperId;u?(b.containerId=u,GridPage.initContainer(b)):GridPage.init(b);GridPage.initGridContainer(D);a=GridApi.init(D);null!==a&&(a.context.config=b,d=q.products[0],a.context.asin=d.asin,g=q.sellers,n=d.buyBoxSellerIdHistory||[],t=d.csv[CsvType.BUY_BOX_SHIPPING.index]||[],h=d.csv[CsvType.COUNT_NEW.index]||[],m=d.csv[CsvType.COUNT_USED.index]||[],GridHelperBuyBoxStatistics.initTools(a,
n),r(a.context.config.showTools.rangeConfig.default,!0))}).fail(showErrorPopup)},updateInterval:function(q){GridHelper.addContextMenu(a);r(q)}}}(),GridBuyBoxUsedStatistics=function(){var a,b={},d,g,n,t,h,m,r=function(q,u){var D=GridHelperBuyBoxStatistics.getRowData(n,t,h,m,g,d,q,!0);if(0===D.length&&u&&(q=365,D=GridHelperBuyBoxStatistics.getRowData(n,t,h,m,g,d,q,!0),0===D.length&&u)){replaceHtml(b.containerId,"No (recent) statistical Buy Box Used data available.");return}GridApi.setData(a,D);a.context.range=
q;GridHelperBuyBoxStatistics.updateTools(a,D.length);GridHelperBuyBoxStatistics.updateGridLayout(a,D.length)};return{init:function(q,u){return GridApi.load().then(function(){b=GridHelperBuyBoxStatistics.getPageConfig({pageId:"buyBoxUsedStatistics",template:"buyBoxUsedStatistics",type:"buyBoxUsedStatistics"});var D=GridConfig.get(b.type);D.pageId=b.pageId;b.gridWrapperId=D.gridWrapperId;u?(b.containerId=u,GridPage.initContainer(b)):GridPage.init(b);GridPage.initGridContainer(D);a=GridApi.init(D);null!==
a&&(a.context.config=b,d=q.products[0],a.context.asin=d.asin,g=q.sellers,n=d.buyBoxUsedHistory||[],t=d.csv[CsvType.BUY_BOX_USED_SHIPPING.index]||[],h=d.csv[CsvType.COUNT_NEW.index]||[],m=d.csv[CsvType.COUNT_USED.index]||[],GridHelperBuyBoxStatistics.initTools(a,n),r(a.context.config.showTools.rangeConfig.default,!0))}).fail(showErrorPopup)},updateInterval:function(q){GridHelper.addContextMenu(a);r(q)}}}(),GridCasin=function(){var a,b={pageId:"casin",showTools:!1,template:"casin",type:"casin"},d=function(n,
t){a.context.mainDomainId=t;if(n.length){GridApi.setData(a,n);t={};for(var h=$jscomp.makeIterator(["BUY_BOX_SHIPPING_current","AMAZON_current","NEW_current","USED_current"]),m=h.next();!m.done;t={$jscomp$loop$prop$field$764:t.$jscomp$loop$prop$field$764},m=h.next())if(t.$jscomp$loop$prop$field$764=m.value,n.some(function(r){return function(q){return null!=q[r.$jscomp$loop$prop$field$764]&&-1!=q[r.$jscomp$loop$prop$field$764]}}(t))){a.api.setSortModel([{colId:t.$jscomp$loop$prop$field$764,sort:"asc"}]);
break}}},g=function(n){var t=[];t[CsvType.BUY_BOX_SHIPPING.index]=n.lowestBBDomain;t[CsvType.AMAZON.index]=n.lowestAmazonDomain;t[CsvType.NEW.index]=n.lowestNewDomain;t[CsvType.USED.index]=n.lowestUsedDomain;return n.map(function(h){return GridHelper.prepareProductCasin(h,t)}).filter(function(h){return h})};return{init:function(n,t,h){return GridApi.load().then(function(){n=g(n);var m=GridConfig.get(b.type);m.pageId=b.pageId;b.gridWrapperId=m.gridWrapperId;h?(b.containerId=h,GridPage.initContainer(b)):
GridPage.init(b);GridPage.initGridContainer(m);a=GridApi.init(m);null!==a&&(a.context.config=b,!1!==b.showTools&&GridTools.init(a),$("#"+a.context.gridWrapperId).height((Math.max(n.length,3)+1)*GridConfig.rowHeight.balham+1),d(n,t))}).fail(showErrorPopup)}}}(),GridCategoryTree=function(){var a,b={pageId:"categorytree",resizeToViewport:!0,showTools:!1,template:"category",title:"Category Tree",type:"category"},d=[],g=function(){var n=Number(storage.domain);a.api.setServerSideDatasource({getRows:function(t){var h=
0===t.request.groupKeys.length?[-1]:t.parentNode.data.children;null===h||0===h.length?t.successCallback([],0):network.request({path:"pro/category",domainId:n,categoryIds:h}).done(function(m){m=m.categories;var r=[],q;for(q in m){var u=m[q];if(0===u.parent)d.push(Number(q));else if(d.includes(u.parent)&&(null===u.children||0===u.children.length||0===u.productCount))continue;for(var D={catId:u.catId,children:u.children,domainId:u.domainId,parent:u.parent,productCount:u.productCount,highestRank:u.highestRank,
contextFreeName:u.contextFreeName},F=1;20>=F;F++)D["name"+F]=u.name;r.push(D)}r.sort(function(M,Q){M=M.name1.toUpperCase();Q=Q.name1.toUpperCase();return M<Q?-1:M>Q?1:0});t.successCallback(r,r.length)}).fail(function(m){showErrorPopup(m.msg);t.failCallback()})}})};return{depth:20,init:function(){return GridApi.load().then(function(){var n=GridConfig.get(b.type);n.pageId=b.pageId;b.gridWrapperId=n.gridWrapperId;GridPage.init(b);GridPage.initGridContainer(n);a=GridApi.init(n);null!==a&&(a.context.config=
b,!1!==b.showTools&&GridTools.init(a),g())}).fail(showErrorPopup)}}}(),GridDeals=function(){var a,b={pageId:"deals",resizeToViewport:!0,showTools:{column:!0,results:!0,track:GridConfig.gridTypesWithCheckboxSelection.includes("asinDeals")},template:"asin",title:"Deals",type:"asinDeals"},d=function(q){var u=[],D=a.cacheBlockSize?a.cacheBlockSize:150;a.api.setDatasource({rowCount:null,getRows:function(F){a.api&&a.api.showLoadingOverlay();q.page=F.startRow/D;q.perPage=D;66==q.page&&(q.perPage=100);network.request({path:"service/deals",
type:"ws",dealRequest:$.extend(!0,{},JSON.parse(JSON.stringify(q))),includeData:!0}).done(function(M){if(M.error)F.failCallback(),showErrorPopup("["+M.error.type+"] "+M.error.message);else{try{0==q.page&&("undefined"!==typeof M.deals.categoryIds&&dealWrapperInstance.get().formatCategories(M.deals.categoryIds,M.deals.categoryNames,M.deals.categoryCount),GridPage.resizeToViewPort(b))}catch(R){console.log(R)}if("undefined"===typeof M.deals.dr||0==M.deals.dr.length)F.successCallback([],0),a.api.hideOverlay(),
showPopup("No results found","Sorry, no products found in this selection. Try resetting it.",!0);else{var Q={},T;for(T in M.deals.dr){Q.$jscomp$loop$prop$idx$766=T;if(-1<u.indexOf(M.deals.dr[Q.$jscomp$loop$prop$idx$766].asin)){if(Array.prototype.findIndex){var ha=M.products.findIndex(function(R){return function(Y){return Y&&Y.asin===M.deals.dr[R.$jscomp$loop$prop$idx$766].asin}}(Q));-1<ha&&(M.products[ha]=null)}M.deals.dr[Q.$jscomp$loop$prop$idx$766]=null}else u.push(M.deals.dr[Q.$jscomp$loop$prop$idx$766].asin);
Q={$jscomp$loop$prop$idx$766:Q.$jscomp$loop$prop$idx$766}}Q=M.products.filter(function(R){return null!=R});hasDataAccessSubscription||(M.totalResults=GridConfig.maxRowsFreeUser,Q=Q.splice(0,5));var P=Math.min(M.totalResults,1E4);g(Q,M.deals.dr,0<Math.floor(P/D)-q.page?150:P-q.page*D).done(function(R){GridHelper.addContextMenu(a);F.successCallback(R,P);a.api&&(a.api.hideOverlay(),!0===a.pagination&&1===a.api.paginationGetTotalPages()&&$(".ag-paging-page-summary-panel").hide())})}}}).fail(function(M){showErrorPopup(M.msg);
F.failCallback()})}})},g=function(q,u,D){return $.Deferred(function(F){if(0==q.length)F.resolve(q);else{if(q.length<D){for(var M=h(),Q;n.length<CsvType.length;)n.push(-1),t.push(null);for(Q={asin:null,domainId:null,stats:{avg30:n,avg90:n,avg180:n,current:n,min:t,max:t,outOfStockPercentage90:n}};q.length<D;)q.push(Q);u.push(M)}GridHelperCategory.load(q).done(function(){for(var T={$jscomp$loop$prop$i$769:0};T.$jscomp$loop$prop$i$769<q.length;T={$jscomp$loop$prop$i$769:T.$jscomp$loop$prop$i$769},T.$jscomp$loop$prop$i$769++){q[T.$jscomp$loop$prop$i$769].deal=
u.find(function(P){return function(R){return R&&R.asin===q[P.$jscomp$loop$prop$i$769].asin}}(T));q[T.$jscomp$loop$prop$i$769]=GridHelper.prepareProduct(q[T.$jscomp$loop$prop$i$769]);q[T.$jscomp$loop$prop$i$769].isVisited=!1;var ha=q[T.$jscomp$loop$prop$i$769].domainId+"-"+q[T.$jscomp$loop$prop$i$769].asin;sessionStorage[ha]?q[T.$jscomp$loop$prop$i$769].isVisited=!0:databaseDeals&&databaseDeals.getItem(ha).then(function(P){return function(R){q[P.$jscomp$loop$prop$i$769].isVisited=!!R}}(T)).catch(function(P){})}F.resolve(q)})}}).promise()},
n=[],t=[],h=function(){for(;n.length<CsvType.length;)n.push(-1),t.push(null);var q=[n,n,n,n];return{asin:null,avg:q,delta:q,deltaPercent:q}},m=function(q){var u=CsvType.getObjectName(q.priceTypes[0]);q=[1,7,30,90,"all"][q.dateRange];var D=[];"all"===q?(D.push(u+"_deltaPercent1"),D.push(u+"_deltaPercent7"),D.push(u+"_deltaPercent30"),D.push(u+"_deltaPercent90")):D.push(u+"_deltaPercent"+q);return{filterFields:D,csvTypeName:u}},r=function(q){q="undefined"===typeof q?a.context.columnSettings:q;var u=
a.columnApi,D=u.getAllGridColumns(),F=[],M=[];D.forEach(function(Q){GridHelper.getCsvObjectName(Q.colId)===q.csvTypeName?M.push(Q.colId):Q.pinned&&F.push(Q.colId)});M.push("imagesCSV");u.setColumnsPinned(F,!1);u.setColumnsPinned(M,"left");u.moveColumn("imagesCSV",D.length-1)};return{init:function(q,u){$("#loadingIcon").hide();return GridApi.load().then(function(){var D=m(q),F=GridConfig.get(b.type,D);F.pageId=b.pageId;F.gridOptions.getRowStyle=function(M){return"undefined"===typeof M.data?null:M.data.isVisited?
{opacity:storage.dealsOpacity||.5}:null};hasDataAccessSubscription||(F.gridOptions.pagination=!1,F.gridOptions.paginationPageSize=GridConfig.maxRowsFreeUser,F.gridOptions.pinnedBottomRowData=[{freeAccessRow:!0,message:'<a href="'+rootURL+'#!settings/1"'+(iframe.isIframe?' target="_blank"':"")+'>Subscribe now</a> to view all deals in our advanced table view and get full access to all <a href="'+rootURL+'#!data"'+(iframe.isIframe?' target="_blank"':"")+">Data features</a>."}]);b.gridWrapperId=F.gridWrapperId;
u?(b.containerId=u,GridPage.initContainer(b)):GridPage.init(b);GridPage.initGridContainer(F);a=GridApi.init(F);if(null===a){D="";try{D={error:"gridApi is null",pageConfig:JSON.stringify(b)},D=JSON.stringify(D)}catch(M){}reportBug(Error(),D?D:"gridApi is null")}else r(D),a.context.config=b,!1!==b.showTools&&GridTools.init(a),a.context.columnSettings=D,d(q)}).fail(showErrorPopup)},adjustColumnDisplay:r,destroy:function(){"undefined"!==typeof a&&a.api.destroy()},setIsVisited:function(q){"undefined"!==
typeof a&&null!=a.api&&a.api.forEachNode(function(u){u.data.isVisited=q;u.setData(u.data);u=u.data.domainId+"-"+u.data.asin;sessionStorage[u]=1;databaseDeals&&databaseDeals.setItem(u,keepaTime.now())})}}}(),GridExport=function(){var a=function(b){var d=document.title;"buyBoxStatistics"===b?d="BuyBoxStatistics":"buyBoxUsedStatistics"===b?d="BuyBoxUsedStatistics":"offer"===b?d="Offers":"variation"===b&&(d="Variations");return["KeepaExport",(new Date).formatDate("Y-m-d"),toPascalCase(d),["asinFinder",
"asinViewer"].includes(b)?"":lastSubUrl].filter(function(g){return g}).join("-")};return{exportCsv:function(b,d){var g=b.context.config.type,n=a(g);return $.Deferred(function(t){setTimeout(function(){d=d||{};d.processCellCallback=GridHelper.processCellCallback;d.processHeaderCallback=GridHelper.processHeaderCallback;d.columnGroups=!1;d.fileName=n+".csv";d.shouldRowBeSkipped=function(h){return"asinFinder"===g?"undefined"===typeof h.node.data||null===h.node.data.asin||h.node.rowPinned:h.node.rowPinned};
b.api.exportDataAsCsv(d);t.resolve()},0)}).promise()},getFilename:a}}(),GridFinder=function(){var a,b={pageId:"finder",resizeToViewport:!0,showTools:{column:!0,columnPresets:!0,export:!0,filter:!0,filterinfo:!0,query:!0,results:!0,row:!0,track:GridConfig.gridTypesWithCheckboxSelection.includes("asinFinder")},template:"asin",title:"Product Finder",type:"asinFinder"},d,g,n={},t={},h=[],m=function(p){!0===p&&a.api&&V(a.api.getFilterModel(),a.api.getSortModel(),!1);p=r();replaceHtml("grid-form-"+b.pageId,
p.html);$("#filterSubmit").prop("disabled",!1);p.onFilter.done(function(){g.hide();d.fadeIn();isTest&&console.info("%cGrid: onFilterChanged","color:#6666bf;font-weight:bold;");a.api.onFilterChanged();"undefined"===typeof a.api.rowModel.datasource&&(isTest&&console.info("%cGrid: initDatasource","color:#6666bf;font-weight:bold;"),ja())});g=$("#grid-form-"+b.pageId);Z();d.fadeOut();g.fadeIn();f();var H=[],L=$("#autocomplete-categories, #autocomplete-categories_exclude, #autocomplete-salesRankReference").parent().parent().find("p > span");
L.each(function(){H.push(parseInt(this.innerText))});var B=Number(storage.domain);GridHelperCategory.load(null,B,H).done(function(){L.each(function(){var E=parseInt(this.innerText);isNaN(E)||(E=GridHelperCategory.getName(B,E),$(this).find("span").html(E))})}).fail()},r=function(){var p=$.Deferred(),H=GridConfig.csvTypesEnableLowestEver,L=GridConfig.csvTypesEnableOutOfStock,B=GridConfig.csvTypesOfferCounts,E="allowOutdatedOfferData categories_exclude hasParentASIN productType sellerIds salesRankReference salesRankReference_current singleVariation".split(" "),
U="",ka="",ma="",na="",W="",ya="",Aa="",Da="",va="",za="",Ha="",ea="",ia="",ua="",fa="",oa="",G="",X="",aa="",da="",qa="",xa="",wa=a.columnApi.getAllColumns(),Ca=getCurrencyByDomain(Number(storage.domain)),Ba="",Fa="",Ea="",La=!1,Ma=!1,Ga=!1,Na=!1,Qa=!1,Ka=!1,Ia=!1;wa.forEach(function(Ra){var Ja=Ra.colDef;if(!(!1===Ja.filter||Ja.hide&&Ja.lockVisible&&!E.includes(Ja.field))){var Xa=a.api.getFilterInstance(Ra.colId),Ya=Xa.getModel()||{},Ta=Ya.type,Pa="",Ua="";Ua="";var ab=[];Pa=Ua=Ua=null;switch(Ja.filter){case "agTextColumnFilter":Ua=
Ya.filter;"isOneOf"==Xa.textFilterParams.defaultOption?"sellerIds"===Ja.field?G='<div class="filter-row">\n\t\t\t\t\t\t\t\t<p class="filter-row--label"><b>Seller</b>&emsp;'+v(Ja.field)+'<span class="filter--reset"><i class="fa fa-undo"></i>&nbsp;Clear row</span></p>\n\t\t\t\t\t\t\t\t<p>Restrict your results to listings with offers from specific sellers (Seller ID required, separate multiple Seller IDs by comma).</p>\n\t\t\t\t\t\t\t\t<div class="filter-text" style="margin-top:0;">\t\t\t\t\n\t\t\t\t\t\t\t\t\t'+
material.getInput(!1,"","textArray-"+Ja.field,"","off","textArray-"+Ja.field,"","",!1,"",Ua)+"\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>":W+=D(Ja.field,Ja.headerName,Ua,Ta):na+=u(Ja.field,Ja.headerName,Ua);break;case "agNumberColumnFilter":Qa=B.some(function(gb){return Ra.colId.includes(gb)});La=Ra.colId.startsWith("COUNT_REVIEWS_");Ma=Ja.type&&Ja.type.includes("priceColumn")||Ra.colId.includes("deltaPercent90")&&"SALES_deltaPercent90"!==Ra.colId&&!Qa&&!La;Ga=Ja.type&&Ja.type.includes("salesRankColumn")||
"SALES_deltaPercent90"===Ra.colId;Na="salesRankReference_current"===Ra.colId;Ka=["offerCountFBA","offerCountFBM"].includes(Ra.colId);Ia=["AMAZON_outOfStockPercentage90","NEW_outOfStockPercentage90","USED_outOfStockPercentage90","BUY_BOX_SHIPPING_outOfStockPercentage90"].includes(Ra.colId);"inRange"==Ta?(Ua="undefined"===typeof Ya.filter?null:Ya.filter,Pa="undefined"===typeof Ya.filterTo?null:Ya.filterTo):"greaterThanOrEqual"===Ta?(Ua="undefined"===typeof Ya.filter?null:Ya.filter,Pa=null):(Ua=null,
Pa="undefined"===typeof Ya.filter?null:Ya.filter);"RATING_current"===Ra.colId&&(Ua=0==Ua||Ua?1>Ua?"1.0":5<Ua?"5.0":Ua:"",Pa=0==Pa||Pa?1>Pa?"1.0":5<Pa?"5.0":Pa:"");if(Ja.type&&Ja.type.includes("priceColumn")||Ra.colId.includes("fbaFees"))Ua=0!==Ua%1?Ua.toFixed(2):Ua,Pa=0!==Pa%1?Pa.toFixed(2):Pa;Ua=2147483647<parseInt(Ua)?1E9:Ua;Pa=2147483647<parseInt(Pa)?1E9:Pa;Ja.headerNameGroup=getHeaderNameGroup(Ra.colId,Ja.headerNameGroup);Ia&&(Ua=0==Ua||Ua?0>Ua?"0":100<Ua?"100":Ua:"",Pa=0==Pa||Pa?0>Pa?"0":100<
Pa?"100":Pa:"");var Va=getRangeLabel(Ra.colId,Ja.headerName);Ua=F(Ja.field,Va,Ua,Pa);if(Ia)va.length||(va+='<div class="filter-row">\n                                <p class="filter-row--label"><b>'+Ja.headerNameGroup+"</b>&emsp;"+v("outOfStockPercentage90")+'<span class="filter--reset"><i class="fa fa-undo"></i>&nbsp;Clear row</span></p>\n                                <div>\n                            '),va+=Ua;else if(Ea!==Ja.headerNameGroup)if(Ea=Ja.headerNameGroup,Ma||Ga){Ba=GridHelper.getCsvObjectName(Ra.colId);
Fa=CsvType[Ba].index;Pa=CsvType.getNameWithCircle(Fa)+" "+("SALES"===Ba?"#":Ca);Va="";if(L.includes(Ba)){Va="boolean-"+Ba+"_outOfStock";var bb=a.api.getFilterInstance(Ba+"_outOfStock").filterActive;Va=material.getCheckbox(Va,Ja.type.includes("salesRankColumn")?"No Sales Rank":"Out of stock",bb,!1,Va)+' <input type="hidden" value="" name="'+Va+'" />'}bb="";if(H.includes(Ba)){bb="boolean-"+Ba+"_isLowest";var cb=a.api.getFilterInstance(Ba+"_isLowest").filterActive;bb=material.getCheckbox(bb,"Lowest ever",
cb,!1,bb)+'\t<input type="hidden" value="" name="'+bb+'" />'}Va=Va.length||bb.length?'<div class="filter-row--label filter-row--label-extended">\n\t\t\t\t\t\t\t\t\t<span><b>'+Pa+"</b>&emsp;"+v(Ba)+'</span>\t\t\n\t\t\t\t\t\t\t\t\t<span class="filter--checkbox">'+Va+'</span>\n\t\t\t\t\t\t\t\t\t<span class="filter--checkbox">'+bb+'</span>\n\t\t\t\t\t\t\t\t\t<span class="filter--reset"><i class="fa fa-undo"></i>&nbsp;Clear row</span>\n\t\t\t\t\t\t\t\t</div>':'<p class="filter-row--label"><b>'+Pa+"</b>&emsp;"+
v(Ba)+'<span class="filter--reset"><i class="fa fa-undo"></i>&nbsp;Clear row</span></p>';Ma?(U.length&&(U+="</div></div>"),U+='<div class="filter-row" data-csvtype="'+Ba+'">\n                                    '+Va+"\n                                    <div>"+Ua+"\n\t\t\t\t\t\t\t\t"):Ga&&(ka.length&&(ka+="</div></div>"),ka+='<div class="filter-row filter-row--matrix" data-csvtype="'+Ba+'" id="filter-row--matrix-'+Ba+'">\n                                    '+Va+"\n                                    <div>"+
Ua+"\n\t\t\t\t\t\t\t\t")}else Pa=Ja.headerNameGroup,Na?(ma.length&&(ma+="</div></div>"),ma+='<div class="filter-row filter-subcategory--wrapper filter-row--matrix" id="filter-row--matrix-salesRankReference">\n                                    <p class="filter-row--label"><b>'+Pa+"</b>&emsp;"+v(Ja.field)+'<span class="filter--reset"><i class="fa fa-undo"></i>&nbsp;Clear row</span></p>\n                                    <div style="padding-bottom: 3px;">'+Ua+"\n\t\t\t\t\t\t\t\t"):Qa?(aa.length&&
(aa+="</div></div>"),aa+='<div class="filter-row">\n                                    <p class="filter-row--label"><b>'+Pa+"</b>&emsp;"+v(Ja.field)+'<span class="filter--reset"><i class="fa fa-undo"></i>&nbsp;Clear row</span></p>\n                                    <div>'+Ua+"\n\t\t\t\t\t\t\t\t"):Ka?(da.length&&(da+="</div></div>"),da+='<div class="filter-row">\n                                    <p class="filter-row--label"><b>'+Pa+"</b>&emsp;"+v(Ja.field)+'<span class="filter--reset"><i class="fa fa-undo"></i>&nbsp;Clear row</span></p>\n                                    <div>'+
Ua+"\n\t\t\t\t\t\t\t\t"):(qa.length&&(qa+="</div></div>"),qa+='<div class="filter-row">\n                                    <p class="filter-row--label"><b>'+Pa+"</b>&emsp;"+v(Ja.field)+'<span class="filter--reset"><i class="fa fa-undo"></i>&nbsp;Clear row</span></p>\n                                    <div>'+Ua+"\n\t\t\t\t\t\t\t\t");else Ma?U+=Ua:Ga?ka+=Ua:Na?ma+=Ua:Qa?aa+=Ua:Ka?da+=Ua:qa+=Ua;break;case "agDateColumnFilter":"inRange"==Ta?(Ua=(new Date(Ya.dateFrom)).formatDate("Y-m-d"),Pa=(new Date(Ya.dateTo)).formatDate("Y-m-d")):
"greaterThanOrEqual"===Ta?(Ua=(new Date(Ya.dateFrom)).formatDate("Y-m-d"),Pa=null):(Ua=null,Pa=Ya.dateFrom?(new Date(Ya.dateFrom)).formatDate("Y-m-d"):"");Da+='<p class="filter-row--label"><b>'+Ja.headerName+"</b>&emsp;"+v(Ja.field)+'<span class="filter--reset"><i class="fa fa-undo"></i>&nbsp;Clear row</span></p>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t'+M(Ja.field,Ua,Pa)+"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t";break;case "agSetColumnFilter":var $a=Xa.isFilterActive(),ib=Xa.valueModel;ab=[];ib.availableUniqueValues.forEach(function(gb){ab.push({checked:!$a||
"undefined"!==typeof ib.selectedValuesMap[gb],label:Ja.filterParams.valueMap[gb],value:gb})});Ua=T(Ja.field,Ja.headerName,ab);"productType"===Ja.field&&(X+='<div class="filter-row">\n                                <p class="filter-row--label"><b>'+Ja.headerName+"</b>&emsp;"+v(Ja.field)+'<span class="filter--reset"><i class="fa fa-undo"></i>&nbsp;Reset row</span></p>\n                                <div>\n                                    '+Ua+"\n                                </div>\n                            </div>");
"availabilityAmazon"===Ja.field&&(qa.length&&(qa+="</div></div>"),qa+='<div class="filter-row">\n                            <p class="filter-row--label"><b>'+Ja.headerName+"</b>&emsp;"+v(Ja.field)+'<span class="filter--reset"><i class="fa fa-undo"></i>&nbsp;Reset row</span></p>\n                            <div>'+Ua+"\n                        ");"buyBoxUsed.condition"===Ja.field&&(oa='<div class="filter-row">\n                                <p class="filter-row--label"><b>'+Ja.headerName+"</b>&emsp;"+
v(Ja.field)+'<span class="filter--reset"><i class="fa fa-undo"></i>&nbsp;Reset row</span></p>\n                            <div>'+Ua+"</div></div>\n                        ");break;case "customBooleanColumnFilter":if("LIGHTNING_DEAL_upcoming"===Ja.field){Va=parseInt(Ya.filter);U+='<div class="filter-boolean--label">'+Ja.headerName+'</div>\n\t\t\t\t\t\t\t<div class="filter-boolean--input" style="margin-top:12px;height:36px;">\n\t\t\t\t\t\t\t\t'+material.getRadio("booleanAll-"+Ja.field,"All",1!==Va,
"boolean-"+Ja.field,!1,-1)+"\n\t\t\t\t\t\t\t\t"+material.getRadio("booleanYes-"+Ja.field,"Yes",1===Va,"boolean-"+Ja.field,!1,1)+"\n\t\t\t\t\t\t\t</div>";break}if("allowOutdatedOfferData"===Ja.field){Va="boolean-"+Ja.field;bb=a.api.getFilterInstance(Ja.field).filterActive;xa+='<div style="margin-top:0;">'+material.getCheckbox(Va,Ja.headerName,bb,!1,Va)+' <input type="hidden" value="" name="'+Va+'" /></div>';break}if("hasParentASIN"===Ja.field){Va=parseInt(Ya.filter);ab=material.getRadio("booleanAll-"+
Ja.field,"All",-1!==Va,"boolean-"+Ja.field,!1,-1);ab+=material.getRadio("booleanNo-"+Ja.field,"No Variations",0===Va,"boolean-"+Ja.field,!1,0);ab+=material.getRadio("booleanYes-"+Ja.field,"Is Variation",1===Va,"boolean-"+Ja.field,!1,1);Va=a.api.getFilterInstance("singleVariation").filterActive;Va="&emsp;| "+material.getCheckbox("boolean-singleVariation","Show only one variation per product",Va,!1,"boolean-singleVariation")+' <input type="hidden" value="" name="boolean-singleVariation" />';X+='<div class="filter-row">\n                    \t\t\t<p class="filter-row--label"><b>'+
Ja.headerName+"</b>&emsp;"+v(Ja.field)+'<span class="filter--reset"><i class="fa fa-undo"></i>&nbsp;Clear row</span></p>\n                    \t\t\t<div style="padding-bottom:20px;">\n                    \t\t\t\t<div class="filter-boolean--input">\n                    \t\t\t\t\t'+ab+"\n                    \t\t\t\t\t"+Va+"\n                    \t\t\t\t</div>\n                    \t\t\t</div>\n                    \t\t</div>";break}if("singleVariation"===Ja.field)break;Va=Q(Ja.field,Ja.headerName,parseInt(Ya.filter?
Ya.filter:-1));if(["buyBoxIsFBA","buyBoxIsUnqualified"].includes(Ja.field)){ia+=Va;break}if("buyBoxUsed.isFBA"===Ja.field){fa+=Va;break}Aa+=Va;break;case "customSingleChoiceColumnFilter":Ua=Ja.headerName;"rootCategory"===Ja.field&&(za+=ha(Ja.field,!1,parseInt(Ya.filter),Xa.valueOptions,"All root categories"));break;case "customAutocompleteColumnFilter":Va=Ya.filter?Ya.filter.split("###").map(function(gb){return gb.trim()}).filter(function(gb){return""!=gb}):[];["categories","categories_exclude"].includes(Ja.field)?
(Ua="categories"===Ja.field?"Include sub categories":Ja.headerName,Ha+=P(Ja.field,Ua,Va)):"salesRankReference"===Ja.field?ma+=P(Ja.field,Ja.headerName,Va):ya+=P(Ja.field,Ja.headerName,Va,Ta);break;case "customDynamicColumnFilter":if(["buyBoxSellerIdHistory","buyBoxUsed.seller"].includes(Ja.field)){var eb=Number(storage.domain);Ua=[];Pa="";var fb=Xa=Ta="";switch(Ja.field){case "buyBoxSellerIdHistory":Ua=SellerUtil.getAmazonSellerIds(eb);Va="Buy Box Seller";bb="Restrict your results to the current Buy Box Seller - Amazon, 3rd Party or specific sellers";
Pa="Amazon";cb="dynamic-"+Ja.field;var jb="dynamicAll-"+Ja.field;var kb="dynamicAmazon-"+Ja.field;var ob="dynamicAnyOf-"+Ja.field;Ta="dynamic3rd-"+Ja.field;Xa="dynamicAnyOfDetail-"+Ja.field;break;case "buyBoxUsed.seller":Ua=SellerUtil.getAmazonWarehouseSellerIds(eb),Va="Buy Box Used Seller",bb="Restrict your results to the current Buy Box Used Seller - Amazon Warehouse, 3rd Party or specific sellers",Pa="Amazon Warehouse",cb="dynamicUsed-"+Ja.field,jb="dynamicUsedAll-"+Ja.field,kb="dynamicUsedAmazon-"+
Ja.field,ob="dynamicUsedAnyOf-"+Ja.field,Ta="dynamicUsed3rd-"+Ja.field,Xa="dynamicUsedAnyOfDetail-"+Ja.field}eb=Array.from(Ua,function(gb){return"-"+gb});Ua=Ua.join(",");eb=eb.join(",");fb=Ya.filter;Ya=Ya.filterDetail;[Ua,eb,"1"].includes(fb)||(fb=-1);fb='<div class="filter-row">\n                                    <p class="filter-row--label"><b>'+Va+"</b>&emsp;"+v(Ja.field)+'<span class="filter--reset"><i class="fa fa-undo"></i>&nbsp;Clear row</span></p>\n                                    <p>'+
bb+' (Seller ID required, separate multiple Seller IDs by comma).</p>\n                                    <div style="padding-bottom:20px;">\n                                        <div class="filter-boolean--input">\n                                            '+material.getRadio(jb,"All","-1"==fb,cb,!1,-1)+"\n                                            "+(Ua.length?material.getRadio(kb,Pa,fb===""+Ua,cb,!1,""+Ua):"")+"\n                                            "+(eb.length?material.getRadio(Ta,
"3rd Party",fb===""+eb,cb,!1,""+eb):"")+"\n                                            "+material.getRadio(ob,"Seller IDs:",1==fb,cb,!1,1)+'\n                                            &ensp;<span style="width:500px;">'+material.getInput(1==fb,"",Xa,"","off",Xa,"","",!0,"",Ya)+"</span>\n                                        </div>\n                                    </div>\n                                </div>";switch(Ja.field){case "buyBoxSellerIdHistory":ea=fb;break;case "buyBoxUsed.seller":ua=
fb}}}}});U=U.length?U+"</div></div>":U;ka=ka.length?ka+"</div></div>":ka;ma=ma.length?ma+"</div></div>":ma;aa=aa.length?aa+"</div></div>":aa;da=da.length?da+"</div></div>":da;va=va.length?va+"</div></div>":va;qa=qa.length?qa+"</div></div>":qa;ia='<div class="filter-row">\n            <p class="filter-row--label"><b>Additional Buy Box switches</b><span class="filter--reset"><i class="fa fa-undo"></i>&nbsp;Clear row</span></p>\n            <div style="flex-wrap:wrap;">'+ia+"</div>\n        </div>";
fa=fa?'<div class="filter-row">\n            <p class="filter-row--label"><b>Additional Buy Box Used switches</b><span class="filter--reset"><i class="fa fa-undo"></i>&nbsp;Clear row</span></p>\n            <div style="flex-wrap:wrap;">'+fa+"</div>\n        </div>":"";Da='<div class="filter-row">'+Da+"</div>";Aa='<div class="filter-row">\n\t\t\t\t<p class="filter-row--label"><b>Additional switches</b><span class="filter--reset"><i class="fa fa-undo"></i>&nbsp;Clear row</span></p>\n\t\t\t\t<div style="flex-wrap:wrap;">'+
Aa+"</div>\n\t\t\t</div>";za='<p class="filter-row--label"><b>Root category</b></p>\n\t\t\t<div class="filter-category--wrapper">\n\t\t\t'+za+"\n\t\t\t</div>";Ha='<p class="filter-row--label"><b>Sub categories</b></p>\n\t\t\t<div class="filter-category--wrapper">\n\t\t\t'+Ha+"\n\t\t\t</div>";xa='<div class="filter-row">\n\t\t\t\t<p class="filter-row--label"><b>Additional settings</b><span class="filter--reset"><i class="fa fa-undo"></i>&nbsp;Clear row</span></p>\n\t\t\t\t'+xa+"\n\t\t\t</div>";wa=
'<div>\n\t\t\t<h6 class="mdc-typography--subtitle1">Sales Rank & Price Types<span class="filter--reset filter-section--reset"><i class="fa fa-undo"></i>&nbsp;Clear section</span></h6>\n\t\t\t<p>Define your desired sales rank and/or price ranges. You can define as many ranges as you like to refine the results.</p><br>\n\t\t\t'+ka+"\n\t\t\t"+ma+"\n\t\t\t"+U+"\n\t\t</div>";var Oa='<div>\n\t\t\t<h6 class="mdc-typography--subtitle1">Title, Brand and more!<span class="filter--reset filter-section--reset"><i class="fa fa-undo"></i>&nbsp;Clear section</span></h6>\n\t\t\t<p>Filter the results by category, title, brand and more.</p><br>\n\t\t\t'+
za+"\n\t\t\t"+Ha+'\n\t\t\t<div class="filter-row">\n                <p class="filter-row--label"><b>Text fields</b></p><br>\n                <div class="filter-text--wrapper">'+na+'</div>\t\t\n            </div>\n\t\t\t<p>The following fields support multiple entries, each entry is considered OR wise and a maximum of 50 entries (per field) are supported. Separate multiple values by: <i>###</i></p>\n\t\t\t<div class="filter-text--wrapper">\n                '+ya+"\n                "+W+"\n            </div>\n\t\t</div>",
Sa='<div>\n\t\t\t<h6 class="mdc-typography--subtitle1">Offer Counts<span class="filter--reset filter-section--reset"><i class="fa fa-undo"></i>&nbsp;Clear section</span></h6>\n\t\t\t'+aa+"\n\t\t\t"+da+"\n\t\t</div>",Za='<div>\n\t\t\t<h6 class="mdc-typography--subtitle1">Refine your search even more!<span class="filter--reset filter-section--reset"><i class="fa fa-undo"></i>&nbsp;Clear section</span></h6>\n\t\t\t'+ea+"\n\t\t\t"+ia+"\n\t\t\t"+ua+"\n\t\t\t"+fa+"\n\t\t\t"+oa+"\n\t\t\t"+G+"\n\t\t\t"+X+
"\n\t\t\t"+Da+"\n\t\t\t"+va+"\t\t\t\n            "+qa+"\n\t\t\t"+Aa+"\n\t\t\t"+xa+"\n\t\t</div>",Wa=material.getButton("filterSubmit","Find Products",null,"filter");wa='<form name="loadForm" id="filterForm">\n\t\t\t\t<section class="paper section-about">\n\t\t\t\t\t<h6 class="mdc-typography--subtitle1">About the Product Finder<span class="filter--reset filter-form--reset"><i class="fa fa-undo"></i>&nbsp;Clear entire form</span></h6>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tFind products matching any criteria by searching our entire product database! You can search for and sort by almost any product attribute.\n\t\t\t\t\t\tFor example you could search for all electronic products with an Amazon price within the range \n\t\t\t\t\t\tof $50 and $100, a sales rank average no higher than 5,000, manufactured by Sony and with less than 5 sellers on the product listing \n\t\t\t\t\t\t- and have the output sorted in ascending order by sales rank. Sorting can be specified via the search result table, default sort \n\t\t\t\t\t\torder is by sales rank.\n\t\t\t\t\t\t<br>Have suggestions or found bugs? You can provide feedback through our Comment section.</p><br>\n\t\t\t\t\t<p><b>\n\t\t\t\t\t\tEach search returns a maximum of 10,000 ASINs'+
(hasDataAccessSubscription?"":"*")+" depending on your table row setting and pagination. As all filters and sort operations are executed remotely \n\t\t\t\t\t\t(and not in your locally loaded table) we advice to use a low row setting as it will speed up loading and reduce quota usage. \n\t\t\t\t\t\tOnly use a higher row setting when you want to export the table or want to see more products of your current selection.</b></p><br>\n\t\t\t\t\t"+(hasDataAccessSubscription?"":'<p style="font-size:11px;"><i>\n\t\t\t\t\t\t* <a href="'+
rootURL+'#!settings/1"'+(iframe.isIframe?' target="_blank"':"")+'>Subscribe now</a> to get up to 10,000 rows and get full access to all <a href="'+rootURL+'#!data"'+(iframe.isIframe?' target="_blank"':"")+">Data features</a>. Without a subscription the Finder will return a maximum of "+GridConfig.maxRowsFreeUser+" ASINs.\n\t\t\t\t\t</i></p><br>")+'\n\t\t\t\t\t<p>\n\t\t\t\t\t\tOnce you have submitted your query you can always go back to make changes by clicking on "Advanced Filter" above the product table. \n\t\t\t\t\t\tBut you can also add or remove filters or change the sort direction directly from the table using the column menus.\n\t\t\t\t\t\tIn either case your query will be encoded in the URL so you can save a browser bookmark of your selection. \n\t\t\t\t\t\tNavigating away from the Finder will clear all filters.</p><br>\n\t\t\t\t\t<p><i>Each filter attribute will be joined by AND condition.<br>\n\t\t\t\t\t\tFields where multiple entries are possible (e.g. Manufacturer) each entry is considered OR wise and a maximum of '+
GridConfig.maxValuesPerFinderFilter+' entries are supported.<br>\n\t\t\t\t\t\tMultiple entries can be provided at once by using <span style="color:brown">###</span> as a separator.<br>\n\t\t\t\t\t\tThe Finder searches our database and might not find all products available on Amazon matching your query.<br>\n\t\t\t\t\t\tSorting is set up in the product result table by clicking on a column header (you can also sort by multiple columns by holding down shift).<br>\n\t\t\t\t\t\tEach search/sorting consumes a small amount of your quota.</i></p>\n\t\t\t\t</section>\n\t\t\t\t<section class="paper section-csv">'+
wa+'</section>\n\t\t\t\t<section class="paper section-strings">'+Oa+'</section>\n                <section class="paper section-offer-counts">'+Sa+'</section>\n\t\t\t\t<section class="paper section-other">'+Za+'</section>\n\t\t\t\t<div class="button--absolute">\n\t\t\t\t    <span id="totalResultsQuery">Your current filter matches<br><span>0</span> products</span>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<a id="filterQuery" class="mdc-button mdc-button--primary mdc-ripple-upgraded">\n\t\t\t\t\t\t\tShow API query&ensp;<i class="fa fa-file-code-o"></i>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span>'+
Wa+"</span>\n\t\t\t\t</div>\n\t\t\t</form>";material.init("#filterForm");setTimeout(function(){var Ra=$("#filterForm");w();setupChangeListener();O();z();R();Y();$(".mdc-text-field__input").colorTip({color:"yellow"});$(".mdc-form-field").colorTip({color:"yellow"});$(".fa-question").colorTip({color:"yellow"});ba();Ra.on("submit",function(Ja){$("#filterSubmit").prop("disabled",!0);Ja.preventDefault();Ja=$(this).serializeArray();q(Ja);Ja=a.api.getFilterModel();0==Object.keys(Ja).length||1==Object.keys(Ja).length&&
"undefined"!==typeof Ja.allowOutdatedOfferData?($("#filterSubmit").prop("disabled",!1),showPopup("No filter specified","You have to use at least one filter.",!0)):Ja.salesRankReference_current&&!Ja.salesRankReference||Ja.salesRankReference&&!Ja.salesRankReference_current?($("#filterSubmit").prop("disabled",!1),showPopup("Invalid filter settings",'Please choose a "Sales Rank # - Subcategory" range and reference category.',!0)):p.resolve()})},0);return{onFilter:p.promise(),html:wa}},q=function(p){var H=
[];p.forEach(function(L){var B=L.name.split("-"),E=B[0],U=null,ka=B[1];B=L.value;var ma=U=null;if(!H.includes(ka)){var na=a.api.getFilterInstance(ka);switch(E){case "text":B.length?na.setModel({type:"contains",filter:B}):na.setModel(null);break;case "textArray":case "textArrayType":if("textArrayType"===E)break;B.length?(U=(L=p.find(function(ya){return ya.name==="textArrayType-"+ka}))?L.value:"isOneOf",na.setModel({type:U?U:"isOneOf",filter:B})):na.setModel(null);break;case "boolean":na.isCheckbox&&
""===B?na.setModel(null):na.setModel({filter:B,filterType:"boolean"});H.push(ka);break;case "numberFrom":case "numberTo":U=B;ma=p.find(function(ya){return ya.name==="numberTo-"+ka}).value;"RATING_current"===ka&&(U=0===parseInt(U)||U?1>U?"1.0":5<U?"5.0":U:"",ma=0===parseInt(ma)||ma?1>ma?"1.0":5<ma?"5.0":ma:"");U.length&&ma.length?na.setModel({type:"inRange",filter:U,filterTo:ma}):U.length?na.setModel({type:"greaterThanOrEqual",filter:U,filterTo:null}):ma.length?na.setModel({type:"lessThanOrEqual",
filter:ma,filterTo:null}):na.setModel(null);H.push(ka);break;case "dateFrom":case "dateTo":U=B;ma=p.find(function(ya){return ya.name==="dateTo-"+ka}).value;U.length&&ma.length?na.setModel({type:"inRange",dateFrom:U,dateTo:ma}):U.length?na.setModel({type:"greaterThanOrEqual",dateFrom:U,dateTo:null}):ma.length?na.setModel({type:"lessThanOrEqual",dateFrom:ma,dateTo:null}):na.setModel(null);H.push(ka);break;case "singleChoice":na.setModel({filterType:"singleChoice",filter:B});break;case "singleChoiceRadio":na.setModel({filterType:"singleChoiceRadio",
filter:B});break;case "autocomplete":case "autocompleteReal":case "autocompleteType":if("autocomplete"===E)break;if("autocompleteType"===E)break;B.length?(U=["categories","categories_exclude"].includes(ka)?"isOneOf":"salesRankReference"===ka?"equals":p.find(function(ya){return ya.name==="autocompleteType-"+ka}).value,na.setModel({filterType:"autocomplete",type:U?U:"isOneOf",filter:B})):na.setModel(null);break;case "dynamic":case "dynamicUsed":if(!["buyBoxSellerIdHistory","buyBoxUsed.seller"].includes(ka))break;
var W="";switch(ka){case "buyBoxSellerIdHistory":W="dynamicAnyOfDetail-"+ka;break;case "buyBoxUsed.seller":W="dynamicUsedAnyOfDetail-"+ka}-1!=B?(L="",1==B&&(L=p.find(function(ya){return ya.name===W}).value),na.setModel({filter:B,filterDetail:L,filterType:"dynamic"})):na.setModel(null);H.push(ka);break;case "set":B=p.map(function(ya){if(ya.name===E+"-"+ka)return ya.value}).filter(function(ya){return ya});0<B.length&&B.length!==na.setFilterParams.values.length?na.setModel({type:"set",values:B}):na.setModel(null);
H.push(ka);break;default:isTest&&console.info("%cGrid:","color:red;","missing filter data type handling: ",E,ka,L)}}})},u=function(p,H,L){L=L?L.replace(/"/g,"&quot;"):L;return'<div class="filter-text">\n\t\t\t'+material.getInput(!1,"","text-"+p,H,"off","text-"+p,"","",!1,"",L)+"\n\t\t\t"+v(p)+'\n\t\t\t<p class="mdc-text-field-helper-text">See tooltip</p>\n\t\t</div>'},D=function(p,H,L,B){return'<div class="filter-text filter-text-select">\n\t\t\t\t'+material.getSelect("textArrayType-"+p,"textArrayType-"+
p,B,[{label:"Is one of",value:"isOneOf"},{label:"Is none of",value:"isNoneOf"}],"",!0,!1)+"\n\t\t\t\t"+material.getInput(!1,"","textArray-"+p,H,"off","textArray-"+p,"","",!1,"",L)+"\n\t\t\t\t"+v(p)+'\n\t\t\t\t<p class="mdc-text-field-helper-text">See tooltip</p>\n\t\t\t</div>'},F=function(p,H,L,B){var E="^\\d*(\\.\\d{2}$)?",U="Allowed value format: 9999 or 19.90";if("packageLength packageWidth packageHeight itemLength itemWidth itemHeight".split(" ").includes(p))E="^\\d*(\\.\\d{1}$)?",U="Allowed value format: 5 or 4.2";
else if(["packageDimension","itemDimension"].includes(p))E="^\\d*(\\.\\d{3}$)?",U="Allowed value format: 125 or 74.088";else if("RATING_current"===p)E="^[1-4](\\.\\d{1}$)?|5(\\.0$)?$",U="Allowed value format: 1.5 or 4; Allowed range: 1.0 - 5.0";else if(["AMAZON_outOfStockPercentage90","NEW_outOfStockPercentage90","USED_outOfStockPercentage90","BUY_BOX_SHIPPING_outOfStockPercentage90"].includes(p))E="^[0-9]{1,3}?$",U="Allowed value format: 50; Allowed range: 0 - 100";else if(["couponOneTimePercent"].includes(p))E=
"^[0-9]{1,2}?$",U="Allowed value format: 50; Allowed range: 0 - 99";else if(p.includes("deltaPercent90"))E="^-[0-9]{1,3}?|-1000?|[0-9]{1,2}?$",U="Allowed value format: 50; Allowed range: from -1000 to 99";else if(p.includes("SALES")||p.includes("COUNT_")||p.includes("offerCount")||"itemWeight numberOfItems numberOfPages packageWeight packageQuantity salesRankReference_current salesRankDrops30 salesRankDrops90 salesRankDrops180".split(" ").includes(p))E="^\\d*",U="Only whole numbers are allowed, e.g. 99";
return'<div class="filter-range--label">'+H+'</div>\n\t\t\t<div class="filter-range--input">\n\t\t\t\t'+material.getInputNumberPattern("numberFrom-"+p,"numberFrom-"+p,"From",L,E,U,"off")+"\n\t\t\t\t"+material.getInputNumberPattern("numberTo-"+p,"numberTo-"+p,"To",B,E,U,"off")+"\n\t\t\t</div>"},M=function(p,H,L){return'<div class="filter-date--label">From</div>\n\t\t\t<div class="filter-date--input">\n\t\t\t\t'+material.getInputDate("dateFrom-"+p,"dateFrom-"+p,"",H)+'\n\t\t\t</div>\n\t\t\t<div class="filter-date--label">To</div>\n\t\t\t<div class="filter-date--input">\n\t\t\t\t'+
material.getInputDate("dateTo-"+p,"dateTo-"+p,"",L)+"\n\t\t\t</div>"},Q=function(p,H,L){return'<div><div class="filter-boolean--label">'+H+"&emsp;"+v(p)+'</div>\n\t\t\t<div class="filter-boolean--input">\n\t\t\t\t'+material.getRadio("booleanAll-"+p,"All",-1===L,"boolean-"+p,!1,-1)+"\n\t\t\t\t"+material.getRadio("booleanYes-"+p,"Yes",1===L,"boolean-"+p,!1,1)+"\n\t\t\t\t"+material.getRadio("booleanNo-"+p,"No",0===L,"boolean-"+p,!1,0)+"\n\t\t\t</div></div>"},T=function(p,H,L){var B="";L.forEach(function(E){B+=
material.getCheckbox(p+"-"+E.value,E.label,E.checked,!1,"set-"+p,E.value)});return'<div>\n                <input type="hidden" name="set-'+p+'" value="" />\t\t\t\t\n                '+B+"\n\t\t\t</div>"},ha=function(p,H,L,B,E){return"\n\t\t\t"+(H?'<div class="filter-singleChoice--label">'+H+"</div>":"")+"\n\t\t\t"+material.getSelect("singleChoice-"+p,"singleChoice-"+p,L,B,E)+"\n\t\t\t"+v(p)+"\n\t\t"},P=function(p,H,L,B){B=void 0===B?"isOneOf":B;var E="",U="",ka=["categories","categories_exclude","salesRankReference"].includes(p);
L.length&&(U+=GridFilter.getClearAllItem(),L=Array.from(new Set(L)),L.sort(),L.forEach(function(ma){U=ka?U+("<span><span>"+ma+'</span> <i class="fa fa-times" data-id="'+ma+'"></i></span>'):U+("<span><span>"+ma+'</span> <i class="fa fa-times"></i></span>')}),L=L.map(function(ma){return ma.replace(/"/g,"&quot;")}),E=L.join("###"));return ka?'<div class="filter-text filter-text--autocomplete ui-front">\n\t\t\t'+material.getInput(!1,"","autocomplete-"+p,H,"off","autocomplete-"+p,"","",!1,"","")+"\n\t\t\t"+
v(p)+'\n\t\t\t<p class="mdc-text-field-helper-text mdc-text-field-helper-text--persistent">&thinsp;'+U+'</p>\n\t\t\t<input type="hidden" name="autocompleteReal-'+p+'" value="'+E+'"/>\n\t\t</div>':'<div class="filter-text filter-text-select filter-text--autocomplete ui-front">\n\t\t\t\t'+material.getSelect("autocompleteType-"+p,"autocompleteType-"+p,B,[{label:"Is one of",value:"isOneOf"},{label:"Is none of",value:"isNoneOf"}],"",!0,!1)+"\n\t\t\t\t"+material.getInput(!1,"","autocomplete-"+p,H,"off",
"autocomplete-"+p,"","",!1,"","")+"\n\t\t\t\t"+v(p)+'\n\t\t\t\t<p class="mdc-text-field-helper-text mdc-text-field-helper-text--persistent">&thinsp;'+U+'</p>\n\t\t\t\t<input type="hidden" name="autocompleteReal-'+p+'" value="'+E+'"/>\n\t\t\t</div>'},R=function(){$(".mdc-text-field-helper-text--persistent i").on("click",function(){GridFilter.autocompleterRemoveItem(this)});$("#filterForm").find('input[type!="hidden"][name^="autocomplete-"]').each(function(){["autocomplete-categories","autocomplete-categories_exclude",
"autocomplete-salesRankReference"].includes(this.name)?GridFilter.autocompleterAddCategories(this):GridFilter.autocompleterAdd(this)})},Y=function(){$("#filterForm").find('input[name^="dynamic"]').on("focus",function(){var p=$(this).attr("name").split("-").pop(),H="",L="";switch(p){case "buyBoxSellerIdHistory":L="dynamicAnyOfDetail-"+p;H="dynamicAnyOf-"+p;break;case "buyBoxUsed.seller":L="dynamicUsedAnyOfDetail-"+p,H="dynamicUsedAnyOf-"+p}var B=$(this).attr("type");p=$(this).val();"radio"===B?(H=
$("#"+L),1==p?(H.focus(),H.prop("required",!0)):(H.val(""),H.prop("required",!1))):$("#"+H+"-radio").prop("checked",!0)})},ja=function(){var p=Number(storage.domain),H=GridApi.getRowsPerPage(a);hasDataAccessSubscription&&a.paginationPageSize!==H&&(a.paginationPageSize=H,a.cacheBlockSize=H);a.api.setDatasource({rowCount:null,getRows:function(L){a.api.showLoadingOverlay();Z();if("undefined"===typeof a.api.rowModel.datasource)isTest&&console.info("%cGrid:","color:#6666bf;","assumes source has not been initialized!",
a.api.rowModel.datasource),L.successCallback([],0);else{var B=L.filterModel,E=L.sortModel;if(0==Object.keys(B).length||1==Object.keys(B).length&&"undefined"!==typeof B.allowOutdatedOfferData)L.successCallback([],0),m();else{var U=K();U.page=L.startRow/H;U.perPage=H;var ka="No results found for Amazon."+tld,ma=0;isTest&&console.info("%cGrid: submitting dataQuery \u27fc ","color:#6666bf;font-weight:bold;",U,[JSON.stringify(U)]);network.request({path:"pro/finder",query:U,domainId:p}).done(function(na){isTest&&
console.info("%cGrid: done \u27fc ","color:green;font-weight:bold;",na);ma=na.tokens?na.tokens:storage.tokens;var W=na.totalResults;if(0===W){Z();L.successCallback([],0);var ya=showPopup(ka,"No products were found. Please adjust your filter settings.",!0);ya.promise&&ya.promise.always(function(){m(!0)})}if(na.error)L.failCallback(),showErrorPopup("["+na.error.type+"] "+na.error.message);else{var Aa={},Da;for(Da in na.queryResult)7!=Da&&(Aa[Da]=na.queryResult[Da].splice(0,H));na=GridRequest.getLoadASINs();
na.type="finder";networkHelper.loadASINs(na,Aa,"#loadingFlipper").done(function(va){if(0==va.length)0>=ma?(showPopup("Quota exceeded",quotaExceeded,!0),insertPage('<div class="paper">'+quotaExceeded+"</div>"),addDataUpdateHandler()):(showPopup(ka,"No products were found. Please adjust your filter settings.",!0),Z()),L.successCallback([],0);else{var za=0<Math.floor(W/U.perPage)-U.page?U.perPage:W-U.page*U.perPage,Ha=va.length;pa(va,Aa[p],za).done(function(ea){GridHelper.addContextMenu(a);var ia=Math.min(W,
hasDataAccessSubscription?1E4:5);Z(Ha,W,za);L.successCallback(ea,ia);!0===a.pagination&&(1===a.api.paginationGetTotalPages()?$(".ag-paging-page-summary-panel").hide():$(".ag-paging-page-summary-panel").show());a.api.hideOverlay()})}getBucketInformation()}).fail(function(va){isTest&&console.info("%cGrid: fail \u27fc ","color:red;font-weight:bold;",va);if(429==va.status){var za=quotaExceeded;"undefined"!=typeof va.products&&0<va.products.length?(za+="<br>"+quotaLastedFor.replace("#count#",va.products.length).replace("#type#",
"products"),showPopup("Quota exceeded",za,!0),pa(va.products,Aa[p],va.products.length).done(function(Ha){GridHelper.addContextMenu(a);var ea=Math.min(W,hasDataAccessSubscription?1E4:5);Z(Ha.length,W);L.successCallback(Ha,ea);!0===a.pagination&&(1===a.api.paginationGetTotalPages()?$(".ag-paging-page-summary-panel").hide():$(".ag-paging-page-summary-panel").show());a.api.hideOverlay()})):(ra(va),L.failCallback())}else showErrorPopup("Status: "+va.status);getBucketInformation()});V(B,E,!0)}}).fail(function(na){ra(na);
L.failCallback()}).always(function(na){"undefined"===typeof na.queryResult&&(na.msg="No products were found. Please adjust your filter settings.",ra(na),L.failCallback());GridFinder.handleSpecialFilters()})}}}})},ra=function(p){429==p.status?(showPopup("Quota exceeded",quotaExceeded,!0),insertPage('<div class="paper">'+quotaExceeded+"</div>"),addDataUpdateHandler()):showErrorPopup(p.msg)},ta=function(p,H){H.length>GridConfig.maxValuesPerFinderFilter&&(H=H.slice(0,GridConfig.maxValuesPerFinderFilter),
p=a.columnApi.getColumn(p),h.push((p.colDef.headerNameGroup&&"[hidden]"!==p.colDef.headerNameGroup?p.colDef.headerNameGroup+": ":"")+p.colDef.headerName));return H},pa=function(p,H,L){isTest&&console.info("%cGrid:","color:#6666bf; ","loaded products \u27fc "+p.length);return $.Deferred(function(B){if(0==p.length)B.resolve(p);else{var E=p.map(function(W,ya){return{index:ya,value:H.indexOf(W.asin),asin:W.asin}});E.sort(function(W,ya){return W.value>ya.value?1:W.value<ya.value?-1:0});var U=E.map(function(W){return p[W.index]});
E=[];var ka=a.api.getFilterInstance("categories"),ma=ka.getModel()||{};ka.isFilterActive()&&(ma=ma.filter.split("###").map(function(W){return parseInt(W)}),E=[].concat($jscomp.arrayFromIterable(E),$jscomp.arrayFromIterable(ma)));E=Array.from(new Set(E)).filter(function(W){return!isNaN(W)});var na=function(W){if(W.length<L){for(var ya;ca.length<CsvType.length;)ca.push(-1),sa.push(null);for(ya={asin:null,domainId:null,stats:{avg30:ca,avg90:ca,avg180:ca,current:ca,min:sa,max:sa,outOfStockPercentage90:ca}};W.length<
L;)W.push(ya)}for(ya=0;ya<W.length;ya++)W[ya]=GridHelper.prepareProduct(W[ya]);B.resolve(W)};GridHelperCategory.load(U,U[0].domainId,E).done(function(W){ka.isFilterActive()&&$(ka.wrapper).find("p > span").each(function(){var ya=parseInt($(this).find("i").data("id"));ya=GridHelperCategory.getName(U[0].domainId,ya);$(this).find("span").html(ya)});na(U)}).fail(function(){na(U)})}}).promise()},ca=[],sa=[],Z=function(p,H,L){var B=$("#grid-tools-finder .tool__results");if(B.length){var E='<i class="fa fa-info-circle fa-lg"></i>&ensp;Displaying <b>'+
NumberUtil.format(p)+"</b> rows";H&&L&&L!==p?(L===H&&(E+=" (out of a total result of "+NumberUtil.format(H)+", failed to load: "+NumberUtil.format(L-p)+' - <span class="trigger reload">try to reload</span>)'),L<H&&(E+=" of "+L+" (out of a total result of "+NumberUtil.format(H)+", failed to load: "+NumberUtil.format(L-p)+' - <span class="trigger reload">try to reload</span>)')):H&&(E+=" (out of a total result of "+NumberUtil.format(H)+")");B.html(E+" &emsp;");p=$(".tool__results .reload");if(p.length)p.on("click",
function(){a.api.onFilterChanged()})}},N=0,f=function(){var p=++N,H=$("#filterForm");H[0].checkValidity()?(H=H.serializeArray(),q(H),H=a.api.getFilterModel(),0==Object.keys(H).length||1==Object.keys(H).length&&"undefined"!==typeof H.allowOutdatedOfferData?C(-1):(K(),t.perPage=0,t.page=0,H=t,isTest&&console.info("%cGrid: sendTotalResultsQuery \u27fc ","color:orange;font-weight:bold;",H,[JSON.stringify(H)]),network.request({path:"pro/finder",query:H,domainId:Number(storage.domain)}).done(function(L){p!=
N?isTest&&console.log("%cGrid: discarding prev. query result","color:darkorange;font-weight:bold;",L):C(L&&"undefined"!==typeof L.totalResults?L.totalResults:-1)}).fail(function(L){C(-1)}))):C(-1)},C=function(p){var H=$("#totalResultsQuery");0<=p?H.show():H.hide();H.find("span").html(NumberUtil.format(p))},V=function(p,H,L){var B="#!finder";null!=p&&(p={f:p,s:H,t:L?"g":"f"},H=encodeURIComponent(JSON.stringify(p)),6E4>H.length?B+="/"+H:isTest&&console.info("%cBookmark: encodedHash too long \u27fc ",
"color:pink;font-weight:bold;",p));history.pushState({page:"finder"},"Product Finder "+(L?"Grid":"Form"),getBaseUrl()+B);preOverlayUrl=B},ba=function(){$("#filterQuery").on("click",function(){var p=$("#filterForm").serializeArray();q(p);K();A()})},w=function(){var p=$("#filterForm");p.find(".filter--reset").on("click",function(){var H=$(this),L=H.closest(".filter-row"),B=H.closest("section"),E=!0,U=L;H.hasClass("filter-section--reset")?(E=!1,U=B):H.hasClass("filter-form--reset")&&(E=!1,U=p);var ka=
!0;if(E){var ma=$(L).data("csvtype");["NEW_FBA","NEW_FBM_SHIPPING"].includes(ma)?(ma=$(p).find("input#boolean-NEW_outOfStock-checkbox"),$(ma).prop("checked")&&(ka=!1)):["WAREHOUSE","USED_NEW_SHIPPING","USED_VERY_GOOD_SHIPPING","USED_GOOD_SHIPPING","USED_ACCEPTABLE_SHIPPING"].includes(ma)&&(ma=$(p).find("input#boolean-USED_outOfStock-checkbox"),$(ma).prop("checked")&&(ka=!1))}U.find("input, select").each(function(){"radio"===this.type?("-1"===$(this).val()||"0,1"===$(this).val())&&$(this).prop("checked",
!0):"checkbox"===this.type&&this.name.includes("set-")?$(this).prop("checked",!0):"checkbox"===this.type&&ka?$(this).prop("checked",!1).prop("disabled",!1):"select-one"===this.type&&this.name.includes("Type-")?$(this).val("isOneOf"):"select-one"===this.type?$(this).val("-1"):$(this).val("")});U.find(".filter-text--autocomplete .mdc-text-field-helper-text--persistent").each(function(){$(this).html("&thinsp;")});H.hide();H.hasClass("filter-form--reset")&&p.find(".filter--reset").hide();H.hasClass("filter-section--reset")&&
H.closest("div").find(".filter--reset").hide();I(null,L,B);ka&&(H=[],E&&enableSubcategorySalesRankFilter?L.hasClass("filter-row--matrix")?GridFinderFormMatrix.resetRow(L):H=p.find(".filter-row:not(.filter-row--matrix) .filter-range--label.disabled, .filter-row:not(.filter-row--matrix) .filter-range--input.disabled, .filter-row:not(.filter-row--matrix) .filter-text--autocomplete.disabled"):H=p.find(".filter-range--label.disabled, .filter-range--input.disabled, .filter-text--autocomplete.disabled"),
H.length&&H.each(function(){$(this).hasClass("disabled")&&($(this).removeClass("disabled"),$(this).find("input").prop("readonly",!1))}));f()});p.find(".filter-row").each(function(){I(null,$(this),$(this).closest("section"))});p.find(".section-strings").each(function(){I(null,null,$(this))})};setupChangeListener=function(){$("#filterForm").find("input, select").on("change",function(){var p=$(this).closest(".filter-row"),H=$(this).closest("section");I(this,p,H);p.hasClass("filter-row--matrix")&&GridFinderFormMatrix.apply(this);
f()});GridFinderFormMatrix.init(a)};var O=function(){var p=function(B){if(!$(B).prop("disabled")){var E=$(B).closest(".filter-row"),U=E.data("csvtype"),ka=B.name.includes("outOfStock"),ma=$(E).find("input[name$='current'], input[name$='deltaPercent90']");E=$(E).find('input[type="checkbox"]:not([name="'+B.name+'"])');if(ka){if(["NEW_FBA","NEW_FBM_SHIPPING"].includes(U)){var na=$(H).find("input#boolean-NEW_outOfStock-checkbox");if($(na).prop("checked"))return}else if(["WAREHOUSE","USED_NEW_SHIPPING",
"USED_VERY_GOOD_SHIPPING","USED_GOOD_SHIPPING","USED_ACCEPTABLE_SHIPPING"].includes(U)&&(na=$(H).find("input#boolean-USED_outOfStock-checkbox"),$(na).prop("checked")))return;"NEW"===U?(ma=[].concat($jscomp.arrayFromIterable(ma),$jscomp.arrayFromIterable($(H).find("\n                    input[name$='NEW_FBA_current'],\n                    input[name$='NEW_FBA_deltaPercent90'],\n                    input[name$='NEW_FBM_SHIPPING_current'],\n                    input[name$='NEW_FBM_SHIPPING_deltaPercent90']"))),
E=[].concat($jscomp.arrayFromIterable(E),$jscomp.arrayFromIterable($(H).find("\n                    input[type=\"checkbox\"][name$='NEW_FBA_isLowest'],\n                    input[type=\"checkbox\"][name$='NEW_FBA_outOfStock'],\n                    input[type=\"checkbox\"][name$='NEW_FBM_SHIPPING_isLowest'],\n                    input[type=\"checkbox\"][name$='NEW_FBM_SHIPPING_outOfStock']")))):"USED"===U&&(ma=[].concat($jscomp.arrayFromIterable(ma),$jscomp.arrayFromIterable($(H).find("\n                    input[name$='WAREHOUSE_current'],\n                    input[name$='WAREHOUSE_deltaPercent90'],\n                    input[name$='USED_NEW_SHIPPING_current'],\n                    input[name$='USED_NEW_SHIPPING_deltaPercent90'],\n                    input[name$='USED_VERY_GOOD_SHIPPING_current'],\n                    input[name$='USED_VERY_GOOD_SHIPPING_deltaPercent90'],\n                    input[name$='USED_GOOD_SHIPPING_current'],\n                    input[name$='USED_GOOD_SHIPPING_deltaPercent90'],\n                    input[name$='USED_ACCEPTABLE_SHIPPING_current'],\n                    input[name$='USED_ACCEPTABLE_SHIPPING_deltaPercent90']"))),
E=[].concat($jscomp.arrayFromIterable(E),$jscomp.arrayFromIterable($(H).find("\n                    input[type=\"checkbox\"][name$='WAREHOUSE_isLowest'],\n                    input[type=\"checkbox\"][name$='WAREHOUSE_outOfStock'],\n                    input[type=\"checkbox\"][name$='USED_NEW_SHIPPING_isLowest'],\n                    input[type=\"checkbox\"][name$='USED_NEW_SHIPPING_outOfStock'],\n                    input[type=\"checkbox\"][name$='USED_VERY_GOOD_SHIPPING_isLowest'],\n                    input[type=\"checkbox\"][name$='USED_VERY_GOOD_SHIPPING_outOfStock'],\n                    input[type=\"checkbox\"][name$='USED_GOOD_SHIPPING_isLowest'],\n                    input[type=\"checkbox\"][name$='USED_GOOD_SHIPPING_outOfStock'],\n                    input[type=\"checkbox\"][name$='USED_ACCEPTABLE_SHIPPING_isLowest'],\n                    input[type=\"checkbox\"][name$='USED_ACCEPTABLE_SHIPPING_outOfStock']"))))}if($(B).prop("checked"))$(E).prop("checked",
!1).prop("disabled",!0),ka&&($(ma).val("").prop("readonly",!0),$(ma).closest(".filter-range--input").addClass("disabled"),$(ma).closest(".filter-range--input").prev().addClass("disabled"));else if($(E).prop("disabled",!1),ka||!ka&&!$(E[0]).prop("checked"))$(ma).prop("readonly",!1),$(ma).closest(".filter-range--input").removeClass("disabled"),$(ma).closest(".filter-range--input").prev().removeClass("disabled")}},H=$(".section-csv"),L=H.find(".filter-row:not(.filter-row--matrix)").find('input[type="checkbox"]');
L.each(function(){p(this)});L.on("change",function(){p(this)})},z=function(){$("#numberFrom-LIGHTNING_DEAL_current, #numberTo-LIGHTNING_DEAL_current").on("change",function(){$(this).val().length&&$("#booleanAll-LIGHTNING_DEAL_upcoming-radio").prop("checked",!0)});$('input[name="boolean-LIGHTNING_DEAL_upcoming"]').on("change",function(){-1<$(this).val()&&$("#numberFrom-LIGHTNING_DEAL_current, #numberTo-LIGHTNING_DEAL_current").val("")})},I=function(p,H,L){var B=$("#filterForm"),E=function(ka){var ma=
$(ka).val();return"checkbox"===ka.type&&ka.checked&&!ka.name.includes("set-")||"checkbox"===ka.type&&!ka.checked&&ka.name.includes("set-")||"radio"===ka.type&&ka.checked&&"-1"!==ma&&"0,1"!==ma||"select-one"===ka.type&&!ka.name.includes("Type-")&&"-1"!==ma||!["checkbox","radio","select-one"].includes(ka.type)&&""!==ma},U=!1;null!==p&&E(p)?(U=!0,H=H||$(p).closest(".filter-row"),L=L||$(p).closest("section")):(null!==H?H:null!==L?L:B).find("input, select").each(function(){if(E(this))return H=H||$(p).closest(".filter-row"),
L=L||$(p).closest("section"),U=!0,!1});U?(null!==H&&H.find(".filter--reset").show(),L.find(".filter-section--reset").show(),B.find(".filter-form--reset").show()):(null!==H&&H.find(".filter--reset").hide(),null!==H?(L=L||H.closest("section"),1>L.find(".filter--reset:visible").not(".filter-section--reset").length&&L.find(".filter-section--reset").hide(),H.hasClass("readonly")&&(H.removeClass("readonly"),H.find("input").prop("readonly",!1))):L.find(".filter-section--reset").hide(),1>B.find(".filter--reset:visible").not(".filter-form--reset").length&&
B.find(".filter-form--reset").hide())},K=function(){var p={},H=GridConfig.csvTypesEnableOutOfStock,L=GridConfig.csvTypesEnableLowestEver,B=a.api.getFilterModel(),E="current avg30 avg90 avg180 deltaPercent30 deltaPercent90".split(" "),U=GridHelper.getCurrentUnitSystem(),ka=B.hasOwnProperty("allowOutdatedOfferData"),ma=B.hasOwnProperty("COUNT_REVIEWS_current")||B.hasOwnProperty("COUNT_REVIEWS_avg30")||B.hasOwnProperty("COUNT_REVIEWS_avg90")||B.hasOwnProperty("COUNT_REVIEWS_avg180")||B.hasOwnProperty("COUNT_REVIEWS_deltaPercent90")||
B.hasOwnProperty("RATING_current"),na=!1,W=!1,ya=!1,Aa=!1,Da=[],va=[];h=[];var za={},Ha;for(Ha in B){za.$jscomp$loop$prop$colId$771=Ha;var ea=B[za.$jscomp$loop$prop$colId$771];switch(ea.filterType){case "text":"contains"==ea.type&&(p[za.$jscomp$loop$prop$colId$771]=ea.filter);if("isOneOf"==ea.type)if("sellerIds"===za.$jscomp$loop$prop$colId$771){var ia=ea.filter.split(",").map(function(aa){return aa.trim()}).filter(function(aa){return""!=aa});ia=ta(za.$jscomp$loop$prop$colId$771,ia);p[za.$jscomp$loop$prop$colId$771]=
ia;Da.push(za.$jscomp$loop$prop$colId$771)}else ia=ea.filter.split("###").map(function(aa){return aa.trim()}).filter(function(aa){return""!=aa}),ia=ta(za.$jscomp$loop$prop$colId$771,ia),p[za.$jscomp$loop$prop$colId$771]=ia;"isNoneOf"==ea.type&&(ea=ea.filter.split("###").map(function(aa){return aa.trim()}).filter(function(aa){return""!=aa}),ea=ta(za.$jscomp$loop$prop$colId$771,ea),p[za.$jscomp$loop$prop$colId$771]=ea.map(function(aa){return"\u271c"+aa}));break;case "number":ia=za.$jscomp$loop$prop$colId$771;
var ua=ea.filter,fa=ea.filterTo,oa=GridHelper.getCsvObjectName(za.$jscomp$loop$prop$colId$771),G=E.filter(function(aa){return function(da){if(aa.$jscomp$loop$prop$colId$771.includes(da))return!0}}(za))[0];"undefined"!=typeof G&&G.length&&(za.$jscomp$loop$prop$colId$771.includes(G)&&(ia=G+"_"+za.$jscomp$loop$prop$colId$771.replace("_"+G,"")),!za.$jscomp$loop$prop$colId$771.includes(G)||za.$jscomp$loop$prop$colId$771.includes("SALES")||za.$jscomp$loop$prop$colId$771.includes("COUNT")||za.$jscomp$loop$prop$colId$771.includes("deltaPercent90")||
za.$jscomp$loop$prop$colId$771.includes("salesRankReference")||"RATING_current"===za.$jscomp$loop$prop$colId$771||5==Number(storage.domain)||(ua=ua?100*ua:ua,fa=fa?100*fa:fa),"RATING_current"==za.$jscomp$loop$prop$colId$771&&(ua=ua?10*ua:ua,fa=fa?10*fa:fa),CsvType[oa]&&CsvType[oa].currency&&GridHelper.isOfferData(oa)&&Da.push(ia));["packageDimension","itemDimension"].includes(za.$jscomp$loop$prop$colId$771)&&("IMPERIAL"===U?(ua=ua?ua/6.1024E-5:ua,fa=fa?fa/6.1024E-5:fa):(ua=ua?1E3*ua:ua,fa=fa?1E3*
fa:fa));"packageLength packageHeight packageWidth itemLength itemHeight itemWidth".split(" ").includes(za.$jscomp$loop$prop$colId$771)&&("IMPERIAL"===U?(ua=ua?ua/.03937:ua,fa=fa?fa/.03937:fa):(ua=ua?10*ua:ua,fa=fa?10*fa:fa));["packageWeight","itemWeight"].includes(za.$jscomp$loop$prop$colId$771)&&"IMPERIAL"===U&&(ua=ua?ua/.0022046:ua,fa=fa?fa/.0022046:fa);["couponOneTimeAbsolute","fbaFees"].includes(za.$jscomp$loop$prop$colId$771)&&5!=Number(storage.domain)&&(ua=ua?100*ua:ua,fa=fa?100*fa:fa);(ia.includes("coupon")||
ia.includes("offerCount"))&&Da.push(ia);ua=0==ua||ua?parseInt(ua):null;fa=0==fa||fa?parseInt(fa):null;ua=2147483647<ua?1E9:ua;fa=2147483647<fa?1E9:fa;"AMAZON_outOfStockPercentage90"===ia?ia="outOfStockPercentage90":"BUY_BOX_SHIPPING_outOfStockPercentage90"===ia?ia="outOfStockPercentage90_BB":["NEW_outOfStockPercentage90","USED_outOfStockPercentage90"].includes(ia)&&(ia="outOfStockPercentage90_"+za.$jscomp$loop$prop$colId$771.replace("_outOfStockPercentage90",""));if("inRange"==ea.type)p[ia+"_gte"]=
ua,p[ia+"_lte"]=fa;else if("greaterThanOrEqual"==ea.type)p[ia+"_gte"]=ua;else{ea=0;if("undefined"!=typeof oa&&oa.length&&!za.$jscomp$loop$prop$colId$771.includes("COUNT")||za.$jscomp$loop$prop$colId$771.includes("package"))ea=1;p[ia+"_gte"]=ea;p[ia+"_lte"]=ua}break;case "boolean":if(-1<ea.filter||"on"===ea.filter)ia=GridHelper.getCsvObjectName(za.$jscomp$loop$prop$colId$771),(H.includes(ia)||L.includes(ia))&&[ia+"_outOfStock",ia+"_isLowest"].includes(za.$jscomp$loop$prop$colId$771)?"on"===ea.filter&&
(za.$jscomp$loop$prop$colId$771===ia+"_outOfStock"?(p["current_"+ia+"_gte"]=-1,p["current_"+ia+"_lte"]=-1,va.push("deltaPercent90_"+ia+"_lte"),va.push("deltaPercent90_"+ia+"_gte"),ea=[],"NEW"===ia?ea=["NEW_FBA","NEW_FBM_SHIPPING"]:"USED"===ia&&(ea=["WAREHOUSE","USED_NEW_SHIPPING","USED_VERY_GOOD_SHIPPING","USED_GOOD_SHIPPING","USED_ACCEPTABLE_SHIPPING"]),ea.length&&ea.forEach(function(aa){va.push("current_"+aa+"_lte");va.push("current_"+aa+"_gte");va.push("deltaPercent90_"+aa+"_lte");va.push("deltaPercent90_"+
aa+"_gte")})):za.$jscomp$loop$prop$colId$771===ia+"_isLowest"&&(p["isLowest_"+ia]=!0),CsvType[ia].currency&&GridHelper.isOfferData(ia)&&Da.push(za.$jscomp$loop$prop$colId$771)):"LIGHTNING_DEAL_upcoming"===za.$jscomp$loop$prop$colId$771?p.lightningStart_gte=keepaTime.now():"promotions"===za.$jscomp$loop$prop$colId$771?p[za.$jscomp$loop$prop$colId$771]=1==ea.filter?[0,1,2,3,4,5,6,7,8,9]:[]:"singleVariation"===za.$jscomp$loop$prop$colId$771?p[za.$jscomp$loop$prop$colId$771]=!0:"buyBoxIsFBA"===za.$jscomp$loop$prop$colId$771?
(p[za.$jscomp$loop$prop$colId$771]=1==ea.filter,p.current_BUY_BOX_SHIPPING_gte=0):"buyBoxUsed.isFBA"===za.$jscomp$loop$prop$colId$771?(p.buyBoxUsedIsFBA=1==ea.filter,p.current_BUY_BOX_USED_SHIPPING_gte=0):p[za.$jscomp$loop$prop$colId$771]=1==ea.filter;break;case "date":ia=ea.dateFrom;ua=ea.dateTo;["lastPriceChange","listedSince","publicationDate","releaseDate","trackingSince"].includes(za.$jscomp$loop$prop$colId$771)&&(oa=(new Date("1900-01-01")).setUTCHours(0,0,0,0),fa=(new Date("2999-12-31")).setUTCHours(23,
59,59,999),ia&&(ia=(new Date(ia)).setHours(0,0,0,0)),ua&&(ua=(new Date(ua)).setHours(23,59,59,999)),ia=ia?keepaTime.epochToMinutes(Math.max(oa,ia)):ia,ua=ua?keepaTime.epochToMinutes(Math.min(fa,ua)):ua);"inRange"==ea.type?(p[za.$jscomp$loop$prop$colId$771+"_gte"]=ia,p[za.$jscomp$loop$prop$colId$771+"_lte"]=ua):p[za.$jscomp$loop$prop$colId$771+"_"+("greaterThanOrEqual"==ea.type?"gte":"lte")]=ia;break;case "singleChoice":-1<ea.filter&&(p[za.$jscomp$loop$prop$colId$771]=parseInt(ea.filter));break;case "autocomplete":ia=
ea.filter.split("###").map(function(aa){return aa.trim()}).filter(function(aa){return""!=aa});ia=ta(za.$jscomp$loop$prop$colId$771,ia);"isNoneOf"==ea.type?p[za.$jscomp$loop$prop$colId$771]=ia.map(function(aa){return"\u271c"+aa}):p["categories"===za.$jscomp$loop$prop$colId$771?za.$jscomp$loop$prop$colId$771+"_include":za.$jscomp$loop$prop$colId$771]=ia;break;case "dynamic":if(!["buyBoxSellerIdHistory","buyBoxUsed.seller"].includes(za.$jscomp$loop$prop$colId$771)||-1==ea.filter)break;ea=(1!=ea.filter?
ea.filter:ea.filterDetail).split(",").map(function(aa){return aa.trim()}).filter(function(aa){return""!=aa});ea=ta(za.$jscomp$loop$prop$colId$771,ea);switch(za.$jscomp$loop$prop$colId$771){case "buyBoxSellerIdHistory":p.buyBoxSellerId=ea;p.hasOwnProperty("current_BUY_BOX_SHIPPING_gte")||-1==p.buyBoxSellerId[0]||(p.current_BUY_BOX_SHIPPING_gte=0);break;case "buyBoxUsed.seller":p.buyBoxUsedSellerId=ea,p.hasOwnProperty("current_BUY_BOX_USED_SHIPPING_gte")||-1==p.buyBoxUsedSellerId[0]||(p.current_BUY_BOX_USED_SHIPPING_gte=
0)}break;case "set":"buyBoxUsed.condition"===za.$jscomp$loop$prop$colId$771?p.buyBoxUsedCondition=ea.values:p[za.$jscomp$loop$prop$colId$771]=ea.values;break;default:isTest&&console.info("%cGrid filterModel \u27fc ","color:#6666bf;",B)}za={$jscomp$loop$prop$colId$771:za.$jscomp$loop$prop$colId$771}}va.length&&va.forEach(function(aa){delete p[aa];aa.includes("current")&&(Da=Da.filter(function(da){var qa=aa.replace("_gte","").replace("_lte");return da!==qa}))});h.length&&J(h);var X=[];a.api.getSortModel().forEach(function(aa){var da=
aa.colId,qa=da;aa=aa.sort;var xa=E.filter(function(wa){if(da.includes(wa))return!0})[0];da.includes(xa)&&(qa=xa+"_"+da.replace("_"+xa,""));"LIGHTNING_DEAL_upcoming"===da&&(qa="lightningStart");"AMAZON_outOfStockPercentage90"===qa?qa="outOfStockPercentage90":"BUY_BOX_SHIPPING_outOfStockPercentage90"===qa?qa="outOfStockPercentage90_BB":["NEW_outOfStockPercentage90","USED_outOfStockPercentage90"].includes(qa)&&(qa="outOfStockPercentage90_"+da.replace("_outOfStockPercentage90",""));"lastPriceChange"===
da&&(aa="asc"===aa?"desc":"asc");X.push([qa,aa]);0===Da.length&&(xa=GridHelper.getCsvObjectName(da),"undefined"!=typeof CsvType[xa]&&CsvType[xa].currency&&GridHelper.isOfferData(xa)&&Da.push(qa),(da.includes("coupon")||da.includes("offerCount"))&&Da.push(qa));ma||(ma="COUNT_REVIEWS_current COUNT_REVIEWS_avg30 COUNT_REVIEWS_avg90 COUNT_REVIEWS_avg180 COUNT_REVIEWS_deltaPercent90 RATING_current".split(" ").includes(da));"outOfStockPercentage90"===qa&&"desc"===aa&&"undefined"==typeof p.outOfStockPercentage90_lte&&
(na=!0);"outOfStockPercentage90_NEW"===qa&&"desc"===aa&&"undefined"==typeof p.outOfStockPercentage90_NEW_lte&&(W=!0);"outOfStockPercentage90_USED"===qa&&"desc"===aa&&"undefined"==typeof p.outOfStockPercentage90_USED_lte&&(ya=!0);"outOfStockPercentage90_BB"===qa&&"desc"===aa&&"undefined"==typeof p.outOfStockPercentage90_BB_lte&&(Aa=!0)});0==X.length&&X.push(["current_SALES","asc"]);p.sort=X;0<Da.length&&!ka&&(H=new Date,H=H.setDate(H.getDate()-3),p.lastOffersUpdate_gte=keepaTime.epochToMinutes(H));
ma&&!ka&&(ka=new Date,ka=ka.setDate(ka.getDate()-14),p.lastRatingUpdate_gte=keepaTime.epochToMinutes(ka));na&&(p.outOfStockPercentage90_lte=100);W&&(p.outOfStockPercentage90_NEW_lte=100);ya&&(p.outOfStockPercentage90_USED_lte=100);Aa&&(p.outOfStockPercentage90_BB_lte=100);(p.current_LIGHTNING_DEAL_lte||p.current_LIGHTNING_DEAL_gte)&&delete p.lightningEnd_gte;"undefined"==typeof p.productType&&(p.productType=[0,1]);"undefined"!==typeof p.allowOutdatedOfferData&&delete p.allowOutdatedOfferData;"current_SALES_gte current_SALES_lte isLowest_SALES outOfStock_SALES avg30_SALES_gte avg30_SALES_lte avg90_SALES_gte avg90_SALES_lte avg180_SALES_gte avg180_SALES_lte deltaPercent90_SALES_gte deltaPercent90_SALES_lte".split(" ").some(function(aa){return"undefined"!==
typeof p[aa]})&&(delete p.current_salesRankReference_gte,delete p.current_salesRankReference_lte,delete p.salesRankReference);return t=n=p},A=function(){"undefined"===typeof n.perPage&&(n.perPage=GridApi.getRowsPerPage(a));n.perPage=Math.max(50,n.perPage);n.page=0;var p=n;p='<div style="width:500px;">\n\t\t\t\t\t<span>If you have Keepa API access you can use the following JSON to \n\t\t\t\t\t\t<a href="https://keeepa.amztoolz.com/#!discuss/t/product-finder/5473">query our product database</a> via our API:\n\t\t\t\t\t</span>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<pre style="height:300px;overflow:auto;background-color:#fff4e0;">'+
JSON.stringify(p,null,4)+'</pre><br>\n\t\t\t\t\t\tComplete API URL:\n\t\t\t\t\t\t<div style="width:100%;overflow:auto;background-color:#fff4e0;white-space:nowrap;">\n\t\t\t\t\t\t\thttps://api.keepa.com/query?key=<span style="color:red">YOUR_API_KEY</span>&domain='+Number(storage.domain)+"&selection="+encodeURIComponent(JSON.stringify(p))+"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>";showPopup("Product Finder API query for current selection",p,!0)},J=function(p){var H="";p&&p.length&&(H+=
'<br><p class="mdc-typography--body2">The following filter fields have been limited to '+GridConfig.maxValuesPerFinderFilter+' entries:</p>\n                <ul class="mdc-typography--body2">\n                    <li>&bull; '+p.join("</li><li>&bull; ")+"</li>\n                </ul>");showPopup("Filter value restriction",'<p class="mdc-typography--body2">Fields where multiple entries are possible (e.g. Manufacturer) a maximum of '+GridConfig.maxValuesPerFinderFilter+" entries are supported.</p>"+H,
!0)},S=function(){var p=GridConfig.csvTypesEnableLowestEver,H=GridConfig.csvTypesEnableOutOfStock,L=GridConfig.csvTypesOfferCounts,B="allowOutdatedOfferData categories_exclude hasParentASIN productType sellerIds salesRankReference salesRankReference_current singleVariation".split(" "),E="",U="",ka="",ma="",na="",W="",ya="",Aa="",Da="",va="",za="",Ha="",ea="",ia="",ua="",fa="",oa="",G="",X="",aa="",da="",qa=a.api.getFilterModel(),xa=Object.keys(qa);qa=a.columnApi.getAllColumns();var wa=[],Ca=getCurrencyByDomain(Number(storage.domain)),
Ba="",Fa="",Ea="",La=!1,Ma=!1,Ga=!1,Na=!1,Qa=!1,Ka=!1,Ia=!1;qa.forEach(function(Wa){var Ra=Wa.colDef;if(!(!1===Ra.filter||Ra.hide&&Ra.lockVisible&&!B.includes(Ra.field))){var Ja=a.api.getFilterInstance(Wa.colId),Xa=Ja.getModel()||{},Ya=Xa.type,Ta="",Pa="";Pa="";var Ua=[];Ta=Pa=Pa=null;var ab="";switch(Ra.filter){case "agTextColumnFilter":if(!Ja.isFilterActive())break;Pa=Xa.filter;"isOneOf"==Ja.textFilterParams.defaultOption?"sellerIds"===Ra.field?fa="<p><span>Seller:</span>&emsp;<b>"+Pa+"</b></p>":
na+="<p><span>"+Ra.headerName+("isNoneOf"==Ya?" (is none of)":"")+":</span>&emsp;<b>"+Pa.split("###").join("</b> | <b>")+"</b></p>":ma+="<p><span>"+Ra.headerName+":</span>&emsp;<b>"+Pa+"</b></p>";break;case "agNumberColumnFilter":Qa=L.some(function($a){return Wa.colId.includes($a)});La=Wa.colId.startsWith("COUNT_REVIEWS_");Ma=Ra.type&&Ra.type.includes("priceColumn")||Wa.colId.includes("deltaPercent90")&&"SALES_deltaPercent90"!==Wa.colId&&!Qa&&!La;Ga=Ra.type&&Ra.type.includes("salesRankColumn")||"SALES_deltaPercent90"===
Wa.colId;Na="salesRankReference_current"===Wa.colId;Ka=["offerCountFBA","offerCountFBM"].includes(Wa.colId);Ia=["AMAZON_outOfStockPercentage90","NEW_outOfStockPercentage90","USED_outOfStockPercentage90","BUY_BOX_SHIPPING_outOfStockPercentage90"].includes(Wa.colId);Ba=GridHelper.getCsvObjectName(Wa.colId);if(Ba.length&&!Na&&!Ia){Fa=CsvType[Ba].index;"undefined"===typeof wa[Ba]&&(wa[Ba]=xa.some(function($a){return GridHelper.getCsvObjectName($a)===Ba&&!$a.includes("outOfStockPercentage90")}));if(!0!==
wa[Ba]&&!["RATING","COUNT_REVIEWS"].includes(Ba))break;if("RATING"===Ba&&!xa.some(function($a){return["RATING","COUNT_REVIEWS"].includes(GridHelper.getCsvObjectName($a))})||"COUNT_REVIEWS"===Ba&&!xa.some(function($a){return["RATING","COUNT_REVIEWS"].includes(GridHelper.getCsvObjectName($a))}))break}else if(!Ja.isFilterActive()){if(["fbaFees","itemWeight","couponSNSPercent","packageWeight"].includes(Wa.colId))break;if("offerCountFBA"===Wa.colId&&-1===xa.indexOf("offerCountFBM")||"offerCountFBM"===
Wa.colId&&-1===xa.indexOf("offerCountFBA")||"numberOfItems"===Wa.colId&&-1===xa.indexOf("numberOfPages")||"numberOfPages"===Wa.colId&&-1===xa.indexOf("numberOfItems")||"couponOneTimeAbsolute"===Wa.colId&&-1===xa.indexOf("couponOneTimePercent")||"couponOneTimePercent"===Wa.colId&&-1===xa.indexOf("couponOneTimeAbsolute"))break;if(["packageDimension","packageLength","packageWidth","packageHeight"].includes(Wa.colId)&&!xa.some(function($a){return $a.includes("package")})||["itemDimension","itemLength",
"itemWidth","itemHeight"].includes(Wa.colId)&&!xa.some(function($a){return $a.includes("item")})||["salesRankDrops30","salesRankDrops90","salesRankDrops180"].includes(Wa.colId)&&!xa.some(function($a){return $a.includes("salesRankDrops")})||Ia&&!xa.some(function($a){return $a.includes("outOfStockPercentage90")})||"salesRankReference_current"===Wa.colId&&!xa.some(function($a){return $a.includes("salesRankReference")}))break}"inRange"==Ya?(Pa="undefined"===typeof Xa.filter?null:Xa.filter,Ta="undefined"===
typeof Xa.filterTo?null:Xa.filterTo):"greaterThanOrEqual"===Ya?(Pa="undefined"===typeof Xa.filter?null:Xa.filter,Ta=null):(Pa=null,Ta="undefined"===typeof Xa.filter?null:Xa.filter);"RATING_current"===Wa.colId&&(Pa=0==Pa||Pa?1>Pa?"1.0":5<Pa?"5.0":Pa:null,Ta=0==Ta||Ta?1>Ta?"1.0":5<Ta?"5.0":Ta:null);if(Ra.type&&Ra.type.includes("priceColumn")||Wa.colId.includes("fbaFees"))Pa=0!==Pa%1?Pa.toFixed(2):Pa,Ta=0!==Ta%1?Ta.toFixed(2):Ta;Pa=2147483647<parseInt(Pa)?1E9:Pa;Ta=2147483647<parseInt(Ta)?1E9:Ta;Ra.headerNameGroup=
getHeaderNameGroup(Wa.colId,Ra.headerNameGroup);Ia&&(Pa=0==Pa||Pa?0>Pa?"0":100<Pa?"100":Pa:null,Ta=0==Ta||Ta?0>Ta?"0":100<Ta?"100":Ta:null);var Va=getRangeLabel(Wa.colId,Ra.headerName);ab=null!==Pa&&0!==Pa.length||null!==Ta&&0!==Ta.length?"":" inactive";Pa='<div class="filter-range--label'+ab+'">'+Va+'</div>\n\t\t\t\t\t<div class="filter-range--input'+ab+'">\n\t\t\t\t\t\t<div>From<br>'+(null!==Pa?"<b>"+Pa+"</b>":"-")+"</div><div>To<br>"+(null!==Ta?"<b>"+Ta+"</b>":"-")+"</div>\n\t\t\t\t\t</div>";Ia?
(Da.length||(Da+='<div class="filter-row">\n                                <p class="filter-row--label"><b>'+Ra.headerNameGroup+"</b></p>\n                                <div>\n                            "),Da+=Pa):Ea!==Ra.headerNameGroup?(Ea=Ra.headerNameGroup,Ma||Ga?(Ta=CsvType.getNameWithCircle(Fa)+" "+("SALES"===Ba?"#":Ca),Va="",H.includes(Ba)&&(Va=a.api.getFilterInstance(Ba+"_outOfStock").filterActive?Ra.type.includes("salesRankColumn")?"&check; No Sales Rank":"&check; Out of stock":""),Ja=
"",p.includes(Ba)&&(Ja=a.api.getFilterInstance(Ba+"_isLowest").filterActive?"&check; Lowest ever":""),Va=Va.length||Ja.length?'<div class="filter-row--label filter-row--label-extended">\n\t\t\t\t\t\t\t\t<span><b>'+Ta+'</b></span>\n\t\t\t\t\t\t\t\t<span class="filter--checkbox">'+Va+' </span>\n\t\t\t\t\t\t\t\t<span class="filter--checkbox">'+Ja+" </span>\n\t\t\t\t\t\t\t</div>":'<p class="filter-row--label"><b>'+Ta+"</b></p>",Ma?(E.length&&(E+="</div></div>"),E+='<div class="filter-row" data-csvtype="'+
Ba+'">\n                                    '+Va+"\n                                    <div>"+Pa+"\n\t\t\t\t\t\t\t\t"):Ga&&(U.length&&(U+="</div></div>"),U+='<div class="filter-row" data-csvtype="'+Ba+'">\n                                    '+Va+"\n                                    <div>"+Pa+"\n\t\t\t\t\t\t\t\t")):(Ta=Ra.headerNameGroup,Na?(ka.length&&(ka+="</div></div>"),ka+='<div class="filter-row">\n                                    <p class="filter-row--label"><b>'+Ta+"</b></p>\n                                    <div>"+
Pa+"\n\t\t\t\t\t\t\t\t"):Qa?(G.length&&(G+="</div></div>"),G+='<div class="filter-row">\n                                    <p class="filter-row--label"><b>'+Ta+"</b></p>\n                                    <div>"+Pa+"\n\t\t\t\t\t\t\t\t"):Ka?(X.length&&(X+="</div></div>"),X+='<div class="filter-row">\n                                    <p class="filter-row--label"><b>'+Ta+"</b></p>\n                                    <div>"+Pa+"\n\t\t\t\t\t\t\t\t"):(aa.length&&(aa+="</div></div>"),aa+='<div class="filter-row">\n                                    <p class="filter-row--label"><b>'+
Ta+"</b></p>\n                                    <div>"+Pa+"\n\t\t\t\t\t\t\t\t"))):Ma?E+=Pa:Ga?U+=Pa:Na?ka+=Pa:Qa?G+=Pa:Ka?X+=Pa:aa+=Pa;break;case "agDateColumnFilter":if(!Ja.isFilterActive())break;"inRange"==Ya?(Pa=(new Date(Xa.dateFrom)).formatDate("Y-m-d"),Ta=(new Date(Xa.dateTo)).formatDate("Y-m-d")):"greaterThanOrEqual"===Ya?(Pa=(new Date(Xa.dateFrom)).formatDate("Y-m-d"),Ta=null):(Pa=null,Ta=Xa.dateFrom?(new Date(Xa.dateFrom)).formatDate("Y-m-d"):"");Aa+="<p><span>"+Ra.headerName+":</span>&emsp;From "+
(Pa?"<b>"+Pa+"</b> ":" - ")+" to "+(Ta?"<b>"+Ta+"</b> ":"-")+"</p>";break;case "agSetColumnFilter":if(!Ja.isFilterActive())break;var bb=Ja.valueModel;Ua=[];bb.availableUniqueValues.forEach(function($a){"undefined"!==typeof bb.selectedValuesMap[$a]&&Ua.push(Ra.filterParams.valueMap[$a])});"productType"===Ra.field&&(oa+="<p><span>"+Ra.headerName+"</span>&emsp;<b>"+Ua.join("</b> | <b>")+"</b></p>");"availabilityAmazon"===Ra.field&&(aa.length&&(aa+="</div></div>"),aa+='<div class="filter-category--wrapper"><p><span>'+
Ra.headerName+"</span>&emsp;<b>"+Ua.join("</b> | <b>")+"</b></p></div>");"buyBoxUsed.condition"===Ra.field&&(ua="\n                            <p><span>"+Ra.headerName+"</span>&emsp;<b>"+Ua.join("</b> | <b>")+"</b></p>");break;case "customBooleanColumnFilter":"LIGHTNING_DEAL_upcoming"===Ra.field&&1===parseInt(Xa.filter)&&(E+='<div class="filter-boolean--label">&check; '+Ra.headerName+"</div>");if("allowOutdatedOfferData"===Ra.field){if(!Ja.isFilterActive())break;da+="<p>&check; "+Ra.headerName+"</p>";
break}if("hasParentASIN"===Ra.field){Va="";(Ya=a.api.getFilterInstance("singleVariation").filterActive)&&(Va="&check; Show only one variation per product");if(!Ja.isFilterActive()&&!Ya)break;oa+="<p><span>"+Ra.headerName+":</span>&emsp;<b>"+(0===parseInt(Xa.filter)?"No Variations":1===parseInt(Xa.filter)?"Is Variation":"")+(Ya?"&emsp;|&emsp;"+Va:"")+"</p>";break}if("singleVariation"===Ra.field)break;if(!Ja.isFilterActive())break;Va='<span style="width: auto;">'+Ra.headerName+":</span>&emsp;"+(1===
parseInt(Xa.filter)?"<b>Yes</b>":"<b>No</b>")+"&emsp;&emsp;";if(["buyBoxIsFBA","buyBoxIsUnqualified"].includes(Ra.field)){Ha+=Va;break}if("buyBoxUsed.isFBA"===Ra.field){ia+=Va;break}ya+=Va;break;case "customSingleChoiceColumnFilter":if(!Ja.isFilterActive())break;"rootCategory"===Ra.field&&(Va=Ja.valueOptions.find(function($a){return $a.value==Xa.filter}),va+="<p><span>Root category:</span>&emsp;<b>"+Va.label.replace(/ \(\d*\)/,"")+"</b></p>");break;case "customAutocompleteColumnFilter":if(!Ja.isFilterActive())break;
Va=Xa.filter.split("###").map(function($a){return $a.trim()}).filter(function($a){return""!=$a});["categories","categories_exclude"].includes(Ra.field)?(Pa="categories"===Ra.field?"Include sub categories":Ra.headerName,Va=Va.map(function($a){return GridHelperCategory.getName(Number(storage.domain),$a)}),va+="<p><span>"+Pa+":</span>&emsp;<b>"+Va.join("</b> | <b>")+"</b></p>"):"salesRankReference"===Ra.field?(Va=Va.map(function($a){return GridHelperCategory.getName(Number(storage.domain),$a)}),ka+=
'<p style="margin-top: 17px; margin-bottom: 7px;"><span>'+Ra.headerName+":</span>&emsp;<b>"+Va.join("</b> | <b>")+"</b></p>"):W+="<p><span>"+Ra.headerName+("isNoneOf"==Ya?" (is none of)":"")+":</span>&emsp;<b>"+Va.join("</b> | <b>")+"</b></p>";break;case "customDynamicColumnFilter":if(Ja.isFilterActive()&&["buyBoxSellerIdHistory","buyBoxUsed.seller"].includes(Ra.field)){Pa=Number(storage.domain);Ja=[];Ta=Ya="";switch(Ra.field){case "buyBoxSellerIdHistory":Ja=SellerUtil.getAmazonSellerIds(Pa);Va="Buy Box Seller";
Ya="Amazon";break;case "buyBoxUsed.seller":Ja=SellerUtil.getAmazonWarehouseSellerIds(Pa),Va="Buy Box Used Seller",Ya="Amazon Warehouse"}Pa=Array.from(Ja,function($a){return"-"+$a});Ja=Ja.join(",");Pa=Pa.join(",");Ta=Xa.filter;ab=Xa.filterDetail;[Ja,Pa,"1"].includes(Ta)||(Ta=-1);var cb="";Ta===Ja?cb="<b>"+Ya+"</b>":Ta===Pa?cb="<b>3rd Party</b>":1==Ta&&(cb="Seller IDs: <b>"+ab+"</b>");Ta="<p><span>"+Va+":</span>&emsp;"+cb+"</p>";switch(Ra.field){case "buyBoxSellerIdHistory":za=Ta;break;case "buyBoxUsed.seller":ea=
Ta}}}}});E=E.length?E+"</div></div>":E;U=U.length?U+"</div></div>":U;ka=ka.length?ka+"</div></div>":ka;G=G.length?G+"</div></div>":G;X=X.length?X+"</div></div>":X;Da=Da.length?Da+"</div></div>":Da;aa=aa.length?aa+"</div></div>":aa;Ha=Ha.length?"<p>"+Ha+"</p>":"";ia=ia.length?"<p>"+ia+"</p>":"";Aa=Aa.length?'<div class="filter-row">'+Aa+"</div>":"";ya=ya.length?'<p class="filter-row">\n\t\t\t<p class="filter-row--label"><b>Additional switches</b></p>\n\t\t\t<p>'+ya+"</p>\n\t\t</div>":"";va=va.length?
'<div class="filter-category--wrapper">\n\t\t'+va+"\n\t\t</div>":"";da=da.length?'<div class="filter-row">\n\t\t\t<p class="filter-row--label"><b>Additional settings</b></p>\n\t\t\t'+da+"\n\t\t</div>":"";qa=U.length||ka.length||E.length?'<div>\n            <h6 class="mdc-typography--subtitle1">Sales Rank & Price Types</h6>\n            '+U+"\n            "+ka+"\n            "+E+"\n        </div>":"";var Oa=va||ma||W||na?'<div>\n\t\t<h6 class="mdc-typography--subtitle1">Title, Brand and more!</h6>\n\t\t'+
(va?'<p class="filter-row--label"><b>Categories</b></p>'+va:"")+"\n\t\t"+(ma||W||na?'<p class="filter-row--label"><b>Text fields</b>:</p>':"")+"\n\t\t"+(ma?'<div class="filter-text--wrapper">'+ma+"</div>":"")+"\n\t\t"+(W?'<div class="filter-text--wrapper">'+W+"</div>":"")+"\n\t\t"+(na?'<div class="filter-text--wrapper">'+na+"</div>":"")+"\n\t</div>":"",Sa=G||X?'<div>\n\t\t<h6 class="mdc-typography--subtitle1">Offer Counts</h6>\n\t\t'+G+"\n        "+X+"\n\t</div>":"",Za=za.length||Ha.length||ea.length||
ia.length||ua.length||fa.length||oa.length||Aa.length||Da.length||aa.length||ya.length||da.length?'<div>\n\t\t<h6 class="mdc-typography--subtitle1">More filters!</h6>\n\t\t'+(za.length||Ha.length||ea.length||ia.length||ua.length||fa.length||oa.length||Aa.length?'<div class="filter-category--wrapper">\n\t\t\t'+za+"\n\t\t\t"+Ha+"\n\t\t\t"+ea+"\n\t\t\t"+ia+"\n\t\t\t"+ua+"\n\t\t\t"+fa+"\n\t\t\t"+oa+"\n\t\t\t"+Aa+"\n\t\t</div>":"")+"\n\t\t"+Da+"\n\t\t"+aa+"\n\t\t"+(ya.length||da.length?'<div class="filter-category--wrapper">\n\t\t\t'+
ya+"\n\t\t\t"+da+"\n\t\t</div>":"")+"\n\t</div>":"";return"<div>\n\t\t"+(qa.length?'<section class="section-csv">'+qa+"</section>":"")+"\n\t\t"+(Oa.length?'<section class="section-strings">'+Oa+"</section>":"")+"\n\t\t"+(Sa.length?'<section class="section-offer-counts">'+Sa+"</section>":"")+"\n\t\t"+(Za.length?'<section class="section-other">'+Za+"</section>":"")+"\n\t</div>"};getHeaderNameGroup=function(p,H){return["packageDimension","packageLength","packageWidth","packageHeight"].includes(p)?"Package Dimensions":
["itemDimension","itemLength","itemWidth","itemHeight"].includes(p)?"Item Dimensions":"RATING_current"===p?"Rating":p.startsWith("COUNT_REVIEWS_")?"Review Count":["AMAZON_outOfStockPercentage90","NEW_outOfStockPercentage90","USED_outOfStockPercentage90","BUY_BOX_SHIPPING_outOfStockPercentage90"].includes(p)?"90 days out of stock percentage (OOS %)":["salesRankDrops30","salesRankDrops90","salesRankDrops180"].includes(p)?"Sales Rank Drops":"fbaFees"===p?"FBA Pick&Pack Fee "+getCurrencyByDomain(Number(storage.domain)):
["numberOfItems","numberOfPages"].includes(p)?"Number of ...":H};getRangeLabel=function(p,H){if("LIGHTNING_DEAL_current"===p)return la._344;if("fbaFees"===p)return"Total";if(["salesRankDrops30","salesRankDrops90","salesRankDrops180"].includes(p))return H.replace("Drops last","Last");if("packageDimension packageLength packageWidth packageHeight packageWeight itemDimension itemLength itemWidth itemHeight itemWeight".split(" ").includes(p)){var L=GridHelper.getCurrentUnits();L=p.includes("Weight")?L.weight:
L.measure;p.includes("Dimension")&&(L+="\u00b3");return H+" ("+L+")"}return["AMAZON_outOfStockPercentage90","NEW_outOfStockPercentage90","USED_outOfStockPercentage90"].includes(p)?(p=GridHelper.getCsvObjectName(p),CsvType.getName(CsvType[p].index)):"BUY_BOX_SHIPPING_outOfStockPercentage90"===p?"Buy Box out of stock / suppressed":["COUNT_REVIEWS_current","COUNT_REVIEWS_avg30","COUNT_REVIEWS_avg90","COUNT_REVIEWS_avg180","COUNT_REVIEWS_deltaPercent90"].includes(p)?"COUNT_REVIEWS_current"===p?la._344:
H.replace(CsvType.getName(CsvType.COUNT_REVIEWS.index)+" - ",""):H};var v=function(p){switch(p){case "SALES":p="Amazon Best Sellers rank<br>Disables all Subcategory Sales Rank filters below.";break;case "AMAZON":p="Sold and fulfilled by Amazon";break;case "NEW":p="New price by 3rd party seller<br>or Amazon, shipping not included";break;case "NEW_FBA":p="New price by a 3rd party seller<br>with Fulfillment By Amazon (Prime)";break;case "NEW_FBM_SHIPPING":p="New price by a 3rd party seller<br>with Fulfillment By Merchant,<br>shipping included";
break;case "PRIME_EXCL":p=la._986;break;case "USED":p="Used price by 3rd party seller or<br>Amazon (Warehouse), shipping<br>not included";break;case "LISTPRICE":p="List Price";break;case "LIGHTNING_DEAL":p="Lightning Deals";break;case "WAREHOUSE":p="Warehouse Deals";break;case "COLLECTIBLE":p="Collectible price, shipping not included";break;case "REFURBISHED":p="Refurbished price, shipping not included";break;case "BUY_BOX_SHIPPING":p="Price of the New Buy Box offer, shipping included.\n\t\t\t\t\t\t<br>The Buy Box is the box on a product detail page\n\t\t\t\t\t\t<br>where customers can add the item to their shopping carts.";
break;case "BUY_BOX_USED_SHIPPING":p="Price of the Used Buy Box offer, shipping included.\n\t\t\t\t\t\t<br>The Buy Box is the box on a product detail page\n\t\t\t\t\t\t<br>where customers can add the item to their shopping carts.";break;case "USED_NEW_SHIPPING":p="Used, like new price, shipping included";break;case "USED_VERY_GOOD_SHIPPING":p="Used, very good price, shipping included";break;case "USED_GOOD_SHIPPING":p="Used, good price, shipping included";break;case "USED_ACCEPTABLE_SHIPPING":p="Used, acceptable price, shipping included";
break;case "REFURBISHED_SHIPPING":p="Refurbished price, shipping included";break;case "EBAY_NEW_SHIPPING":p="eBay Fixed Price New, shipping included";break;case "EBAY_USED_SHIPPING":p="eBay Fixed Price Used, shipping included";break;case "TRADE_IN":p="Amazon Trade-In Value";break;case "RENT":p="Rental price";break;case "salesRankReference_current":p="Amazon Best Sellers rank for a specific subcategory.<br>To activate please choose a subcategory in addition to your desired range.<br>Disables all other Sales Rank filters above.";
break;case "salesRankReference":p="Sales Rank subcategory - only one is supported. Mandatory if subcategory range is set. Will be ignored without a range.";break;case "author":p="Names of authors. Example: <i>anonymous<i>";break;case "binding":p="Names of bindings. Example: <i>paperback</i>";break;case "brand":p="Names of brands. Example: <i>canon</i>";break;case "categories":p="Amazon subcategories products are listed directly in.";break;case "categories_exclude":p="Amazon subcategories products are not directly listed in.";
break;case "color":p="Names of colors. Example: <i>black</i>";break;case "edition":p="Names of editions. Example: <i>first edition</i>";break;case "format":p="Names of formats. Example: <i>cd-rom</i>";break;case "languages":p="Names of languages. Example: <i>english</i>";break;case "manufacturer":p="Names of manufacturers. Example: <i>canon</i>";break;case "model":p="Names of models. Example: <i>2016</i>";break;case "partNumber":p="Names of partNumbers. Example: <i>DSC-H300/BM-RB</i>.<br>Filter for exact matches within the <i>PartNumber</i> field.";
break;case "productGroup":p="Names of productGroups. Example: <i>apparel</i>";break;case "rootCategory":p="Amazon root categories products are listed in.";break;case "size":p="Names of sizes. Example: <i>large</i>";break;case "title":p="Title of the product. Works on a keyword basis, which means the product\u2019s title must contain \n\t\t\t\t\t\t<br>the specified string\u2019s keywords, which are to be separated by a white space. The search is \n\t\t\t\t\t\t<br>case-insensitive. Partial keyword matches are not supported.\n\t\t\t\t\t\t<br>Examples:\n\t\t\t\t\t\t<br><i>Digital Camera Canon</i> - Title must contain all three keywords, in any order or position.\n\t\t\t\t\t\t<br><i>&quot;Digital Camera&quot; Canon</i> - Title must contain the keyword <i>Digital Camera</i> and <i>Canon</i>.\n\t\t\t\t\t\t<br><i>-digital camera</i> - Title must not contain the keyword <i>digital</i> and must contain <i>camera</i>.";
break;case "buyBoxSellerIdHistory":p="Seller id of the current Buy Box holder.<br>To search for suppressed Buy Box provide -1 as seller id.";break;case "buyBoxUsed.seller":p="Seller id of the current Buy Box Used holder.";break;case "productType":p="Determines what data for the product is available.\n\t\t\t\t\t\t<br>- Physical Product: everything accessible\n\t\t\t\t\t\t<br>- Digital Product: no marketplace/3rd party price data";break;case "hasParentASIN":p="Whether a product has variations or not";
break;case "sellerIds":p="The seller id of the merchant,<br>prepending a - to a seller id<br>will exclude it from the results.";break;case "lastPriceChange":p="Last time we have registered a price change (any price type)";break;case "trackingSince":p="The time we have started tracking a product";break;case "listedSince":p="The time the product was first listed on Amazon";break;case "RATING_current":p="A product's rating";break;case "COUNT_REVIEWS_current":p="A product's review count";break;case "outOfStockPercentage90":p=
"The higher the number, the less time an offer of the specific type (condition, merchant type) was in stock.";break;case "availabilityAmazon":p="Availability of the Amazon offer";break;case "COUNT_NEW_current":p="Count of marketplace merchants selling a product as new.";break;case "offerCountFBA":p="Count of retrieved live offers for a specific type (condition, merchant type).";break;case "COUNT_USED_current":p="Count of marketplace merchants selling a product as used.";break;case "COUNT_REFURBISHED_current":p=
"Count of marketplace merchants selling a product as refurbished.";break;case "COUNT_COLLECTIBLE_current":p="Count of marketplace merchants selling a product as Collectible.";break;case "itemDimension":p="Item dimensions";break;case "itemWeight":p="Item weight";break;case "numberOfItems":p="The number of items or pages a product contains";break;case "packageDimension":p="Package dimensions";break;case "packageWeight":p="Package weight";break;case "couponOneTimeAbsolute":p="Discount of a one time coupon";
break;case "couponSNSPercent":p="Discount of a subscribe and save coupon";break;case "newPriceIsMAP":p="Whether or not the lowest new price (either price\n\t\t\t\t\t\t<br>type Amazon or New) is restricted by MAP\n\t\t\t\t\t\t<br>(Minimum Advertised Price). Use this to differentiate\n\t\t\t\t\t\t<br>out of stock vs. MAP restriction";break;case "isAdultProduct":p="Indicates if a product is considered to be for adults only.";break;case "isEligibleForTradeIn":p="Whether or not a product is eligible for trade-in.";
break;case "isEligibleForSuperSaverShipping":p="Whether or not the product\u2019s Buy Box is eligible for free shipping.";break;case "isSNS":p="Indicates if the product\u2019s Buy Box is available for subscribe and save.";break;case "promotions":p="Whether or not a product has active promotions.";break;case "fbaFees":p="FBA Pick&Pack Fee for an ASIN.";break;case "salesRankDrops30":p="The count of sales rank drops (from high value to low value)\n                    <br>within the last X days which are considered to indicate sales.";
break;case "publicationDate":p="The product's publication date";break;case "releaseDate":p="The product's release date";break;case "buyBoxIsFBA":p="Whether or not the Buy Box is fulfilled by Amazon";break;case "buyBoxUsed.isFBA":p="Whether or not the Buy Box Used is fulfilled by Amazon";break;case "buyBoxIsUnqualified":p="Whether or not a seller won the Buy Box. If there are only sellers with bad offers none qualifies for the Buy Box.";break;case "launchpad":p="Whether or not a product belongs to Amazon Launchpad.";
break;case "buyBoxUsed.condition":p="The item condition of the Buy Box Used.";break;default:isTest&&console.log("missing tooltip for >>> ",p),p=""}return p.length?'<i class="fa fa-question" title="'+p+'"></i>':""};return{init:function(p){var H=GridApi.load(),L=Number(storage.domain),B=network.request({path:"pro/category",domainId:L,categoryIds:[-1]}).done(function(E){GridHelperCategory.setRootHashMap(L,E.categories)});return $.when(H,B).done(function(){var E=function(W,ya,Aa){var Da=GridConfig.get(b.type);
Da.pageId=b.pageId;hasDataAccessSubscription||(Da.gridOptions.pinnedBottomRowData=[{freeAccessRow:!0,message:'<a href="'+rootURL+'#!settings/1"'+(iframe.isIframe?' target="_blank"':"")+'>Subscribe now</a> to load up to 5000 rows and get full access to all <a href="'+rootURL+'#!data"'+(iframe.isIframe?' target="_blank"':"")+">Data features</a>."}],Da.gridOptions.pagination=!1,Da.gridOptions.paginationPageSize=5);b.gridWrapperId=Da.gridWrapperId;GridPage.init(b);GridPage.initGridContainer(Da);a=GridApi.init(Da);
if(null!==a){a.context.config=b;!1!==b.showTools&&GridTools.init(a);d=$("#grid-tools-"+b.pageId).closest(".data-container");if(null!=W){h=[];for(var va in W)"autocomplete"===W[va].filterType&&(Da=W[va].filter.split("###").map(function(za){return za.trim()}).filter(function(za){return""!=za}),Da=ta(va,Da),W[va].filter=Da.join("###")),"dynamic"===W[va].filterType&&"buyBoxSellerIdHistory"===va&&-1!=W[va].filter&&(Da=(1!=W[va].filter?W[va].filter:W[va].filterDetail).split(",").map(function(za){return za.trim()}).filter(function(za){return""!=
za}),Da=ta(va,Da),1==W[va].filter?W[va].filterDetail=Da.join(","):W[va].filter=Da.join(",")),"text"===W[va].filterType&&("isOneOf"==W[va].type&&("sellerIds"===va?(Da=W[va].filter.split(",").map(function(za){return za.trim()}).filter(function(za){return""!=za}),Da=ta(va,Da),W[va].filter=Da.join(",")):(Da=W[va].filter.split("###").map(function(za){return za.trim()}).filter(function(za){return""!=za}),Da=ta(va,Da),W[va].filter=Da.join("###"))),"isNoneOf"==W[va].type&&(Da=W[va].filter.split("###").map(function(za){return za.trim()}).filter(function(za){return""!=
za}),Da=ta(va,Da),W[va].filter=Da.join("###")));h.length&&!Aa&&J(h);a.api.setFilterModel(W)}null!=ya&&a.api.setSortModel(ya);Aa?(isTest&&console.info("%cGrid: onFilterChanged","color:#6666bf;font-weight:bold;"),a.api.onFilterChanged(),"undefined"===typeof a.api.rowModel.datasource&&(isTest&&console.info("%cGrid: initDatasource","color:#6666bf;font-weight:bold;"),ja())):(d.hide(),m());GridFilter.setGridApi(a)}},U=!1,ka=null,ma=null;if(null!=lastSubUrl&&!0!==p){var na=decodeURIComponent(lastSubUrl);
0==na.indexOf("{")&&(na=tryParseJSON(na),null!=na&&(ka=na.f,ma=na.s,U="g"===na.t,ka.productType&&"set"!==ka.productType.filterType&&("0"===ka.productType.filter?ka.productType={filter:[0,1],filterType:"set",values:["0"]}:"1"===ka.productType.filter?ka.productType={filter:[0,1],filterType:"set",values:["1"]}:delete ka.productType)))}window.onpopstate=function(W){null==W.state&&"#!finder"===window.location.hash&&"#!finder"===lastUrl&&(E(null,null,!1),isTest&&console.log("window.onpopstate refresh"))};
E(ka,ma,U)}).fail(showErrorPopup)},initDatasource:ja,initFilter:m,showApiQuery:A,showFilterInfo:function(){var p=function(){var B=S();showPopup("Active Product Finder filters",'<div class="popup--medium grid-filter-form grid-filter-form--view-only">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t'+B+"\n\t\t\t\t\t</div>\n\t\t\t\t</div>",!0)},H=[],L=a.api.getFilterInstance("categories");L.isFilterActive()&&(L=L.getModel()||{},H=Array.from(new Set([].concat($jscomp.arrayFromIterable(H),$jscomp.arrayFromIterable(L.filter.split("###"))))));
L=a.api.getFilterInstance("categories_exclude");L.isFilterActive()&&(L=L.getModel()||{},H=Array.from(new Set([].concat($jscomp.arrayFromIterable(H),$jscomp.arrayFromIterable(L.filter.split("###"))))));enableSubcategorySalesRankFilter&&(L=a.api.getFilterInstance("salesRankReference"),L.isFilterActive()&&(L=L.getModel()||{},H=Array.from(new Set([].concat($jscomp.arrayFromIterable(H),$jscomp.arrayFromIterable(L.filter.split("###")))))));GridHelperCategory.load(null,Number(storage.domain),H).done(function(){p()}).fail(function(){p()})},
showPopupMaxValuesPerFinderFilter:J,handleSpecialFilters:function(){$("div.ag-header-cell .ag-header-cell-menu-button").show();GridConfig.csvTypesEnableOutOfStock.forEach(function(p){if(a.api&&a.api.getFilterInstance(p+"_outOfStock").filterActive){var H=[p+"_current",p+"_deltaPercent90"];"NEW"===p?(H.push("NEW_FBA_current"),H.push("NEW_FBA_deltaPercent90"),H.push("NEW_FBM_SHIPPING_current"),H.push("NEW_FBM_SHIPPING_deltaPercent90")):"USED"===p&&(H.push("WAREHOUSE_current"),H.push("WAREHOUSE_deltaPercent90"),
H.push("USED_NEW_SHIPPING_current"),H.push("USED_NEW_SHIPPING_deltaPercent90"),H.push("USED_VERY_GOOD_SHIPPING_current"),H.push("USED_VERY_GOOD_SHIPPING_deltaPercent90"),H.push("USED_GOOD_SHIPPING_current"),H.push("USED_GOOD_SHIPPING_deltaPercent90"),H.push("USED_ACCEPTABLE_SHIPPING_current"),H.push("USED_ACCEPTABLE_SHIPPING_deltaPercent90"));H.forEach(function(L){$('div.ag-header-cell[col-id="'+L+'"] .ag-header-cell-menu-button').hide()})}});GridFinderFormMatrix.disableGridFilter(a)}}}(),GridFinderFormMatrix=
function(){var a="numberFrom-SALES_current numberTo-SALES_current numberFrom-SALES_avg30 numberTo-SALES_avg30 numberFrom-SALES_avg90 numberTo-SALES_avg90 numberFrom-SALES_avg180 numberTo-SALES_avg180 numberFrom-SALES_deltaPercent90 numberTo-SALES_deltaPercent90".split(" "),b=["numberFrom-salesRankReference_current","numberTo-salesRankReference_current","autocomplete-salesRankReference","autocompleteReal-salesRankReference"],d={"boolean-SALES_outOfStock":["boolean-SALES_isLowest","numberFrom-SALES_current",
"numberTo-SALES_current","numberFrom-SALES_deltaPercent90","numberTo-SALES_deltaPercent90"].concat($jscomp.arrayFromIterable(b)),"boolean-SALES_isLowest":["boolean-SALES_outOfStock"].concat($jscomp.arrayFromIterable(b)),"numberFrom-SALES_current":b,"numberTo-SALES_current":b,"numberFrom-SALES_avg30":b,"numberTo-SALES_avg30":b,"numberFrom-SALES_avg90":b,"numberTo-SALES_avg90":b,"numberFrom-SALES_avg180":b,"numberTo-SALES_avg180":b,"numberFrom-SALES_deltaPercent90":b,"numberTo-SALES_deltaPercent90":b,
"numberFrom-salesRankReference_current":["boolean-SALES_isLowest","boolean-SALES_outOfStock"].concat($jscomp.arrayFromIterable(a)),"numberTo-salesRankReference_current":["boolean-SALES_isLowest","boolean-SALES_outOfStock"].concat($jscomp.arrayFromIterable(a)),"autocomplete-salesRankReference":["boolean-SALES_isLowest","boolean-SALES_outOfStock"].concat($jscomp.arrayFromIterable(a)),"autocompleteReal-salesRankReference":["boolean-SALES_isLowest","boolean-SALES_outOfStock"].concat($jscomp.arrayFromIterable(a))},
g={"filter-row--matrix-SALES":["filter-row--matrix-salesRankReference"],"filter-row--matrix-salesRankReference":["filter-row--matrix-SALES"]},n=function(r){var q=r.name;d[q]&&d[q].length&&($(r).hasClass("ui-autocomplete-input")?$(r).val(""):h(d[q],t(r)))},t=function(r){if("undefined"===typeof r)return!1;var q=r.type;if("checkbox"===q)return $(r).prop("checked");if("text"===q||"hidden"===q)return 0<$(r).val().length;isTest&&console.log("missing formField isActive handling:",q);return!1},h=function(r,
q){var u={};r=$jscomp.makeIterator(r);for(var D=r.next();!D.done;u={$jscomp$loop$prop$formFieldName$775:u.$jscomp$loop$prop$formFieldName$775},D=r.next())if(u.$jscomp$loop$prop$formFieldName$775=D.value,D=$('input[name="'+u.$jscomp$loop$prop$formFieldName$775+'"]').get(0))if(!0===q)m(D,!0);else{var F=Object.keys(d).filter(function(M){return function(Q){return d[Q].includes(M.$jscomp$loop$prop$formFieldName$775)}}(u)).filter(function(M){return t($('input[name="'+M+'"]').get(0))});F&&0!==F.length||
m(D,!1)}},m=function(r,q){if(r){var u=r.type;"checkbox"===u?!0===q?$(r).prop("checked",!1).prop("disabled",!0):$(r).prop("disabled",!1):"hidden"===u?!0===q?$(r).val("").prop("readonly",!0):$(r).prop("readonly",!1):"text"===u?!0===q?($(r).val("").prop("readonly",!0),r.name.includes("autocomplete")?(r=$(r).closest(".filter-text--autocomplete"),r.addClass("disabled"),$(r).find(".filter-text--autocomplete .mdc-text-field-helper-text--persistent").html("&thinsp;")):($(r).closest(".filter-range--input").addClass("disabled"),
$(r).closest(".filter-range--input").prev().addClass("disabled"))):($(r).prop("readonly",!1),r.name.includes("autocomplete")?$(r).closest(".filter-text--autocomplete").removeClass("disabled"):($(r).closest(".filter-range--input").removeClass("disabled"),$(r).closest(".filter-range--input").prev().removeClass("disabled"))):isTest&&console.log("missing formField toggleFormField handling:",u,r.name)}};return{apply:n,disableGridFilter:function(r){if(null!=r.api&&"undefined"!==typeof r.api){var q=r.api.getFilterModel();
if(q){r=[];var u={},D;for(D in q){u.$jscomp$loop$prop$filterKey$773=D;if((q=Object.keys(d).filter(function(Q){return function(T){return T.includes(Q.$jscomp$loop$prop$filterKey$773)}}(u)))&&q.length){q=$jscomp.makeIterator(q);for(var F=q.next();!F.done;F=q.next()){F=F.value;if(!d[F]||!d[F].length)return;F=$jscomp.makeIterator(d[F]);for(var M=F.next();!M.done;M=F.next())r.push(M.value.split("-")[1])}}u={$jscomp$loop$prop$filterKey$773:u.$jscomp$loop$prop$filterKey$773}}r=Array.from(new Set(r)).filter(function(Q){return Q.length});
r.length&&r.forEach(function(Q){$('div.ag-header-cell[col-id="'+Q+'"] .ag-header-cell-menu-button').hide()})}}},init:function(r){if(r.api&&(r=r.api.getFilterModel()))for(var q in r)$('input[name*="'+q+'"]').each(function(u,D){return n(D)})},resetRow:function(r){r=$(r).attr("id");if(g[r]&&g[r].length){r=[r].concat($jscomp.arrayFromIterable(g[r]));r=$jscomp.makeIterator(r);for(var q=r.next();!q.done;q=r.next())q=$("#"+q.value).find("input").map(function(u,D){return D.name}),h(q,!1)}else isTest&&console.log("no row dependencies: ",
r)}}}(),GridLightningDeal=function(){var a,b={containerId:"grid-container-lightning-deal",pageId:"lightningdeal",resizeToViewport:!0,showTools:!1,template:"lightningdeal",type:"lightningDeal"},d=function(t){var h=[];t=$jscomp.makeIterator(t);for(var m=t.next();!m.done;m=t.next())h.push(GridHelper.prepareProductLightningDeal(m.value));g(h.length);GridApi.setData(a,h)},g=function(t,h){h=void 0===h?!1:h;var m=$("#"+b.gridWrapperId),r=GridConfig.rowHeight.balham+(2*(GridConfig.rowHeight.balham-8)+8)*
(h?t:Math.min(5,t));900>=m.width()&&(r+=8);r!==m.height()&&m.animate({height:r+"px"},400);n(t,h)},n=function(t,h){h=(void 0===h?0:h)?t:5;var m=GridConfig.rowHeight.balham,r=2*(GridConfig.rowHeight.balham-8)+8;$("#grid-tools-fab-manage").animate({top:40+(m+r*Math.min(h,t))+"px"},400)};return{init:function(t){return GridApi.load().then(function(){networkHelper.loadASINs({path:"product",offerPages:0,history:!1,maxAge:15,type:"manage",refreshProduct:!1},t,"").done(function(h){if(0!==h.length){var m='<div id="grid-pre-lightning-deal">\n\t\t\t\t\t<i class="fa fa-bolt"></i>&emsp;'+
la._402+'&emsp;<i class="fa fa-bolt"></i>\t\t\t\t\t\t\n\t\t\t\t\t<span class="grid-lightning-deal-actions">\n\t\t\t\t\t\t<i class="fa fa-eye-slash action-toggle"></i>\n\t\t\t\t\t\t'+(5<h.length?'<i class="fa fa-expand action-expand"></i>':"")+'\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div id="grid-container-lightning-deal"></div>';document.getElementById("grid-tools-fab-manage").insertAdjacentHTML("beforebegin",m);m=GridConfig.get(b.type);m.pageId=b.pageId;b.gridWrapperId=m.gridWrapperId;GridPage.initContainer(b);
GridPage.initGridContainer(m);a=GridApi.init(m);null!==a&&(a.context.config=b,d(h),$(".grid-lightning-deal-actions i").on("click",function(r){if($(this).hasClass("action-toggle")){r=$(this).hasClass("fa-eye");var q=$("#grid-container-lightning-deal"),u=$(".grid-lightning-deal-actions .action-expand");r?(q.slideDown(),u.fadeIn(),n(h.length,$(".grid-lightning-deal-actions .fa-compress").length)):(q.slideUp(),u.fadeOut(),n(0));$(this).toggleClass("fa-eye fa-eye-slash")}else g(h.length,$(this).hasClass("fa-expand")),
$(this).toggleClass("fa-expand fa-compress")}))}})}).fail(showErrorPopup)}}}(),GridManage=function(){var a,b={DEFAULT:0,COMFORTABLE:1,COMPACT:2},d={TRACKING:0,CUSTOM:1},g={DAY:24,WEEK:168,MONTH:744,QUARTER:2160,YEAR:8760,ALL:-1},n={DEFAULT:0,PERCENTAGE:1},t={activeViewMode:b.DEFAULT,defaultGraphMode:d.TRACKING,graphRange:g.QUARTER,sortFilterReference:n.DEFAULT,pageId:"manage",resizeToViewport:!0,showTools:!1,template:"manage",title:"Tracking Overview",type:"manage"},h=function(){return GridApi.load().then(function(){var N=
isMobile?b.COMPACT:b.DEFAULT,f=isMobile?storage.manageGridViewMobile:storage.manageGridView;t.activeViewMode=f?Number(f):N;Object.values(b).includes(t.activeViewMode)||(t.activeViewMode=N);t.graphRange=storage.manageGridGraphRange?Number(storage.manageGridGraphRange):Number(storage.s_range)||g.QUARTER;Object.values(g).includes(t.graphRange)||(t.graphRange=g.QUARTER);N="undefined"!==typeof storage.manageGridDefaultGraphMode?JSON.parse(storage.manageGridDefaultGraphMode):{mode:d.TRACKING};t.defaultGraphMode=
N.mode;t.defaultGraphModeTypes=N.types?N.types:[];Object.values(d).includes(t.defaultGraphMode)&&0!==t.defaultGraphModeTypes.length||(t.defaultGraphMode=d.TRACKING);t.sortFilterReference=storage.manageSortFilterReference?Number(storage.manageSortFilterReference):n.DEFAULT;Object.values(n).includes(t.sortFilterReference)||(t.sortFilterReference=n.DEFAULT);GridFilter.initCustomNumberArrayColumnFilter();N=GridConfig.get(t.type);N.pageId=t.pageId;t.gridWrapperId=N.gridWrapperId;GridPage.init(t);GridPage.initGridContainer(N);
a=GridApi.init(N);null!==a&&(t.maxHeight=$("#"+t.gridWrapperId).height(),a.context.config=t,$(".ag-paging-page-summary-panel").hide(),$(".ag-paging-row-summary-panel").hide(),m())}).fail(showErrorPopup)},m=function(){if(storage.token&&""!=storage.token){var N=Date.now(),f=Number(storage.lastManageVisit)||N;7E4>N-f&&(f=N-7E4);network.request({path:"user/trackingoverview",perPage:maxTrackingAllowed,startIndex:-1,stats:f+","+N}).done(function(C){var V=keepaTime.now();if("undefined"===typeof C.trackings)pa();
else{var ba=[],w=C.trackings,O=C.wishLists,z=C.categoriesPerDomain,I={},K={};C=$jscomp.makeIterator(C.noHistoryProducts?C.noHistoryProducts:C.products);for(var A=C.next();!A.done;A=C.next()){A=A.value;I[A.asin]||(I[A.asin]={});I[A.asin][A.domainId]=A;var J=A.stats.lightningDealInfo&&A.stats.lightningDealInfo[0]>=V;if(-1<A.stats.current[CsvType.LIGHTNING_DEAL.index]||J)K[A.domainId]||(K[A.domainId]=[]),K[A.domainId].push(A.asin)}GridLightningDeal.init(K);V={};O=$jscomp.makeIterator(O);for(K=O.next();!K.done;K=
O.next())K=K.value,V[K.id]={domain:K.domain,id:K.id,items:K.items,name:K.name};O={};z=$jscomp.makeIterator(z);for(K=z.next();!K.done;K=z.next())if(K=K.value,null!=K)for(var S in K)O[S]=K[S].name;a.context.categoryHashMap=O;a.context.wishListHashMap=V;K=[];O=[];z=S=!1;w=$jscomp.makeIterator(w);for(C=w.next();!C.done;C=w.next()){C=C.value;J=[];var v=C.asin,p=C.mainDomainId,H=I[v];if(null==H)isTest&&console.info("%cManage \u27fc No products found","color:orange;",v);else if(A=H[p],null==A)isTest&&console.info("%cManage \u27fc No product found",
"color:orange;",v,p);else{A=GridHelper.prepareProductTracking(A,C,p,V);K=Array.from(new Set([].concat($jscomp.arrayFromIterable(K),$jscomp.arrayFromIterable(A.csvTypesWithData))));O=Array.from(new Set([].concat($jscomp.arrayFromIterable(O),$jscomp.arrayFromIterable(A.csvTypesWithTracking))));J=Array.from(new Set([].concat($jscomp.arrayFromIterable(J),$jscomp.arrayFromIterable(A.conditionsMet))));delete A.conditionsMet;var L=[getTldByDomain(p)],B=[];for(U in H)if(U!=p){var E=H[U];E={asin:E.asin,domainId:E.domainId,
title:E.title,stats:E.stats};E=GridHelper.prepareProductTracking(E,C,p);E.csvTypesWithTracking.length&&(L.push(getTldByDomain(U)),K=Array.from(new Set([].concat($jscomp.arrayFromIterable(K),$jscomp.arrayFromIterable(E.csvTypesWithData)))),O=Array.from(new Set([].concat($jscomp.arrayFromIterable(O),$jscomp.arrayFromIterable(E.csvTypesWithTracking)))),A.csvTypesWithTracking=Array.from(new Set([].concat($jscomp.arrayFromIterable(A.csvTypesWithTracking),$jscomp.arrayFromIterable(E.csvTypesWithTracking)))),
J=Array.from(new Set([].concat($jscomp.arrayFromIterable(J),$jscomp.arrayFromIterable(E.conditionsMet)))),delete E.conditionsMet,B.push(E))}H=C.createDate+60*C.ttl;C.expiresOn=5256E3<H-keepaTime.now()?null:H;C.expiresSoon=10080>H-keepaTime.now();J={asin:v,domainId:p,tracking:C,product:A,multiDomainIds:L,multiLocaleProductsReduced:B,lowestDomainIdsPerCsv:R([].concat($jscomp.arrayFromIterable(B),[A]),p,!0),highestDomainIdsPerCsv:R([].concat($jscomp.arrayFromIterable(B),[A]),p,!1),wishLists:V,conditionsMet:J,
detailRowData:[],detailDomainId:p,detailRowHeight:ha(A)};ba.push(J);S=S||A.hasPriceIncreaseTracking;z=z||C.expiresSoon}}I=K;var U=O;V=t.activeViewMode===b.COMPACT;w=["AMAZON","NEW","USED"];"true"!==storage.sendUpcomingLightningDealsAlert&&"true"!==storage.sendStartLightningDealsAlert||w.push("LIGHTNING_DEAL");O=[];K=a.columnDefs;C=[];A=[];for(var ka in K){J=K[ka];if(J.children){p=GridHelper.getCsvObjectName(J.children[0].field);if(!I.includes(p)&&!U.includes(p)&&!w.includes(p)){isTest&&O.push(p);
continue}v=J.children.length-1;for(L=0;L<=v;L++)A.push(J.children[L].field);if(!U.includes(p))for(w.includes(p)||(J.children[0].hide=!0,V&&CsvType[p].graphAPI&&(J.children[1].hide=!0)),p=V&&CsvType[p].graphAPI?2:1;p<=v;p++)J.children[p].hide=!0}else A.push(J.field);C.push(J)}a.api&&a.api.setColumnDefs(C);GridState.restoreColumnState(a,A);isTest&&O.length&&console.info("%cManage \u27fc removed column groups due to no data at all","color:orange;",O);GridState.restoreSortModel(a,[{colId:"MAX_delta",
sort:"desc"}]);a.context.totalRowCount=ba.length;a.context.hasPriceIncreaseTracking=S;a.context.hasExpiresSoon=z;a.api&&a.api.setRowData(ba);P();ba=lastSubUrl.split("-");6===ba.length&&(ba=ba[5],ka=a.context.wishListHashMap,ka[ba]&&ka[ba].name&&a.api.setFilterModel({wishListName:{type:"set",values:[ka[ba].name]}}));T();r();sa()}}).fail(showErrorPopup)}else pa()},r=function(N){N=void 0===N?!1:N;if(null!=a.api&&null!=a.columnApi){var f=$("#grid-tools-fab-"+t.pageId);N&&f.length&&f.remove();var C=[];
[{field:"trackingCreateDate",label:la._197,icon:"numeric",defaultSort:"asc"},{field:"MAX_delta",label:la._198,icon:"numeric",defaultSort:"asc"},{field:"MAX_deltaCustom",label:la._701,icon:"numeric",defaultSort:"asc"},{field:"MAX_deltaTrackingCreated",label:la._702,icon:"numeric",defaultSort:"asc"},{field:"MAX_lastPriceChange",label:la._977,icon:"numeric",defaultSort:"asc"},{field:"title",label:la._676,icon:"alpha",defaultSort:"asc"}].forEach(function(I){(isTest||"MAX_lastPriceChange"!==I.field)&&
C.push({content:'<i class="fa fa-fw fa-sort-'+(I.icon+"-"+I.defaultSort)+'" data-default-sort="'+I.defaultSort+'"></i>&emsp;'+I.label,value:"sort."+I.field,disabled:!1})});C.push({divider:!0});C.push({content:"<span>"+la._667+"</span>",value:"grid",disabled:!0});f=material.getMenu("fab-sort-menu",C);var V=material.getMenu("fab-search-menu",[{content:'<div class="mdc-text-field mdc-text-field--dense">\n\t\t\t\t\t\t\t<input id="fab-search-input" class="mdc-text-field__input" type="text" placeholder="'+
la._19+'" autofocus />\n\t\t\t\t\t\t</div>'}]),ba=200;540>$("#bodyPanel").height()&&(ba=82);ba=[{content:q("multiDomainIds"),value:"multiDomainIds",disabled:!1},{divider:!0},{content:q("rootCategoryName"),value:"rootCategoryName",disabled:!1,style:"max-height:"+ba+"px;overflow-y:auto;"},{divider:!0},{content:q("conditionsMet"),value:"conditionsMet",disabled:!1},{divider:!0},{content:q("csvTypesWithTracking"),value:"csvTypesWithTracking",disabled:!1},{divider:!0},{content:q("tags"),value:"tags",disabled:!1,
style:"max-height:"+ba+"px;overflow-y:auto;"},{divider:!0},{content:q("wishListName"),value:"wishListName",disabled:!1}];a.context.hasPriceIncreaseTracking&&(ba.splice(8,0,{content:q("trackingTypes"),value:"",disabled:!1}),ba.splice(9,0,{divider:!0}));a.context.hasExpiresSoon&&(ba.splice(8,0,{content:q("expiresSoon"),value:"",disabled:!1}),ba.splice(9,0,{divider:!0}));ba=material.getMenu("fab-filter-menu",ba);var w=material.getMenu("fab-tasks-menu",[{content:la._378,disabled:!0},{divider:!0},{content:'<i class="fa fa-fw fa-trash"></i>&emsp;'+
la._379+' (<span class="manage-active-results">0</span>)',value:"task.delete",disabled:!1},{content:'<i class="fa fa-fw fa-floppy-o"></i>&emsp;'+la._393+' (<span class="manage-active-results">0</span>)',value:"task.export",disabled:!1},{content:'<i class="fa fa-fw fa-th"></i>&emsp;'+la._670+' (<span class="manage-active-results">0</span>)',value:"task.viewer",disabled:!1}]),O=[{content:F(),value:"",disabled:!1},{divider:!0},{content:u(),value:"",disabled:!1},{divider:!0}];t.activeViewMode===b.DEFAULT&&
(O.splice(2,0,{content:M(),value:"defaultgraphmode",disabled:!1}),O.splice(3,0,{divider:!0}));O.push({content:Q(),value:"",disabled:!1},{divider:!0});O.push({content:'<span style="font-size:small;font-style:italic;"><i class="fa fa-fw fa-hand-o-left"></i>&emsp;&ensp;'+la._691+"</span>",value:"legacyMode",disabled:!1},{divider:!0});O=material.getMenu("fab-settings-menu",O);f='<div id="grid-tools-fab-'+t.pageId+'" class="grid-wrapper-tools-fab"><ul class="tools-fab-floating">\t\t\n\t\t\t\t<li class="mdc-menu-anchor">\n\t\t\t\t\t<button id="fab-search" class="mdc-fab mdc-fab--mini" aria-label="'+
(la._19+'">\n\t\t\t\t\t\t<i class="fa fa-search mdc-fab__icon" title="'+la._19+'"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t'+V+'\n\t\t\t\t</li>\t\n\t\t\t\t<li class="mdc-menu-anchor">\n\t\t\t\t\t<button id="fab-sort" class="mdc-fab mdc-fab--mini" aria-label="'+la._178+'">\n\t\t\t\t\t\t<i class="fa fa-sort-numeric-asc mdc-fab__icon" title="'+la._178+'"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t'+f+'\n\t\t\t\t</li>\t\t\t\t\n\t\t\t\t<li class="mdc-menu-anchor">\n\t\t\t\t\t<button id="fab-filter" class="mdc-fab mdc-fab--mini" aria-label="'+
la._177+'">\n\t\t\t\t\t\t<i class="fa fa-filter mdc-fab__icon" title="'+la._177+'"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t'+ba+'\n\t\t\t\t</li>\t\n\t\t\t\t<li class="mdc-menu-anchor">\n\t\t\t\t\t<button id="fab-tasks" class="mdc-fab mdc-fab--mini" aria-label="'+la._387+'">\n\t\t\t\t\t\t<i class="fa fa-tasks mdc-fab__icon" title="'+la._387+'"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t'+w+'\n\t\t\t\t</li>\n\t\t\t\t<li class="mdc-menu-anchor">\n\t\t\t\t\t<button id="fab-settings" class="mdc-fab mdc-fab--mini" aria-label="'+
la._8+'">\n\t\t\t\t\t\t<i class="fa fa-cog mdc-fab__icon" title="'+la._8+'"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t'+O+'\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<button id="fab-reset" class="mdc-fab mdc-fab--mini" aria-label="'+la._684+'" style="display:none;">\n\t\t\t\t\t\t<i class="fa fa-undo mdc-fab__icon" title="'+la._684+'"></i>\n\t\t\t\t\t</button>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<button id="fab-refresh" class="mdc-fab mdc-fab--mini" aria-label="'+la._817+'" style="display:none;">\n\t\t\t\t\t\t<i class="fa fa-refresh mdc-fab__icon" title="'+
la._817+'"></i>\n\t\t\t\t\t</button>\n\t\t\t\t</li>\n\t\t\t</ul></div>');document.getElementById(t.gridWrapperId).insertAdjacentHTML("beforebegin",f);$(".mdc-fab__icon").colorTip({color:"manage-fab"});N&&(N=$("#grid-lightning-deal"),N.length&&$("#grid-tools-fab-manage").css({top:40+N.height()+"px"}));var z=[];$(".grid-wrapper-tools-fab").find(".mdc-menu").each(function(){var I=$(this).attr("id"),K=new mdc.menu.MDCMenu(this);["fab-sort-menu","fab-tasks-menu"].includes(I)&&this.addEventListener("MDCMenu:selected",
function(A){ta(A.detail.item.dataset.value)});z.push({buttonId:$(this).attr("id").replace("-menu",""),menuEl:this,menu:K})});$("#fab-search-input").keydown(function(I){I.stopPropagation();return!0});$("#fab-search-input").on("input",function(){var I=$(this);setTimeout(function(){var K=I.val();a.api.setQuickFilter(K)},500)});$('#fab-filter-menu input[type="checkbox"]').on("change",D);$('#fab-settings-menu input[name="viewmode"]').on("change",function(I){isMobile?storage.manageGridViewMobile="undefined"!==
typeof b[this.value]?b[this.value]:b.COMPACT:storage.manageGridView="undefined"!==typeof b[this.value]?b[this.value]:b.DEFAULT;settings.send();Z();h()});$('#fab-settings-menu input[name="graphrange"]').on("change",function(I){storage.manageGridGraphRange="undefined"!==typeof g[this.value]?g[this.value]:g.QUARTER;settings.send();Z();h()});$('#fab-settings-menu input[name="defaultgraphmode"]').on("change",function(I){I="undefined"!==typeof storage.manageGridDefaultGraphMode?JSON.parse(storage.manageGridDefaultGraphMode):
{};var K="undefined"!==typeof d[this.value]?d[this.value]:d.TRACKING;K===d.TRACKING?($('li[data-value="defaultgraphmode"] .types').hide(),K!==t.defaultGraphMode&&(I.mode=K,storage.manageGridDefaultGraphMode=JSON.stringify(I),settings.send(),Z(),h())):$('li[data-value="defaultgraphmode"] .types').show()});$("button#defaultgraphmode").on("click",function(I){I.preventDefault();I="undefined"!==typeof storage.manageGridDefaultGraphMode?JSON.parse(storage.manageGridDefaultGraphMode):{};var K=d.CUSTOM,A=
$('.tools-fab-floating input[name="defaultgraphmode-types"]:checked').map(function(){return $(this).val()}).get();I.mode=K;I.types=A;storage.manageGridDefaultGraphMode=JSON.stringify(I);settings.send();Z();h()});$('#fab-settings-menu input[name="sortfilterreference"]').on("change",function(I){storage.manageSortFilterReference="undefined"!==typeof n[this.value]?n[this.value]:n.DEFAULT;settings.send();Z();h()});$('#fab-settings-menu [data-value="legacyMode"]').on("click",function(I){storage.manageGrid=
!1;settings.send();generateManage()});$(".grid-wrapper-tools-fab").find("ul button").on("click",function(I){var K=$(I.currentTarget).attr("id");I=z.find(function(A){return A.buttonId===K});"undefined"!==typeof I?(I=I.menu,I.open?I.hide():(I.show(),"fab-search"===K&&setTimeout(function(){$("#fab-search-input").focus()},100),"fab-tasks"===K&&ca())):"fab-reset"===K?(a.api.setFilterModel(null),a.api.setQuickFilter(""),r(!0)):"fab-refresh"===K&&(a.api.refreshClientSideRowModel("filter"),a.api.refreshClientSideRowModel("sort"),
r(!0))});$.ctrl=function(I){var K=!1;$(document).on("keydown.ctrlF",function(A){if(A.ctrlKey||A.metaKey)K=!0;A.keyCode==I.charCodeAt(0)&&K&&($("#fab-search").click(),A.preventDefault())}).on("keyup.ctrlF",function(A){A.ctrlKey&&(K=!1)})};$.ctrl("F");onPageNavigation.progress(function(){$(document).off("keydown.ctrlF");$(document).off("keyup.ctrlF")})}},q=function(N){if(null!=a.api&&null!=a.columnApi){var f=a.context.filterResultCounts[N],C=a.api.getFilterInstance(N),V=C.valueModel.allUniqueValues,
ba=Object.keys(C.valueModel.selectedValuesMap);C="";var w="fa-filter";"multiDomainIds"===N&&(C=la._203,w="fa-amazon");"rootCategoryName"===N&&(C=la._202,w="fa-folder-o");"conditionsMet"===N&&(C=la._87,w="fa-check");"csvTypesWithTracking"===N&&(C=la._668,w="fa-bell-o");"trackingTypes"===N&&(C=la._710,w="fa-arrows-v");"expiresSoon"===N&&(C=la._889.replace("!",""),w="fa-clock-o");"tags"===N&&(C=la._807,w="fa-tags");"wishListName"===N&&(C=la._419,w="fa-heart-o");var O='<span><i class="fa fa-fw '+w+'"></i>&emsp;'+
C+":</span>";3<V.length&&(O+=material.getCheckbox(N+"-all",la._671,ba.length===V.length,!1,N,-1));V.forEach(function(z,I){var K=z;"tags"===N&&null==z&&(K="("+la._809+")");"wishListName"===N&&"-"==z&&(K="("+la._669+")");if("undefined"!==typeof f){var A=f.find(function(J){return J.value===z});A&&(K+=" <span>("+A.count+")</span>")}A=!0;ba.length!==V.length&&(A=ba.includes(null==z?"___NULL___":z));O+=material.getCheckbox(N+"-"+I,K,A,!1,N,null==z?"#null#":z)});return O}},u=function(){var N='<span><i class="fa fa-fw fa-calendar"></i>&emsp;'+
la._135+":</span>",f;for(f in g){var C=la._136;g[f]==g.WEEK?C=la._137:g[f]==g.MONTH?C=la._139:g[f]==g.QUARTER?C=la._140:g[f]==g.YEAR?C=la._141:g[f]==g.ALL&&(C=la._142);N+=material.getRadio("graphrange-"+g[f],C,g[f]===t.graphRange,"graphrange",!1,f)}return N},D=function(N){var f=N.currentTarget;N=$(f).attr("name");if($(f).attr("id").includes("-all-checkbox"))N=$('.tools-fab-floating input[name="'+N+'"]'),N.each(function(){$(this).prop("checked",f.checked)}),$(N[1]).change();else{var C=$('.tools-fab-floating input[name="'+
N+'"]:checked').map(function(){return $(this).val()}).get();-1<C.indexOf("#null#")&&(C[C.indexOf("#null#")]=null);a.api.getFilterInstance(N).setModel({type:"set",values:C});a.api.onFilterChanged()}},F=function(){var N='<span><i class="fa fa-fw fa-eye"></i>&emsp;'+la._179+":</span>",f;for(f in b){var C=la._693,V=la._696;b[f]==b.COMFORTABLE?(C=la._694,V=la._697):b[f]==b.COMPACT&&(C=la._695,V=la._698);N+=material.getRadio("viewmode-"+b[f],C,b[f]===t.activeViewMode,"viewmode",!1,f,V)}return N},M=function(){var N=
'<span><i class="fa fa-fw fa-line-chart"></i>&emsp;'+la._810+":</span>";for(V in d){var f=la._811,C=la._696;d[V]==d.CUSTOM&&(f=la._812,C="");N+=material.getRadio("defaultgraphmode-"+d[V],f,d[V]===t.defaultGraphMode,"defaultgraphmode",!1,V,C)}f=t.defaultGraphMode===d.CUSTOM;var V="undefined"!==typeof storage.manageGridDefaultGraphMode?JSON.parse(storage.manageGridDefaultGraphMode).types:[];V=V.map(function(w){return Number(w)});N+='<div class="types"'+(f?"":' style="display:none;"')+">";for(var ba in CsvType)"object"===
typeof CsvType[ba]&&CsvType[ba].isEnabled&&CsvType[ba].isTopGraph&&(f=V.length?-1<V.indexOf(CsvType[ba].index):CsvType[ba].showDefault,N+=material.getCheckbox("defaultgraphmode-types-"+CsvType[ba].index,CsvType.getName(CsvType[ba].index),f,!1,"defaultgraphmode-types",CsvType[ba].index));N+=material.getButton("defaultgraphmode",la._225,"","",!0,!1);return N+"</div>"},Q=function(){var N='<span><i class="fa fa-fw fa-calculator"></i>&emsp;'+la._937+":</span>",f;for(f in n){var C=la._853,V="";n[f]==n.PERCENTAGE&&
(C=la._486,V=la._938);N+=material.getRadio("sortfilterreference-"+n[f],C,n[f]===t.sortFilterReference,"sortfilterreference",!1,f,V)}return N},T=function(){var N=a.context.config.maxHeight,f=$("#"+t.gridWrapperId),C=f.height(),V=$("#grid-wrapper-manage .ag-body-container");V=V[0];V=$(V).height();V+=2*GridConfig.rowHeight.balham;V+=GridConfig.rowHeight.balham+8;V+=a.scrollbarWidth;a.context.config.neededHeight=V;N=Math.min(V,N);N!==C&&f.height(N+"px")},ha=function(N){var f=t.activeViewMode===GridManage.viewModes.DEFAULT;
if(f)N=130;else{var C=Date.now(),V=parseInt((C-keepaTime.minutesToEpoch(N.trackingSince))/36E5),ba=parseInt((C-keepaTime.minutesToEpoch(N.lastUpdate))/36E5);parseInt((C-keepaTime.minutesToEpoch(N.lastPriceChange))/36E5);C=1;24<V&&24>ba&&C++;168<V&&168>ba&&C++;744<V&&744>ba&&C++;2160<V&&2160>ba&&C++;8760<V&&8760>ba&&C++;N=14*N.countTypesTopGraph+(14*C+2)+63;N=Math.max(175,N)}return N+(f?32:50)+5+10},P=function(){if(null!=a.api&&null!=a.columnApi){a.context.filterResultCounts={multiDomainIds:[],rootCategoryName:[],
conditionsMet:[],csvTypesWithTracking:[],trackingTypes:[],expiresSoon:[],tags:[],wishListName:[]};var N={},f={},C={},V={},ba={},w={},O={},z={};a.api.forEachNode(function(L){L=L.data;L.multiDomainIds.forEach(function(U){N[U]=N[U]?N[U]+1:1});var B=L.product.rootCategory>invalidIfLargerCatId?-1:L.product.rootCategory;f[B]=f[B]?f[B]+1:1;B=L.conditionsMet.length?1:0;C[B]=C[B]?C[B]+1:1;L.product.csvTypesWithTracking.forEach(function(U){V[U]=V[U]?V[U]+1:1});L.product.hasPriceDropTracking&&(ba[0]=ba[0]?ba[0]+
1:1);L.product.hasPriceIncreaseTracking&&(ba[1]=ba[1]?ba[1]+1:1);B=L.tracking.expiresSoon?1:0;w[B]=w[B]?w[B]+1:1;B=[];try{var E=JSON.parse(L.tracking.metaData);B=E.tags?E.tags:[]}catch(U){}B.length?B.forEach(function(U){O[U]=O[U]?O[U]+1:1}):O[-1]=O[-1]?O[-1]+1:1;E=null===L.tracking.wishListId?-1:L.tracking.wishListId;z[E]=z[E]?z[E]+1:1});for(var I in N)a.context.filterResultCounts.multiDomainIds.push({value:I,count:N[I]});for(var K in f)a.context.filterResultCounts.rootCategoryName.push({value:-1==
K?"-":a.context.categoryHashMap[K],count:f[K]});for(var A in C)a.context.filterResultCounts.conditionsMet.push({value:1==A?la._88:la._89,count:C[A]});for(var J in V)a.context.filterResultCounts.csvTypesWithTracking.push({value:CsvType.getName(CsvType[J].index),count:V[J]});for(var S in ba)a.context.filterResultCounts.trackingTypes.push({value:0==S?la._711:la._712,count:ba[S]});for(var v in w)a.context.filterResultCounts.expiresSoon.push({value:1==v?la._254:la._255,count:w[v]});for(var p in O)a.context.filterResultCounts.tags.push({value:-1==
p?null:p,count:O[p]});for(var H in z)a.context.filterResultCounts.wishListName.push({value:-1==H?"-":a.context.wishListHashMap[H]?a.context.wishListHashMap[H].name:"-",count:z[H]})}},R=function(N,f,C){C=void 0===C?!0:C;var V={},ba;for(ba in CsvType)if("object"===typeof CsvType[ba]){for(var w=CsvType[ba].index,O=[],z={},I=[],K=$jscomp.makeIterator(N),A=K.next();!A.done;A=K.next()){A=A.value;var J=Number(A.domainId),S=A.stats.current[w];-1<S&&(CsvType[ba].currency&&J!==Number(f)&&(S=Money.raw(S,{sourceDomainId:A.domainId,
targetDomainId:f,keepUnit:!0,noDigits:!0})),z[S]||(z[S]=[]),z[S].push(J),I.push(S))}I.length&&(O=C?Math.min.apply(Math,$jscomp.arrayFromIterable(I)):Math.max.apply(Math,$jscomp.arrayFromIterable(I)),O=z[O]);V[w]=O}return V},Y=function(){if(null==a.api)return 0;var N=a.api.getDisplayedRowCount();!0===a.masterDetail&&(N/=2);return N},ja=function(){var N=$.Deferred(),f=material.getButton("deleteSubmit",la._379,null,"trash"),C=material.getButton("deleteCancel",la._380,null,"ban",!1,!0);f='<div style="width:400px;margin-bottom:20px;">'+
la._381.replace("0",Y())+'</div>\n\t\t\t\t\t<form name="deleteForm" id="deleteForm">\t\t\t\t\t\n\t\t\t\t\t\t'+f+"&emsp;"+C+"\n\t\t\t\t\t</form>";material.init("#deleteForm");setTimeout(function(){$("#deleteForm button").on("click",function(V){N.resolve({action:$(V.currentTarget).attr("id").replace("delete","").toLowerCase()});V.preventDefault()})},0);return{onDelete:N.promise(),html:f}},ra=function(){var N=$.Deferred(),f=material.getCheckbox("exportFormatted",la._813,!0,!1,"exportFormatted",1),C=
material.getButton("exportSubmit","Export",null,"download");f='<div class="mdc-typography--caption" style="margin-top:15px;">'+la._8+'</div>\n\t\t\t\t\t\t\t   <section style="width:400px;">'+f+"</section>";C='<div style="width:400px;margin-bottom:10px;">'+la._686.replace("0",Y())+'</div>\n\t\t\t\t\t<form name="exportForm" id="exportForm">\n\t\t\t\t\t\t'+f+"\n\t\t\t\t\t\t<br>\n\t\t\t\t\t\t"+C+"\n\t\t\t\t\t</form>";material.init("#exportForm");setTimeout(function(){$("#exportForm").on("submit",function(V){var ba=
$("#exportForm input:checkbox:checked").map(function(){return $(this).attr("name")}).get();storage.manageExportFormat="csv";N.resolve({format:"csv",exportOptions:ba});V.preventDefault()})},0);return{onExport:N.promise(),html:C}},ta=function(N){var f=N.split(".");if("sort"===f[0]){N="asc";var C=a.api.getSortModel().find(function(ba){return ba.colId===f[1]});C&&(N="asc"===C.sort?"desc":"asc");a.api.setSortModel([{colId:f[1],sort:N}])}if("task"===f[0])switch(f[1]){case "delete":(function(){var ba=ja(),
w=showPopup("Delete trackings",ba.html,!0);ba.onDelete.done(function(O){"submit"==O.action?(O=$("#deleteSubmit"),O.prop("disabled",!0),O.html(la._379+' &ensp;<i class="fa fa-spinner fa-spin"></i>'),$("#deleteCancel").remove(),$.Deferred(function(z){setTimeout(function(){var I=[],K=[];a.api.forEachNodeAfterFilterAndSort(function(A){I.push(A.data);K.push(A.data.asin)});network.request({path:"track",type:"deleteTracking",asinBatch:K}).done(function(A){null==A.error&&(a.api.updateRowData({remove:I}),
a.context.totalRowCount-=I.length,a.api.setFilterModel(null),a.api.setQuickFilter(""),r(!0),0===Y()&&pa());z.resolve()}).fail(showErrorPopup)},0)}).promise().done(function(){w.close()}).fail(showErrorPopup)):(w.close(),$.Deferred().resolve())})})();break;case "export":(function(){var ba=ra(),w=showPopup("Export Data",ba.html,!0);ba.onExport.done(function(O){var z=$("#exportSubmit");z.prop("disabled",!0);z.html(la._600+' &ensp;<i class="fa fa-spinner fa-spin"></i>');switch(O.format){case "csv":a.context.exportOptions=
O.exportOptions;O=["trackingID","asin","title","domainId","currency"];z=["metaData","imagesCSV","title","wishListNameInfo"];var I=a.columnApi.getColumnState();for(var K in I){var A=I[K];A.hide||z.includes(A.colId)||A.colId.includes("_graph")||O.push(A.colId)}O.push("lastUpdate");O.push("lastPriceChange");O.push("internalHref");O.push("externalHref");I=GridExport.exportCsv(a,0<O.length?{columnKeys:O}:{});break;case "xls":I=$.Deferred(function(J){setTimeout(function(){J.resolve()},0)}).promise()}I.done(function(){w.close()}).fail(showErrorPopup)})})();
break;case "viewer":var V={};a.api.forEachNodeAfterFilterAndSort(function(ba){V[ba.data.domainId]||(V[ba.data.domainId]=[]);V[ba.data.domainId].push(ba.data.asin)});V.listId=Guid.newGuid();window.location.href="#!viewer/"+encodeURIComponent(JSON.stringify(V))}},pa=function(){Z();insertPage('<div class="paper"><h6 class="mdc-typography--subtitle1">'+(la._27+'</h6>\n\t\t\t\t<p class="mdc-typography--body2">'+(storage.username?la._85:la._871)+'</p>\n\t\t\t\t<br>\n\t\t\t\t<p class="mdc-typography--body2">'+
la._86+" "+la._872+"</p></div>"))},ca=function(N){N=void 0===N?!1:N;var f=a.context.deletedAsins;if("undefined"!==typeof f&&0!==f.length){var C=[];a.api.forEachNode(function(V){f.includes(V.data.asin)&&C.push(V.data)});C.length&&(a.api.updateRowData({remove:C}),a.context.deletedAsins=[],a.context.totalRowCount-=C.length,!0!==N&&(T(),sa()),P())}},sa=function(){var N=t.activeViewMode===GridManage.viewModes.COMPACT,f=Y(),C=a.context.totalRowCount;$("span.manage-active-results").html(f);var V=$("#grid-manage .ag-pinned-left-header > .ag-header-row:first-child > .ag-header-group-cell-no-group .ag-header-group-text");
V=N?V[1]:V[0];$(V).html(la._675.replace("#current#",f).replace("#total#",C))},Z=function(){"undefined"!==typeof a&&a.api.destroy()};return{pageConfig:t,sortFilterReferences:n,graphRanges:g,viewModes:b,init:h,adjustGridHeight:T,calculateDetailRowHeight:ha,getTrackingCreationObject:function(N,f,C){var V=N.asin,ba=N.mainDomainId,w=N.metaData,O=[];if(!0===f&&(f=N.thresholdValues,"undefined"!==f&&null!=f)){f=$jscomp.makeIterator(f);for(var z=f.next();!z.done;z=f.next())z=z.value,O.push({domain:z.domain,
csvType:z.csvType,isDrop:z.isDrop,thresholdValue:z.thresholdValueCSV[z.thresholdValueCSV.length-1]})}f=[];if(!0===C&&(C=N.notifyIf,"undefined"!==C&&null!=C))for(C=$jscomp.makeIterator(C),z=C.next();!z.done;z=C.next())z=z.value,f.push({domain:z.domain,csvType:z.csvType,notifyIfType:z.notifyIfType});C=-1*TrackingComponent.getDefaultTtl();return{asin:V,desiredPrices:O,lightningDealsAlerts:N.lightningDealsAlerts,mainDomainId:ba,metaData:w,desiredPricesInMainCurrency:!0,expireNotify:!0,individualNotificationInterval:-1,
isOneTimeImport:!0,minChangeBetweenNotifications:null,notifyIf:f,notificationType:[],overwriteExistingTrackings:!0,removeTrackingWhenDeleted:!1,removeTrackingWhenPurchased:!1,skipIfNotInStock:!0,ttl:C}},getTrackingUpdateObject:function(){return{expireNotify:null,individualNotificationInterval:null,isActive:null,lightningDealsAlerts:null,metaData:null,notificationType:null,onlyPrime:null,ttl:-1*TrackingComponent.getDefaultTtl(),updateInterval:null}},removeDeletedRows:ca,updateFilterToolbar:function(N){var f=
$("#grid-tools-fab-manage");N.forEach(function(C){var V=f.find('[data-value="'+C+'"]');V.length&&(V[0].innerHTML=q(C));V.find('input[type="checkbox"]').on("change",D)})},updateRowCount:sa,updateSortToolbar:function(){var N=a.api?a.api.getSortModel():null,f=$("#fab-sort-menu i");$(f).each(function(C,V){V=$(V);C=V.data("default-sort");var ba="asc"===C?"desc":"asc";V.addClass("inactive");V.attr("class",V.attr("class").replace(ba,C));var w=V.parent().data("value").split(".")[1];if(N&&1===N.length){var O=
N.find(function(z){return z.colId===w});O&&(V.removeClass("inactive"),O.sort===ba&&V.attr("class",V.attr("class").replace(C,ba)))}})}}}(),GridOffer=function(){var a,b={pageId:"offer",resizeToIframeTab:!0,showFilterTop:!0,showTools:{column:!0,export:!0,graph:!0,results:!0},template:"offer",title:"Marketplace Offers",type:"offer"},d={},g=!1,n={},t=function(F){var M=keepaTime.now(),Q=F.products[0],T=F.sellers;F=[];var ha=[],P=0,R=0,Y=!1,ja=0,ra=0,ta={hasPrime:!1,hasFreeShipping:!1,hasFBM:!1},pa=[],ca=
{hasHistorical:!1,hasScam:!1};if(!hasDataAccessSubscription){for(var sa=[],Z=0;Z<Q.offers.length;Z++){var N=Q.offers[Z];null!=Q.liveOffersOrder&&Q.liveOffersOrder.includes(Z)&&sa.length<GridConfig.maxRowsFreeUser&&(N.originalIdx=Z,sa.push(N))}Q.offers=sa}(new Date("2017-12-11")).setUTCHours(0,0,0,0);sa=(new Date("2018-06-07")).setUTCHours(0,0,0,0);for(Z=0;Z<Q.offers.length;Z++){N=Q.offers[Z];N.asin=Q.asin;N.domainId=Q.domainId;N.updateCSV=Q.csv[CsvType.EXTRA_INFO_UPDATES.index];var f=T[N.sellerId];
if(f){var C=f.csv||[];N.sellerName=f.sellerName;N.sellerCurrentRating=f.positiveRating&&f.positiveRating[3]?f.positiveRating[3]:C[0]?C[0][C[0].length-1]:-1;N.sellerCurrentRatingCount=f.ratingCount&&f.ratingCount[3]?f.ratingCount[3]:C[1]?C[1][C[1].length-1]:-1}else N.sellerName="(just launched)",N.sellerCurrentRating=-1,N.sellerCurrentRatingCount=-1;f=N.offerCSV;C=N.stockCSV;if(!0!==disableStockFeatures){N.stock=null;var V=N.lastSeen;V&&1440>=M-V&&C&&(N.stock=C[C.length-1]);R+=N.stock?N.stock:0;N.stockIsMax=
isStockMax(N.stock,N.stockLimit);Y=Y?Y:N.stockIsMax}N.price=f[f.length-2];N.shipping=f[f.length-1];P+=N.price+N.shipping;!0!==disableStockFeatures&&!0!==disableSoldNumbers&&(N.sold=getAggregatedDrop(C,0,800),0<N.sold&&(ja+=N.sold),N.sold30Day=getAggregatedDrop(C,keepaTime.now()-43200,800),0<N.sold30Day&&(ra+=N.sold30Day));C="undefined"!=typeof N.originalIdx?N.originalIdx:Z;N.isLiveOffer=null!=Q.liveOffersOrder&&Q.liveOffersOrder.includes(C);keepaTime.minutesToEpoch(N.lastSeen)<sa&&N.isPrime&&!N.isAmazon&&
!N.isWarehouseDeal&&(N.isFBA=!0);pa.includes(N.condition)||pa.push(N.condition);N.isPrime&&(ta.hasPrime=!0,ta.hasFreeShipping=!0);N.isAmazon||N.isWarehouseDeal||N.isFBA||(ta.hasFBM=!0);0>=N.shipping&&(ta.hasFreeShipping=!0);N.isLiveOffer||(ca.hasHistorical=!0);N.isScam&&(ca.hasScam=!0);N.ageInHours=Math.ceil((keepaTime.now()-f[0])/60);F[Z]=N}M=P/Q.offers.length;pa=pa.sort(function(ba,w){return ba-w});!0!==disableStockFeatures?!0!==disableSoldNumbers?ha.push({domainId:Q.domainId,offerCSV:M,stockCSV:R,
stockHasMax:Y,totalSold:ja,totalSold30Day:ra}):ha.push({domainId:Q.domainId,offerCSV:M,stockCSV:R,stockHasMax:Y}):ha.push({domainId:Q.domainId,offerCSV:M});hasDataAccessSubscription||ha.push({freeAccessRow:!0,message:'<a href="'+rootURL+'#!settings/1"'+(iframe.isIframe?' target="_blank"':"")+'>Subscribe now</a> to view all available variations and get full access to all <a href="'+rootURL+'#!data"'+(iframe.isIframe?' target="_blank"':"")+">Data features</a>."});return{filter:{shipping:ta,conditions:pa,
state:ca},pinnedBottomRows:ha,rows:F}},h=function(F){if("undefined"!==typeof d[F])return d[F];var M={},Q=0,T=0,ha=0,P=!1,R=0,Y=0,ja=0;a.api.forEachNodeAfterFilter(function(ra){ra=ra.data;M.domainId=ra.domainId;T+=ra.price+ra.shipping;!0!==disableStockFeatures&&(ha+=ra.stock?ra.stock:0,P=P?P:ra.stockIsMax,!0!==disableSoldNumbers&&(0<ra.sold&&(R+=ra.sold),0<ra.sold30Day&&(Y+=ra.sold30Day)));ja=Math.max(ja,ra.ageInHours);Q++});Q?(M.offerCSV=T/Q,!0!==disableStockFeatures&&(M.stockCSV=ha,M.stockHasMax=
P,!0!==disableSoldNumbers&&(M.totalSold=R,M.totalSold30Day=Y)),M.countFilteredRows=Q,M.oldestOfferAgeInHours=ja,d[F]=M):d[F]=!1;return d[F]},m=function(F){var M={shipping:{title:"Shipping",children:[{label:'<span style="color:#2692c2;font-style: italic;">Prime</span>',field:"isPrime",value:1},{label:"Free shipping",field:"isFreeShipping",value:1},{label:"FBM only",field:"isFBMOnly",value:1}]},condition:{title:"Condition",children:{NEW:{children:[]},USED:{children:[]},REFURBISHED:{children:[]},COLLECTIBLE:{children:[]},
RENTAL:{children:[]},UNKNOWN:{children:[]}}},state:{title:"Additional options",children:[{label:"Include historical offers",field:"includeHistoricalOffers",value:1,checked:!0},{label:"Show potential scam offers",field:"includeScamOffers",value:1,checked:!0}]}},Q=F.filter.conditions,T=1==Q.length;Q.forEach(function(ca){var sa=ConditionType.getName(ca).split("-"),Z=sa[0].trim();sa=1<sa.length?sa[1].toString().trim():Z;var N=ConditionType.getMetaCondition(ca);M.condition.children[N]&&(M.condition.children[N].label=
Z,M.condition.children[N].children.push({label:sa,field:ca,value:1,checked:!0,disabled:T}))});var ha='<form id="offer-filter">';Q={};for(var P in M){Q.$jscomp$loop$prop$groupIdx$778=P;var R=M[Q.$jscomp$loop$prop$groupIdx$778];ha+='<div class="ft-group-'+Q.$jscomp$loop$prop$groupIdx$778+'"><p>'+R.title+"</p><div>";if(R.children)if(R.children instanceof Array)R.children.forEach(function(ca){return function(sa){var Z=ca.$jscomp$loop$prop$groupIdx$778+"-"+sa.field;ha+="<div>";ha+='<input id="ft-'+sa.field+
'" name="'+Z+'" value="'+sa.value+'" '+(sa.checked?' checked="checked"':"")+(sa.disabled?' disabled="disabled"':"")+' type="checkbox" /> <label for="ft-'+sa.field+'">'+sa.label+"</label>";ha+="</div>"}}(Q));else{var Y={},ja;for(ja in R.children){var ra=R.children[ja];ra.children.length&&(Y.$jscomp$loop$prop$showMeta$780="USED"==ja||"COLLECTIBLE"==ja,ha+="<div>",Y.$jscomp$loop$prop$showMeta$780&&(ha+='<input class="meta" id="ft-'+ja+'" name="'+ja+'" value="'+ja+'" checked="checked" type="checkbox" /> <label for="ft-'+
ja+'">'+ra.label+'</label><div class="sub-conditions">'),ra.children.forEach(function(ca,sa){return function(Z){var N=ca.$jscomp$loop$prop$groupIdx$778+"-"+Z.field,f=sa.$jscomp$loop$prop$showMeta$780?' data-meta="1"':"",C=Z.checked?' checked="checked"':"",V=Z.disabled?' disabled="disabled"':"";sa.$jscomp$loop$prop$showMeta$780&&(ha+="<div>");ha+='\n\t\t\t\t\t\t\t\t\t<input id="ft-'+Z.field+'" name="'+N+'" value="'+Z.value+'"'+C+V+f+' type="checkbox" /> \n\t\t\t\t\t\t\t\t\t<label for="ft-'+Z.field+
'">'+Z.label+"</label>\n\t\t\t\t\t\t\t\t";sa.$jscomp$loop$prop$showMeta$780&&(ha+="</div>")}}(Q,Y)),Y.$jscomp$loop$prop$showMeta$780&&(ha+="</div>"),ha+="</div>");Y={$jscomp$loop$prop$showMeta$780:Y.$jscomp$loop$prop$showMeta$780}}}ha+="</div></div>";Q={$jscomp$loop$prop$groupIdx$778:Q.$jscomp$loop$prop$groupIdx$778}}ha+='<input id="ft-json" name="" value="" type="hidden" />';ha+="</form>";replaceHtml(b.gridWrapperId+"-filter",ha);F=F.filter;F.shipping.hasPrime||$("#ft-isPrime").attr("disabled",!0);
F.shipping.hasFreeShipping||$("#ft-isFreeShipping").attr("disabled",!0);F.shipping.hasFBM||$("#ft-isFBMOnly").attr("disabled",!0);F.state.hasHistorical||$("#ft-includeHistoricalOffers").attr("disabled",!0);F.state.hasScam||$("#ft-includeScamOffers").attr("disabled",!0);P=$("#grid-wrapper-offer-filter");F=P.find('input[type="checkbox"][class="meta"]');P=P.find('input[type="checkbox"]:not([class="meta"])');var ta=!0,pa=!0;F.on("change",function(){if(pa){ta=!1;var ca=$(this).parent().find('input[type="checkbox"]:not([class="meta"])');
$(this).prop("checked")?ca.each(function(){$(this).prop("checked",!0)}):ca.each(function(){$(this).prop("checked",!1)});r();ta=!0}});P.on("change",function(){if(ta&&(r(),$(this).data("meta"))){var ca=$(this).parent().parent(),sa=ca.find('input[type="checkbox"][class="meta"]'),Z=ca.find('input[type="checkbox"]:not([class="meta"])');ca=ca.find('input[type="checkbox"]:not([class="meta"]):checked');pa=!1;Z.length==ca.length?sa.prop("checked",!0):sa.prop("checked",!1);pa=!0}});$("#ft-includeScamOffers").prop("checked",
!1);$("#ft-includeHistoricalOffers").prop("checked",!1).change()},r=function(){var F=$("#grid-wrapper-offer-filter").find("form"),M=F.serializeArray();M=M.concat(F.find("input[type=checkbox]:not(:checked)").map(function(){return{name:this.name,value:0}}).get());M=M.concat(F.find("input[type=checkbox]:disabled").map(function(){var P=$(this).prop("checked")?this.value:0;return{name:this.name,value:P}}).get());n.conditions=[];M.forEach(function(P){var R=P.name.split("-");switch(R[0]){case "condition":P.value&&
n.conditions.push(parseInt(R[1]));break;case "shipping":case "state":n[R[1]]=!!P.value}});g=!0;a.api.onFilterChanged();F=a.api.getSortModel();n.includeHistoricalOffers?F.some(function(P){return"offerCSV"==P.colId})&&1==F.length&&a.api.setSortModel(null):0==F.length&&a.api.setSortModel([{colId:"offerCSV",sort:"asc"}]);M=[];(F=h(JSON.stringify(n)))&&M.push(F);hasDataAccessSubscription||M.push({freeAccessRow:!0,message:'<a href="'+rootURL+'#!settings/1"'+(iframe.isIframe?' target="_blank"':"")+'>Subscribe now</a> to view all available rows and get full access to all <a href="'+
rootURL+'#!data"'+(iframe.isIframe?' target="_blank"':"")+">Data features</a>."});a.api.setPinnedBottomRowData(M);a.context.oldestOfferAgeInHours=F.oldestOfferAgeInHours;D(Math.min(a.context.oldestOfferAgeInHours,2160));var Q=a.context.oldestOfferAgeInHours/24;M=$(".tool__graph .trigger");var T=!1;M.css({"font-weight":"normal"});M.each(function(P,R){P=$(R).data("range");"all"!=P&&(Q>P?$(R).css({display:""}):($(R).css({display:T?"none":""}),T=!0))});90<Q?$('.tool__graph .trigger[data-range="90"]').css({"font-weight":"500"}):
[7,30,90,180,365].includes(Q)?$('.tool__graph .trigger[data-range="'+Q+'"]').css({"font-weight":"500"}):$('.tool__graph .trigger[data-range="all"]').css({"font-weight":"500"});var ha=$("#"+a.context.gridWrapperId);M=2*a.headerHeight+a.scrollbarWidth+38;M+=6;GridTools.updateResults(a.context.pageId,F.countFilteredRows);F.countFilteredRows&&(M+=Math.min(5,F.countFilteredRows)*a.getRowHeight());hasDataAccessSubscription||(M+=GridConfig.rowHeight.balham+8+4);ha.height(M);if(F="grid-tools-"+a.context.pageId)F=
$("#"+F).find(".scroll"),M-=120,$(F).css({maxHeight:Math.min(350,M)+"px"});addon()},q=function(){return g},u=function(F){F=F.data;var M=!0;n.isPrime&&n.isFreeShipping?(M=F.offerCSV[F.offerCSV.length-1],M=F.isPrime||0>=M):n.isPrime&&n.isFBMOnly?M=F.isPrime&&!F.isAmazon&&!F.isWarehouseDeal&&!F.isFBA:n.isPrime?M=F.isPrime:n.isFreeShipping&&n.isFBMOnly?(M=F.offerCSV[F.offerCSV.length-1],M=!F.isAmazon&&!F.isWarehouseDeal&&!F.isFBA&&0>=M):n.isFreeShipping?M=0>=F.offerCSV[F.offerCSV.length-1]:n.isFBMOnly&&
(M=!F.isAmazon&&!F.isWarehouseDeal&&!F.isFBA);var Q=n.conditions.includes(F.condition),T=!0;n.includeHistoricalOffers||(T=F.isLiveOffer);var ha=!0;n.includeScamOffers||(ha=!F.isScam);return M&&Q&&T&&ha},D=function(F){0>F&&(F=a.context.oldestOfferAgeInHours);var M=[];a.api.forEachNode(function(Q){Q=Q.data;Q.priceHistory&&Q.priceHistory==F||(Q.priceHistory=F,delete Q.priceCache,!0!==disableStockFeatures&&(Q.stockHistory=F,delete Q.stockCache),M.push(Q))});M.length&&(GridHelper.addContextMenu(a),a.api.updateRowData({update:M}))};
return{init:function(F,M){return GridApi.load().then(function(){d={};g=!1;n={conditions:[]};if(null==F.products[0].offers)replaceHtml(M,"No active listing offers found.");else{var Q=t(F),T=GridConfig.get(b.type);T.pageId=b.pageId;T.gridOptions.columnDefs=GridHelper.removeColumnsOffer(T.gridOptions.columnDefs,Q.rows,!1!==b.showTools);T.gridOptions.isExternalFilterPresent=q;T.gridOptions.doesExternalFilterPass=u;b.gridWrapperId=T.gridWrapperId;M?(b.containerId=M,GridPage.initContainer(b)):GridPage.init(b);
GridPage.initGridContainer(T);a=GridApi.init(T);null!==a&&(a.context.config=b,!1!==b.showTools&&GridTools.init(a),GridState.restoreSortModel(a,[{colId:"offerCSV",sort:"asc"}]),0<=Q.rows.length&&GridApi.setData(a,Q.rows,Q.pinnedBottomRows),m(Q))}}).fail(showErrorPopup)},updateGraphIntervalData:D}}(),GridProductDetail=function(){var a,b={showFilterTop:!1,showTools:!1,template:"productDetail",title:"Product Details",type:"productDetail"},d=function(m,r){m=GridHelper.prepareProduct(m,r);r=GridConfig.getColumns("asin");
a.context.lookup={packageLength:m.packageLength,packageWidth:m.packageWidth,packageHeight:m.packageHeight,packageWeight:m.packageWeight,itemLength:m.itemLength,itemWidth:m.itemWidth,itemHeight:m.itemHeight,itemWeight:m.itemWeight};var q=[],u={};r.forEach(function(D){D.children?D.children.forEach(function(F){F.headerName=D.headerName+" - "+F.headerName;u=h(F,m);Object.keys(u).length&&q.push(u)}):(u=h(D,m),Object.keys(u).length&&q.push(u))});GridApi.setData(a,q)},g=["sellerIdsLowestFBA","sellerIdsLowestFBM"],
n=["offerCountColumn","priceColumn","salesRankColumn","stockSingleColumn"],t="LIGHTNING_DEAL_upcoming AMAZON_outOfStockPercentage90 NEW_outOfStockPercentage90 USED_outOfStockPercentage90 BUY_BOX_SHIPPING_outOfStockPercentage90 packageLength packageWidth packageHeight itemLength itemWidth itemHeight subcategorySalesRanks salesRankDrops30 salesRankDrops90 salesRankDrops180 description feature0 feature1 feature2 feature3 feature4 reviews.ratingCount reviews.reviewCount".split(" "),h=function(m,r){if(m.hide&&
!g.includes(m.field))return{};m.type&&(m=$.extend(!0,a.columnTypes[m.type],m));if("undefined"!==typeof m.type)for(var q=$jscomp.makeIterator(m.type),u=q.next();!u.done;u=q.next())if(n.includes(u.value))return{};if(t.includes(m.field))return{};q=m.field;u=r[q];2===q.split(".").length&&(u=q.split("."),u=r[u[0]]?r[u[0]][u[1]]:null);m.type&&m.type.includes("dateColumn")&&(u=GridHelper.valueGetterDateKeepaTime({colDef:{field:q},data:r}));if(m.type&&m.type.includes("booleanColumn")&&(["buyBoxIsFBA","buyBoxIsUnqualified"].includes(q)&&
(u=GridHelper.valueGetterStats({colDef:{field:q},data:r})),!1===u)||null===u||-1===u)return{};if(q.includes("_current")||q.includes("_avg")){var D={colDef:{field:q},data:{domainId:r.domainId},value:u};D.data[q]=u;var F=GridHelper.valueFormatterCsvType(D)}else switch(q){case "packageDimension":D={isDetailTable:!0,colDef:{field:q},data:{}};D.data[q]=u;D.data.packageLength=r.packageLength;D.data.packageWidth=r.packageWidth;D.data.packageHeight=r.packageHeight;u=GridHelper.valueGetterDimension(D);D.value=
u;F=GridHelper.valueFormatterDimension(D);break;case "itemDimension":D={isDetailTable:!0,colDef:{field:q},data:{}};D.data[q]=u;D.data.itemLength=r.itemLength;D.data.itemWidth=r.itemWidth;D.data.itemHeight=r.itemHeight;u=GridHelper.valueGetterDimension(D);D.value=u;F=GridHelper.valueFormatterDimension(D);break;case "packageLength":case "packageWidth":case "packageHeight":case "itemLength":case "itemWidth":case "itemHeight":D={isDetailTable:!0,colDef:{field:q},data:{}};D.data[q]=u;u=GridHelper.valueGetterMeasure(D);
D.value=u;F=GridHelper.valueFormatterMeasure(D);break;case "packageWeight":case "itemWeight":D={isDetailTable:!0,colDef:{field:q},data:{}};D.data[q]=u;u=GridHelper.valueGetterWeight(D);D.value=u;F=GridHelper.valueFormatterWeight(D);break;case "buyBoxSellerIdHistory":case "couponOneTimeAbsolute":case "couponOneTimePercent":case "couponSNSPercent":D={colDef:{field:q},data:{asin:r.asin,domainId:r.domainId,stats:r.stats}};"buyBoxSellerIdHistory"===q&&(D.data.buyBoxSellerId=r.buyBoxSellerId,D.data.buyBoxSeller=
r.buyBoxSeller);D.data[q]=r[q];u="function"===typeof m.valueGetter?m.valueGetter(D):D.data[q];D.value=u;F="function"===typeof m.valueFormatter?m.valueFormatter(D):u;break;case "sellerIdsLowestFBA":case "sellerIdsLowestFBM":D={colDef:{field:q},data:{asin:r.asin,domainId:r.domainId,offersOutdated:r.offersOutdated,offersNeverUpdated:r.offersNeverUpdated,NEW_FBA_current:r.NEW_FBA_current,NEW_FBM_SHIPPING_current:r.NEW_FBM_SHIPPING_current,sellerIdsLowestFBA:r.sellerIdsLowestFBA,sellerIdsLowestFBM:r.sellerIdsLowestFBM,
stats:{}}};u="function"===typeof m.valueGetter?m.valueGetter(D):D.data[q];D.value=u;F="function"===typeof m.valueFormatter?m.valueFormatter(D):u;break;case "fbaFees":D={colDef:{field:q},data:{domainId:r.domainId,fbaFees:r.fbaFees,fbaFeesTotal:r.fbaFeesTotal}};D.data[q]=u;D.value="function"===typeof m.valueGetter?m.valueGetter(D):u;F=GridHelper.valueFormatterMoney(D);break;case "availabilityAmazon":F=GridHelper.availabilityAmazonValueMap[u];break;case "buyBoxUsed.condition":F=ConditionType.getBuyBoxUsedConditionMap()[u];
break;case "variationAttributes":F="";var M=u;if(M){M=$jscomp.makeIterator(M);for(var Q=M.next();!Q.done;Q=M.next())Q=Q.value,F+=Q.dimension+": "+Q.value+"; "}F=F.trim();break;case "contributors":case "languages":D={colDef:{field:q},data:{}};D.data[q]=u;D.value="function"===typeof m.valueGetter?m.valueGetter(D):u;F=D.value;break;default:F=u}"RATING_current"==q&&(u=GridHelper.valueGetterRating(D),D.value=u,F=GridHelper.valueFormatterRating(D));if(null==u||-1==u)return{};M="undefined"===typeof m.cellClass?
!1:m.cellClass;if("cell-icon"===M||"cell-number"===M)M+=" cell-left";Q=m.headerName.replace(/<i [\w ="-;]+><\/i> /g,"");if(["packageDimension","packageWeight","itemDimension","itemWeight"].includes(m.field)){var T=GridHelper.getCurrentUnits();T=m.field.includes("Weight")?'<span class="toggle-unit" title="Toggle unit">'+T.weight+"</span>":'<span class="toggle-unit" title="Toggle unit">'+T.measure+"</span>\u00b3";Q=Q+" ("+T+")"}m={productKey:Q,productValue:u,productValueFormatted:F,cellClass:M,realField:q,
realType:m.type,domainId:r.domainId,asin:r.asin};"undefined"!==typeof D&&"undefined"!==typeof D.data&&(m=$.extend(!0,m,D.data));return m};return{init:function(m,r){var q=GridApi.load(),u=m.products[0],D=GridHelperCategory.load([u]);return $.when(q,D).done(function(){var F=GridConfig.get(b.type);F.pageId=b.pageId;b.gridWrapperId=F.gridWrapperId;r?(b.containerId=r,GridPage.initContainer(b)):GridPage.init(b);GridPage.initGridContainer(F);a=GridApi.init(F);null!==a&&(a.context.config=b,d(u,m.sellers))}).fail(showErrorPopup)}}}(),
GridProductPrice=function(){var a,b={showFilterTop:!1,showTools:!1,template:"productPrice",title:"Product Prices",type:"productPrice"},d=function(q){var u=GridConfig.getColumns("asin"),D=u.filter(function(Q,T){return"groupSalesRank"==Q.groupId?(Q.index=T,!0):!1});D=D[0];D.children.splice(2,0,{headerName:"60 days avg.",headerNameGroup:CsvType.getName(CsvType.SALES.index),field:"SALES_avg60",type:["salesRankColumn"],width:107});u[D.index]=D;var F=[],M={};u.forEach(function(Q){Q.children?Q.children.forEach(function(T){T.headerName=
Q.headerName+" - "+T.headerName;M=m(T,q);Object.keys(M).length&&F.push(M)}):(M=m(Q,q),Object.keys(M).length&&F.push(M))});GridApi.setData(a,F)},g="SALES_avg30 SALES_avg60 newPriceIsMAP offerCountFBA offerCountFBM salesRankDrops30 salesRankDrops90 salesRankDrops180".split(" "),n=["_current","_avg90","_avg180","_outOfStockPercentage90"],t=["offerCountColumn","stockSingleColumn","salesRankDropColumn"],h=["RATING_current","COUNT_REVIEWS_current"],m=function(q,u){q.type&&(q=$.extend(!0,q,a.columnTypes[q.type]));
var D=!1,F=!1;if(h.includes(q.field))D=!0;else{if("undefined"!==typeof q.type)for(var M=$jscomp.makeIterator(q.type),Q=M.next();!Q.done;Q=M.next())t.includes(Q.value)&&(F=!0);g.includes(q.field)&&(F=!0);F||(F=n.some(function(ha){return-1<q.field.indexOf(ha)}))}if(!F||D)return{};D=q.field;F={colDef:{field:D},data:{stats:u.stats,domainId:u.domainId,offersOutdated:u.offersOutdated,offersOutworn:u.offersOutworn}};F.data[D]=u[D];M="function"===typeof q.valueGetter?q.valueGetter(F):F.data[D];if(null==M||
-1==M)return{};F.value=M;Q="function"===typeof q.valueFormatter?q.valueFormatter(F):M;var T=q.headerName.replace(/<i [\w ="-;]+><\/i> /g,"");if(["AMAZON_outOfStockPercentage90","NEW_outOfStockPercentage90","USED_outOfStockPercentage90","BUY_BOX_SHIPPING_outOfStockPercentage90","newPriceIsMAP"].includes(q.field)){if(!1===F.value)return{};q.cellClass="cell-icon cell-number";T='<span title="'+q.headerTooltip.replace(/<br>/g,"\n")+'">'+T+' <i class="fa fa-info"></i></span>'}F={productKey:T,productValue:M,
productValueFormatted:Q,cellClass:"undefined"===typeof q.cellClass?"":q.cellClass,realCellRenderer:"function"===typeof q.cellRenderer?q.cellRenderer:!1,realField:D,realType:q.type,domainId:u.domainId,asin:u.asin,offersOutdated:u.offersOutdated,offersOutworn:u.offersOutworn};F[D]=u[D];return F},r=function(q){q=GridHelper.prepareProduct(q);q.SALES_avg60=getWeightedMean(q.csv[CsvType.SALES.index],q.lastUpdate,60,"SALES",1);return q};return{init:function(q,u){var D=GridApi.load(),F=r(q.products[0]);return $.when(D).done(function(){var M=
GridConfig.get(b.type);M.pageId=b.pageId;b.gridWrapperId=M.gridWrapperId;u?(b.containerId=u,GridPage.initContainer(b)):GridPage.init(b);GridPage.initGridContainer(M);a=GridApi.init(M);null!==a&&(a.context.config=b,d(F))}).fail(showErrorPopup)}}}(),GridSearch=function(){var a,b={pageId:"search",resizeToViewport:!0,showTools:!1,template:"search",title:"Search",type:"search"};return{init:function(d,g){return GridApi.load().then(function(){for(var n=d,t=0;t<n.length;t++)n[t]=GridHelper.prepareProductSearch(n[t]);
d=n;n=GridConfig.get(b.type);n.pageId=b.pageId;n.gridOptions.columnDefs=GridHelper.removeColumnsEmpty(n.gridOptions.columnDefs,d);b.gridWrapperId=n.gridWrapperId;g?(b.containerId=g,GridPage.initContainer(b)):GridPage.init(b);GridPage.initGridContainer(n);a=GridApi.init(n);null!==a&&(a.context.config=b,d.length&&GridApi.setData(a,d))}).fail(showErrorPopup)}}}(),GridSellerBrandStatistic=function(){var a,b={containerId:"grid-container-seller-brand-statistic",pageId:"sellerbrandstatistic",resizeToViewport:!1,
showTools:!1,template:"sellerbrandstatistic",type:"sellerbrandstatistic"};return{init:function(d,g){var n=d.sellerBrandStatistics;if(n&&0!==n.length)return GridApi.load().then(function(){var t=GridConfig.get(b.type);t.pageId=b.pageId;b.gridWrapperId=t.gridWrapperId;g?(b.containerId=g,GridPage.initContainer(b)):GridPage.init(b);GridPage.initGridContainer(t);a=GridApi.init(t);if(null!==a){a.context.config=b;a.context.data={sellerId:d.sellerId,sellerName:d.sellerName};t=0;for(var h=$jscomp.makeIterator(n),
m=h.next();!m.done;m=h.next())m=m.value,null!=m&&(t+=m.productCount);h=[];var r=$jscomp.makeIterator(n);for(m=r.next();!m.done;m=r.next())m=m.value,null!=m&&(m.productCountPercentage=Math.round(1E4*m.productCount/t)/100,m.productCountWithAmazonOfferPercentage=Math.round(1E4*m.productCountWithAmazonOffer/m.productCount)/100,h.push(m));GridApi.setData(a,h);t=GridConfig.rowHeight.balham+GridConfig.rowHeight.balham*h.length+1;$("#"+b.gridWrapperId).height(t+"px")}}).fail(showErrorPopup)}}}(),GridSellerCategoryStatistic=
function(){var a,b={containerId:"grid-container-seller-category-statistic",pageId:"sellercategorystatistic",resizeToViewport:!1,showTools:!1,template:"sellercategorystatistic",type:"sellercategorystatistic"},d=function(g,n){for(var t=[],h=0,m=$jscomp.makeIterator(n),r=m.next();!r.done;r=m.next())r=r.value,null!=r&&(t.push(r.catId),h+=r.productCount);network.request({path:"pro/category",domainId:g,categoryIds:t}).done(function(q){q=q.categories||[];for(var u=[],D=$jscomp.makeIterator(n),F=D.next();!F.done;F=
D.next())F=F.value,null!=F&&(F.catName=F.catId>invalidIfLargerCatId?null:q[F.catId]?q[F.catId].name:"-",F.productCountPercentage=Math.round(1E4*F.productCount/h)/100,F.productCountWithAmazonOfferPercentage=Math.round(1E4*F.productCountWithAmazonOffer/F.productCount)/100,u.push(F));GridApi.setData(a,u);q=GridConfig.rowHeight.balham+GridConfig.rowHeight.balham*u.length+1;$("#"+b.gridWrapperId).height(q+"px")}).fail(showErrorPopup)};return{init:function(g,n){var t=g.sellerCategoryStatistics;if(t&&0!==
t.length)return GridApi.load().then(function(){var h=GridConfig.get(b.type);h.pageId=b.pageId;b.gridWrapperId=h.gridWrapperId;n?(b.containerId=n,GridPage.initContainer(b)):GridPage.init(b);GridPage.initGridContainer(h);a=GridApi.init(h);null!==a&&(a.context.config=b,a.context.data={sellerId:g.sellerId,sellerName:g.sellerName},d(g.domainId,t))}).fail(showErrorPopup)}}}(),GridStorefront=function(){var a,b={pageId:"storefront",resizeToViewport:!0,showTools:{column:!0,columnPresets:!0,export:!0,row:!0,
track:GridConfig.gridTypesWithCheckboxSelection.includes("asin")},template:"asin",title:"Seller Storefront",type:"asin"},d=function(n){var t=n.context.config.domainId,h=n.context.config.sellerId;n=GridApi.getRowsPerPage(n);network.request({path:"pro/seller",domainId:t,seller:h,page:0,perPage:n,storefront:-1,history:!0}).done(function(m){var r=m.merchants[h];m={};m[r.domainId]=r.asinList;null==r.asinList?showErrorPopup():(r=GridRequest.getLoadASINs(),r.type="storefront",networkHelper.loadASINs(r,m,
".loadingFlipper").done(function(q){g(q)}).fail(function(q){if(429==q.status){var u=quotaExceeded;"undefined"!=typeof q.products&&0<q.products.length?(u+="<br>"+quotaLastedFor.replace("#count#",q.products.length).replace("#type#","products"),showPopup("Quota exceeded",u,!0),g(q.products)):showPopup("Quota exceeded",u,!0);addDataUpdateHandler()}else showErrorPopup("Status: "+q.status)}))}).fail(showErrorPopup)},g=function(n){for(var t=[],h=0;h<n.length;h++)3!==n[h].productType&&4!==n[h].productType&&
t.push(n[h]);GridHelperCategory.load(t).done(function(){for(var m=0;m<t.length;m++)t[m]=GridHelper.prepareProduct(t[m]);GridApi.setData(a,t)}).fail(showErrorPopup)};return{init:function(n,t){return GridApi.load().then(function(){var h=GridConfig.get(b.type);h.pageId=b.pageId;hasDataAccessSubscription||(h.gridOptions.pinnedBottomRowData=[{freeAccessRow:!0,message:'<a href="'+rootURL+'#!settings/1"'+(iframe.isIframe?' target="_blank"':"")+'>Subscribe now</a> to view up to 5000 rows and get full access to all <a href="'+
rootURL+'#!data"'+(iframe.isIframe?' target="_blank"':"")+">Data features</a>."}]);b.gridWrapperId=h.gridWrapperId;t?(b.containerId=t,GridPage.initContainer(b)):GridPage.init(b);GridPage.initGridContainer(h);a=GridApi.init(h);null!==a&&(a.context.config=b,!1!==b.showTools&&GridTools.init(a),a.context.config.domainId=n.domainId,a.context.config.sellerId=n.sellerId,d(a))}).fail(showErrorPopup)},initData:d}}(),GridTopSeller=function(){var a,b={pageId:"topseller",resizeToViewport:!0,showTools:{export:!0,
row:!0},template:"topseller",title:"Top Seller List",type:"seller"},d=function(n){var t=Number(storage.domain),h=GridApi.getRowsPerPage(n);network.request({path:"pro/topseller",domainId:t,page:0,perPage:h}).done(function(m){if("undefined"===typeof m.topSellerList)g(m);else{var r=[];m=m.topSellerList.sellerIdList.reduce(function(u,D,F){0==F%100&&0!==F&&u.push([]);u[u.length-1].push(D);return u},[[]]);for(var q=0;q<m.length;q+=1)r.push(m[q].join(","));networkHelper.loadSellers({path:"pro/seller",history:!1},
t,r,"#loadingFlipper").done(function(u){var D=[],F=[],M=1,Q;for(Q in u){var T=u[Q];T.rank=M++;T.totalProductCountFromStatistics=null;if(T.sellerCategoryStatistics&&null!=T.sellerCategoryStatistics[0]){F.push(T.sellerCategoryStatistics[0].catId);T.topCategory=T.sellerCategoryStatistics[0].catId;for(var ha=0,P=!1,R=$jscomp.makeIterator(T.sellerCategoryStatistics),Y=R.next();!Y.done;Y=R.next())Y=Y.value,null!=Y&&(ha+=Y.productCount,P=!0);T.totalProductCountFromStatistics=P?ha:null;T.topCategoryProductCountPercentage=
Math.round(1E4*T.sellerCategoryStatistics[0].productCount/ha)/100}D.push(T)}delete n.context.config.perPage;GridHelperCategory.load(null,t,F).always(function(){GridApi.setData(n,D)})}).fail(showErrorPopup)}}).fail(function(m){g(m)})},g=function(n){a.api.destroy();429==n.status?(insertPage('<div class="paper">'+quotaExceeded+"</div>"),showPopup("Quota exceeded",quotaExceeded,!0),addDataUpdateHandler()):showErrorPopup("Status: "+n.status)};return{init:function(){return GridApi.load().then(function(){var n=
GridConfig.get(b.type);n.pageId=b.pageId;hasDataAccessSubscription||(n.gridOptions.pagination=!1,n.gridOptions.paginationPageSize=GridConfig.maxRowsFreeUser,n.gridOptions.pinnedBottomRowData=[{freeAccessRow:!0,message:'<a href="'+rootURL+'#!settings/1"'+(iframe.isIframe?' target="_blank"':"")+'>Subscribe now</a> to view up to 100000 rows and get full access to all <a href="'+rootURL+'#!data"'+(iframe.isIframe?' target="_blank"':"")+">Data features</a>."}]);b.gridWrapperId=n.gridWrapperId;GridPage.init(b);
GridPage.initGridContainer(n);a=GridApi.init(n);null!==a&&(a.context.config=b,!1!==b.showTools&&GridTools.init(a),d(a))}).fail(showErrorPopup)},initData:d}}(),GridVariation=function(){var a,b={pageId:"variation",resizeToIframeTab:!0,showFilterTop:!0,showTools:{column:!0,export:!0,graph:!0,results:!0,track:GridConfig.gridTypesWithCheckboxSelection.includes("variation"),viewer:!0},template:"variation",title:"Product Variations",type:"variation"},d={},g=function(u){if(u.length&&(GridApi.setData(a,u),
a.context.config.showTools.results&&GridTools.updateResults(a.context.pageId,u.length),a.context.config.showTools.graph)){var D=Math.min.apply(Math,$jscomp.arrayFromIterable(u.map(function(Q){return Q.reviews&&Q.reviews.ratingCount?Q.reviews.ratingCount[0]:null})));D=Math.ceil((keepaTime.now()-D)/60);enableVariationGridPriceGraphs&&(u=Math.min.apply(Math,$jscomp.arrayFromIterable(u.map(function(Q){return Q.trackingSince}))),D=Math.ceil((keepaTime.now()-u)/60));a.context.oldestHistoricalDataInHours=
D;q(Math.min(a.context.oldestHistoricalDataInHours,2160));var F=a.context.oldestHistoricalDataInHours/24;u=$(".tool__graph .trigger");var M=!1;u.css({"font-weight":"normal"});u.each(function(Q,T){Q=$(T).data("range");"all"!=Q&&(F>Q?$(T).css({display:""}):($(T).css({display:M?"none":""}),M=!0))});90<F?$('.tool__graph .trigger[data-range="90"]').css({"font-weight":"500"}):[7,30,90,180,365].includes(F)?$('.tool__graph .trigger[data-range="'+F+'"]').css({"font-weight":"500"}):$('.tool__graph .trigger[data-range="all"]').css({"font-weight":"500"})}},
n=function(u){var D=keepaTime.now(),F=u.find(function(R){return R.asin===R.parentAsin});u=u.map(function(R){return R.asin!==R.parentAsin?R:null}).filter(function(R){return R});for(var M=0,Q=0,T=0,ha=0;ha<u.length;ha++)if(u[ha].variations=F?F.variations:null,u[ha]=GridHelper.prepareProduct(u[ha]),M=Math.max(M,u[ha].COUNT_REVIEWS_current),u[ha].reviews&&u[ha].reviews.ratingCount&&20160>=D-u[ha].reviews.lastUpdate){var P=u[ha].reviews.ratingCount[u[ha].reviews.ratingCount.length-1];T+=0<P?P:0;Q=Math.max(Q,
P)}return u=u.map(function(R){R.ratingCountAcrossVariations=Math.max(M,T);R.reviewsRatingIsMax=R.reviews&&R.reviews.ratingCount&&Q===R.reviews.ratingCount[R.reviews.ratingCount.length-1];return R})},t=function(u){0!=u.length&&(replaceHtml(b.gridWrapperId+"-filter",'<form id="variation-filter"><div>\n\t\t\t\t\t<input id="ft-includeInternational" name="includeInternational" value="1" type="checkbox"> \n\t\t\t\t\t<label for="ft-includeInternational">Include international Amazon prices</label>\n\t\t\t\t</div></form>'),
$("#"+b.gridWrapperId+"-filter").find('input[type="checkbox"]').on("change",function(D){var F=$(this);if("includeInternational"===$(this).attr("name"))if($(this).prop("disabled",!0),$(this).prop("checked")){D=Number(u[0].domainId);for(var M={},Q=continents[domainIdToContinent[D]],T=1;T<numberOfDomains;T++)if(7!=T&&-1<Q.indexOf(T)&&T!=D){M[T]=[];for(var ha=0;ha<u.length;ha++)M[T].push(u[ha].asin)}if(0===Object.keys(M).length)u=m(u),r(u),$(this).prop("disabled",!1);else{var P=$(this).next("label");
P.html("Loading international Amazon prices ...");0<Object.keys(d).length?(u=h(u),r(u),P.html("Include international Amazon prices"),F.prop("disabled",!1)):networkHelper.loadASINs({path:"product",offerPages:0,maxAge:1440,history:!1,stats:90,type:"casin",refreshProduct:!1},M).done(function(R){for(var Y=u,ja=Number(Y[0].domainId),ra=0;ra<R.length;ra++){var ta=R[ra],pa=ta.asin,ca=ta.domainId;ta=ta.stats;"undefined"===typeof d[pa]&&(d[pa]={});d[pa][ca]={BUY_BOX_SHIPPING:Money.raw(ta.current[CsvType.BUY_BOX_SHIPPING.index],
{sourceDomainId:ca,targetDomainId:ja,keepUnit:!0}),AMAZON:Money.raw(ta.current[CsvType.AMAZON.index],{sourceDomainId:ca,targetDomainId:ja,keepUnit:!0}),NEW:Money.raw(ta.current[CsvType.NEW.index],{sourceDomainId:ca,targetDomainId:ja,keepUnit:!0}),USED:Money.raw(ta.current[CsvType.USED.index],{sourceDomainId:ca,targetDomainId:ja,keepUnit:!0})}}for(R=0;R<Y.length;R++)pa=Y[R],ra=pa.asin,pa=pa.stats,"undefined"===typeof d[ra]&&(d[ra]={}),d[ra][ja]={BUY_BOX_SHIPPING:Money.raw(pa.current[CsvType.BUY_BOX_SHIPPING.index],
{sourceDomainId:ja,targetDomainId:ja,keepUnit:!0}),AMAZON:Money.raw(pa.current[CsvType.AMAZON.index],{sourceDomainId:ja,targetDomainId:ja,keepUnit:!0}),NEW:Money.raw(pa.current[CsvType.NEW.index],{sourceDomainId:ja,targetDomainId:ja,keepUnit:!0}),USED:Money.raw(pa.current[CsvType.USED.index],{sourceDomainId:ja,targetDomainId:ja,keepUnit:!0})};Y=h(Y);r(Y);P.html("Include international Amazon prices");F.prop("disabled",!1)}).fail(function(R){showErrorPopup("Status: "+R.status)})}}else u=m(u),r(u),$(this).prop("disabled",
!1)}))},h=function(u){for(var D=0;D<u.length;D++)"undefined"!=d[u[D].asin]&&(u[D].casin=d[u[D].asin]);return u},m=function(u){for(var D=0;D<u.length;D++)delete u[D].casin;return u},r=function(u){var D=[];a.api.forEachNode(function(F){F=F.data;var M=F.asin,Q=u.find(function(T){return T.asin===M});"undefined"!==typeof Q&&(F.casin=Q.casin,D.push(F))});GridHelper.addContextMenu(a);a.api.updateRowData({update:D})},q=function(u){0>u&&(u=a.context.oldestHistoricalDataInHours);var D=[];a.api.forEachNode(function(F){F=
F.data;var M=!1;!F.reviews||F.reviews.ratingCountHistory&&F.reviews.ratingCountHistory==u||(M=!0,F.reviews.ratingCountHistory=u,F.reviews.reviewCountHistory=u,delete F.ratingCache,delete F.reviewCache);F.BUY_BOX_SHIPPINGHistoryCache&&F.BUY_BOX_SHIPPINGHistoryCache==u||(M=!0,F.BUY_BOX_SHIPPINGHistory=u,F.AMAZONHistory=u,F.NEWHistory=u,F.USEDHistory=u,delete F.BUY_BOX_SHIPPINGHistoryCache,delete F.AMAZONHistoryCache,delete F.NEWHistoryCache,delete F.USEDHistoryCache);M&&D.push(F)});D.length&&(GridHelper.addContextMenu(a),
a.api.updateRowData({update:D}))};return{init:function(u,D,F){F=void 0===F?!0:F;return GridApi.load().then(function(){d={};u=n(u);var M=GridConfig.get(b.type);M.pageId=b.pageId;M.gridOptions.columnDefs=GridHelper.removeColumnsEmpty(M.gridOptions.columnDefs,u);F||(b.showFilterTop=!1,b.showTools=!1);b.gridWrapperId=M.gridWrapperId;D?(b.containerId=D,GridPage.initContainer(b)):GridPage.init(b);GridPage.initGridContainer(M);a=GridApi.init(M);if(null!==a){a.context.config=b;!1!==b.showTools&&GridTools.init(a);
M=$("#"+a.context.gridWrapperId);var Q=2*GridConfig.rowHeight.balham;Q+=Math.min(5,u.length)*a.getRowHeight();M.height(Q+17+1);GridState.restoreSortModel(a,[{colId:"AMAZON_current",sort:"asc"}]);g(u);b.showFilterTop&&t(u)}}).fail(showErrorPopup)},updateGraphIntervalData:q}}(),GridViewer=function(){var a=1E4,b=0,d=0,g={},n=!0,t="",h="",m=!1,r,q={pageId:"viewer",resizeToViewport:!0,showTools:{column:!0,columnPresets:!0,delete:!0,export:!0,import:!0,track:GridConfig.gridTypesWithCheckboxSelection.includes("asinViewer"),
update:!0},template:"asin",title:"Product Viewer",type:"asinViewer"},u=function(pa){var ca=$.Deferred(),sa=material.getRadio("asinCh","List of ASINs",n,"type"),Z=material.getRadio("upcCh","List of UPC / EAN codes",!n,"type"),N=material.getInput(!0,".*("+verifyRegExp.asin.source+").*","importInputAsin","A list of ASINs\u2026 (up to "+a+")",null,"text","no valid ASIN found",null,!0,"font-size:15px"),f=material.getInput(!0,".*(\\d{8,}).*","importInputUpc","A list of UPC or EANs\u2026 (up to "+a+")",
null,"text","no valid UPC / EAN found",null,!0,"font-size:15px"),C=material.getButton("importSubmit","Load List",null,"upload"),V=function(O){return'<span style="position: absolute;width:400px;">'+O+"</span>"},ba=material.getInputFile("importInputFile","importInputFile","Choose text file (e.g. *.txt, *.csv, ...)",".txt, .csv, .md",!0,!0,"font-size:15px"),w='<div style="height:50px;">'+material.getCheckbox("includeInaccessibleAsins","Include products we currently are unable to collect fresh information for",
!1,!1,"includeInaccessibleAsins",1)+"</div>";pa='<div style="width:400px;">\n\t\t\t\t<p>You can load up to '+a+' products* to view. Once loaded you can create a bookmark** \n\t\t\t\t\tof your list.</p><br>\n\t\t\t\t\t<form name="loadForm" id="importForm">\n\t\t\t\t\t\t<section id="typeRadio">'+sa+Z+'</section>\n\t\t\t\t\t<div style="height:110px;margin-top: -10px;">'+V(N)+V(f)+'</span></div>\n\t\t\t\t\t<p>Alternatively you can upload a text file containing a list of ASINs or UPC / EAN codes:</p>\n\t\t\t\t\t<div style="height:110px;">'+
V(ba)+"</div>\n\t\t\t\t\t"+w+"\n\t\t\t\t\t"+(pa?'<div class="red" style="margin-bottom:10px;">'+pa+"</div>":"")+"\n\t\t\t\t\t"+C+'\n\t\t\t\t</form><br>\n\t\t\t\t<p style="font-size:11px;">\n\t\t\t\t'+(hasDataAccessSubscription?"* Recommended: 5000, larger lists may take some time to load!":'* <a href="'+rootURL+'#!settings/1"'+(iframe.isIframe?' target="_blank"':"")+'>Subscribe now</a> to load up to 10000 rows and get full access to all <a href="'+rootURL+'#!data"'+(iframe.isIframe?' target="_blank"':
"")+">Data features</a>.")+"\n\t\t\t\t<br>** Currently bookmarks are only possible if the result contains a maximum<br>of ~3000 products.</p>\n\t\t\t</div>";material.init("#importForm");setTimeout(function(){var O=$("#importInputAsin,#importInputUpc"),z=$("#typeRadio"),I=$("#importInputFile"),K=$("#importInputFileTrigger"),A=null,J=function(){return"asinCh-radio"==z.find(":checked")[0].id};O.on("input",function(){J()&&$(this).val($(this).val().toUpperCase());O.not(this).prop("required",!$(this).val().length);
$(this).val().length&&(I.val(""),K.val(""),K.prop("required",!1),K.parent().removeClass("mdc-text-field--invalid"),A=null)});var S=function(){var v=J(),p=function(H,L){return $("#"+H).parent().parent()[L?"fadeIn":"fadeOut"](250)};p("importInputAsin",v);p("importInputUpc",!v)};z.on("change",S);S();K.on("click",function(v){O.val("");O.parent().removeClass("mdc-text-field--invalid");I.click();v.preventDefault()});I.on("change",function(){for(var v=$jscomp.makeIterator(this.files),p=v.next();!p.done;p=
v.next())if(p=p.value,A=null,null===p.type||""===p.type)A=p;else{var H=["csv","md"],L=p.name.split(".").pop();if(p.type.startsWith("text/")||H.includes(L))A=p}$(K).prop("required",!0);O.prop("required",!1);A&&($(K).val(A.name),$(K).parent().removeClass("mdc-text-field--invalid"))});$("#importForm").on("submit",function(v){v.preventDefault();var p=J();m=(v=$("#includeInaccessibleAsins-checkbox")[0])?v.checked:!1;if(A){var H=new FileReader;H.onload=function(){var L=H.result;p&&(L=L.toUpperCase());ca.resolve({isAsin:p,
input:L})};H.onerror=function(){ca.resolve({isAsin:p,input:""})};H.readAsText(A)}else ca.resolve({isAsin:p,input:$("#"+(p?"importInputAsin":"importInputUpc")).val()})})},0);return{onImport:ca.promise(),html:pa}},D=function(){var pa=$.Deferred(),ca=!1,sa=1,Z=12,N=r.context.asinCountForUpdate&&Object.keys(r.context.asinCountForUpdate).length?Math.max.apply(Math,$jscomp.arrayFromIterable(Object.keys(r.context.asinCountForUpdate).map(function(f){return parseInt(f)}))):0;Z=Math.min(Z,N);N=F(Z);for(N.tokens>
d&&(sa=Z);N.tokens>d&&24>Z;)Z++,sa++,N=F(Z);if(N.tokens>d||0==N.tokens)ca=!0;sa=material.getInputNumber("updateHours",Z,sa,24,ca,"Refresh if older than","hour(s)","width:40px;padding-top:0;");Z=material.getButton("updateSubmit","Update",null,"refresh");N='<div id="quota-force" style="width:400px;margin-bottom:10px;">Force a product offer data refresh by choosing a max age in hours.</div>\n\t\t\t<form id="updateForm">\n\t\t\t\t<section style="margin-bottom:20px;">'+sa+'</section>\n\t\t\t\t<section style="margin-bottom:20px;">\n\t\t\t\t\t'+
(ca?0==N.tokens?"No need to force a refresh, none of your product's data is older than 1 hour.":"Your current quota is not sufficient to force a product data refresh.<br>Please wait until it is refilled.":'This will consume <span id="quota-cost" style="color:#cc0079;font-weight:bold;">'+N.quota+" %</span> of your complete Data quota.")+"\n\t\t\t\t\t</section>\n\t\t\t\t"+Z+"\n\t\t\t</form>\n\t\t";material.init("#updateForm");setTimeout(function(){ca&&$("#updateSubmit").prop("disabled",!0);var f=$("#updateHours"),
C=$("#quota-cost");f.on("input",function(){var V=$(this).val();V=Math.min(24,V);V=F(V);C.text(V.quota+" %")});r.context.asinYoungerThanMaxAgeFound||(f.val(24),f.parent().parent().hide(),$("#quota-force").hide());$("#updateForm").on("submit",function(V){var ba=f.val();ba=Math.min(24,ba);pa.resolve({hours:ba});V.preventDefault()})},0);return{onUpdate:pa.promise(),html:N}},F=function(pa){var ca=0;(r.context.asinCountForUpdate&&Object.keys(r.context.asinCountForUpdate).length?Object.keys(r.context.asinCountForUpdate).filter(function(Z){return Z>=
pa}):[]).forEach(function(Z){ca+=r.context.asinCountForUpdate[Z].length});var sa=15*ca;return{quota:0<b?100*sa/b:100,tokens:sa}},M=function(pa,ca,sa){"object"===typeof pa&&(g=pa);pa=!0;for(var Z=$jscomp.makeIterator(Object.values(g)),N=Z.next();!N.done;N=Z.next())if(0<=N.value.length){pa=!1;break}pa?("object"===typeof sa&&null!==sa&&sa.close(),Y([]),setTimeout(function(){ha("No valid "+(n?"ASINs":"UPC / EAN codes")+" found.")},500)):Q(g,ca,!1)},Q=function(pa,ca,sa){ca&&r.api.showLoadingOverlay();
var Z=Number(storage.lastViewerVisit)||Date.now(),N=Date.now();7E4>N-Z&&(Z=N-7E4);r.context.statsStart=Z;r.context.statsEnd=N;ca=GridRequest.getLoadASINs(ca);ca.type="viewer";ca.maxAge=0;ca.stats=Z+","+N;networkHelper.loadASINs(ca,pa,".loadingFlipper").done(function(f){hasDataAccessSubscription||0!==f.length||getBucketInformation().always(function(V){if(!V||"undefined"===typeof V.tokens||0>=V.tokens)0==r.api.getDisplayedRowCount()&&(r.api.destroy(),insertPage('<div class="paper">'+quotaExceeded+"</div>")),
setTimeout(function(){showPopup("Quota exceeded",quotaExceeded,!0)},200),addDataUpdateHandler()});var C=f.map(function(V,ba){var w=pa[V.domainId].indexOf(V.asin);if(!n){var O=[];null!=V.upcList&&(O=O.concat(V.upcList));for(null!=V.eanList&&(O=O.concat(V.eanList));O.length&&!(w=O.shift(),w=pa[V.domainId].indexOf(w),-1<w););}return{index:ba,value:1E4*V.domainId+w,asin:V.asin}});C.sort(function(V,ba){return V.value>ba.value?1:V.value<ba.value?-1:0});C=C.map(function(V){return f[V.index]});0<f.length&&
!sa&&ra(pa,C);R(C,sa)}).fail(function(f){429==f.status?setTimeout(function(){var C=quotaExceeded;"undefined"!=typeof f.products&&0<f.products.length?(C+="<br>"+quotaLastedFor.replace("#count#",f.products.length).replace("#type#","products"),showPopup("Quota exceeded",C,!0),R(f.products,sa)):(showPopup("Quota exceeded",C,!0),0==r.api.getDisplayedRowCount()&&(r.api.destroy(),insertPage('<div class="paper">'+quotaExceeded+"</div>")));addDataUpdateHandler()},200):showErrorPopup("Status: "+f.status)})},
T=function(pa){var ca={};Object.keys(r.context.asinCountForUpdate).filter(function(sa){return sa>=pa}).forEach(function(sa){r.context.asinCountForUpdate[sa].forEach(function(Z){Z=Z.split("#");ca[Z[0]]||(ca[Z[0]]=[]);ca[Z[0]].push(Z[1])})});0<Object.keys(ca).length&&Q(ca,!0,!0,!1)},ha=function(pa){var ca=Number(storage.domain);pa=u(pa);var sa=showPopup('Load <img src="'+flags[ca]+'" /> <span style="font-weight:500;color:#666;">Amazon.'+tld+"</span> Products",pa.html,!0);pa.onImport.done(function(Z){sa.promise.resolve(Z)});
sa.promise.done(function(Z){Z=P(Z);M(Z,!1,sa);sa.close()}).fail(function(Z){})},P=function(pa){n=pa.isAsin;var ca=pa.input,sa=n?verifyRegExp.globalAsin:verifyRegExp.globalProductCode,Z;pa={};var N={};pa[storage.domain]=[];if(Z=tryParseJSON(ca,!0))pa=Z,null!=pa.listId&&(h=pa.listId),pa.includeInaccessibleAsins&&!0===pa.includeInaccessibleAsins&&(m=pa.includeInaccessibleAsins);else{do(Z=sa.exec(ca))&&pa[storage.domain].push(Z[1]);while(Z)}ca=0;sa=n?verifyRegExp.asin:verifyRegExp.productCode;for(Z=1;Z<
numberOfDomains;Z++)if(7!=Z&&pa[Z]&&pa[Z].length){pa[Z]=Array.from(new Set(pa[Z]));N[Z]=[];for(var f=$jscomp.makeIterator(pa[Z]),C=f.next();!C.done;C=f.next())C=C.value,sa.test(C)&&ca++<a&&N[Z].push(C)}return N},R=function(pa,ca){if(0!==pa.length||ca){for(var sa=[2,3,4],Z=keepaTime.now(),N=[],f=[],C={},V=!1,ba=0;ba<pa.length;ba++){var w=pa[ba].asin;if(-1===f.indexOf(w)){var O=pa[ba],z=O.domainId;if(-1===sa.indexOf(pa[ba].productType)){if(!ca){var I=Math.floor((Z-O.stats.lastOffersUpdate)/60);0<I&&
(24>I&&(V=!0),z=z+"#"+w,C[I]?C[I].push(z):C[I]=[z])}f.push(w);N.push(O)}else m&&3===pa[ba].productType?(f.push(w),N.push(O)):isTest&&console.log("non trackable product type",pa[ba].asin,pa[ba].productType)}}pa=N;N=null;ca||(r.context.asinYoungerThanMaxAgeFound=V,r.context.asinCountForUpdate=C);if(0===pa.length)ta();else{if(!ca){sa={};Z=$jscomp.makeIterator(pa);for(N=Z.next();!N.done;N=Z.next())N=N.value,sa[N.domainId]=sa[N.domainId]||[],sa[N.domainId].push(N.asin);sa.listId=h||Guid.newGuid();sa.includeInaccessibleAsins=
m;t=sa.listId;sa=encodeURIComponent(JSON.stringify(sa));window.location.hash="!viewer"+(6E4>sa.length?"/"+sa:"");preOverlayUrl=window.location.hash}GridHelperCategory.load(pa).done(function(){for(var K=0;K<pa.length;K++)pa[K]=GridHelper.prepareProduct(pa[K]);ca?ja(pa):Y(pa)}).fail(showErrorPopup)}}else ta()},Y=function(pa){0===pa.length?($('[data-tool="column"]').hide(),$('[data-tool="update"]').hide()):($('[data-tool="column"]').show(),$('[data-tool="update"]').show());GridApi.setData(r,pa)},ja=
function(pa){var ca=keepaTime.now(),sa={},Z=[],N=[],f=!1;r.api.forEachNode(function(V){V=V.data;var ba=V.domainId,w=V.asin,O=pa.filter(function(I){return I.asin==w&&I.domainId==ba});if(O.length){O=O[0];O.offersSuccessful||N.push(w);for(var z in O)V[z]=O[z];Z.push(V)}z=Math.floor((ca-V.stats.lastOffersUpdate)/60);0<z&&(24>z&&(f=!0),V=ba+"#"+w,sa[z]?sa[z].push(V):sa[z]=[V])});r.context.asinYoungerThanMaxAgeFound=f;r.context.asinCountForUpdate=sa;GridHelper.addContextMenu(r);r.api.updateRowData({update:Z});
getBucketInformation();if(N.length){var C='<div style="width:400px;margin-bottom:10px;">The following products could not be updated at the moment - no quota was consumed for those.\n\t\t\t\t<br><br>'+N.join(", ")+"\n\t\t\t\t<br><br>Please try again at a later time.</div>\n\t\t\t";showPopPopup("Refresh products",C,!0)}},ra=function(pa,ca){for(var sa=[],Z={$jscomp$loop$prop$domainId$401$785:1};Z.$jscomp$loop$prop$domainId$401$785<numberOfDomains;Z={$jscomp$loop$prop$domainId$401$785:Z.$jscomp$loop$prop$domainId$401$785},
Z.$jscomp$loop$prop$domainId$401$785++)if(7!=Z.$jscomp$loop$prop$domainId$401$785&&pa[Z.$jscomp$loop$prop$domainId$401$785]&&pa[Z.$jscomp$loop$prop$domainId$401$785].length)for(var N={},f=$jscomp.makeIterator(pa[Z.$jscomp$loop$prop$domainId$401$785]),C=f.next();!C.done;N={$jscomp$loop$prop$code$786:N.$jscomp$loop$prop$code$786},C=f.next())N.$jscomp$loop$prop$code$786=C.value,C=!1,(C=n?ca.some(function(V,ba){return function(w){return w.domainId===V.$jscomp$loop$prop$domainId$401$785&&w.asin===ba.$jscomp$loop$prop$code$786}}(Z,
N)):ca.some(function(V,ba){return function(w){var O=null==w.upcList?[]:w.upcList,z=null==w.eanList?[]:w.eanList;return w.domainId===V.$jscomp$loop$prop$domainId$401$785&&(-1!==O.indexOf(ba.$jscomp$loop$prop$code$786)||-1!==z.indexOf(ba.$jscomp$loop$prop$code$786))}}(Z,N)))||sa.push(N.$jscomp$loop$prop$code$786);sa=Array.from(new Set(sa));sa.length&&(pa='<div style="width:400px;margin-bottom:10px;">The following '+sa.length+" "+(n?" ASIN":" UPC / EAN code")+(1<sa.length?"s":"")+" did not return any result from our database:\n\t\t\t\t\t\t\t<br><br>"+
sa.join(", ")+"\n\t\t\t\t\t\t\t<br><br></div>\n\t\t\t\t\t\t",showPopPopup("Search result",pa,!0))},ta=function(){Y([]);setTimeout(function(){ha("No products found for the given input.")},100)};return{init:function(){return GridApi.load().then(function(){var pa='Load <img src="'+flags[Number(storage.domain)]+'" /> <span style="font-weight:500;">Amazon.'+tld+"</span> Products";a=hasDataAccessSubscription?1E4:GridConfig.maxRowsFreeUser;var ca=function(N){N=P(N);var f=GridConfig.get(q.type);f.gridOptions.pagination=
!0;f.gridOptions.paginationPageSize=1E3;hasDataAccessSubscription||(f.gridOptions.pagination=!1,f.gridOptions.paginationPageSize=GridConfig.maxRowsFreeUser,f.gridOptions.pinnedBottomRowData=[{freeAccessRow:!0,message:'<a href="'+rootURL+'#!settings/1"'+(iframe.isIframe?' target="_blank"':"")+'>Subscribe now</a> to load up to 10000 rows and get full access to all <a href="'+rootURL+'#!data"'+(iframe.isIframe?' target="_blank"':"")+">Data features</a>."}]);f.pageId=q.pageId;q.gridWrapperId=f.gridWrapperId;
var C=Date.now();if("undefined"===typeof storage.lastViewerVisit||null==storage.lastViewerVisit)storage.lastViewerVisit=C,storage.lastViewerVisitUpdate=C;var V=Number(storage.lastViewerVisitUpdate);36E5<C-V&&(storage.lastViewerVisit=V,storage.lastViewerVisitUpdate=C);GridPage.init(q);GridPage.initGridContainer(f);r=GridApi.init(f);null!==r&&(r.context.config=q,!1!==q.showTools&&GridTools.init(r),r.context.importListId=h,r.context.includeInaccessibleAsins=m,r.api.setSortModel(null),M(N,!1))},sa=!1;
if(null!=lastSubUrl){var Z=decodeURIComponent(lastSubUrl);0==Z.indexOf("{")&&(0>=Z.indexOf(t)&&ca({isAsin:!0,input:Z}),sa=!0)}sa||(sa=u(),replaceHtml("bodyPanel",'<div class="paper"><h6 class="mdc-typography--subtitle1">'+pa+"</h6>"+sa.html+"</div>"),sa.onImport.done(ca));onPageNavigation.progress(function(N){"#!product"!=N&&(t=h="",m=!1)})}).fail(showErrorPopup)},initData:M,initImportPopup:ha,initUpdatePopup:function(){getBucketInformation().always(function(pa){pa&&"undefined"!==typeof pa.tokenBucketSize&&
(b=pa.tokenBucketSize,d=pa.tokens);pa=D();var ca=showPopup("Refresh Products",pa.html,!0);pa.onUpdate.done(function(sa){ca.promise.resolve(sa)});ca.promise.done(function(sa){T(sa.hours);ca.close()}).fail(function(sa){})})}}}();var docTitlePrefix="",lastUrlCache="",onPageNavigation=$.Deferred();
function loadPage(a){if(overlayClosed)overlayClosed=!1;else{0<$("#disqus_thread").length&&($commentsCache=$("#disqus_thread").detach());if($("#productOverlay").is(":visible")){if($("#detailProductPage").remove(),$("#overlayShadow").hide(),$("#productOverlay").hide(),lastUrlCache===a)return}else if("#!product"!==a||"#!track"!==a)lastUrlCache=a;setupQuotaWidget();sendHelloGraph();if("#!widgets"===a)window.location.hash="#!imageapi";else switch($("#contentAlign").css({display:""}),onPageNavigation.notify(a),
onPageNavigation=$.Deferred(),a){case "#!":generateStartPage();break;case "#!addon":generateAddon();break;case "#!android":case "#!app":generateApp();break;case "#!api":generatePriceDataAPI();break;case "#!bestseller":generateBestSeller();break;case "#!bot":generateApp();break;case "#!categorytree":generateCategoryTree();break;case "#!channels":case "#!settings":generateSettings();break;case "#!comment":case "#!community":case "#!discuss":generateDiscuss();break;case "#!data":generateData();break;
case "#!deals":generateDeals();break;case "#!disclaimer":generateDisclaimer();break;case "#!faq":generateFAQ();break;case "#!extguest":generateExtGuest();break;case "#!features":generateFeatures();break;case "#!finder":generateFinder();break;case "#!imageapi":generateImageAPI();break;case "#!import":generateImport();break;case "#!manage":generateManage();break;case "#!news":generateNews();break;case "#!notification":case "#!notificationAPI":generateNotification();break;case "#!product":generateProduct();
break;case "#!search":generateSearch();break;case "#!seller":generateSeller();break;case "#!topseller":generateTopSeller();break;case "#!tracking":generateTracking();break;case "#!viewer":generateViewer()}}}
function callSubPage(a){var b=window.location.hash.split("/");if(""==b[0])$("#topPanel").show();else if(0===a)switch(b[0]){case "#!addon":generateAddon();break;case "#!android":case "#!app":generateApp();break;case "#!api":generatePriceDataAPI();break;case "#!bestseller":generateBestSeller();break;case "#!bot":generateApp();break;case "#!comment":case "#!community":case "#!discuss":updateDiscuss();break;case "#!categorytree":generateCategoryTree();break;case "#!channels":case "#!settings":SettingsPage.init();
break;case "#!deals":dealWrapperInstance.get().init();break;case "#!disclaimer":generateDisclaimer();break;case "#!faq":generateFAQ();break;case "#!extguest":generateExtGuest();break;case "#!finder":generateFinder(!0);break;case "#!imageapi":generateImageAPI();break;case "#!import":generateImport();break;case "#!manage":manageUpdate(!1);break;case "#!product":productUpdate();break;case "#!search":searchUpdate();break;case "#!seller":generateSeller();break;case "#!topseller":generateTopSeller();break;
case "#!viewer":generateViewer()}else switch(b[0]){case "#!addon":generateAddon();break;case "#!android":case "#!app":generateApp();break;case "#!api":generatePriceDataAPI();break;case "#!bestseller":generateBestSeller();break;case "#!bot":generateApp();break;case "#!categorytree":generateCategoryTree();break;case "#!channels":case "#!settings":generateSettings();break;case "#!deals":generateDeals();break;case "#!disclaimer":generateDisclaimer();break;case "#!extguest":generateExtGuest();break;case "#!faq":generateFAQ();
break;case "#!features":generateFeatures();break;case "#!finder":generateFinder();break;case "#!imageapi":generateImageAPI();break;case "#!manage":generateManage();break;case "#!product":generateProduct();break;case "#!search":generateSearch();break;case "#!seller":generateSeller();break;case "#!topseller":generateTopSeller();break;case "#!viewer":generateViewer()}}var contentAlignCss={marginTop:"160px",minWidth:"650px",maxWidth:"850px",marginRight:"5%",marginLeft:"5%",position:"relative"};
function insertPage(a){replaceHtml("bodyPanel",a);a=$("bodyPanel");a.attr("style","");a.hide();$("#contentAlign").css(contentAlignCss);a.show()}
function tabSwitcher(a){var b=new mdc.tabs.MDCTabBar(document.querySelector("#"+(a?a:"icon-text-tab-bar"))),d=document.querySelector(".panels");b.preventDefaultOnClick=!0;b.updatePanel=function(g){if(!isNaN(g)){var n=d.querySelector(".panel.active");n&&n.classList.remove("active");(g=d.querySelector(".panel:nth-child("+(Number(g)+1)+")"))&&g.classList.add("active")}};b.listen("MDCTabBar:change",function(g){b.updatePanel(g.detail.activeTabIndex)});return b}
PageLayoutGrid=function(){var a=function(g){if(g.matches){$("#subPanel").css({"margin-top":"40px"});g='\t\t\t\n\t\t\t<aside class="mdc-drawer mdc-drawer--temporary mdc-typography drawer drawer--menu">\n\t\t\t\t<nav class="mdc-drawer__drawer">\n\t\t\t\t\t<div class="mdc-drawer__toolbar-spacer"></div>\t\t\t\t\t\t\t\t\n\t\t\t\t\t<nav class="mdc-drawer__content mdc-list">\n\t\t\t\t\t\t<a class="mdc-list-item" href="#!deals">\n\t\t\t\t\t\t\t<i class="fa fa-fw fa-shopping-bag mdc-list-item__graphic"></i>'+
la._12+'\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<a class="mdc-list-item list-item--tracking" href="#!tracking">\n\t\t\t\t\t\t\t<i class="fa fa-fw fa-bell-o mdc-list-item__graphic"></i>'+la._13+'\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<a class="mdc-list-item list-item--tracking-sub '+("#!tracking"===lastUrl?"":"list-item--hidden")+'" href="#!manage">&raquo; '+la._20+'</a>\n\t\t\t\t\t\t<a class="mdc-list-item list-item--tracking-sub '+("#!tracking"===lastUrl?"":"list-item--hidden")+'" href="#!import">&raquo; '+
la._22+'</a>\n\t\t\t\t\t\t<a class="mdc-list-item list-item--tracking-sub '+("#!tracking"===lastUrl?"":"list-item--hidden")+'" href="#!notification">&raquo; '+la._412+"</a>\n\t\t\t\t\t\t"+(storage.hasAPI&&1==storage.hasAPI?'<a class="mdc-list-item list-item--tracking-sub '+("#!tracking"===lastUrl?"":"list-item--hidden")+'" href="#!notificationAPI">&raquo; API '+la._412+"</a>":"")+'\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t<a class="mdc-list-item" href="#!addon">\n\t\t\t\t\t\t\t<i class="fa fa-fw fa-cloud-download mdc-list-item__graphic"></i>'+
la._14+"\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t"+(7!=Number(storage.domain)?'\n\t\t\t\t\t\t<a class="mdc-list-item" href="#!data">\n\t\t\t\t\t\t\t<i class="fa fa-fw fa-cube mdc-list-item__graphic"></i>Data\n\t\t\t\t\t\t</a>':"")+'\n\t\t\t\t\t\t<a class="mdc-list-item" href="#!features">\n\t\t\t\t\t\t\t<i class="fa fa-fw fa-info mdc-list-item__graphic"></i>'+la._15+'\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<a class="mdc-list-item" href="#!discuss">\n\t\t\t\t\t\t\t<i class="fa fa-fw fa-comments mdc-list-item__graphic"></i>'+
la._24+'\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<span role="separator" class="mdc-list-divider"></span>\n\t\t\t\t\t\t<a class="mdc-list-item" href="#!search">\n\t\t\t\t\t\t\t<i class="fa fa-fw fa-search mdc-list-item__graphic"></i>'+la._19+"\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</nav>\n\t\t\t\t</nav>\n\t\t\t</aside>\n\t\t";$("#content").before(g);var n=new mdc.drawer.MDCTemporaryDrawer(document.querySelector(".mdc-drawer--temporary"));$("#logo").on("click.drawer",function(){n.open=!n.open});g=$("#logo a");g.before('<i class="fa fa-bars fa-2x"></i>');
g.hide()}else d()};initBodyPanel=function(g){replaceHtml("bodyPanel",g);$("bodyPanel").attr("style","")};var b=function(g){insertPage("");document.querySelector('meta[name="viewport"]').content="";$("#content").removeAttr("class");$("#contentAlign").removeAttr("class");$("#bodyPanel").removeClass("mdc-layout-grid__inner content--"+g);d();$("#searchBarForm").off("submit.onLayoutGrid")},d=function(){$("body").removeAttr("class");$(".drawer--menu").remove();$("#logo").off("click.drawer");$("#logo i.fa").remove();
$("#logo a").show();"#!tracking"===lastUrl&&$("#subPanel").css({"margin-top":"80px"})};return{init:function(g){document.querySelector('meta[name="viewport"]').content="width=device-width, initial-scale=1.0";$("#content").addClass("-grid");var n=window.matchMedia("(max-width: 600px)");a(n);n.addListener(a);n=$("#contentAlign");n.removeAttr("style");n.addClass("mdc-layout-grid container");$("#bodyPanel").addClass("mdc-layout-grid__inner content--"+g);onPageNavigation.progress(function(){b(g)});$("#searchBarForm").on("submit.onLayoutGrid",
function(){b(g)})},initBodyPanel:initBodyPanel}}();
function generateIndex(){try{storage.getItem("token")}catch(b){reportBug(b,"No localStorage"),alert("Keepa.com works best in modern browsers. Please update your browser. [Error: No localStorage access possible. If your browser is up to date, please check your browser settings to allow localStorage access.]")}var a='<div id="productOverlay" class="hidden">\n\t<div id="productOverlay-close" title="'+la._193+'"><i class="fa fa-times-circle fa-2x"></i></div>\n</div>\n<div id="overlayShadow" class="hidden"></div>\n'+getLoginForm()+
'\n<div id="topPanel" class="flex topPanel unselectable">\n\t<div id="logo" class="flex"><a href="#!" style="cursor: default;">'+logosvg+'</a></div>\n\t<ul id="topMenu" class="flex">\n\t\t<li>\n\t\t\t<a href="#!deals"><i id="menuDeals" class="fa fa-shopping-bag"></i><span>'+la._12+'</span></a>\n\t\t<li>\n\t\t\t<a href="#!tracking"><i id="menuTrack" class="fa fa-bell-o"></i><span>'+la._13+'</span></a>\n\t\t<li>\n\t\t\t<a href="#!addon"><i id="menuApps" class="fa fa-cloud-download"></i><span>'+la._14+
"</span></a>\n\t\t"+(7!=storage.domain?'<li><a href="#!data"><i id="menuData" class="fa fa-cube"></i><span>Data</span></a>':"")+'\n\t\t<li>\n\t\t\t<a href="#!features"><i id="menuInfo" class="fa fa-info"></i><span>'+la._15+'</span></a>\n\t\t<li>\n\t\t\t<a href="#!discuss"><i id="menuChat" class="fa fa-comments"></i><span>'+la._24+'</span></a>\n\t\t<li style="display:none">\n\t\t\t<a href="#!product"></a><a href="#!"></a><a href="#!track"></a>\n\t\t\t<a href="#!channels"></a>\n\t\t<li>\n\t\t\t<a id="showSearchBar" href="javascript:void(0)"><i id="menuSearch" class="fa fa-search"></i><span>'+
la._19+'</span></a>\n\t</ul>\n\t<div class="flexClass flex"></div>\n\t<div id="panelLanguage" class="flex">\n\t\t<div>\n\t\t\t<div id="currentLanguage"></div>\n\t\t\t<div class="keepa" id="languageOverlay" style="display:none">\n\t\t\t\t<div>\n\t\t'+la._158+':\n\t\t</div>\n\t\t<div id="language_language" class="flex" style="justify-content: space-around;-webkit-justify-content: space-around;">\n\t\t<span>\n\t\t<img id="lang_en" src="'+englishFlagLarge+'" rel="language" setting="1"/>\n\t\t</span>\n\t\t<span>\n\t\t<img id="lang_de" src="'+
flag_3l+'" rel="language" setting="3"/>\n\t\t</span>\n\t\t<span>\n\t\t<img id="lang_fr" src="'+flag_4l+'" rel="language" setting="4"/>\n\t\t</span>\n\t\t<span>\n\t\t<img id="lang_jp" src="'+flag_5l+'" rel="language" setting="5"/>\n\t\t</span>\n\t\t<span>\n\t\t<img id="lang_cn" src="'+flag_7l+'" rel="language" setting="7"/>\n\t\t</span>\n\t\t<span>\n\t\t<img id="lang_it" src="'+flag_8l+'" rel="language" setting="8"/>\n\t\t</span>\n\t\t<span>\n\t\t<img id="lang_es" src="'+flag_9l+'" rel="language" setting="9"/>\n\t\t</span>\n\t\t</div>\n\t\t<div>\n\t\t<span colspan="3" style="line-height: 12px;  padding: 6px 0;white-space: break-spaces;">\n\t\t<br><br>'+
la._157+':\n\t\t</span>\n\t\t</div>\n\t\t<div id="language_domains">\n\t\t<label>'+la._352+'</label><div><span rel="domain" setting="1">.com</span><span rel="domain" setting="6">.ca</span><span rel="domain" setting="11">.mx</span><span rel="domain" setting="12">.br</span></div>\n\t\t<label>'+la._353+'</label><div><span rel="domain" setting="2">.uk</span><span rel="domain" setting="3">.de</span><span rel="domain" setting="4">.fr</span><span rel="domain" setting="8">.it</span><span rel="domain" setting="9">.es</span></div>\n\t\t<label>'+
la._354+'</label><div><span rel="domain" setting="5">.jp</span><span rel="domain" setting="10">.in</span></div>\n\x3c!--\t\t<label>'+la._663+'</label><div><span rel="domain" setting="13">.au</span></div>--\x3e\n\t\t</div>\n\t\t<div style="text-align:center;">\n\t\t\t<span class="switch__currency" colspan="3">\n\t\t\t<br>Currency Settings&ensp;<i class="fa fa-wrench"></i>\n\t\t\t</span>\n\t\t</div>\n\t\t</div>\n\t\t</div>\n\t\t</div>\n\t\t<div id="panelUser" class="flex">\n\t\t<div style=" padding-right: 25px;margin-left: auto;">\n\t\t<div id="userMenuPanel">\n\t\t<span id="panelUserRegisterLogin" style="display:none">'+
la._9+'</span>\n\t\t<div id="panelUserMenu" style="display:none; text-align: right">\n\t\t<span style="margin-right: 4px">\n\t\t<i class="fa fa-user"></i>\n\t\t</span>\n\t\t<span id="panelUsername">'+la._43+'\n\t\t</span><i class="fa fa-fw fa-caret-down"></i>\n\t\t</div>\n\t\t</div>\n\t\t<span id="userMenuOverlay"></span>\n\t\t</div>\n\t\t</div>\n\t\t</div>\n\t\t<div id="subPanel" class="subPanel unselectable">\n\t\t<span id="searchBar" style="display: none">\n\t\t<form id="searchBarForm" method="post">\n\t\t<input type="text" rel="search" class="ui-autocomplete-input" autocomplete="off" maxlength="1000" name="search" id="searchInput" placeholder="'+
la._159+'"/>\n\t\t<i id="submitSearch" class="fa fa-search"></i></form></span>\n\t\t<ul class="subMenu" rel="#!tracking">\n\t\t<li>\n\t\t<a href="#!manage"><span>'+la._20+'</span></a>\n\t\t</li>\n\t\t<li>\n\t\t<a href="#!import"><span>'+la._22+'</span></a>\n\t\t</li><li><a href="#!notification"><span>'+la._412+"</span></a></li>"+(storage.hasAPI&&1==storage.hasAPI?'<li><a href="#!notificationAPI"><span>API '+la._412+"</span></a></li>":"")+'</ul>\n\t\t<ul class="subMenu" rel="#!addon">\n\t\t<li>\n\t\t<a href="#!addon"><span>'+
la._32+'</span></a>\n\t\t</li>\n\t\t<li>\n\t\t<a href="#!app"><span>'+la._35+'</span></a>\n\t\t</li>\n\t\t\x3c!--<li>--\x3e\n\t\t\x3c!--<a href="#!imageapi"><span>'+la._294+'</span></a>--\x3e\n\t\t\x3c!--</li>--\x3e\n\t\t<li class="menuDataAPI">\n\t\t<a href="#!api"><span>Keepa API</span></a>\n\t\t</li>\n\t\t</ul>\n\t\t</ul>\n\t\t<ul class="subMenu" rel="#!data">\n\t\t<li>\n\t\t\t<a href="#!finder"><span>Product Finder</span></a>\n\t\t</li>\n\t\t<li>\n\t\t\t<a href="#!viewer"><span>Product Viewer</span></a>\n\t\t</li>\t\n\t\t<li>\n\t\t\t<a href="#!bestseller"><span>Product Best Sellers</span></a>\n\t\t</li>\n\t\t<li>\n\t\t<a href="#!topseller"><span>Top Seller List</span></a>\n\t\t</li>\n\t\t<li>\n\t\t<a href="#!categorytree"><span>Category Tree</span></a>\n\t\t</li>\n\t\t<li class="menuDataAPI">\n\t\t<a href="#!api"><span>Keepa API</span></a>\n\t\t</li>\n\t\t</ul>\n\t\t</ul>\n\t\t<ul class="subMenu" rel="#!features">\n\t\t<li>\n\t\t<a href="#!features"><span>'+
la._23+'</span></a>\n\t\t</li>\n\t\t<li>\n\t\t<a href="#!faq"><span>FAQ</span></a>\n\t\t</li>\n\t\t<li>\n\t\t<a href="#!news"><span>'+la._25+'</span></a>\n\t\t</li>\n\t\t<li>\n\t\t<a href="#!disclaimer"><span>'+la._26+"</span></a>\n\t\t</li>\n\t\t</ul>\n\t\t</div>\n\t\t"+(isNewPage?'<div id="leftPanel"></div>':"")+'\n\t\t<div id="contentAlign" style="margin-top: 220px; width: 95%; margin-right: 5%; margin-left: 5%;">\n\t\t<div id="bodyPanel" class="content"></div>\n\t\t</div>';replaceHtmlEl($("#content")[0],
a);isMobile&&($("#topPanel").css("position","absolute"),$("#subPanel").css("position","absolute"))}function generateStartPage(){""!==window.location.hash&&StartPage.init()}
function generateDeals(){document.title=docTitlePrefix+la._16;var a='<div id="dealsNotice" class="hidden" style="font-size:12px;position:absolute;"><aside style="margin-left: 50px;"><span id="betaNotice"></span></aside></div>\n\t\t<div class="filterContainer unselectable"><div style="text-align: right; width: 90%; minWidth: 740px; margin: auto; position: relative;"><input style="width: 200px;" maxlength="28" id="dealCategorySearchBar" placeholder="'+(la._534+'"><span style="right: 3px;" id="submitDealCategorySearch"></span></div>\n\t\t<div id="filterBar" class="filterBar lightShadow"><div id="categorySearchResults"></div><div id="filterBarContent">\n\t\t')+
(isNewPage?"":'<div class="filterFlex flex">\x3c!-- Merchant Select --\x3e<div id="multiSelectMerchant" class="multiSelect flex merchant"><ul><li id="amazon" class="selected"><a href="#!deals/amazon-day-m" class="button">Amazon</a></li><li id="new"><a href="#!deals/new-day-m" class="button">'+la._148+'</a></li><li id="used"><a href="#!deals/used-day-m" class="button">'+la._149+'</a></li></ul></div>\x3c!-- Interval Select --\x3e<div id="multiSelectInterval" class="multiSelect flex interval"><ul><li id="day" class="selected"><a href="#!deals/amazon-day-m" class="button">'+
la._155+'</a></li><li id="week"><a href="#!deals/amazon-week-m" class="button">'+la._137+'</a></li><li id="month"><a href="#!deals/amazon-month-m" class="button">'+la._139+'</a></li></ul></div>\x3c!-- Vertical Line --\x3e<div class="verticalLine"></div>\x3c!-- Size Select --\x3e<div id="multiSelectSize" class="multiSelect flex size"><ul><li id="s"><a href="#!deals/amazon-day-s" class="button">S</a></li><li id="m" class="selected"><a href="#!deals/amazon-day-m" class="button">M</a></li><li id="l"><a href="#!deals/amazon-day-l" class="button">L</a></li></ul></div></div>')+
'\n\t\t<div id="filterCats">\n\t\t</div>\n\t\t<div id="removedCats">\n\t\t</div>\n\t\t</div></div></div>\n\t\t</div><div style="font-size:12px;color:#999;padding-left:36px;" id="dealsTitleSearchResults"></div>\n\t\t<div id="productPage0" class="productPage'+(showReferencePrice(Number(storage.domain))?" with-reference":"")+'">\n\t\t</div><div id="loadingIcon"></div><div class="button" id="submitDealQuery">Find Deals!</div></div>\n\t';insertPage(a);dealWrapperInstance.get().addSaveSlots();dealWrapperInstance.get().init();
$("#contentAlign").css({"minWidth:":"",maxWidth:"",width:"auto",marginRight:"5px",marginLeft:"180px"})}
var TrackingPage=function(){var a=function(){var b=1,d=function(g,n,t,h){return'<li class="mdc-list-item" data-link="'+g+'" tabIndex="'+b++ +'">\n                <span class="mdc-list-item__ripple"></span>\n                <i class="fa fa-fw '+h+' mdc-list-item__graphic"></i>\n                <span class="mdc-list-item__text">\n                    <span class="mdc-list-item__primary-text">'+n+'</span>\n                    <span class="mdc-list-item__secondary-text">'+t+"</span>\n                </span>\n            </li>"};
d='\n                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6 mdc-elevation--z3 block block--elevated">\n                    <h6 class="mdc-typography--headline6">'+la._944+'</h6>\n                   \n                    <ul class="mdc-list mdc-list--variable-line">\n                        '+d("search",la._19,la._946,"fa-search")+"\n                        "+d("deals",la._12,la._33,"fa-shopping-bag")+"</a>\n                        "+d("addon","Amazon "+la._32,la._32_2,"fa-cloud-download")+
'\n                    </ul>\n                </div>\n                \n                \n                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6 mdc-elevation--z3 block block--elevated">\n                    <h6 class="mdc-typography--headline6">'+la._945+'</h6>\n                    <ul class="mdc-list mdc-list--variable-line">\n                        '+d("manage",la._20,la._153,"fa fa-bell")+"\n                        "+d("notification",la._412,la._519,"fa-bell-o")+"\n                        "+
d("import",la._22,la._184,"fa-upload")+"\n                    </ul>\n                </div>\n            ";PageLayoutGrid.initBodyPanel(d);$("[data-link]").on("click",function(){window.location.hash="#!"+$(this).data("link")})};return{init:function(){PageLayoutGrid.init("tracking");document.title=docTitlePrefix+la._13;a()}}}();function generateTracking(){TrackingPage.init()}
function generateManage(){"undefined"===typeof storage.manageGrid&&(storage.manageGrid=!0,settings.send());var a="false"!==storage.manageGrid;setupManageSwitcher(a);a?GridManage.init():(document.title=docTitlePrefix+la._20,a='<div id="managePage" style="min-width: 880px;margin-right:25px;display:none;"><div class="flex" style="width: 100%;text-align: right; flex-wrap:wrap;flex-direction: row-reverse;justify-content: space-between;align-items: self-end;"><section id="filter" class="lightShadow" style="display:none;"><h1 id="filterSortView" class="subHeadline hRed">'+
la._19+"&ensp;&#x271C;&ensp;"+la._178+"&ensp;&#x271C;&ensp;"+la._177+"&ensp;&#x271C;&ensp;"+la._387+"&ensp;&#x271C;&ensp;"+la._179+'</h1><h1 class="subsubHeadline">'+la._19+'</h1><div id="trackingSearch" rel="search"><input maxlength="18" class="trackSearch" id="trackSearchBar"><br><div style="height: 20px; width: 230px;text-align: right;"><span id="trackingSearchNone" style="color: tomato; display:none;">nothing found</span><span id="trackingSearchFeedback" class="settings-chpw" style="display:none;"></span></div></div><h1 class="subsubHeadline"><i class="fa fa-sort"></i><span>'+
la._180+'</span></h1><div id="sortList" rel="sort"></div><div id="showFilter">'+la._181+'</div><div style="display:none"><h1 class="subsubHeadline"><i class="fa fa-filter"></i><span>'+la._182+'</span><span id="manageShowall"></span></h1><ul id="filterList" rel="filter"></ul><h1 class="subsubHeadline"><i class="fa fa-tasks"></i><span>'+la._378+'</span></h1><div id="operationsList" rel="operations"></div><h1 class="subsubHeadline"><i class="fa fa-cog"></i><span>'+la._183+'</span></h1><div id="defaultList" rel="default"></div></div></section></div><a id="manage-rss"></a><table style="width: 100%;" class="shadow"><tbody id="manage-productList" ></tbody></table></div><div id="loadingIcon" style="text-align:center;clear: both;"></div><div class="unselectable" style="line-height:50px;">&nbsp;</div>',
$("#loadingIcon").show(),insertPage(a),manage())}
function setupManageSwitcher(a){$("#manage-switcher").length&&$("#manage-switcher").remove();onPageNavigation.progress(function(d){$("#manage-switcher").length&&$("#manage-switcher").remove()});if(!a&&0!=storage.accountType){var b='<div id="manage-switcher" class="mdc-typography--body2">';b=a?b+('<div><i class="fa fa-info-circle"></i>&emsp;'+la._689+'</div>\n\t\t\t<div><i class="fa fa-bug"></i>&emsp;'+la._690+"</div>\n\t\t\t<div><i class=\"fa fa-hand-o-left\"></i>&emsp;<span id='switch-manage'>"+la._691+
"</span></div>"):b+('<div><i class="fa fa-info-circle"></i>&emsp;'+la._688+'&emsp;<i class="fa fa-info-circle"></i></div>');b+="</div>";$("#subPanel").after(b);$("#switch-manage").on("click",function(){storage.manageGrid=!a;settings.send();generateManage()})}}
function generateImport(){document.title=docTitlePrefix+la._22;insertPage('<h1 class="headline hRed">'+la._184+'</h1>\n        <div class="paper block block--mdc-typography" style="padding:16px;">\n            <div id="settingsBox">\n            </div>\n        </div>');$("#contentAlign").css({minWidth:"650px",maxWidth:"850px",marginRight:"40px",marginLeft:"40px",position:"relative"});importWish()}
function generateNotification(){var a="#!notificationAPI"==document.location.hash;document.title=docTitlePrefix+(a?"API":"")+la._412;insertPage('<h1 class="headline hRed">'+la._519+'</h1>\n\t\t<span class="paper">\n\t\t\t<div id="notificationContent">\n\t\t\t\t<div id="loadingIcon" style="text-align: center; clear: both;"></div>\n\t\t\t</div>\n\t\t</span>');$("#contentAlign").css({minWidth:"650px",maxWidth:"",marginRight:"40px",marginLeft:"40px",position:"relative"});network.request({path:"user/notification",
type:"website",isAPI:a,sinceCreateDate:0}).done(function(b){b=b.notifications;var d="";if(null!=b&&0<b.length){try{var g=JSON.parse(get("showGraphs"))}catch(R){g=graph.getDefaultShowGraphSetting(),reportBug(R,get("showGraphs")+" "+R)}for(var n=0;n<b.length;n++){var t=b[n],h=CsvType.getObjectName(t.csvType),m=CsvType[h].currency,r=t.image&&0<t.image.length?imageServer+t.image.replace(".","._SS100_."):imgCDNUrl+"no-photo-available.png",q=getAmazonRedirectByDomain(t.notificationDomainId,t.asin),u=void 0,
D="";try{var F=JSON.parse(t.metaData);u=F.tags&&F.tags.length?F.tags.join(", "):"";D=F.memo?F.memo:""}catch(R){}var M="";if(["AMAZON","NEW","USED","SALES"].includes(h)){M=Number("SALES"===h);var Q=Number("AMAZON"===h||g[CsvType.AMAZON.index]&&!M),T=Number("NEW"===h||g[CsvType.NEW.index]&&!M),ha=Number("USED"===h||g[CsvType.USED.index]&&!M),P=GraphService.getWebGraphTypeAllOff();P[CsvType.AMAZON.index]=Q;P[CsvType.NEW.index]=T;P[CsvType.USED.index]=ha;P[CsvType.SALES.index]=M;M='<div class="notification__item-graph" style="background-position-y: -18px !important;background-image: url('+
GraphService.getUrl(t.asin,t.notificationDomainId,800,150,P,90)+');"></div>'}T="";Q='<i class="fa fa-circle" style="color:'+CsvType.getObject(t.csvType).color+';"></i>';m?(null!=t.currentPrices&&(h=Money.format(t.currentPrices[t.csvType],{sourceDomainId:t.notificationDomainId,targetDomainId:t.notificationDomainId}),m="",0!=t.coupon&&(m="&ensp;(&#x2705; "+(0>t.coupon?Math.abs(t.coupon)+"%":""+Money.format(t.coupon,{sourceDomainId:t.notificationDomainId,targetDomainId:t.notificationDomainId}))+" Coupon)"),
T=la._522+":&emsp;<span>"+Q+" "+CsvType.getName(t.csvType)+"</span>\n\t\t\t\t\t\t\t\t<span> - "+la._531+": "+(-1==t.currentPrices[t.csvType]?la._134:h)+m+"</span>",t.offerSellerName&&t.offerSellerId&&t.csvType!==CsvType.AMAZON.index&&(T+="<span> - "+la._554+":  "+SellerUtil.getHtml(t.offerSellerId,t.domainId,t.offerSellerName,t.offerRating)+"</span>")),h=la._523+":&emsp;<span>"+NotificationCause.getName(t.trackingNotificationCause)+"</span>"):(null!=t.currentPrices&&(h=CsvType.format(h,t.currentPrices[t.csvType],
t.notificationDomainId),T=la._862+":&emsp;<span>"+Q+" "+CsvType.getName(t.csvType)+"</span>\n\t\t\t\t\t\t\t\t<span> ("+la._863+": "+(-1==t.currentPrices[t.csvType]?la._134:h)+")</span>"),h=la._523+":&emsp;<span>"+NotificationCause.getName(t.trackingNotificationCause,!1)+"</span>");d+='<div class="notification__item flex">\n\t\t\t\t\t\t<div class="notification__item-image"><img src="'+r+'"></div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class="manage-productTitle"><a href="#!product/'+t.notificationDomainId+
"-"+t.asin+'">'+t.title+"</a></div>\n\t\t\t\t\t\t\t<div>"+la._520+":&emsp;<span>"+(new Date(6E4*(t.createDate+offsetMinutes))).formatDate("M j, Y H:i")+"</span><span> ("+prettyDate(Date.now()/6E4-(t.createDate+offsetMinutes))+")</span></div>\n\t\t\t\t\t\t\t<div>"+la._521+':&emsp;<a href="'+q+'" title="'+la._99+' Amazon" target="_blank" class="external">Amazon.'+getTldByDomain(t.notificationDomainId)+'&emsp;<i class="fa fa-external-link"></i></a></div>\n\t\t\t\t\t\t\t'+(null==t.currentPrices?"":"<div>"+
T+"</div>")+"\n\t\t\t\t\t\t\t<div>"+h+"</div>\n\t\t\t\t\t\t\t"+(D?"<div>"+la._808+":&emsp;<span>"+D+"</span></div>":"")+"\n\t\t\t\t\t\t\t"+(u?"<div>"+la._807+":&emsp;<span>"+u+"</span></div>":"")+"\n\t\t\t\t\t\t\t<div>"+la._524+":&emsp;<span>"+(null==t.sentNotificationVia?"not notified":NotificationType.getNotifiedViaText(t.sentNotificationVia))+"</span></div>\n\t\t\t\t\t\t\t"+M+"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>"}}else d='<p class="mdc-typography--body2">'+la._947+"</p>";replaceHtml("notificationContent",
'<div id="notificationsBox">\n\t\t\t\t\t'+d+"\n\t\t\t\t</div>")}).fail(function(){replaceHtml("notificationContent","<div>"+la._error+"</div>")})}
function generateAddon(){document.title=docTitlePrefix+la._32;var a="233639719";3==storage.language&&(a="233639692");insertPage('<div class="block block--elevated block--mdc-typography block--no-margin-collapse mdc-elevation--z3">\n\t\t\t<h3 class="mdc-typography--subtitle1">'+la._32+'</h3>\n\t\t\t<p class="mdc-typography--body2">'+la._290+'</p>\n\t\t\t<div id="browserAddons" style="text-align: center">\n\t\t\t\t<a href="https://addons.mozilla.org/firefox/addon/keepa/" title="Goto Mozilla Add-ons"><img src="'+imgCDNUrl+
'firefox_128x128.png" style="height: 64px; width: 64px;" /></a>&emsp;&emsp;\n\t\t\t\t<a href="https://chrome.google.com/webstore/detail/neebplgakaahbhdphmkckjjcegoiijjo" title="Goto Chrome Web Store"><img src="'+imgCDNUrl+'chrome_128x128.png" style="height: 64px; width: 64px;" /></a>&emsp;&emsp;\n\t\t\t\t<a id="opera" href="#!" title="Our Chrome extension is compatible with Opera"><img src="'+imgCDNUrl+'opera_128x128.png" style="height: 64px; width: 64px;" /></a>&emsp;&emsp;\n\t\t\t\t<a href="https://microsoftedge.microsoft.com/addons/detail/ejefaeioamebhekmfaclajddbpnnobje" title="Install on Edge for Windows 10"><img src="'+
imgCDNUrl+'edgechromium_128x128.png" style="height: 64px; width: 64px;" /></a>&emsp;&emsp;\n\t\t\t\t<a href="https://apps.apple.com/us/app/id1533805339" title="Install on Safari 14"><img src="'+imgCDNUrl+'safari_128x128.png" style="height: 64px; width: 64px;" /></a>&emsp;&emsp;\n\t\t\t</div>\n\t\t\t<p class="mdc-typography--body2">'+la._291+'</p>\n\t\t\t<div style="padding: 16px 0;">\n\t\t\t\t<iframe src="https://player.vimeo.com/video/'+a+'" width="818" height="460" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\n\t\t\t</div>\n\t\t</div>');
$("#browserAddons").children().each(function(b,d){return $(d).colorTip({color:"black"})});$("#opera").on("click",function(b){showPopup("How to use Keepa in Opera",'Our extension is not available on the Opera add-ons website. How to get it: <br><br>1. Install the <a target="_blank" href="https://addons.opera.com/en/extensions/details/download-chrome-extension-9/?display=en">Download Chrome Extension</a> add-on<br>2. Install our <a target="_blank" href="https://chrome.google.com/webstore/detail/neebplgakaahbhdphmkckjjcegoiijjo">Chrome extension</a>',
!0);return!1})}
function generateApp(){document.title=docTitlePrefix+" "+la._35;var a=getAppLinksAndBadges();insertPage('<div class="block block--elevated block--mdc-typography block--no-margin-collapse mdc-elevation--z3">\n\t\t\t<h3 class="mdc-typography--subtitle1">'+la._35+'</h3>\n\t\t\t<p class="mdc-typography--body2">'+la._36+'</p>\n\t\t\t<div class="app-store-icons">\n\t\t\t\t<a class="app-store--android" href="'+a.linkGooglePlay+'" target="_blank">'+a.badgeGooglePlay+'</a>\n\t\t\t\t<a class="app-store--ios" href="'+a.linkAppStore+
'" target="_blank">'+a.badgeAppStore+'</a>\n\t\t\t</div>\n\t\t\t<p class="mdc-typography--body2">&rarr; '+la._929+' &larr;</p>\n\t\t\t<p class="mdc-typography--body2">'+la._930+'</p>\n\t\t\t<p class="mdc-typography--body2">\n\t\t\t\t\u271c\u2003'+la._931+"<br>\n\t\t\t\t\u271c\u2003"+la._934+"<br>\n\t\t\t\t\u271c\u2003"+la._932+"<br>\n\t\t\t\t\u271c\u2003"+la._933+"<br>\n\t\t\t\t\u271c\u2003"+la._935+'\n\t\t\t</p>\n\t\t\t<div class="app-store-screens">\n\t\t\t\t<img alt="Product overview" src="'+imgCDNUrl+
'app-store/en-product-overview.png" /> \n\t\t\t\t<img alt="Search" src="'+imgCDNUrl+'app-store/en-search.png" /> \n\t\t\t\t<img alt="Product details" src="'+imgCDNUrl+'app-store/en-product-details.png" /> \n\t\t\t\t<img alt="Product current prices and averages" src="'+imgCDNUrl+'app-store/en-product-stats.png" /> \n\t\t\t\t<img alt="Dashboard" src="'+imgCDNUrl+'app-store/en-dashboard.png" /> \n\t\t\t\t<img alt="Push notification" src="'+imgCDNUrl+'app-store/en-push.png" /> \n\t\t\t</div>\n\t\t</div>');
isMobile||$(".app-store-screens img").each(function(b,d){ProductImageHover.preview.add_events(d,d.src)})}
function generateImageAPI(){document.title=docTitlePrefix+la._294;var a=GraphService.getShareUrl(" B001GZ6QEC B001CEE1WG B001G73S50 B001DJF26E B003GQSYCG B001HBAPC4 B00CMMTVJ0 B0041KW5W6 B0053CAB9A B00CSS90ZI B00KWF366S".split(" ")[storage.domain],getDomainByTld(tld));insertPage('<div class="block block--mdc-typography paper appsContent">\n\t\t\t<h3 class="mdc-typography--subtitle1">Image API</h3>\n\t\t\t<p class="mdc-typography--body2">'+la._295+'</p>\n\t\t\t<p class="mdc-typography--body2 mdc-typography--bold">\n\t\t\t\t'+
la._902+'\n\t\t\t</p>\n\t\t\t<ul class="mdc-typography--body2 mdc-typography--bold">\n\t\t\t\t<li>'+la._903+"</li>\n\t\t\t\t<li>"+la._904+"</li>\n\t\t\t\t<li>"+la._905+'</li>\n\t\t\t</ul>\n\t\t\t<p class="mdc-typography--body2">'+la._296+'</p>\n\t\t\t<div style="text-align: center;">\n\t\t\t\t<img id="priceChartImageExample" src="'+a+'" />\n\t\t\t</div>\n\t\t\t<p class="mdc-typography--body2">'+la._298+'</p>\n\t\t\t<input class="selectable" id="shareChartInput" style="display: inline-block; margin-bottom: 20px;" type="text" rel="site" autocomplete="off" class="site" role="textbox" readonly="readonly">\n\t\t\t<p class="mdc-typography--body2">'+
la._299+'</p>\n\t\t\t<hr style="border-color:mediumSeaGreen !important">\n\t\t<p class="mdc-typography--body2">'+(la._300+'</p>\n\t\t<table id="explanationTable" style="font-size: 12px; width: 710px; margin: 10px 0 0 25px">\n\t\t\t<tr>\n\t\t\t\t<td colspan="2"><span class="chartUrlPart" style="color:#009000">'+la._301+'</span></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td style="width: 60px;"><i>asin</i></td>\n\t\t\t\t<td>'+la._302+"</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><i>domain</i></td>\n\t\t\t\t<td>"+
la._303+'</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>&nbsp;</td>\n\t\t\t\t<td>&nbsp;</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td colspan="2"><span class="chartUrlPart" style="color:#009000">'+la._304+"</span></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><i>width</i></td>\n\t\t\t\t<td>"+la._305+"</span></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><i>height</i></td>\n\t\t\t\t<td>"+la._306+"</span></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><i>amazon</i></td>\n\t\t\t\t<td>"+la._307+"</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><i>new</i></td>\n\t\t\t\t<td>"+
la._308+"</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><i>used</i></td>\n\t\t\t\t<td>"+la._309+"</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><i>salesrank</i></td>\n\t\t\t\t<td>"+la._309_2+"</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><i>range</i></td>\n\t\t\t\t<td>"+la._310+'</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>&nbsp;</td>\n\t\t\t\t<td>&nbsp;</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td colspan="2"><span class="chartUrlPart" style="color:#009000">'+la._346+'</span></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td colspan="2">'+
la._345+'</td>\n\t\t\t</tr>\n\t\t</table>\n\t\t<p class="mdc-typography--body2">'+la._311+'</p>\n\t\t<p class="mdc-typography--body2" style="color: green;">\n\t\t\t<span class="chartUrlPart">'+graphBaseUrl+graphBaseFileName+'?</span> + <span class="chartUrlPart">parameterName=value</span> + <span class="chartUrlPart">&additionalParameterName=value</span> + <span class="chartUrlPart">&hellip;</span>\n\t\t</p>\n\t\t<p class="mdc-typography--body2">'+la._312+'</p>\n\t\t<p class="mdc-typography--body2">\n\t\t\t<a style="font-size:12px" target="_blank" href="'+
a+'&width=800&height=250&amazon=1&new=1&used=1&salesrank=1&range=31&cBackground=000000&cFont=cdcdcd&cAmazon=ffba63&cNew=8888dd&cUsed=ffffff">'+a+"&width=800&height=250&amazon=1&new=1&used=1&range=31<br>&salesrank=1&cBackground=000000&cFont=cdcdcd&cAmazon=ffba63&cNew=8888dd&cUsed=ffffff</a>\n\t\t</p>\n\t\t</div>"));$("#contentAlign").css({minWidth:"650px",maxWidth:"850px",marginRight:"5%",marginLeft:"5%",position:"relative"});$("#shareChartInput").val(a);$("#shareChartInput").click(function(){$(this).select()})}
function generatePriceDataAPI(){document.title=docTitlePrefix+"API";$("#contentAlign").css({minWidth:"650px",maxWidth:"850px",marginRight:"5%",marginLeft:"5%",position:"relative"});isAWS||storage.email&&0<storage.email.indexOf("@amazon.")?($(".menuDataAPI").hide(),insertPage(""),window.location.hash="#!"):priceDataAPI.init()}
var infoQuotaGeneral='Your <b>subscription based</b> Data access is governed by an hourly quota:\n\t<ul style="list-style: none;line-height:19px;text-indent:-1.8em;padding-left: 1.8em;">\n\t\t<li>&emsp;-&ensp;When making data requests your available quota will slowly decrease.</li>\n\t\t<li>&emsp;-&ensp;Quota is restored by 5% per hour until it reaches 100%.</li>\n\t\t<li>&emsp;-&ensp;Once your quota is depleted you will not be able to request new data until it is replenished.</li>\n\t\t<li>&emsp;-&ensp;Requesting the same data again within an hour will not decrease your quota.</li>\n\t\t<li>&emsp;<b>-&ensp;Viewing our interactive price and Sales Rank graphs will not decrease your quota.</b></li>\n\t\t<li>&emsp;-&ensp;Your daily quota will allow you, for example, to import and export up to 24,000 products <br>via the Product Viewer each day.</li>\n\t\t<li>&emsp;-&ensp;The quota system is in place to prevent abuse.</li>\n\t\t<li>&emsp;-&ensp;You can provide feedback through our comment section or via info@keepa.com.</li>\n\t</ul>\n\t<p><br>More details: <a href="https://discuss.keepa.com/t/data-features-access-free-vs-monthly-subscription/5845" class="href" target="_blank">Data Features Access - Free vs. Monthly Subscription</a></p>',quotaLastedFor=
"Your remaining quota lasted for ~ #count# #type# which will be displayed.",quotaExceeded="";
function generateData(){if(7!=storage.domain){var a=function(b,d,g,n){var t='<a href="'+n+'">',h="</a>";n||(t=h="");return'<section>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h6 class="mdc-typography--headline6">'+t+b+h+'</h6>\t\t\t\t\t\t\n\t\t\t\t\t\t<p class="mdc-typography--body2">'+d+"</p>\n\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t<div>\n\t\t\t\t\t\t"+t+'<img srcset="'+imgCDNUrl+"data/"+g+"_1x.jpg 1x, "+imgCDNUrl+"data/"+g+'_2x.jpg 2x" src="'+imgCDNUrl+"data/"+g+'_1x.jpg" alt="'+b+'" />'+h+"\t\n\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t</section>"};
a=(0==storage.accountType?'<div class="mdc-elevation--z3 block block--elevated block--data">\n\t\t\t\t<p class="mdc-typography--body2">'+la._925+'</p>\n\t\t\t\t<p class="mdc-typography--body2">\n\t\t\t\t\t<button class="mdc-button mdc-button--raised" id="openLogin"><i class="fa fa-shopping-bag" ></i>&ensp; '+la._927+"</button>\n\t\t\t\t</p>\n\t\t\t</div>":"")+(0==storage.accountType||hasDataAccessSubscription?"":'<div class="mdc-elevation--z3 block block--elevated block--data">\n                <p class="mdc-typography--body2">'+
la._744+"<br>"+la._973+" "+la._974+'</p>\n\t\t\t\t<p class="mdc-typography--body2">\n\t\t\t\t\t<button class="mdc-button mdc-button--raised" id="openSubscription"><i class="fa fa-shopping-bag" ></i>&ensp; '+la._928+"</button>\n\t\t\t\t</p>\n\t\t\t</div>")+'\n\t\t\t<div class="mdc-elevation--z3 block block--elevated block--data">\n\t\t\t\t'+a(la._734,la._735+"<br>"+la._961,"finder","#!finder")+"\n\t\t\t\t"+a(la._738,la._739,"viewer","#!viewer")+"\n\t\t\t\t"+a(la._962,la._963,"bestseller","#!bestseller")+
"\n\t\t\t\t"+a(la._964,la._965,"topseller","#!topseller")+"\n\t\t\t\t"+a(la._966,la._967,"categorytree","#!categorytree")+"\n\t\t\t\t"+a(la._968,"- "+la._969+"<br>- "+la._970+"<br>- "+la._971+"<br>- "+la._972,"datatab_v2")+"\n\t\t\t\t"+a(la._742,la._743,"tracking")+"\n\t\t\t\t\n\t\t\t</div>";insertPage(a);$("#openLogin").on("click",function(){$("#loginOverlay").show()});$("#openSubscription").on("click",function(){window.open("https://keeepa.amztoolz.com/#!settings/1")});isMobile||$("#bodyPanel img").each(function(b,
d){ProductImageHover.preview.add_events(d,d.src.replace("1x.","2x."))})}else document.location.hash=""}function generateFinder(a){7!=storage.domain?0==storage.accountType?document.location.hash="#!data":GridFinder.init(a):document.location.hash=""}function generateViewer(){7!=storage.domain?0==storage.accountType?document.location.hash="#!data":GridViewer.init():document.location.hash=""}
function generateBestSeller(){7!=storage.domain?0==storage.accountType?document.location.hash="#!data":GridBestSeller.init():document.location.hash=""}
function generateSeller(){if(7!=storage.domain)if(0==storage.accountType)document.location.hash="#!data";else{document.title=docTitlePrefix+" Seller Overview";insertPage('<h1 id="sellerName" class="headline hPink" style="padding-top: 0px;">Seller Overview</h1><div class="paper" style="min-width: 880px;"><div id="sellerPage"><div id="loadingIcon" style="text-align:center"></div></div></div>');$("#loadingIcon").show();$("#contentAlign").css({minWidth:"650px",maxWidth:"98%",marginRight:"2%",marginLeft:"2%",
position:"relative"});var a=function(){$("#sellerPage").parent().html('<div style="padding: 17px;">You can look up seller information through the <a href="#!topseller">top seller list</a>.</div>')},b=lastSubUrl.split("-");if(2!==b.length)a();else{var d=b[0];b=b[1];(b=b.match(verifyRegExp.sellerId))?(b=b[1],Seller.init(d,b)):a()}}else document.location.hash=""}
function generateTopSeller(){7!=storage.domain?0==storage.accountType?document.location.hash="#!data":GridTopSeller.init():document.location.hash=""}function generateCategoryTree(){7!=storage.domain?0==storage.accountType?document.location.hash="#!data":GridCategoryTree.init():document.location.hash=""}
function setupQuotaWidget(a){var b="#!bestseller #!categorytree #!data #!finder #!seller #!topseller #!viewer".split(" "),d=window.location.hash.split("/")[0],g=$("#widget__bucket_quota");if(0!=storage.accountType&&(a||b.includes(d)))if(0==g.length){a?$("#more").prepend('<div id="widget__bucket_quota" class="widget__bucket-quota">\n\t\t\t\t<span class="bucket-quota__caption mdc-typography--caption">Quota left: <span>0%</span></span>\n\t\t\t\t<div class="bucket-quota__wrapper mdc-elevation--z1"><div class="bucket-quota__tracker" style="width:0%;"></div></div>\n\t\t\t</div>'):
$("#subPanel").after('<div id="widget__bucket_quota" class="widget__bucket-quota">\n\t\t\t\t<span class="bucket-quota__caption mdc-typography--caption">Quota left: <span>0%</span></span>\n\t\t\t\t<div class="bucket-quota__wrapper mdc-elevation--z1"><div class="bucket-quota__tracker" style="width:0%;"></div></div>\n\t\t\t</div>');var n=0;getBucketInformation().done(function(t){"undefined"!=typeof t.tokenBucketSize&&(n=t.tokenBucketSize)});g=$("#widget__bucket_quota");g.on("click",function(){var t=
'Full Data access requires a <a href="https://keeepa.amztoolz.com/#!settings/1"'+(iframe.isIframe?' target="_blank"':"")+">subscription</a>. Until you subscribe your access to Data features is very limited, but you can test all services provided.<br><br>";showPopup("Data Access Quota",5E3<n?"Thank you for using our Data features!<br><br>"+infoQuotaGeneral:t+infoQuotaGeneral,!0)})}else a?$("#more").prepend(g):$("#subPanel").after(g),getBucketInformation();else 0<g.length&&g.remove()}
function updateQuotaWidget(a){if(0!=storage.accountType){quotaExceeded="undefined"!=typeof a.tokenBucketSize&&5E3<a.tokenBucketSize?'You have exceeded your data quota.<br>\n\t\t\t\t\t\tPlease wait until it is refilled or <a href="#" class="link--data-update">upgrade here</a>.':'Your <b>free trial quota</b> for the Data features is now depleted.<br>To fully enjoy all aspects of the Data features please get a <a href="https://keeepa.amztoolz.com/#!settings/1"'+(iframe.isIframe?' target="_blank"':"")+">monthly subscription</a>.\n\t\t\t\t\t\t<br>More information about the <b>subscription based</b> data quota can be obtained by clicking on the quota indicator.";
var b=2E4<a.tokenBucketSize,d=b?2E4:a.tokenBucketSize;d=0<a.tokenBucketSize&&0<a.tokens?100*a.tokens/d:0;var g=NumberUtil.format(d),n=$("#widget__bucket_quota");if(0<n.length){n.addClass("updating");var t=n.find(".bucket-quota__caption"),h=n.find(".bucket-quota__tracker");t.addClass("updating").text("Quota left: "+g+"%");h.width((100<d?100:g)+"%");setTimeout(function(){n.removeClass("updating")},2E3);d="";5E3<a.tokenBucketSize&&(a=a.tokenBucketSize/2E4,d=b?a+" active Data subscriptions\nTotal quota size: "+
100*a+"%":"1 active Data subscription");d&&$(".bucket-quota__caption").prop("title",d)}}}
function generateFeatures(){document.title=docTitlePrefix+la._152;insertPage('<span class="paper">\n\t\t\t<ul style="list-style:none;line-height:19px;padding-left: 1.8em;text-indent:-1.8em;">\n\t\t\t\t<li>&#x271C;&emsp;'+la._30+"</li>\n\t\t\t\t<li>&#x271C;&emsp;"+la._31+"</li>\n\t\t\t\t<li>&#x271C;&emsp;"+la._32_2+"</li>\n\t\t\t\t<li>&#x271C;&emsp;"+la._315+"</li>\n\t\t\t\t<li>&#x271C;&emsp;"+la._186+" [ .com | .co.uk | .de | .co.jp | .fr | .ca | .it | .es | .in | .com.mx | .com.br ]</li>\n\t\t\t\t<li>&#x271C;&emsp;"+la._187+
"</li>\n\t\t\t\t<li>&#x271C;&emsp;"+la._188+"</li>\n\t\t\t\t<li>&#x271C;&emsp;"+la._33+"</li>\n\t\t\t</ul>\n\t\t\t<br><br>\n\t\t\t"+la._189+'\n\t\t\t<div id="productCountEntries"></div>\n\t\t</span>');$("#contentAlign").css({minWidth:"650px",maxWidth:"850px",marginRight:"5%",marginLeft:"5%",position:"relative"});var a,b=function(){window_focus&&"#!features"==lastHash&&network.request({path:"service/features",type:"website"}).done(function(d){if(0!=parseInt(d)){var g=$("#productCount");0==g.length&&
clearInterval(a);var n="",t=0;d=d.data;d=d.productCount;for(var h=[7,13],m=1;m<numberOfDomains;m++)-1<h.indexOf(m)||(t+=d[m],n+='<span title="Amazon.'+getTldByDomain(m)+'" style="display:inline-block;white-space:nowrap">\n\t\t\t\t\t\t\t<img style="margin-bottom:-1px;" src="'+flags[m]+'">\n\t\t\t\t\t\t\t&nbsp;'+NumberUtil.format(d[m])+"&emsp;&emsp;\n\t\t\t\t\t\t</span>");g.text(NumberUtil.format(t));$("#productCountEntries").html('<div style="line-height:25px;margin-top:10px;text-align:center;">'+
n+"</div>");a=setTimeout(b,2E3)}})};b()}function generateExtGuest(){insertPage('<div class="paper block block--mdc-typography"><h6 class="mdc-typography--subtitle1">'+(la._27+'</h6>\n\t\t\t\t<p class="mdc-typography--body2">'+la._991+'</p>\n\t\t\t\t<p class="mdc-typography--caption">'+la._901+"</p></div>"))}
function generateFAQ(){document.title=docTitlePrefix+"FAQ";for(var a="",b=$jscomp.makeIterator([[la._319,la._320],[la._321,la._322],[la._323,la._324],[la._325,la._326],[la._327,la._328],[la._329,la._330],[la._331,la._332],[la._333,la._334],[la._335,la._336],[la._339,la._340]]),d=b.next();!d.done;d=b.next())d=d.value,a+='<li class="mdc-list-item">\n                <span class=""mdc-list-item__text">\n                  '+d[0]+'\n                  <span class="mdc-list-item__secondary-text" style="white-space:normal;">'+
d[1]+"</span>\n                </span>\n              </li>";insertPage('<span class="paper" style="width: 800px;">\n        <ul id="faqList" class="mdc-list mdc-list--two-line mdc-list--variable-line mdc-list--dense">\n                 '+a+"\n                </ul>\n        </span>");$("#contentAlign").css({minWidth:"650px",maxWidth:"850px",marginRight:"5%",marginLeft:"5%",position:"relative"})}
function generateNews(){if(!isTest){var a=-1==location.hash.indexOf("news");a||(document.title=docTitlePrefix+la._25);insertPage('<h1 class="headline '+(a?"hGrey":"hOrange")+'">'+la._25+'</h1><div id="newsContainer"></div><div class="unselectable" style="line-height:40px;">&nbsp;</div>');replaceHtml("newsContainer",'<div id="ds-content"><div id="ds-content-main" class="ds-main" role="main"></div><div id="ds-content-sub" class="ds-sub ds-sidebar ds-widgets" role="complementary"><aside id="ds-text-3" class="ds-widget ds-widget_text"></aside></div></div>');
(function(b){discourseApi.category("announcements",function(d){if(d){for(var g=d.topic_list.topics.length,n={},t=0;t<g;t++)n[(new Date(d.topic_list.topics[t].created_at)).getTime()]=d.topic_list.topics[t];d=Object.keys(n).sort().reverse();g={};for(t=0;t<d.length&&8>t;g={$jscomp$loop$prop$hasNavigated$789:g.$jscomp$loop$prop$hasNavigated$789},t++){var h=n[d[t]],m=discourseBaseUrl+"/t/"+h.slug+"/"+h.id;document.getElementById("ds-content-main").innerHTML+='<article id="'+h.id+'" class="ds-post"><header class="ds-entry-header"><a href="'+
m+'"><span>'+h.title+'</span><span class="ds-post-date">'+(new Date(h.created_at)).formatDate("M j, Y")+"</span>&emsp;</a></header>";g.$jscomp$loop$prop$hasNavigated$789=!1;onPageNavigation.progress(function(r){return function(){r.$jscomp$loop$prop$hasNavigated$789=!0}}(g));discourseApi.topic(h.id,function(r){return function(q){if(!r.$jscomp$loop$prop$hasNavigated$789)try{if(q){var u=discourseBaseUrl+"/t/"+q.slug+"/"+q.id,D=q.posts_count-1,F=(discourseUrl+q.post_stream.posts[0].avatar_template).replace("{size}",
"45"),M=discourseBaseUrl+"/users/"+q.post_stream.posts[0].username,Q=q.post_stream.posts[0].username;q.post_stream.posts[0].name&&(Q=q.post_stream.posts[0].name);b&&(document.getElementById(q.id).firstChild.innerHTML+='<address class="ds-vcard"><cite class="ds-author ds-fn"><a class="ds-url" href="'+M+'"><img class="ds-avatar ds-avatar-24 ds-photo" width="26" height="26" src="'+F+'" alt="" />'+Q+"</a></cite></address>");var T=q.post_stream.posts[0].cooked;T=T.replace(/src="\/uploads/g,'src="//discuss.keepa.com/uploads');
F='<div class="ds-entry-content">'+T+"</div>";F+='<footer class="ds-entry-meta"><span class="ds-entry-meta-box"><span ><a href="'+u+'/2">'+D+"&ensp;<span>replies</span></a></span>&emsp;<span>"+q.views+"&ensp;<span>views</span>&emsp;</span><span>"+q.like_count+'&ensp;<span class="likes">likes</span></span></span></footer></article>';document.getElementById(q.id).innerHTML+=F}}catch(ha){console.log(ha)}}}(g))}document.getElementById("ds-content-main").innerHTML+='<nav class="ds-nav-paging"><ul><li class="prev"><a href="'+
discourseBaseUrl+'/c/announcements">All posts</a></li></ul></nav>'}})})(!1);$("#contentAlign").css({minWidth:"750px",maxWidth:"850px",marginRight:"5%",marginLeft:"5%",position:"relative"})}}
function generateDisclaimer(){document.title=docTitlePrefix+la._26;var a="";3!=storage.language&&(a=" - Germany");a='<div class="paper block block--mdc-typography">\n\t\t\t<h3 class="mdc-typography--subtitle1">'+la._165+'</h3>\n\t\t\t<p class="mdc-typography--body2">'+la._166+'</p>\n\t\t\t<h3 class="mdc-typography--subtitle1">'+la._168+'</h3>\n\t\t\t<p class="mdc-typography--body2">'+la._169+'</p>\n\t\t\t<h3 class="mdc-typography--subtitle1">'+la._26+'</h3>\n\t\t\t<p class="mdc-typography--body2">'+
la._150+'</p>\n\t\t\t<h3 class="mdc-typography--subtitle1" style="font-weight:bold;">'+la._900+'</h3>\n\t\t\t<p class="mdc-typography--body2" style="font-weight:bold;">'+la._901+'</p>\n\t\t\t<h3 class="mdc-typography--subtitle1">'+la._170+'</h3>\n\t\t\t<p class="mdc-typography--body2">\n\t\t\t\tKeepa GmbH<br>\n\t\t\t\tBerndorfer Str. 10<br>\n\t\t\t\t95478 Kemnath'+a+'<br><br>\n\t\t\t\tAmtsgericht Weiden i.d.OPf. HRB 5942<br>\n\t\t\t\tGesch\u00e4ftsf\u00fchrer: Julian Johann, Sascha Arthur<br>\n\t\t\t\tUSt-IdNr. (VAT-ID): DE313904564<br><br>\n\t\t\t\t<span style="font-weight:bold;">'+
la._5+': <a class="href" href="mailto:info@keepa.com?subject=Question about Keepa" target="_blank">info@keepa.com</a></span>\t\t\t\n\t\t\t</p>\n\t\t\t<p class="mdc-typography--body2">'+la._171+'</p>\n\t\t\t<div style="width: 50%;">\n\t\t\t\t<div contenteditable="true" style="white-space: normal;" id="contactForm" type="text">'+la._172+'</div>\n\t\t\t\t<br>\n\t\t\t\t<span class="mdc-button mdc-button--raised" id="sendcontact">'+la._225+'</span>\n\t\t\t</div>\n\t\t\t<p class="mdc-typography--body2">\t\n\t\t\t\t&copy; 2011-'+
(new Date).getFullYear()+" "+getLogoSVG(60)+'<span style="font-size: 15px;">&reg;</span><br>\n\t\t\t\t<a class="gcblink" href="https://keeepa.amztoolz.com/_cdn/Keepa_Logo.zip">Keepa_Logo.zip</a>\n\t\t\t</p>\n\t\t</div>';insertPage(a);var b=!1;$("#sendcontact").click(function(d){d.preventDefault();if(b||$("#contactForm").html()==la._172)return!1;b=!0;$("#sendcontact").val(la._45);d=getDebugInfos();network.ajax({url:"service/feedback/?type=sendFeedback&user="+storage.token,type:"POST",data:{message:$("#contactForm").html()+
"<br><br>DEBUG: <br>"+d[0]+"<br><br>"+d[1]+"<br><br>"+d[2]+"<br><br>"+(new Date).toLocaleString()},dataType:"json"},!0).always(function(g){b=!1;$("#sendcontact").parent().html(la._190)})});$("#contentAlign").css({minWidth:"650px",maxWidth:"850px",marginRight:"5%",marginLeft:"5%",position:"relative"})}var iframeTimeout=-1;
function generateDiscuss(){document.title=docTitlePrefix+"Forum";insertPage("");$("#content").prepend(window.loader(1,0));$("#contentAlign").css("position","");var a=document.createElement("div");a.setAttribute("style","width: 100%; height: 85%; display:none; height: calc(100% - 80px);  border:0 none; position: absolute;top: 80px;left: 0px;");a.setAttribute("id","discussContainer");var b=document.createElement("iframe");b.setAttribute("style","width: 100%; height: 100%; border:0 none;");var d=location.hash.indexOf("/"),
g=lastHash.substr(d+1);0<d&&(""==g||"/"==g)&&(d=-1);b.setAttribute("src","//discuss.keepa.com/"+(-1<d?g:2==storage.accountType&&settings.isEmailVerified?"login":""));b.setAttribute("scrolling","yes");b.setAttribute("id","discussiFrame");b.onload=function(n){iframeTimeout=setTimeout(function(){0<$(".pL").length&&"#!discuss"==lastUrl&&($(".pL").remove(),insertPage('<h1 class="headline hGrey" style="padding-top: 0;">'+la._24+'</h1><span class="paper" style="width: 800px;">Our discussion forums are currently down for maintenance. If you want to contact us or report any issues, please do not hesitate to write us an email to info@keepa.com.</span>'))},
2E4)};a.appendChild(b);$("#bodyPanel")[0].appendChild(a)}function updateDiscuss(){var a=location.hash.indexOf("/"),b=lastHash.substr(a+1);0<a&&(""==b||"/"==b)&&(a=-1);a=-1<a?b:2==storage.accountType&&settings.isEmailVerified?"login":"";$("#discussiFrame").attr("src","//discuss.keepa.com/"+a)}function generateSearch(){document.title=docTitlePrefix+la._19;insertPage('<div id="searchPage">'+la._176+'</div>\n\t\t<div id="searchPageContinue"></div>');searchUpdate()}
function generateProduct(){""!=$("#bodyPanel").html()&&0==$("#detailProductPage").length&&0==$("#startPage").length?($("#productOverlay").append('<div id="detailProductPage" class="detailProductPage shadow">\n\t\t\t<table id="productTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td id="productTableImageBox">\n\t\t\t\t\t\t<div id="productTableImageBoxThumbs"></div>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td style="vertical-align: top;">\n\t\t\t\t\t\t<div id="productTableImageBoxMain"></div>\n\t\t\t\t\t\t<div id="productTableDescription"><div id="loadingIcon" style="display: block; text-align: center; clear: both; margin-top: 100px;"></div></div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>').css({opacity:1,
display:"block"}),$("#overlayShadow").show(),$(document).on("click.overlay",function(a){(a.srcelement?a.srcelement:a.target)==document.getElementById("overlayShadow")&&closeProductOverlay()}),$(document).on("keydown.escape.overlay",function(a){"Escape"==a.key&&closeProductOverlay()})):(insertPage('<div id="detailProductPage" class="detailProductPage shadow">\n\t\t\t<table id="productTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td id="productTableImageBox">\n\t\t\t\t\t\t<div id="productTableImageBoxThumbs"></div>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td style="vertical-align: top;">\n\t\t\t\t\t\t<div id="productTableImageBoxMain"></div>\n\t\t\t\t\t\t<div id="productTableDescription"><div id="loadingIcon" style="display: block; text-align: center; clear: both; margin-top: 100px;"></div></div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div><div class="unselectable" style="line-height:50px;">&nbsp;</div>'),
$("#contentAlign").css({maxWidth:"",width:"98%",marginRight:"auto",marginLeft:"auto",position:"relative",minWidth:"850px"}));productUpdate()}
function generateSettings(){document.title=docTitlePrefix+la._8;var a=material.getTabs({tabs:[{tab:{icon:"bell-o",id:"channels",label:la._587},panel:{id:"notification-channels"},isActive:!0},{tab:{icon:"unlock",id:"subscriptions",label:la._647},panel:{id:"subscriptions-tab"}},{tab:{icon:"user-circle",id:"account",label:la._516},panel:{id:"settingsBox"}},{tab:{icon:"cog",id:"website",label:la._517},panel:{id:"settingsContent"}}],panelsClass:"appsContent"});insertPage('<div id="settingsPage"><div class="paper" style="width: 900px">'+
a+'</div></div><div class="unselectable" style="line-height:50px;">&nbsp;</div>');SettingsPage.init()}
function generateVerifyEmail(){document.title=docTitlePrefix+la._358;insertPage('<h1 class="headline hOrange" style="padding-top: 0px;">'+la._24+'</h1><div id="disqus_thread" style="display:none" class="shadow"></div><div class="unselectable" style="line-height:50px;">&nbsp;</div><div id="loadingIcon" style="text-align:center"></div>');$("#loadingIcon").show();$("#contentAlign").css({minWidth:"650px",maxWidth:"850px",marginRight:"5%",marginLeft:"5%",position:"relative"});var a=function(g){$("#loadingIcon").hide();
insertPage('<h1 class="headline hBlue">'+la._358+'</h1><span class="paper">'+g+"</span><br/><br/>");$("#contentAlign").css({minWidth:"650px",maxWidth:"850px",marginRight:"5%",marginLeft:"5%",position:"relative"})};if(isNewPage){var b=lastSubUrl;switch(b){case "IS_VERIFIED":var d=la._359;break;case "WAS_VERIFIED":d=la._360;break;default:d=la._error,reportBug(null,"verify failed: "+b)}a(d)}else b=lastSubUrl,64!=b.length?(a("The verify token is missing from the URL or incomplete. Please try to select, copy and paste the whole link from the email you received instead of clicking on it. If the problem persists, contact info@keepa.com."),
reportBug(null,"verify: token missing/short "+b)):network.ajax({type:"GET",url:"user/verify/?type=verify&user="+lastSubUrl,dataType:"json"},!0).done(function(g){if(0!=parseInt(g)){switch(g.status){case 0:case 2:var n=la._359;break;case 1:n=la._360;break;case -1:case 3:n=la._error,reportBug(null,"verify failed: "+JSON.stringify(g))}a(n)}}).fail(function(){a(la._error);reportBug(null,"verify: "+textStatus+"<br>"+errorThrown)})}
function generatePWreset(){document.title=docTitlePrefix+la._373;var a='<div id="settingsPage">\n\t\t\t<h1 class="headline hGrey">'+la._373+'</h1>\n\t\t\t<div class="paper" id="settingsBox">\n\t\t\t<form action="" id="addTrackForm" method="post" name="addTrackForm">\n\t\t\t\t'+getNewPasswordHtml()+'\n\t\t\t\t<input type="submit" id="submit" value="'+la._225+'">\n\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="unselectable" style="line-height:50px;">&nbsp;</div>';insertPage(a);$("#contentAlign").css(contentAlignCss);
$("#passBox").find(".trackFormTable").width("440px");$("#passBox").find("tr").each(function(){var d=$(this).children().first(),g=d.next(),n=g.next();d.remove();g.remove();"trackFormTable-empty"==n.attr("class")&&n.remove()});$("#passBox").show();var b=!1;$("#addTrackForm").submit(function(d){d.preventDefault();if(b)return!1;b=!0;$("#submit").val(la._45);$("#newPW").val().trim()!=$("#newPW2").val().trim()?($("label[for=newPW]").append('<span class="error">'+la._236+"</span>"),b=!1,$("#submit").val(la._225)):
(d=lastSubUrl,null==d||64!=d.length?showPopup("Error","Missing reset token. Please use the reset link provided in the email. In doubt, contact info@keepa.com.",!0):network.request({path:"user/session",type:"resetpw",token:d,password:$("#newPW").val().trim()}).done(function(g){b=!1;if("undefined"===typeof g.error||null===g.error)$("#settingsBox").text(la._376);else switch("undefined"!==typeof g.error.type?g.error.type:"undefined"!==typeof g.error.code?g.error.code:-1){case 1:case "invalidPassword":$('label[for="newPW"]').find(".error").remove();
$('label[for="newPW"]').append('<span class="error">'+la._74+"</span>");$("#submit").val(la._225);break;case 2:case "invalidToken":$("#settingsBox").text(la._377);break;case 3:case "userNotFound":$("#settingsBox").text(la._912);break;default:reportBug(null,"resetpassword: "+JSON.stringify(g)),showErrorPopup()}}).fail(function(g){b=!1;replaceHtml("resetForm",'<div style="width: 420px; text-align: justify; margin-right: 30px;">'+la._error+"</div>");reportBug(null,"resetpassForm fail: "+g.status)}))})}
function getLoginForm(){var a='<form id="resetForm" class="hidden">\n\t\t\t<div style="font-size: 16px; color: #000;">'+la._373+'</div><br>\n\t\t\t<label style="width: 200px;" class="grey" for="emailReset">'+la._374+'</label>\n\t\t\t<input class="field" type="email" name="emailReset" id="emailReset">\n\t\t\t<div class="flex unselectable" style="justify-content: space-between;">\n\t\t\t\t<div id="PWresetBack" class="button submitButton bt_login" value="" style="background-color: tomato;" >\n\t\t\t\t\t'+
la._380+'\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<input id="submitPWreset" type="submit" name="submit" value="'+la._225+'" class="bt_login">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</form>';return'<div id="loginOverlay" class="hidden">\n\t\t<div id="loginOverlayBox"'+([4,5].includes(Number(storage.language))?' class="popup__login--wide"':"")+'>\n\t\t\t<div id="loginOverlay-close"><i class="fa fa-times-circle fa-2x"></i></div>\n\t\t\t<table id="loginTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<div class="flex" style="justify-content: space-around;-webkit-justify-content: space-around;">\n\t\t\t\t\t\t\t<div id="loginTab">'+
la._2+'</div>\n\t\t\t\t\t\t\t<div id="registerTab" class="inactive">'+la._42+'</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<br>\n\t\t\t\t\t\t<form id="loginForm" action="" method="post">\n\t\t\t\t\t\t\t<label class="grey" for="username">'+la._4+'</label>\n\t\t\t\t\t\t\t<input class="field" type="text" autocapitalize="off" autocorrect="off" name="username" autocomplete="username" id="username">\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<label class="grey" for="password">'+la._6+'</label>\n\t\t\t\t\t\t\t<span style="display: inline-block;"><input type="password" maxlength="1024" name="password" id="password" autocomplete="current-password" class="field">\n\t\t\t\t\t\t\t<span style="color: #555;" class="fa fa-fw fa-eye field-icon toggle-password"></span></span>\n\t\t\t\t\t\t\t<a class="settings-chpw" id="pwreset" style="display: block;font-size: smaller;text-decoration: none;padding: 5px;margin-bottom: -12px;text-align: right;">'+
la._372+'</a>\n\t\t\t\t\t\t\t<div id="registerEmailBox" class="hidden"><label class="grey" for="email">'+la._5+'</label>\n\t\t\t\t\t\t\t\t<input disabled class="field" type="text" name="email" autocomplete="email" id="emailRegister"></div>\n\t\t\t\t\t\t\t<table style="width:'+([4,5].includes(Number(storage.language))?"260px":"220px")+';" class="grey">\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td colspan="2">\n\t\t\t\t\t\t\t\t\t\t<span style="margin-top: 15px; font-size: 14px; display: block;" id="orOpenId">'+
la._161+'</span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td colspan="2" class="socialButtons">\n\t\t\t\t\t\t\t\t\t\t<i id="openIDmazon" class="fa fa-amazon" style="color:#29425a"></i>\n\t\t\t\t\t\t\t\t\t\t<i id="openIDwitter" class="fa fa-witter" style="color:#0CF"></i>\n\t\t\t\t\t\t\t\t\t\t<img id="openIDoogle" src="'+imgCDNUrl+'social/oogle.svg">\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr style="text-align:right;">\n\t\t\t\t\t\t\t\t\t<td style="text-align:left;"></td>\n\t\t\t\t\t\t\t\t\t<td style="text-align:right;"><input id="submitLogin" type="submit" name="submit" value="'+
la._2+'" class="button"/></td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t<div id="loginError" style="color: red;width: 165px;"></div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t'+a+"\n\t\t</div>\n\t</div>"}
var toggleLoginRegister=function(a){a?($("#registerEmailBox").show(),$("#emailRegister").removeAttr("disabled"),$("#orOpenId").text(la._160),$("#orOpenId").hide(),$("#pwreset").hide(),$("#submitLogin").val(la._42),$("#openIDwitter").hide(),$("#openIDoogle").hide(),$("#openIDmazon").hide(),$("#submitLogin").val(la._42),$("#pwreset").velocity({opacity:0},{duration:300})):($("#emailRegister").attr("disabled","disabled"),$("#registerEmailBox").hide(),$("#pwreset").show(),$("#orOpenId").text(la._161),
$("#orOpenId").show(),$("#submitLogin").val(la._2),$("#openIDwitter").show(),$("#openIDoogle").show(),$("#openIDmazon").show(),$("#pwreset").velocity({opacity:1},{duration:300}))};var serverTimeStamp=0,manageEndlessBusy=!1;function manage(){$("#contentAlign").css({"margin-top":"160px","min-width:":"",maxWidth:"",width:"auto","margin-right":"50px","margin-left":"50px"});loadManage(!0)}
var manageCurrentPage=0,manageData=null,manageDataSearchBackup=[],manageFilter=null,manageFilterCats=null,manageFilterDomain=null,manageFilterMerchant=null,manageFilterWishlist=null,manageFilterCondition=null,manageFilter_domain=0,manageFilter_rootcat=0,manageFilter_condition=0,manageFilter_wishlist=0,manageFilter_merchant=0,manageProductsPerPage=30,manageSortType=0;try{manageSortType=storage.sortDefault}catch(a){}var manageHasMultipleDomains=!1;
function addLightningBox(a){if(a){var b=CsvType.LIGHTNING_DEAL.index,d=[],g=[],n=CsvType.getName(CsvType.LIGHTNING_DEAL.index);a=$jscomp.makeIterator(a);for(var t=a.next();!t.done;t=a.next()){t=t.value;var h=t.csv[b];if(null!==h){var m="";var r=t.imagesCSV.split(",")[0];var q=r.substring(r.length-4,r.length);".gif"===q||".jpg"===q||".png"===q?r=r.substring(0,r.length-4):q=".jpg";m+='<div class="productIcon" style="flex-shrink: 0;margin-right: 20px;width: 55px; height: 55px; background:url('+(""!==
r?imageServer+r+"._SL55_"+q:imgCDNUrl+"no-photo-available.png")+') no-repeat center center"></div>';q=getValueAtTime(h,keepaTime.now(),CsvType.LIGHTNING_DEAL);if(0<q){r=Money.format(q,{sourceDomainId:t.domainId,targetDomainId:t.domainId});var u="",D="",F="";showReferencePrice(t.domainId)&&(u=""+Money.format(q,{sourceDomainId:t.domainId}),D=' <span class="price__reference">',F="</span>");d.push('<div class="flex" style="align-items: center;font-size: 14px;width: 100%;text-align:left;margin-top:5px">'+
m+'<div><a href="#!product/'+t.domainId+"-"+t.asin+'">'+truncate(t.title,150)+'</a><div style="font-size:16px; color: '+CsvType.LIGHTNING_DEAL.color+';">'+u+D+r+F+"</div></div></div>")}q=h.length;if(3<q&&-1===h[q-1]&&-1===h[q-3]){r=0;try{for(;-1===h[q-5];)q-=2;r=h[q-2];for(u=q;r<keepaTime.now()&&u+2<=h.length;)u+=2,r=h[u-2]}catch(M){console.error(M,h,q)}keepaTime.now()>r||(r=(new Date(keepaTime.minutesToEpoch(r))).formatDate("M j, G:i"),u="",5<q&&0<h[q-5]&&(u=keepaTime.now()-h[q-6],h=Money.format(h[q-
5],{sourceDomainId:t.domainId,targetDomainId:t.domainId}),u='<span style="color:#303030;font-size:12px;">'+la._649+" ("+prettyDate(u)+") "+la._650+" "+h+"</span>"),g.push('<div class="flex" style="align-items:center;font-size:14px;width:100%;text-align:left;margin-top:5px">\n\t\t\t\t\t'+m+'\n\t\t\t\t\t<div>\n\t\t\t\t\t<a href="#!product/'+t.domainId+"-"+t.asin+'">'+truncate(t.title,150)+'</a>\n\t\t\t\t\t<div style="color:#6b4a4a;">'+la._648+" "+r+"</div>\n\t\t\t\t\t"+u+"\n\t\t\t\t\t</div>\n\t\t\t\t\t</div>"))}}}if(0<
d.length||0<g.length)b='<div style="color:tomato;font-size: 19px;width: 100%;margin:10px 0 10px 46px"><span><i class="fa fa-bolt" ></i>&emsp;'+n+'&emsp;<i class="fa fa-bolt" ></i></span></div>'+('<div class="flex" style="flex-wrap: wrap;flex-direction: column;">'+d.join("")+g.join("")+"</div>"),$("#filter").after('<div id="manageLightningBox" class="text_long shadow" style="flex: 1 1 300px;max-width: 600px;min-width:300px;margin-right: 25px;">'+b+"</div>")}}
function manageSorter(a){var b=manageData.tracking;if(0!=b.length){var d=b[0].domainId;for(g in b){var g=b[g];g.domainId!=d&&(manageHasMultipleDomains=!0);if(void 0!==g.deltaA&&!1===a)break;var n=g.lastVisitPrices[CsvType.AMAZON.index],t=g.lastVisitPrices[CsvType.NEW.index],h=g.lastVisitPrices[CsvType.USED.index];g.deltaA=0>=n||0>=g.AMAZON_LAST?0:g.AMAZON_LAST-n;g.deltaN=0>=t||0>=g.MARKET_NEW_LAST?0:g.MARKET_NEW_LAST-t;g.deltaU=0>=h||0>=g.MARKET_USED_LAST?0:g.MARKET_USED_LAST-h;n=g.createDatePrices[CsvType.AMAZON.index];
t=g.createDatePrices[CsvType.NEW.index];h=g.createDatePrices[CsvType.USED.index];g.deltaCA=0>=n||0>=g.AMAZON_LAST?0:g.AMAZON_LAST-n;g.deltaCN=0>=t||0>=g.MARKET_NEW_LAST?0:g.MARKET_NEW_LAST-t;g.deltaCU=0>=h||0>=g.MARKET_USED_LAST?0:g.MARKET_USED_LAST-h;g.unavailableAmazon=-1==g.AMAZON_LAST||-1==g.PRICE_AMAZON;g.unavailableNew=-1==g.MARKET_NEW_LAST||-1==g.PRICE_NEW;g.unavailableUsed=-1==g.MARKET_USED_LAST||-1==g.PRICE_USED;g.diffAmazon=g.unavailableAmazon?0:g.AMAZON_LAST-g.PRICE_AMAZON;g.diffNew=g.unavailableNew?
0:g.MARKET_NEW_LAST-g.PRICE_NEW;g.diffUsed=g.unavailableUsed?0:g.MARKET_USED_LAST-g.PRICE_USED}switch(Number(manageSortType)){case 5:case 0:b.sort(function(m,r){m=m.CDATE==r.CDATE?0:m.CDATE>r.CDATE?-1:1;return 5==manageSortType?-1*m:m});break;case 6:case 1:b.sort(function(m,r){var q=m.unavailableAmazon?9999999999:m.diffAmazon;q=m.unavailableNew||m.diffNew>q?q:m.diffNew;q=m.unavailableUsed||m.diffUsed>q?q:m.diffUsed;m=r.unavailableAmazon?9999999999:r.diffAmazon;m=r.unavailableNew||r.diffNew>m?m:r.diffNew;
m=r.unavailableUsed||r.diffUsed>m?m:r.diffUsed;r=q==m?0:q<m?-1:1;return 6==manageSortType?-1*r:r});break;case 7:case 2:b.sort(function(m,r){var q=0==m.deltaA?9999999999:m.deltaA;q=0==m.deltaN||m.deltaN>q?q:m.deltaN;q=0==m.deltaU||m.deltaU>q?q:m.deltaU;var u=0==r.deltaA?9999999999:r.deltaA;u=0==r.deltaN||r.deltaN>u?u:r.deltaN;u=0==r.deltaU||r.deltaU>u?u:r.deltaU;q==u&&(q=0==m.deltaCA?9999999999:m.deltaA,q=0==m.deltaCN||m.deltaCN>q?q:m.deltaCN,q=0==m.deltaCU||m.deltaCU>q?q:m.deltaCU,u=0==r.deltaCA?
9999999999:r.deltaA,u=0==r.deltaCN||r.deltaCN>u?u:r.deltaCN,u=0==r.deltaCU||r.deltaCU>u?u:r.deltaCU);m=q==u?0:q>u?1:-1;return 7==manageSortType?-1*m:m});break;case 8:case 3:b.sort(function(m,r){var q=0==m.deltaCA?9999999999:m.deltaCA;q=0==m.deltaCN||m.deltaCN>q?q:m.deltaCN;q=0==m.deltaCU||m.deltaCU>q?q:m.deltaCU;var u=0==r.deltaCA?9999999999:r.deltaCA;u=0==r.deltaCN||r.deltaCN>u?u:r.deltaCN;u=0==r.deltaCU||r.deltaCU>u?u:r.deltaCU;q==u&&(q=0==m.deltaA?9999999999:m.deltaA,q=0==m.deltaN||m.deltaN>q?
q:m.deltaN,q=0==m.deltaU||m.deltaU>q?q:m.deltaU,u=0==r.deltaA?9999999999:r.deltaA,u=0==r.deltaN||r.deltaN>u?u:r.deltaN,u=0==r.deltaU||r.deltaU>u?u:r.deltaU);m=q==u?0:q>u?1:-1;return 8==manageSortType?-1*m:m});break;case 9:case 4:b.sort(function(m,r){var q=0;m=m.TITLE.toLowerCase();r=r.TITLE.toLowerCase();m<r&&(q=-1);m>r&&(q=1);return 9==manageSortType?-1*q:q})}}}
function manageUpdate(a){if(null==manageData)a||loadManage();else{graph.removeAll();manageCurrentPage=0;a=lastSubUrl.split("-");if(5==a.length||6==a.length)manageFilter_domain=a[0],manageFilter_condition=a[1],manageFilter_merchant=a[2],manageFilter_rootcat=a[3],manageSortType=a[4],6==a.length&&(manageFilter_wishlist=a[5]);$(document).off("scroll.endless-manage");$(document).endlessScroll({bottomPixels:2E3,eventName:"endless-manage",callback:function(b){bulkOperationInProgress||(0==$("#managePage").length?
$(document).off("scroll.endless-manage"):manageEndlessBusy||(manageEndlessBusy=!0,manageCurrentPage++,insertManageProductsPage(manageCurrentPage)))}});manageActiveProducts.length=0;manageFilterCats={};manageFilterDomain={};manageFilterMerchant={};manageFilterCondition={};manageFilterWishlist={};manageFilter={};manageFilter.rootcat=manageFilterCats;manageFilter.domain=manageFilterDomain;manageFilter.merchant=manageFilterMerchant;manageFilter.condition=manageFilterCondition;manageFilter.wishlist=manageFilterWishlist;
replaceHtml("manage-productList","");manageSorter();try{if(null!=manageData&&null!=manageData.tracking)for(a=0;a<manageData.tracking.length;a++)insertProductFilterListing(a)&&manageActiveProducts.push(a)}catch(b){reportBug(b)}manageEndlessBusy=!0;insertManageProductsPage(0);insertFilter()}}var deletionPromise=$.Deferred();
function deleteTrackings(a){var b="";for(d in a){var d=a[d];if(b=$("#manage-productList").find(".manage-tableRow[rel='"+d+"']"))deleteProductFilterListing(d),b.hide("hide",function(){""!=b&&b.remove()})}var g=2,n=function(){0>=g?deletionPromise.reject():(g--,setTimeout(function(){network.request({path:"track",type:"deleteTracking",asinBatch:a}).done(function(t){null==t.error?deletionPromise.resolve():n()}).fail(n).always(function(){0==$(".manage-tableRow").length&&(lastSubUrl!="0-0-0-0-"+manageSortType&&
""!=lastSubUrl?window.location.hash="#!manage/0-0-0-0-"+manageSortType:noTrackings())})},10))};n(!0)}function deleteTracking(a){if(null==a){a=lastSubUrl.split("-");if(2!=a.length)return showPopup(),!1;a=a[1];var b=a.match(verifyRegExp.asin);if(!b||10>b[1].length)return replaceHtml("productTableDescription","Error:<br>"+la._216),showPopup(),!1}return network.request({path:"track",asinBatch:[a],type:"deleteTracking"})}
function manageUndo(a){if(a.is(":visible")){var b=a.html(),d=/(\d+)/.exec(b),g=Number(d[1]);1==g?(b=a.closest(".manage-tableRow").attr("rel"),deleteTrackings([b])):(a.html(b.replace(d[1],g-1)),window.setTimeout(function(){manageUndo(a)},1E3))}}
function toogleEvents(a){if(!a.hasClass("tabAmazon")&&!a.hasClass("tabTrack")){a.parent().children().off("click.toggle");a.siblings().removeClass("active");a.addClass("active");var b=a.closest(".manage-productOverviewDiv").find(".manage-tabContent");b.children().addClass("inactive");"history"==a.attr("rel")?b.children().first().removeClass("inactive"):b.children(".inactive[rel="+a.attr("rel")+"]").removeClass("inactive");a.siblings().on("click.toggle",function(){toogleEvents($(this))})}}
function manage_event_notification(a){}
function manage_addEvents(a){a.find(".manage-graph").find("label").colorTip({color:"grey"});a.find("#multipleTrackingHelp").colorTip({color:"greyTrackingHelp"});a.find(".manage-tabItem:not(active)").on("click.toggle",function(){toogleEvents($(this))});a.find(".trackFormTable-price > input").focus(function(){$(this).removeClass().addClass("borderShadowCoralInput")});a.find(".priceAmazon").focus(function(){$(this).removeClass().addClass("borderShadowCoralInput");$(this).parent().siblings(".trackFormTable-price").children().removeClass()});
a.find(".priceNew").focus(function(){$(this).removeClass().addClass("borderShadowBlueInput");$(this).parent().siblings(".trackFormTable-price").children().removeClass()});a.find(".priceUsed").focus(function(){$(this).parent().siblings(".trackFormTable-price").children().removeClass();$(this).removeClass().addClass("borderShadowBlackInput")});a.find(".trackFormTable-price").children().focusout(function(){if(0<$(this).val().length){var b=$(this).parent().parent().attr("domain");$(this).val(NumberUtil.format($(this).val(),
5==b?0:2))}});a.find(".manage-remove").click(function(){$(this).parent().hide();var b=$(this).closest(".manage-tableRow").find(".manage-productOverviewDiv");b.hide("slide","fast",function(){var d=$(this).closest(".manage-tableRow").find(".manage-productOverviewUndo");d.parent().height(b.height());d.show();d.on("click.remove",function(){var g=$(this).closest(".manage-tableRow");$(this).off("click.remove");$(this).hide();$(this).html(la._84);$(this).css("color","#000");g.find(".manage-productOverviewDiv").show("slide",
"fast",function(){g.find(".manage-removeDiv").show()})});window.setTimeout(function(){manageUndo(d)},1E3);return!1});return!1});a.find(".manage-remove").hover(function(){$(this).parent().addClass("manage-removeDiv-hover").parent().addClass("manage-removeDiv-hover");return!1},function(){$(this).parent().removeClass("manage-removeDiv-hover").parent().removeClass("manage-removeDiv-hover");return!1})}var historyGraphs=[],historyGraphInterval,updatePlotIntervals=[];
function noTrackings(){var a='<div id="manage-empty">\n\t\t\t<h6 class="mdc-typography--subtitle1">'+la._27+'</h6>\n\t\t\t<p class="mdc-typography--body2">'+(storage.username?la._85:la._871)+'</p>\n\t\t\t<br>\n\t\t\t<p class="mdc-typography--body2">'+la._86+" "+la._872+"</p>\n\t\t</div>";$("#manage-productList").html(a)}
function droppedSinceLastVisit(a,b,d,g){return 0!=a?(d=0<a?'&nbsp;<img src="'+imgCDNUrl+'price-up.gif" />&emsp;&emsp;':'&nbsp;<img src="'+imgCDNUrl+'price-down.gif" />&emsp;&emsp;','<span class="manage-lastVisit '+(1==g?"priceAmazon":2==g?"priceNew":"priceUsed")+'">'+Money.format(a,{sourceDomainId:b,targetDomainId:b,absolute:!0})+d+"</span>"):""}
function getProduct(a,b,d,g){for(var n=null,t=a.products.length;g<t;g++){var h=a.products[g];if(null!=h&&h.asin===b&&h.domainId===d){n=h;break}}return n}
function loadManage(){if(storage.token&&""!=storage.token){$("#loadingIcon").after('<div id="loadingIconAdv" style="position: absolute !important;left: 185px;top: 80px;"><div id="loadingProgress" style="top: -15px; position: relative;"></div></div>');$("#loadingIconAdv").show();var a={},b,d=function(n){network.request({path:"user/manage",type:"overview",startIndex:n,lastVisit:storage.lastManageVisit||Date.now()}).done(function(t){"undefined"==typeof t.wishLists&&(t.wishLists=[]);"undefined"==typeof t.products&&
(t.products=[]);t.products&&(t.completeProducts=t.products);if(0===n)t.products=t.noHistoryProducts,delete t.noHistoryProducts,a=t;else{a.completeProducts=a.completeProducts.concat(t.completeProducts);a.products=a.products.concat(t.noHistoryProducts);a.trackings=a.trackings.concat(t.trackings);a.wishLists=a.wishLists.concat(t.wishLists);for(var h in t.categoriesPerDomain)for(var m in t.categoriesPerDomain[h])a.categoriesPerDomain[h][m]=t.categoriesPerDomain[h][m]}b=t.trackingCount;n+=500;$("#loadingProgress").text(n+
" / "+b);n<b?d(n):($("#loadingIconAdv").remove(),g(a))}).fail(showErrorPopup)};d(0);var g=function(n){$("#loadingIcon").hide();$("#managePage").show();replaceHtml("detailProductPage","");$("#detailProductPage").remove();$("#productOverlay").hide();if(null==n.trackings||0==n.trackings.length)noTrackings(),$("#filter").hide();else{manageData=n;n.exchange&&(currencies=n.exchange);n.productHashMap={};for(var t=0,h=n.products.length;t<h;t++){var m=n.products[t];n.productHashMap[m.asin+m.domainId]=m}delete n.products;
n.rssHash=storage.rssHash;n.lastVisit=storage.lastManageVisit;n.tracking=[];for(t=0;t<n.trackings.length;t++){m=n.trackings[t];var r=n.productHashMap[m.asin+m.mainDomainId];if(null==r)console.log("no product found.");else{null==r.title&&(r.title="Delete me");var q={},u=[];if(null!=m.thresholdValues)for(h=0;h<m.thresholdValues.length;h++){var D=m.thresholdValues[h],F=D.thresholdValueCSV[D.thresholdValueCSV.length-1];if(-1!=F){var M=n.productHashMap[m.asin+D.domain];if(null!=M){null==M.title&&(M.title=
"Delete me");D.domain==m.mainDomainId&&(u[D.csvType]={desired:F,current:M.csv[M.csv.length-1][CsvType.AMAZON.index]});"undefined"==typeof q[D.domain]&&(q[D.domain]={});"undefined"==typeof r.trackedDomains&&(r.trackedDomains={});r.trackedDomains[D.domain]=D.domain;var Q=Money.raw(F,{sourceDomainId:m.mainDomainId,targetDomainId:D.domain,keepUnit:!0}),T=Money.raw(M.csv[M.csv.length-1][D.csvType],{sourceDomainId:D.domain,targetDomainId:m.mainDomainId,keepUnit:!0});q[D.domain][D.csvType]={desired:F,current:M.csv[M.csv.length-
1][D.csvType],desiredInNativeCurrency:Q,currentInMainCurrency:T}}}}D=[];F=[];for(h=0;h<r.csv.length-1;h++)D[h]=r.csv[r.csv.length-1][h+r.csv.length-1],F[h]=r.csv[r.csv.length-1][h+2*(r.csv.length-1)];n.tracking.push({AMAZON_LAST:r.csv[r.csv.length-1][CsvType.AMAZON.index],ASIN:m.asin,CDATE:6E4*(m.createDate+offsetMinutes),domainId:m.mainDomainId,EMAIL:null==m.notificationType?!1:m.notificationType[0],IMAGES:null==r.imagesCSV?"":r.imagesCSV.split(","),LASTNOTIFY:null==m.notificationCSV?0:m.notificationCSV[m.notificationCSV.length-
1],LASTUPDATE:r.lastUpdate,MARKET_NEW_LAST:r.csv[r.csv.length-1][CsvType.NEW.index],MARKET_USED_LAST:r.csv[r.csv.length-1][CsvType.USED.index],MULTI_CSV:q,PRICE_AMAZON:null==u[CsvType.AMAZON.index]?-1:u[CsvType.AMAZON.index].desired,PRICE_NEW:null==u[CsvType.NEW.index]?-1:u[CsvType.NEW.index].desired,PRICE_USED:null==u[CsvType.USED.index]?-1:u[CsvType.USED.index].desired,ROOTCAT:r.rootCategory,SALESRANK:r.csv[CsvType.SALES.index],TID:m.asin,TITLE:r.title,TWITTER:null==m.notificationType?!1:m.notificationType[1],
TYPE:r.productType,wishListId:m.wishListId,wishListItemId:m.wishListItemId,createDatePrices:D,lastVisitPrices:F,trackedDomains:r.trackedDomains,tracking:m})}}delete n.trackings;t={};for(var ha in n.wishLists)m=n.wishLists[ha],t[m.id]=m;n.wishLists=t;serverTimeStamp=n.timeStamp;0===n.tracking.length?(noTrackings(),$("#filter").hide()):($("#manage-rss").attr("href",ajaxURL+"user/rss/?feed="+n.rssHash),manageHasMultipleDomains=!1,manageUpdate(!0),10<n.tracking.length||lastSubUrl!="0-0-0-0-"+manageSortType&&
(manageHasMultipleDomains||0!=manageFilter_rootcat||0!=manageFilter_condition||0!=manageFilter_merchant)?($("#showFilter").hide(),$("#showFilter").next().show()):$("#showFilter").click(function(){$(this).hide();$(this).next().fadeIn()}),addLightningBox(n.completeProducts))}}}else $("#managePage").show(),$("#detailProductPage").remove(),$("#productOverlay").hide(),noTrackings(),$("#filter").hide()}
function deleteProductFilterListing(a){for(var b=0;b<manageData.tracking.length;b++)if(manageData.tracking[b].TID==a){var d;a:for(d in manageActiveProducts)if(manageActiveProducts[d]==b){manageActiveProducts.splice(d,1);for(a=d;a<manageActiveProducts.length;a++)manageActiveProducts[a]--;break a}manageData.tracking.splice(b,1);break}for(var g in manageFilter)for(var n in manageFilter[g])for(a=0;a<manageFilter[g][n].length;a++)if(manageFilter[g][n][a]==b){manageFilter[g][n].splice(a,1);break}manageSorter(!0);
insertFilter()}var manageActiveProducts=[];
function insertManageProductsPage(a){var b=a*manageProductsPerPage;(function n(g){var t=!1;g<manageData.tracking.length&&g<b+manageProductsPerPage?void 0!==manageActiveProducts[g]?insertManageProduct(manageActiveProducts[g],g,function(h){setTimeout(function(){n(h)},0)}):($(document).off("scroll.endless-manage"),$("#manage-productList").find(".manage-tableProduct").last().css("borderBottom","none"),t=!0):(t=!0,manageEndlessBusy=!1);t&&b>=manageActiveProducts.length&&($("#manage-productList").find(".manage-tableProduct").last().css("borderBottom",
"none"),$(document).off("scroll.endless-manage"))})(b)}function filterSort(a,b){var d=a.charAt(18),g=b.charAt(18);if(d===g)return a=a.substr(a.indexOf(">")),b=b.substr(b.indexOf(">")),a<b?-1:1;if(d<g)return-1;if(d>g)return 1}var prevTrackSearchText="";
function insertFilter(){if(2>manageData.tracking.length&&0==manageDataSearchBackup.length)$("#filter").hide(),$("#manage-productList").find(".manage-tableProduct").last().css("borderBottom","none");else{$("#filter").show();for(var a=manageFilter_domain,b=manageFilter_rootcat,d=manageFilter_merchant,g=manageFilter_condition,n=manageFilter_wishlist,t="",h="",m="",r="",q="",u=0!=b?' <a href="#!manage/'+a+"-"+g+"-"+d+"-0-"+manageSortType+"-"+n+'">&emsp;<i class="fa fa-times red"></i></a>':"",D=0!=d?' <a href="#!manage/'+
a+"-"+g+"-0-"+b+"-"+manageSortType+"-"+n+'">&emsp;<i class="fa fa-times red"></i></a>':"",F=0!=a?' <a href="#!manage/0-'+g+"-"+d+"-"+b+"-"+manageSortType+"-"+n+'">&emsp;<i class="fa fa-times red"></i></a>':"",M=0!=g?' <a href="#!manage/'+a+"-0-"+d+"-"+b+"-"+manageSortType+"-"+n+'">&emsp;<i class="fa fa-times red"></i></a>':"",Q=0!=n?' <a href="#!manage/'+a+"-"+g+"-"+d+"-"+b+"-"+manageSortType+'-0">&emsp;<i class="fa fa-times red"></i></a>':"",T=0,ha=["&nbsp;&#x2193;","&nbsp;&#x2191;"],P=[la._197,
la._198,la._199,la._200,"Name",'&ensp;<span id="saveDefault">('+la._201+")</span>"],R="",Y=0;Y<P.length;Y++)Y==manageSortType||Y==manageSortType-5||5==Y?5!=Y?(R+=' <a href="#!manage/'+a+"-"+g+"-"+d+"-"+b+"-"+(4<manageSortType?Y:Y+5)+'" id="sortListActive">'+P[Y],R=4<manageSortType?R+ha[1]:R+ha[0],R+="</a>&emsp;"):R+=P[Y]:R+=' <a href="#!manage/'+a+"-"+g+"-"+d+"-"+b+"-"+Y+'">'+P[Y]+"</a>&emsp;";replaceHtml("sortList",R);$("#saveDefault").on("click",function(){$(this).text(la._44);storage.sortDefault=
manageSortType;settings.send();window.setTimeout(function(){$("#saveDefault").hide(1E3)},3E3)});if(null!=manageData.categoriesPerDomain){ha=[];for(var ja in manageFilterCats)if(T++,"length"!=ja){P=ja.split("_");var ra=P[0];P=P[1];if(0!=manageFilterCats[ja].length){R=manageData.categoriesPerDomain[ra];Y=void 0;try{Y=R[P].name}catch(Z){Y="?"}b==P?(ha.push(Y+" ("+manageFilterCats[ja].length+")&emsp;"),T=2):ha.push(' <a href="#!manage/'+ra+"-"+g+"-"+d+"-"+P+"-"+manageSortType+"-"+n+'">'+Y+" ("+manageFilterCats[ja].length+
")</a>&emsp;")}}if(1<T){ha.sort(filterSort);for(T=0;T<ha.length;T++)t+=ha[T];t='<li id="manageFilterCats"><span class="manageFilterLabel">'+la._202+u+"</span>"+t+"</li>"}}T=0;for(ra in manageFilterDomain)T++,"length"!=ra&&0!=manageFilterDomain[ra].length&&(a==ra?(h+=getTldByDomain(ra)+" ("+manageFilterDomain[ra].length+")&emsp;",T=2):h+=' <a href="#!manage/'+ra+"-"+g+"-"+d+"-"+b+"-"+manageSortType+"-"+n+'">'+getTldByDomain(ra)+" ("+manageFilterDomain[ra].length+")</a>&emsp;");h='<li id="manageFilterDomain"><span class="manageFilterLabel">'+
la._203+F+"</span>"+h+"</li>";if(2>T||!manageHasMultipleDomains)h="";T=la._88;u=la._89;for(var ta in manageFilterCondition)"length"!=ta&&0!=manageFilterCondition[ta].length&&(F=1==ta?T:u,r=g==ta?r+(F+" ("+manageFilterCondition[ta].length+")&emsp;"):r+(' <a href="#!manage/'+a+"-"+ta+"-"+d+"-"+b+"-"+manageSortType+"-"+n+'">'+F+" ("+manageFilterCondition[ta].length+")</a>&emsp;"));r='<li id="manageFilterCondition"><span class="manageFilterLabel">'+la._204+M+"</span>"+r+"</li>";T=0;for(var pa in manageFilterMerchant)T++,
"length"!=pa&&0!=manageFilterMerchant[pa].length&&(M="Amazon"==pa?1:pa==la._93?2:pa==la._94?3:4,d==M?(m+=pa+" ("+manageFilterMerchant[pa].length+")&emsp;",T=2):m+=' <a href="#!manage/'+a+"-"+g+"-"+M+"-"+b+"-"+manageSortType+"-"+n+'">'+pa+" ("+manageFilterMerchant[pa].length+")</a>&emsp;");m='<li id="manageFilterMerchant"><span class="manageFilterLabel">'+la._205+D+"</span>"+m+"</li>";2>T&&(m="");T=0;D={};for(var ca in manageFilterWishlist)"null"!=ca&&manageData.wishLists[ca]&&(D[manageData.wishLists[ca].name]=
ca);pa=Object.keys(D).sort();for(var sa in pa)ca=D[pa[sa]],null!=ca&&"null"!=ca&&0!=ca&&"length"!=ca&&0!=manageFilterWishlist[ca].length&&(T++,M=(M=manageData.wishLists[ca])?M.name:"?",n==ca?(q+=M+" ("+manageFilterWishlist[ca].length+")&emsp;",T=2):q+=' <a href="#!manage/'+a+"-"+g+"-"+d+"-"+b+"-"+manageSortType+"-"+ca+'">'+M+" ("+manageFilterWishlist[ca].length+")</a>&emsp;");q='<li id="manageFilterWishlist"><span class="manageFilterLabel">'+la._419+Q+"</span>"+q+"</li>";1>T&&(q="");a="";a="0-0-0-0-0-0"!=
lastSubUrl?' <a href="#!manage/0-0-0-0-0-0">'+la._82+" ("+manageData.tracking.length+")</a>":'<span style="color:#C66">'+la._82+" ("+manageData.tracking.length+")</span>";replaceHtml("manageShowall",a);replaceHtml("filterList",t+h+r+m+q);replaceHtml("defaultList",'<span rel="0" '+(0==storage.manageView?'style="color: tomato"':'style="cursor: pointer;"')+">"+la._97+'</span>&emsp;<span rel="1" '+(1==storage.manageView?'style="color: tomato"':'style="cursor: pointer;"')+">"+la._96+"</span>");replaceHtml("operationsList",
'<span class="operations" id="deleteOp"><i class="fa fa-trash" ></i> '+la._379+" ("+manageActiveProducts.length+')</span>&emsp;<span class="operations" id="exportOp"><i class="fa fa-floppy-o" ></i> '+la._393+" ("+manageActiveProducts.length+')</span>&emsp;<span class="operations" id="viewerOp"><i class="fa fa-th" ></i> Open in Viewer ('+(manageActiveProducts.length+")</span>"));$("#trackSearchBar").off().on("change",function(Z){try{var N=Z.srcElement.value}catch(z){N=$("#trackSearchBar").val()}var f=
function(){$("#trackClearSearch").remove();$("#trackingSearchFeedback").hide(0);0<manageDataSearchBackup.length&&(manageData.tracking=manageDataSearchBackup)};f();if(""==N)0<manageDataSearchBackup.length&&manageUpdate(!0);else{prevTrackSearchText=N;Z=[];var C=N.split(" ");N=[];for(var V=0;V<C.length;V++)N.push(new RegExp(".*"+RegExp.escape(C[V])+".*","i"));C=0;for(V=manageData.tracking.length;C<V;C++){for(var ba=manageData.tracking[C],w=0,O=0;O<N.length;O++)N[O].test(ba.TITLE)&&w++;w==N.length&&Z.push(C)}if(0==
Z.length)$("#trackingSearchFeedback").hide(0),$("#trackingSearchNone").show(0);else{$("#trackingSearchNone").hide(0);N=1==Z.length?la._389:la._390.replace("X",Z.length);$("#trackingSearchFeedback").text(N).show(0);$("#trackingSearchFeedback").on("click",function(){$("html, body").velocity({scrollTop:$("#manage-productList").offset().top-30},200)});manageDataSearchBackup=manageData.tracking.slice();manageData.tracking=[];C=0;for(V=Z.length;C<V;C++)manageData.tracking.push(manageDataSearchBackup[Z[C]]);
manageActiveProducts=Z;$("#trackSearchBar").after('<i id="trackClearSearch" style="vertical-align: middle; cursor: pointer" class="fa fa-times fa-lg red"></i>&emsp;');$("#trackClearSearch").on("click",function(){f();$("#trackSearchBar").val("");manageUpdate(!0)});manageUpdate(!0)}}});$("#exportOp").on("click",function(){var Z=la._394.replace("0",manageActiveProducts.length);showPopup('<i class="fa fa-floppy-o"></i>&ensp;'+la._393,'<span id="messageOp"><div>'+Z+'</div><span style="font-size:larger"><br>&emsp;&emsp;<span class="settings-chpw" id="continueOpCSV">\u00bb CSV</span>&emsp;&emsp;<span class="settings-chpw" id="continueOpJSON">\u00bb JSON</span></span></div></span>',
!0);var N=function(f){var C={trackedProducts:[]};for(ba in manageActiveProducts){var V=manageData.tracking[manageActiveProducts[ba]];null!=V&&(V={trackingId:V.TID,ASIN:V.ASIN,title:V.TITLE,amazonLocale:getTldByDomain(V.domainId),currency:getCurrencyCodeByDomain(V.domainId),lastUpdate:6E4*(V.LASTUPDATE+60*offsetHours),startedTracking:V.CDATE,currentPriceAmazon:V.AMAZON_LAST,currentPriceMarketNew:V.MARKET_NEW_LAST,currentPriceMarketUsed:V.MARKET_USED_LAST,desiredPriceAmazon:V.PRICE_AMAZON,desiredPriceMarketNew:V.PRICE_NEW,
desiredPriceMarketUsed:V.PRICE_USED,keepaURL:"https://keeepa.amztoolz.com/#!product/"+V.domainId+"-"+V.ASIN,amazonURL:"http://www.amazon."+getTldByDomain(V.domainId)+"/dp/"+V.ASIN},C.trackedProducts.push(V))}if("json"===f)var ba="data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(C,null,"\t"));else{ba=["Tracking ID,ASIN,Title,Amazon Locale,Currency,Last Update (Unix Time),Tracking Start (Unix Time),Current Amazon Price,Current Market New Price,Current Market Used Price,Desired Price Amazon,Desired Price Market New,Desired Price Market Used,Keepa URL,Amazon URL"];
for(var w in C.trackedProducts)V=C.trackedProducts[w],null!=V&&(V.title=V.title.replace(/,/g,""),ba.push([V.trackingId,V.ASIN,V.title,V.amazonLocale,V.currency,V.lastUpdate,V.startedTracking,V.currentPriceAmazon,V.currentPriceMarketNew,V.currentPriceMarketUsed,V.desiredPriceAmazon,V.desiredPriceMarketNew,V.desiredPriceMarketUsed,V.keepaURL,V.amazonURL].join()));ba="data:attachment/csv;charset=utf-8,"+encodeURIComponent(ba.join("\r\n"))}C=document.createElement("a");C.href=ba;C.target="_blank";C.download=
"keepaTrackingData"+(new Date).formatDate("Ymd")+"_"+storage.username.replace(/\s+/,"")+"."+f;document.body.appendChild(C);C.click();document.body.removeChild(C)};$("#continueOpJSON").on("click",function(){N("json")});$("#continueOpCSV").on("click",function(){N("csv")})});$("#viewerOp").on("click",function(){var Z={},N;for(N in manageActiveProducts){var f=manageData.tracking[manageActiveProducts[N]];null!=f&&(Z[f.domainId]||(Z[f.domainId]=[]),Z[f.domainId].push(f.ASIN))}Z.listId=Guid.newGuid();window.location.href=
"#!viewer/"+encodeURIComponent(JSON.stringify(Z))});$("#deleteOp").on("click",function(){for(var Z=la._381.replace("0",manageActiveProducts.length),N="",f,C,V=manageActiveProducts.length,ba=9>V?"100":18<V?"35":"70",w=0;w<V&&96>w;w++)f=manageData.tracking[manageActiveProducts[w]].IMAGES[0],C=f.substring(f.length-4,f.length),".gif"==C||".jpg"==C||".png"==C?f=f.substring(0,f.length-4):C=".jpg",N+='<div class="productIcon" style="width: '+ba+"px; height: "+ba+"px; background:"+(83<w&&95<V?"linear-gradient(to bottom, rgba(255,255,255,0) 17%, rgba(255,255,255,1) 90%),":
"")+"url("+(""!=f?imageServer+f+"._SL"+ba+"_"+C:imgCDNUrl+"no-photo-available.png")+') no-repeat center center"></div>';var O=showPopup('<i class="fa fa-trash-o"></i>&ensp;'+la._379,'<span id="messageOp"><div>'+Z+'</div><div style="margin: 20px">'+N+'<br><br><span style="font-size:larger"><span class="settings-chpw" id="continueOp">\u00bb '+la._379+'</span>&emsp;&emsp;<span class="settings-chpw" style="color: tomato" id="abortOp">&#x2715; '+la._380+"</span></span></div></span>",!0);$("#continueOp").on("click",
function(){function z(){if(A<K.length){deletionPromise=$.Deferred();deletionPromise.done(z).fail(I);var J=[];if(10<K.length){for(var S=0;A<K.length&&50>S;S++,A++)J.push(K[A]);deleteTrackings(J)}else deleteTrackings([K[A]]),A++;J=Math.round(A/K.length*100);$("#progressBarPercent").text(J+"%");$("#progressBarProgress").css("width",J+"%")}else deletionPromise=$.Deferred(),stopBulkOperation(),O.close()}function I(){replaceHtml("messageOp",la._error);$("#shareChartOverlay-close").show();stopBulkOperation();
reportBug(null,"manage bulk delete fail")}$("#shareChartOverlay-close").hide();replaceHtml("messageOp",'<div id="progressBar"><div id="progressBarProgress"></div><div id="progressBarPercent"></div></div><br>');startBulkOperation();var K=[];for(A in manageActiveProducts)try{K.push(manageData.tracking[manageActiveProducts[A]].TID)}catch(J){reportBug(J,"activeCache")}var A=0;z()})});$("#defaultList > span").on("click",function(){$(this).attr("rel")!=storage.manageView&&(storage.manageView=0==storage.manageView?
1:0,settings.send(),manageUpdate(!0))});$("#trackingSearch,#sortList,#filterList,#operationsList,#defaultList").on("mouseenter",function(){$(this).prev(".subsubHeadline").children().not("#manageShowall").css("color","tomato")}).on("mouseleave",function(){$(this).prev(".subsubHeadline").children().not("#manageShowall").css("color","#444")})}}var bulkOperationInProgress=!1;function startBulkOperation(){return bulkOperationInProgress?!1:bulkOperationInProgress=!0}
function stopBulkOperation(){bulkOperationInProgress=!1;manageUpdate(!0)}function getIsDrop(a,b){var d=!0;if(null==a.tracking.thresholdValues||0==a.tracking.thresholdValues.length)return d;var g=a.tracking.thresholdValues.find(function(n){return n.csvType==b&&n.domain==a.domainId});g&&!1===g.isDrop&&(d=!1);return d}
function insertProductFilterListing(a){var b=manageFilter_domain,d=manageFilter_rootcat,g=manageFilter_merchant,n=manageFilter_condition,t=manageFilter_wishlist,h=manageData.tracking[a],m=!1;-1!=h.AMAZON_LAST&&(m=getIsDrop(h,CsvType.AMAZON.index)?0>=h.AMAZON_LAST-h.PRICE_AMAZON:0<=h.AMAZON_LAST-h.PRICE_AMAZON);m||(-1!=h.MARKET_NEW_LAST&&(m=getIsDrop(h,CsvType.NEW.index)?0>=h.MARKET_NEW_LAST-h.PRICE_NEW:0<=h.MARKET_NEW_LAST-h.PRICE_NEW),m||-1!=h.MARKET_USED_LAST&&(m=getIsDrop(h,CsvType.USED.index)?
0>=h.MARKET_USED_LAST-h.PRICE_USED:0<=h.MARKET_USED_LAST-h.PRICE_USED));m=m?1:2;var r=!1;if(h.trackedDomains)for(var q in h.trackedDomains)if(q==b){r=!0;break}if(0!=d&&h.ROOTCAT!=d||0!=b&&h.domainId!=b&&!r||0!=n&&m!=n||0!=t&&h.wishListId!=t||0!=g&&(-1==h.PRICE_AMAZON&&1==g||-1==h.PRICE_NEW&&2==g||-1==h.PRICE_USED&&3==g||(0<=h.PRICE_AMAZON||0<=h.PRICE_NEW||0<=h.PRICE_USED)&&4==g))return!1;void 0===manageFilterCats[h.domainId+"_"+h.ROOTCAT]&&(manageFilterCats[h.domainId+"_"+h.ROOTCAT]=[]);manageFilterCats[h.domainId+
"_"+h.ROOTCAT].push(a);"undefined"==typeof manageFilterDomain[h.domainId]&&(manageFilterDomain[h.domainId]=[]);if(h.trackedDomains)for(q in h.trackedDomains)"undefined"==typeof manageFilterDomain[q]&&(manageFilterDomain[q]=[]),manageFilterDomain[q].push(a);void 0===manageFilterCondition[m]&&(manageFilterCondition[m]=[]);manageFilterCondition[m].push(a);void 0===manageFilterWishlist[h.wishListId]&&(manageFilterWishlist[h.wishListId]=[]);manageFilterWishlist[h.wishListId].push(a);b=!0;void 0===manageFilterMerchant.Amazon&&
(manageFilterMerchant.Amazon=[]);0<=h.PRICE_AMAZON&&(manageFilterMerchant.Amazon.push(a),b=!1);void 0===manageFilterMerchant[la._93]&&(manageFilterMerchant[la._93]=[]);0<=h.PRICE_NEW&&(manageFilterMerchant[la._93].push(a),b=!1);void 0===manageFilterMerchant[la._94]&&(manageFilterMerchant[la._94]=[]);0<=h.PRICE_USED&&(manageFilterMerchant[la._94].push(a),b=!1);b&&(void 0===manageFilterMerchant.None&&(manageFilterMerchant.None=[]),manageFilterMerchant.None.push(a));return!0}
function insertManageProduct(a,b,d){if(!bulkOperationInProgress){var g=manageData.tracking[a];null!=g&&("undefined"!==typeof g.productType&&2<=g.productType&&5>=g.productType?(deleteTrackings([g.ASIN]),d(1+b)):"undefined"!==typeof g.productType?onPriceHistoryLoadManage(g,a,b,d):($("#loadingIcon").show(),network.request({path:"product",history:!0,type:"ws",domainId:g.domainId,asin:g.ASIN,refreshProduct:!1,maxAge:15}).done(function(n){$("#loadingIcon").hide();null==n||null==n.products||1!=n.products.length?
d(1+b):(n=n.products[0],g.productType=n.productType,2<=g.productType&&5>=g.productType?(deleteTrackings([g.ASIN]),d(1+b)):(g.AMAZON=n.csv[CsvType.AMAZON.index],g.MARKET_NEW=n.csv[CsvType.NEW.index],g.MARKET_USED=n.csv[CsvType.USED.index],g.SALESRANK=n.csv[CsvType.SALES.index],g.csv=n.csv,g.buyBoxSellerIdHistory=n.buyBoxSellerIdHistory,g.offers=n.offers,g.stats=getStatistics(g),onPriceHistoryLoadManage(g,a,b,d)))}).fail(function(){d(1+b)})))}}
function onPriceHistoryLoadManage(a,b,d,g){var n=getCurrencyByDomain(a.domainId),t=getTldByDomain(a.domainId),h='<a href="'+getAmazonRedirectByDomain(a.domainId,a.ASIN)+'" rel="amazon"><span class="manage-condmet">'+la._88+'&nbsp;<i class="fa fa-check fa-lg"></i></span></a>',m=la._89;if(-1!=a.AMAZON_LAST){Money.raw(a.AMAZON_LAST,{sourceDomainId:a.domainId,targetDomainId:a.domainId});var r=getIsDrop(a,CsvType.AMAZON.index)?0>a.diffAmazon||0==a.diffAmazon&&0<=a.PRICE_AMAZON?h:m:0<a.diffAmazon||0==a.diffAmazon&&
0<=a.PRICE_AMAZON?h:m;Money.raw(a.diffAmazon,{sourceDomainId:a.domainId,targetDomainId:a.domainId})}else r=m;var q=0<=a.PRICE_AMAZON?a.PRICE_AMAZON:0;if(-1!=a.MARKET_NEW_LAST){Money.raw(a.MARKET_NEW_LAST,{sourceDomainId:a.domainId,targetDomainId:a.domainId});var u=getIsDrop(a,CsvType.NEW.index)?0>a.diffNew||0==a.diffNew&&0<=a.PRICE_NEW?h:m:0<a.diffNew||0==a.diffNew&&0<=a.PRICE_NEW?h:m;Money.raw(a.diffNew,{sourceDomainId:a.domainId,targetDomainId:a.domainId})}else u=m;var D=0<=a.PRICE_NEW?a.PRICE_NEW:
0;if(-1!=a.MARKET_USED_LAST){Money.raw(a.MARKET_USED_LAST,{sourceDomainId:a.domainId,targetDomainId:a.domainId});var F=getIsDrop(a,CsvType.USED.index)?0>a.diffUsed||0==a.diffUsed&&0<=a.PRICE_USED?h:m:0<a.diffUsed||0==a.diffUsed&&0<=a.PRICE_USED?h:m;Money.raw(a.diffUsed,{sourceDomainId:a.domainId,targetDomainId:a.domainId})}else F=m;var M=0<=a.PRICE_USED?a.PRICE_USED:0;var Q=m;a:for(R in a.MULTI_CSV)for(var T in a.MULTI_CSV[R]){var ha=a.MULTI_CSV[R][T].current,P=a.MULTI_CSV[R][T].desired;ha=Money.raw(ha,
{sourceDomainId:R,targetDomainId:a.domainId,keepUnit:!0});if(-1!=ha&&(Q=-1==ha?0:0==P?0:ha-P,Q=getIsDrop(a,T)?0>Q||0==Q&&0!=P?h:m:0<Q||0==Q&&0!=P?h:m)){h='<a title="'+la._88+" ("+getTldByDomain(R)+')" href="'+getAmazonRedirectByDomain(R,a.ASIN)+'" rel="amazon"><span class="manage-condmet">'+la._88+'&nbsp;<img src="'+imgCDNUrl+'good.png" /></span></a>';break a}}h=(r=r!=m||u!=m||F!=m||Q!=m)?h:m;a.condMet=r;a.desiredPrices=[parseFloat(q),parseFloat(D),parseFloat(M)];r="";m=keepaTime.now();if(globalEbayArray[a.domainId]){r=
'style="color:#888"';u="unverified if sold on eBay";if(20160>m-getLastTime(a.csv[CsvType.EBAY_NEW_SHIPPING.index],CsvType.EBAY_NEW_SHIPPING)||20160>m-getLastTime(a.csv[CsvType.EBAY_USED_SHIPPING.index],CsvType.EBAY_USED_SHIPPING))r='style="color:#000"',u="show on eBay";r='<li class="manage-tabItem tabAmazon" style="margin-left:0 !important;"><a class="ebayLink" target="_blank" href="'+getEbayRedirectByDomain(a.domainId,a.ASIN,!0)+'" rel="ebay" title="'+u+'" '+r+'><span>e</span><span style="margin-left: -2px;">b</span><span style="margin-left: -2px;">a</span><span style="margin-left: -2px;">y</span></a>'}t=
'<div class="tabBox"><div><ul class="manage-tabHead"><li class="manage-tabItem manage-tabHistory active" rel="history">'+la._97+'</li><li class="manage-tabItem manage-tabMonitor " rel="monitor">'+la._96+'</li><li class="manage-tabItem tabTrack"><a href="#!track/'+a.domainId+"-"+a.ASIN+'">&rarr;&emsp;'+la._98+'</a></li><li class="manage-tabItem tabAmazon"><a href="'+getAmazonRedirectByDomain(a.domainId,a.ASIN)+'" rel="amazon"><span>&rarr;&ensp;</span>'+la._99+'&emsp;<img class="amznLogo" src="'+imgCDNUrl+
"amazon/small/"+t+'.png"><span style="margin-left: 10px;">'+la._99_2+"</span></a>"+r+"</li></ul></div></div>";m=""+(droppedSinceLastVisit(a.deltaA,a.domainId,n,1)+droppedSinceLastVisit(a.deltaN,a.domainId,n,2)+droppedSinceLastVisit(a.deltaU,a.domainId,n,3));r=prettyDate((manageData.timeStamp-manageData.lastVisit)/6E4);m=""!=m?la._206+" ("+r+"):&emsp;"+m:0!=manageData.lastVisit?la._207+" ("+r+").":"";r=""+(droppedSinceLastVisit(a.deltaCA,a.domainId,n,1)+droppedSinceLastVisit(a.deltaCN,a.domainId,n,
2)+droppedSinceLastVisit(a.deltaCU,a.domainId,n,3));u=prettyDate((manageData.timeStamp-a.CDATE)/6E4);r=""!=r?la._208+" ("+u+"):&emsp;"+r:la._209+" ("+u+").";F=u="";null!=a.IMAGES&&0<a.IMAGES.length&&null!=a.IMAGES[0]&&(F=a.IMAGES[0].substring(a.IMAGES[0].length-4,a.IMAGES[0].length),".gif"==F||".jpg"==F?u=a.IMAGES[0].substring(0,a.IMAGES[0].length-4):(u=a.IMAGES[0],F=".jpg"));u=""!=u?imageServer+u+"._SL135_"+F:imgCDNUrl+"no-photo-available.png";F=parseCurrentProductPrices(a,a.domainId,manageData.timeStamp);
var R=a.wishListId;T="";null!=R&&null!=manageData.wishLists[R]&&(T=manageData.wishLists[R],T='&emsp;<span style="font-size: 12px; color: #999;" id="'+R+'">'+la._558+': <a href="'+getAmazonWishListUrl(T)+'" style="color: rgb(106, 106, 106);">'+T.name+"</a></span>");b='<tr class="manage-tableRow" rel="'+a.TID+'"><td class="manage-tableRemove"><div class="manage-removeDiv"><div class="manage-remove" title="'+la._100+'"><i class="fa fa-trash-o fa-lg"></i></div></div></td><td class="manage-tableProduct"><table class="manage-tableProductTable"><tr class="manage-tableProductTableFirstRow"><td class="manage-productImage" style="background:url('+
u+') no-repeat center center"></td><td class="manage-productOverview"><div class="manage-productOverviewUndo" style="display:none">'+la._84+'</div><div class="manage-productOverviewDiv"><div class="manage-productFlag" style="background:url('+flags[a.domainId]+') no-repeat right top"></div><div class="manage-productTitle"><a href="#!product/'+a.domainId+"-"+a.ASIN+'">'+stripHTML(a.TITLE)+"</a>"+T+"<br></div>"+F+t+'<div class="manage-tabContent"><div id="manage-graph-history-'+b+'" class="manage-graph graph"></div><div id="manage-graph-'+
b+'" rel="monitor" class="manage-graph inactive">'+generateMonitorTab(n,a.domainId,a.MULTI_CSV,q,a.AMAZON_LAST,D,a.MARKET_NEW_LAST,M,a.MARKET_USED_LAST)+m+"<br>"+r+'</div></div><div><div class="manage-productConditionDiv">'+la._87+"?&emsp;"+h+"</div>&emsp;&emsp;</div></div></td></tr></table></td></tr>";$("#manage-productList").append(b);manage_addEvents($("#manage-productList").find(".manage-tableRow").last());a.timeStamp=serverTimeStamp;b=$('#manage-productList tr[rel="'+a.ASIN+'"] div[id^="manage-graph-history"]');
q=graph.prepare(a.domainId);q.csv=a.csv;q.asin=a.ASIN;q.graphIndex=0;q.isOnTrackingPage=!0;q.stats=a.stats;q.buyBoxSellerIdHistory=a.buyBoxSellerIdHistory;q.offers=a.offers;q.parameter.height="170px";q.parameter.width=float2int(b.parent().width())-215+"px";q.$container=b;q.$container.show();q.parameter.tracking=a.tracking;0!=b.length&&(graph.create(q),b.attr("rel","history"),1==storage.manageView&&$(".manage-tabMonitor").trigger("click"),b=!1,null!=a.tracking.thresholdValues&&0<a.tracking.thresholdValues.length&&
(b=a.tracking.thresholdValues.some(function(Y){return!Y.isDrop&&0<=Y.thresholdValueCSV[Y.thresholdValueCSV.length-1]})),b&&(isTest&&console.info("%cManage: skip product due to price increase tracking \u27fc ","color:#6666bf;font-weight:bold;",a.ASIN),a=$('.manage-tableRow[rel="'+a.ASIN+'"]'),a.find(".manage-tabContent").html('<p class="hint__tracking--important">'+la._708+"</p>"),a.find(".switch-manage-trigger").on("click",function(){$("#switch-manage").click()})),g(1+d))}
function generateMonitorTab(a,b,d,g,n,t,h,m,r){var q={sourceDomainId:b,targetDomainId:b,skipSymbol:!0},u=-1==n?"-":0==g?"-":Money.format(n-g,q),D=-1==h?"-":0==t?"-":Money.format(h-t,q),F=-1==r?"-":0==m?"-":Money.format(r-m,q);n=-1==n?0:n;h=-1==h?0:h;r=-1==r?0:r;return'<table class="manage-monitorTab"><tr class="borderBottom"><td class="borderRight">'+a+"</td><td>"+la._342+"</td><td>"+la._344+"</td><td>"+la._343+'</td></tr><tr><td class="borderRight priceAmazon">Amazon</td><td>'+zeroToDash(Money.format(g,
q))+"</td><td>"+zeroToDash(Money.format(n,q))+"</td><td>"+greenOrRed(u)+'</td></tr><tr><td class="borderRight priceNew">'+la._93+"</td><td>"+zeroToDash(Money.format(t,q))+"</td><td>"+zeroToDash(Money.format(h,q))+"</td><td>"+greenOrRed(D)+'</td></tr><tr><td class="borderRight priceUsed">'+la._94+"</td><td>"+zeroToDash(Money.format(m,q))+"</td><td>"+zeroToDash(Money.format(r,q))+"</td><td>"+greenOrRed(F)+'</td></tr></table><div class="customCheckbox" style="white-space: nowrap;">'+getInternationalTrackingManage(b,
d,g,t,m)+"</div><br>"}
function getInternationalTrackingManage(a,b,d,g,n){d="";g=[];for(n=1;n<numberOfDomains;n++)if(7!=n){var t="checkbox-label",h="";if(b[n]){t+=" checkbox-label-disabled";var m=' checked="checked" disabled="true"';for(var r=0;3>r;r++)if(b[n][r]){var q=CsvType.getName(r);0==r&&(q+="."+getTldByDomain(n));0<h.length&&(h+="<br><br>");var u=la._355+" "+q+": "+Money.format(b[n][r].desired,{sourceDomainId:a,targetDomainId:a}),D=b[n][r].desired==b[n][r].desiredInNativeCurrency?"":" ("+Money.format(b[n][r].desiredInNativeCurrency,{sourceDomainId:n,
targetDomainId:n})+")";q=-1==b[n][r].current?"":"<br>"+la._356+" "+q+": "+Money.format(b[n][r].currentInMainCurrency,{sourceDomainId:a,targetDomainId:a});var F=b[n][r].current==b[n][r].currentInMainCurrency||-1==b[n][r].current?"":" ("+Money.format(b[n][r].current,{sourceDomainId:n,targetDomainId:n})+")";h+=u+D+q+F}}else t+=" checkbox-label-disabled",m=' disabled="true"',h=la._83;r=Date.now();g[n]='<input id="checkbox_'+checkboxNameArray[n]+"_"+r+'" class="checkbox" type="checkbox" name="'+checkboxNameArray[n]+
'" value="'+n+'"'+m+'><label title="'+h+'" for="checkbox_'+checkboxNameArray[n]+"_"+r+'" name="label_'+checkboxNameArray[n]+'" domain="'+n+'" class="'+t+'">'+getTldByDomain(n)+"</label>&emsp;"}return d+=la._352+":&emsp;"+g[1]+g[6]+g[11]+"&emsp;"+la._353+":&emsp;"+g[2]+g[3]+g[4]+g[8]+g[9]+"&emsp;"+la._354+":&emsp;"+g[5]+g[10]+la._663+":&emsp;"+g[13]};var databaseDeals=null,dealsTotalResults=1E4,dealWrapperInstance=function(){var a=null;return{get:function(){null==a&&(a=dealWrapper());return a}}}(),dealWrapper=function(){function a(){try{ta=ta||cw({initDatabase:function(z,I){importScripts("https://keeepa.amztoolz.com/_cdn/localforage.min.1.6.0.js");(asyncSupported=localforage.supports(localforage.INDEXEDDB))?(ra=localforage.createInstance(z),ra.getItem("test").then(function(K){asyncSupported=!0;I(!0)}).catch(function(K){asyncSupported=!1;I(!1)})):I(!1)},
removeOudatedCacheEntries:function(z,I){if(asyncSupported){var K=z.now,A=z.days,J=[];A=Number(A)||7;ra.iterate(function(S,v,p){K-S>1440*A&&J.push(v)}).then(function(){if(0<J.length){console.log("Clearing old visited deals items: ",J.length);for(var S in J)ra.removeItem(J[S])}}).catch(function(S){console.log(S)})}}})}catch(z){console.error(z)}}function b(){localforage.supports(localforage.INDEXEDDB)&&(ra=ra||localforage.createInstance(ca),ra.getItem("test").then(function(z){}).catch(function(z){ra=
null}),ta.initDatabase().then(function(z){}));databaseDeals=ra}function d(z){z.css("background","#fff url("+imgCDNUrl+"cancel_8.png) center no-repeat");z.attr("title","clear search parameter")}function g(z){z&&(N.page=0,storage["dealsRequest."+z]=JSON.stringify(N),settings.send())}function n(z,I){if(z=storage["dealsRequest."+z])if(z=tryParseJSON(z),null!=z){z.page=0;z.dateRange||(z.dateRange=1);z.minRating&&[10,20,30,40,50].includes(Number(z.minRating))||(z.minRating=-1);for(var K in z)N[K]=z[K]}if(!I&&
lastSubUrl)try{var A=JSON.parse(decodeURIComponent(lastSubUrl)),J;for(J in A)if("page"!=J){var S=A[J];"minRating"!==J||[10,20,30,40,50].includes(Number(S))||(S=-1);"undefined"!=N[J]&&(N[J]=S);"domainId"==J&&null!=S&&verifyRegExp.domainId.test(S)&&(storage.domainId=S,refreshDomain())}}catch(v){}if(null!=N.excludeCategories&&("number"==typeof N.excludeCategories[0]||0==N.excludeCategories.length)){I=N.excludeCategories.slice();N.excludeCategories=[];for(K=0;K<numberOfDomains;K++)N.excludeCategories[K]=
[];N.excludeCategories[storage.domainId]=I}if(null!=N.includeCategories&&("number"==typeof N.includeCategories[0]||0==N.includeCategories.length)){I=N.includeCategories.slice();N.includeCategories=[];for(K=0;K<numberOfDomains;K++)N.includeCategories[K]=[];N.includeCategories[storage.domainId]=I}I=$jscomp.makeIterator(["isBackInStock","warehouseCondition"]);for(K=I.next();!K.done;K=I.next())K=K.value,"undefined"!==typeof N[K]&&delete N[K];return N}function t(){if(!0!==V){$(document).off("scroll.endless-deals");
V=!0;var z=showReferencePrice(Number(storage.domain))?" with-reference":"",I=$(".productPage");null!=I&&0<I.length&&(N.page=I.length);var K=$(I[I.length-1]);K.find(".productContainer").length<I.perPage||(150*N.page>=dealsTotalResults?K.after('<div id="productPage'+N.page+'" class="productPage'+z+'">Reached last deal for your selection.</div>'):1E4<=150*N.page?K.after('<div id="productPage'+N.page+'" class="productPage'+z+'">Reached maximum allowed page. Please use the filters.</div>'):(K.after('<div id="productPage'+
N.page+'" class="productPage'+z+'"></div>'),$("#loadingIcon").show(),q()))}}function h(z){z&&0!=N.page||D();z&&0==N.page&&(g("last"),$("#filterBar").hide(),$("#dealsTitleSearchResults").text(""));0===N.page&&m()}function m(){for(var z=0;0<$("#productPage"+z).length;)replaceHtml("productPage"+z,""),0<z&&$("#productPage"+z).remove(),z++;ba=[]}function r(z){0==storage.domain&&(storage.domain=1);z.domainId=storage.domain;void 0==z.excludeCategories[z.domainId]&&(z.excludeCategories[z.domainId]=[]);void 0==
z.includeCategories[z.domainId]&&(z.includeCategories[z.domainId]=[]);var I=z.excludeCategories.slice(),K=z.includeCategories.slice();z.excludeCategories=z.excludeCategories[z.domainId];z.includeCategories=z.includeCategories[z.domainId];"number"==typeof z.excludeCategories&&(z.excludeCategories=[]);if(z.excludeCategories instanceof Array){for(var A=[],J=0;J<z.excludeCategories.length;J++){var S=z.excludeCategories[J];null!=S&&(S instanceof Array?reportBug(null,"excludeCategories not valid array: "+
JSON.stringify(z.excludeCategories)):isNaN(S)||A.push(S))}I[z.domainId]=A;z.excludeCategories=A}else reportBug(null,"excludeCategories not array: "+JSON.stringify(z.excludeCategories)),z.excludeCategories=[],I[z.domainId]=[];"number"==typeof z.includeCategories&&(z.includeCategories=[]);if(z.includeCategories instanceof Array){A=[];for(J=0;J<z.includeCategories.length;J++)S=z.includeCategories[J],null!=S&&(S instanceof Array?reportBug(null,"includeCategories not valid array: "+JSON.stringify(z.includeCategories)):
isNaN(S)||A.push(S));z.includeCategories=A;K[z.domainId]=A}else reportBug(null,"includeCategories not array: "+JSON.stringify(z.includeCategories)),z.includeCategories=[],K[z.domainId]=[];null==z.salesRankRange[0]&&(z.salesRankRange[0]=-1);null==z.salesRankRange[1]&&(z.salesRankRange[1]=-1);S=z.construct;z.construct=null;J=z.dateRange;z.priceTypes[0]===CsvType.LIGHTNING_DEAL.index&&(z.dateRange="0");A=network.request({path:"service/deals",type:"ws",dealRequest:$.extend(!0,{},JSON.parse(JSON.stringify(z)))});
z.construct=S;S=Object.assign({},z);z.excludeCategories=I;z.includeCategories=K;z.dateRange=J;return[A,S]}function q(){V=!0;$("#loadingIcon").show();h(!0);var z=CsvType.getObject(N.priceTypes[0]);z.isBeta?($("#betaNotice").html(z.isBeta()),$("#dealsNotice").removeClass("hidden")):($("#dealsNotice").addClass("hidden"),$("#betaNotice").html(""));N.perPage=150;var I=$jscomp.makeIterator(r(N));z=I.next().value;I=I.next().value;var K=150*N.page,A=function(J){0<J.titleSearch.length?($("#dealsTitleSearchResults").html('Product title search results for:&emsp;<span style="color: #333333" id="dealsTitleSearchQuery"></span>'),
$("#dealsTitleSearchQuery").text(J.titleSearch)):$("#dealsTitleSearchResults").text("")};N.settings.viewTyp===ja.TABLE?(A(N),replaceHtml("productPage0",'<div id="dealsGrid"></div>'),GridDeals.init($.extend(!0,{},I),"dealsGrid")):z.done(function(J){$("#loadingIcon").hide();J.deals&&(J.data=J.deals);if(null==J.data)showErrorPopup(),reportBug(null,"deal error: "+JSON.stringify(N)+"<br>"+JSON.stringify(J));else{A(N);dealsTotalResults=J.totalResults;J=J.data;for(var S in J.dr)-1<ba.indexOf(J.dr[S].asin)?
J.dr[S]=null:ba.push(J.dr[S].asin);J.products=J.dr;for(var v in J.products)if(v=Number(v),S=J.products[v],null!=S){"undefined"==typeof S.imagesCSV&&(S.imagesCSV=S.image);try{S.imagesCSV=String.fromCharCode.apply(null,S.imagesCSV)}catch(B){}S.domainId=N.domainId;var p=4==N.dateRange?S.dateIntervalIndex:N.dateRange;p||(p=0);S.delta=S.delta[p];S.deltaPercent=S.deltaPercent[p];S.avg=S.avg[p];S.imagesCSV=null!=S.imagesCSV?S.imagesCSV.split(","):[""];null==S.deltaLast&&(S.deltaLast=Array.apply(null,Array(CsvType.length)).map(Number.prototype.valueOf,
0))}try{0==N.page&&Q(J.categoryIds,J.categoryNames,J.categoryCount)}catch(B){console.log(B)}if("undefined"===typeof J.products||0==J.products.length)0===N.page?replaceHtml("productPage0",'<br><div style="text-align: center; font-weight: bold;">'+la._195+"</div><br>"):1<N.page&&(J='<div class="newPageSeparator"><span class="backToTop">'+la._196+"</span></div>",v=$("#productPage"+(N.page-1)),v.append(J),v.children().last().children().click(function(){$("html, body").velocity("scroll",300);return!1}));
else{v="";for(S=0;S<J.products.length;S++)if(p=J.products[S],null!=p){var H="";if(sessionStorage[N.domainId+"-"+p.asin])H="opacity:"+(storage.dealsOpacity||.5)+";";else if(ra){var L=ra.getItem(N.domainId+"-"+p.asin);(function(B){L.then(function(E){E&&$("#p"+B).css("opacity",storage.dealsOpacity||.5)}).catch(function(E){})})(S+K)}v+='<div id="p'+(S+K)+'" class="productContainer" style="min-width: 210px;'+H+'" >'+F(p,K+S)+"</div>"}$("#productPage"+N.page).append(v);0<N.page&&(v='<div class="newPageSeparator">Page '+
(N.page+1)+'<span class="backToTop">'+la._196+"</span></div>",$("#productPage"+N.page).prepend(v).children().first().children().click(function(){$("html, body").velocity("scroll",300);return!1}));for(S=0;S<J.products.length;S++)null!=J.products[S]&&ha($("#pB"+(S+K)),J.products[S].asin);V=!1;$(document).endlessScroll({bottomPixels:1E3,eventName:"endless-deals",callback:function(){0==$("#productPage0").length?$(document).off("scroll.endless-deals"):network.waitForNetworkCompletion().always(t)}})}}}).fail(function(J){showErrorPopup();
storage.removeItem("dealsRequest.last");settings.send()})}function u(){function z(J,S){return[J.min,S.max==J.max?2147483647:J.max]}var I=$("#deltaPercentRange"),K=$("#deltaRange"),A=$("#currentRange");N.currentRange=z(A.rangeSlider("values"),A.rangeSlider("bounds"));N.deltaPercentRange=z(I.rangeSlider("values"),I.rangeSlider("bounds"));N.deltaRange=z(K.rangeSlider("values"),K.rangeSlider("bounds"));N.titleSearch=$("#dealSearchBar").val();N.page=0;isMobile?T():$("#submitDealQuery").trigger("click")}
function D(){var z='<div class="leftPanelBox" style="background-color: rgba(17, 23, 31, 0.5);">\n\t\t\t\t<div class="leftPanelLabel">'+la._660+'</div>\n\t\t\t\t<div id="dealsViewType">\n\t\t\t\t\t<div data-viewtype="'+ja.TABLE+'"'+(N.settings.viewTyp===ja.TABLE?' class="active"':"")+">"+la._661+'&ensp;<i class="fa fa-table"></i></div>\n\t\t\t\t\t<div data-viewtype="'+ja.BOX+'"'+(N.settings.viewTyp===ja.BOX?' class="active"':"")+">"+la._662+'&ensp;<i class="fa fa-th-large"></i></div>\n\t\t\t\t</div>\n\t\t\t</div>',
I=function(fa){var oa="";for(G in N.priceTypes){var G=N.priceTypes[G];if(CsvType[fa].index==G){oa=' class="active"';CsvType.SALES.index==G&&setTimeout(function(){},0);G!=CsvType.AMAZON.index&&G!=CsvType.NEW.index&&setTimeout(function(){},0);break}}if("TRADE_IN"!=fa||1==N.domainId)if("AMAZON"!=fa&&"USED"!=fa||10!=N.domainId){G="";if("WAREHOUSE"===fa){G=[];G[2]=la._637;G[3]=la._638;G[4]=la._639;G[5]=la._640;var X="",aa;for(aa in G){var da="sub-deal-type-filter-"+CsvType[fa].index+"-"+aa,qa=N.warehouseConditions&&
N.warehouseConditions.includes(Number(aa));X+='<div><input id="'+da+'" type="checkbox"'+(qa?" checked":"")+' data-warehousecondition="'+aa+'"><label for="'+da+'">'+G[aa]+"</label></div>"}G='<div class="sub-deal-type-filter sub-deal-type-filter-'+CsvType[fa].index+'">\n\t\t\t\t\t\t\t'+X+"\n\t\t\t\t\t\t</div>"}K+="<div"+oa+' data-type="'+CsvType[fa].index+'">'+CsvType.getName(CsvType[fa].index)+G+"</div>"}},K='<div class="leftPanelBox"><div class="leftPanelLabel">'+la._452+'</div><div id="dealPriceTypesFilter">';
if(rearrangeCsvTypes){var A=CsvType.getObjectsSorted();A=$jscomp.makeIterator(A);for(var J=A.next();!J.done;J=A.next())if(J=J.value,"object"===typeof J&&J.deal&&J.isEnabled)I(CsvType.getObjectName(J.index));else if(0===J||1===J)K+='<div style="height: 5px;"></div>'}else for(A in CsvType)"object"==typeof CsvType[A]&&CsvType[A].deal&&I(A);K+="</div></div>";var S=N.isFilterEnabled?"":' class="hidden"';I=N.priceTypes==CsvType.SALES.index?" hidden":"";J=N.priceTypes[0]==CsvType.SALES.index;A='<div title="'+
la._453+'"><input maxlength="2000" id="dealSearchBar" placeholder="'+la._454+'"><span id="submitDealSearch"></span></div>';var v=[4==N.sortType||0==N.sortType||-4==N.sortType,2==N.sortType||-2==N.sortType,1==N.sortType,3==N.sortType||-3==N.sortType,5==N.sortType||-5==N.sortType];v[3]=v[3]||J&&v[4];var p=0<=N.sortType?1:0;if(v[3]||v[4])p=0==p?1:0;p=f[p];J='<div class="leftPanelBox"><div class="leftPanelLabel">'+la._180+'</div><div id="dealSortType"><div '+(v[0]?'class="active"':"")+' data-sort="percentage">'+
la._486+(v[0]?p:"")+"</div><div "+(v[1]?'class="active"':"")+' data-sort="drop">'+la._487+(v[1]?p:"")+"</div>"+(J?"":"<div "+(v[4]?'class="active"':"")+' data-sort="price">'+la._488+(v[4]?p:"")+"</div>")+"<div "+(v[2]?'class="active"':"")+' data-sort="newest">'+la._485+"</div><div "+(v[3]?'class="active"':"")+' data-sort="salesRank" title="'+la._457+'">'+CsvType.getName(CsvType.SALES.index)+(v[3]?p:"")+"</div></div></div>";v=N.dateRange;p="";N.priceTypes[0]===CsvType.LIGHTNING_DEAL.index&&(v=0,p=
' style="opacity:0.5;"');v='<div class="leftPanelBox"><div class="leftPanelLabel">'+la._458+'</div><div id="dealDateRange"><div '+(0==v?'class="active"':"")+' data-dateRange="0">'+la._136+"</div><div "+(1==v?'class="active"':"")+p+' data-dateRange="1">'+la._137+"</div><div "+(2==v?'class="active"':"")+p+' data-dateRange="2">'+la._139+"</div><div "+(3==v?'class="active"':"")+p+' data-dateRange="3">'+la._140+"</div><div "+(4==v?'class="active"':"")+p+' data-dateRange="4">'+la._142+"</div></div></div>";
S='<div class="leftPanelBox"><div class="leftPanelLabel"><a title="disable filters" id="panelFilterSelectionDisableCross"><i class="fa fa-caret-down"></i>&ensp;'+la._182+'</a></div><div id="dealCheckBoxes" '+S+">";S+='<div><input id="checkboxLowestEver" '+(N.isLowest?"checked":"")+' type="checkbox"><label for="checkboxLowestEver">'+la._459+"</label></div>";S+='<div class="'+I+'"><input  id="checkboxLowestAll" '+(N.isLowestOffer?"checked":"")+' type="checkbox"><label title="'+la._460+'" for="checkboxLowestAll">'+
la._461+"</label></div>";S+='<div class="'+I+'"><input  id="checkboxOutOfStock" '+(N.isOutOfStock?"checked":"")+' type="checkbox"><label for="checkboxOutOfStock">'+la._134+"</label></div>";p=N.priceTypes[0]===CsvType.AMAZON.index;S+='<div class="'+I+'">\n\t\t\t\t<input id="checkboxMustHaveAmazonOffer"'+(N.mustHaveAmazonOffer&&!p?" checked":"")+(p?" disabled":"")+' type="checkbox">\n\t\t\t\t<label for="checkboxMustHaveAmazonOffer">Has Amazon offer</label>\n\t\t\t</div>';S+='<div class="'+I+'">\n\t\t\t\t<input id="checkboxMustNotHaveAmazonOffer"'+
(N.mustNotHaveAmazonOffer&&!p?" checked":"")+(p?" disabled":"")+' type="checkbox">\n\t\t\t\t<label for="checkboxMustNotHaveAmazonOffer">No Amazon offer</label>\n\t\t\t</div>';S+='<div><input id="checkboxHasReviews" '+(N.hasReviews?"checked":"")+' type="checkbox"><label for="checkboxHasReviews">'+la._463+"</label></div>";N.priceTypes[0]===CsvType.AMAZON.index&&(S+='<div><input id="checkboxIsPrimeExclusive" '+(N.isPrimeExclusive?"checked":"")+' type="checkbox"><label for="checkboxIsPrimeExclusive">Is Prime exclusive (beta)</label></div>');
S+='<div><input id="checkboxFilterErotic" '+(N.filterErotic?"checked":"")+' type="checkbox"><label for="checkboxFilterErotic">'+la._464+"</label></div>";S+='<div><input id="checkboxSingleVariation" '+(N.singleVariation?"checked":"")+' type="checkbox"><label for="checkboxSingleVariation" style="width:132px;">'+la._990+"</label></div>";S+="</div></div>";p=N.isRangeEnabled&&N.priceTypes!=CsvType.SALES.index?"":' class="hidden"';for(var H='<div id="deltaPercentRange"></div><div class="filterbar__label filterbar__label--up">'+
la._489+"</div>",L='<div id="deltaRange"></div><div class="filterbar__label filterbar__label--up">'+la._490+"</div>",B='<div id="currentRange"></div><div class="filterbar__label filterbar__label--up">'+la._491+"</div>",E='<div id="salesRankRange" class="flex">\n\t\t\t\t<span>'+la._492+'<div id="srRangeMin" contenteditable="true">\n\t\t\t\t\t'+(-1==N.salesRankRange[0]?la._142:NumberUtil.format(N.salesRankRange[0]))+"\n\t\t\t\t</div></span>\n\t\t\t\t<span>"+la._493+'<div id="srRangeMax" contenteditable="true">\n\t\t\t\t\t'+
(-1==N.salesRankRange[1]?la._142:NumberUtil.format(N.salesRankRange[1]))+'\n\t\t\t\t</div></span>\n\t\t\t</div>\n\t\t\t<div class="filterbar__label filterbar__label">'+CsvType.getName(CsvType.SALES.index)+" "+la._456+"</div>",U="",ka=10;50>=ka;ka+=10)U+='<i class="fa fa-star'+(N.minRating<ka?"-o":"")+'" data-rating="'+ka+'"></i> ';replaceHtml("leftPanel",""+A+z+K+v+('<div class="leftPanelBox'+I+' filterbar__box filterbar__box--range">\n\t\t\t\t<div class="leftPanelLabel">\n\t\t\t\t\t<a title="disable range selections" id="panelRangeSelectionDisableCross" class="'+
I+'"><i class="fa fa-caret-down"></i>&ensp;'+la._455+'</a>\n\t\t\t\t</div>\n\t\t\t\t<div style="margin-top: 12px;margin-bottom: -14px;" id="panelRangeSelection" '+p+">\n\t\t\t\t\t"+H+"\n\t\t\t\t\t"+L+"\n\t\t\t\t\t"+B+"\n\t\t\t\t\t"+E+'\n\t\t\t\t\t<div id="minRating" class="filterbar__filter filterbar__filter--star">\n\t\t\t\t'+(U+'\n\t\t\t</div>\n\t\t\t<div class="filterbar__label">'+la._911+"</div>\n\t\t\t\t</div>\n\t\t\t</div>"))+S+J+('<div style="color: #8a8a8a;font-size: 12px;text-align: right;margin-bottom: 6px;margin-top: -4px;">&emsp;\ud83d\ude9a = '+
la._465+'</div><div id="resetSettings" title="'+la._466+'"><i class="fa fa-undo"></i>&ensp;'+la._467+'</div><div id="clearVisited"><i class="fa fa-eraser"></i>&ensp;')+(la._468+"</div>"+(ta&&ra?'<div id="clearVisitedSetting"><i class="fa fa-sliders"></i>&ensp;Set clearing interval</div>':""))+('<br><div id="queryJSON" title="'+la._470+'"><i class="fa fa-file-code-o"></i>&ensp;'+la._469+'</div><br><br><div id="reloadDeals" class="url"><i class="fa fa-refresh " style="font-size: 18px;"></i>&ensp;Reload deals</div><br><br><div id="leftPanelMarkAllVisited"><i class="fa fa-check-square-o fa-lg"></i><br><span>'+
la._427+'</span></div><div><div class="leftPanelBottomMenu" id="leftPanelBackToTop"><i class="fa fa-arrow-up fa-lg"></i><br><span>')+(la._196+"</span></div>"));$("#resetSettings").on("click",function(){N=Z.construct(N.settings.viewTyp);isMobile?T():$("#submitDealQuery").trigger("click")});$("#dealsViewType div").on("click",function(){var fa=parseInt($(this).data("viewtype"));fa!==N.settings.viewTyp&&(N.settings.viewTyp=fa===ja.TABLE?ja.TABLE:ja.BOX,N.settings.viewTyp===ja.BOX&&GridDeals.destroy(),
$("#submitDealQuery").trigger("click"))});$("#clearVisited").on("click",function(){sessionStorage.clear();$("#submitDealQuery").trigger("click");ra&&ra.clear()});$("#reloadDeals").on("click",function(){$("#submitDealQuery").trigger("click")});$("#clearVisitedSetting").on("click",function(fa){showPopup("Visited Deals Settings",'<div><div><div>Set the days after which a visited deal should automatically no longer be marked as visited: </div><span style="margin-right:20px;"><i class="fa fa-calendar" ></i>&ensp;Days:</span><span id="perPage" class="hrefContainer"><span>1</span><span>2</span><span>3</span><span>7</span><span>14</span><span>30</span></span><div><span style="margin-right:20px;"><i class="fa fa-eye-slash" ></i>&ensp;Opacity of visited deals:</span><span id="imageSize" class="hrefContainer"><span>0.1</span><span>0.25</span><span>0.5</span></span></div></div><br>The information which deals you opened or marked as visited is stored in your browser and not in your account.</div>',
!0);$("#perPage").children().each(function(oa,G){storage.dealsClearDays=storage.dealsClearDays||7;$(G).text()==storage.dealsClearDays&&$(G).addClass("bigAndBold")});$("#imageSize").children().each(function(oa,G){storage.dealsOpacity=storage.dealsOpacity||.5;$(G).text()==storage.dealsOpacity&&$(G).addClass("bigAndBold")});$("#perPage").on("click",function(oa){oa=oa.target;if(""==oa.id){var G=Number($(oa).text());0<G&&31>G&&($(oa).siblings().removeClass("bigAndBold"),$(oa).addClass("bigAndBold"),storage.dealsClearDays=
G,settings.send())}});$("#imageSize").on("click",function(oa){oa=oa.target;if(""==oa.id){var G=Number($(oa).text());0<G&&.8>G&&($(oa).siblings().removeClass("bigAndBold"),$(oa).addClass("bigAndBold"),storage.dealsOpacity=G,settings.send(),$("#submitDealQuery").trigger("click"))}});fa.stopPropagation();return!1});$("#queryJSON").on("click",function(){var fa=JSON.parse(JSON.stringify(N));delete fa.perPage;delete fa.settings;fa.excludeCategories=fa.excludeCategories[N.domainId];fa.includeCategories=
fa.includeCategories[N.domainId];fa.page=0;fa.priceTypes[0]===CsvType.LIGHTNING_DEAL.index&&(fa.dateRange="0");fa='<div style="width:500px;"><span>If you have Keepa API access you can use the following JSON to <a href="https://discuss.keepa.com/t/browsing-deals/338">browse deals</a> via our API:</span><div><pre style="height: 300px;overflow: auto;background-color: #fff4e0;">'+JSON.stringify(fa,null,4)+'</pre><br>Complete API URL:<div style="width=100%; overflow: auto;background-color: #fff4e0;white-space: nowrap;">https://api.keepa.com/deal?key=<span style="color:red">YOUR_API_KEY</span>&selection='+
encodeURIComponent(JSON.stringify(fa))+"</div></div></div>";showPopup("Deals API query for current selection",fa,!0)});0<N.titleSearch.length&&($("#dealSearchBar").val(N.titleSearch),d($("#submitDealSearch")));$("#salesRankRange div").attr("title",la._472);$("#salesRankRange div").on("focus",function(fa){$(this).text("")});$("#salesRankRange div").on("focusout",function(fa){fa=$(this);var oa=fa.text(),G=fa.attr("id");if(0!=oa.length){if("srRangeMin"==G){if(G=Number(oa),N.salesRankRange[0]=Number(G),
1!=N.salesRankRange[1]){var X=N.salesRankRange[1];-1!=X&&X<G&&($("#srRangeMax").text(NumberUtil.format(G+1)),N.salesRankRange[1]=Number(G+1))}}else"srRangeMax"==G&&(X=Number(oa),N.salesRankRange[1]=Number(X),-1!=N.salesRankRange[0]&&(G=N.salesRankRange[0],-1!=G&&G>X&&($("#srRangeMin").text(NumberUtil.format(X-1)),N.salesRankRange[0]=Number(X-1))));oa=oa.split(",").join("");fa.text(NumberUtil.format(oa))}else fa.text("all"),N.salesRankRange["srRangeMax"==G?1:0]=-1;T()});$("#salesRankRange div").on("keydown",
function(fa){fa=fa.keyCode;var oa=$(this),G=47<fa&&58>fa||95<fa&&112>fa;if(32==fa||13==fa||64<fa&&91>fa||185<fa&&193>fa||218<fa&&223>fa)return 13==fa&&setTimeout(function(){oa.trigger("focusout")},0),!1;if(G)return 7>=$(this).text().length});$("#dealSearchBar").on("change",function(){d($("#submitDealSearch"));u()});$("#submitDealSearch").on("click",function(){$("#dealSearchBar").val()==N.titleSearch&&($("#dealSearchBar").val(""),N.titleSearch="",d($("#submitDealSearch")),u())});z=$("#dealCheckBoxes");
$("#deltaPercentRange");var ma=$("#deltaRange"),na=$("#currentRange"),W=$("#dealPriceTypesFilter"),ya=$("#dealSortType"),Aa=$("#dealDateRange"),Da=$("#panelRangeSelectionDisableCross"),va=$("#panelFilterSelectionDisableCross");z.click(function(fa){$(fa.target).addClass("active");var oa=$(fa.target).attr("id");if(oa){switch(oa){case "checkboxLowestEver":case "checkboxLowestAll":case "checkboxRisers":case "checkboxHighestEver":N.isOutOfStock=!1;$("#checkboxOutOfStock").prop("checked",!1);break;case "checkboxOutOfStock":N.isLowest=
!1,$("#checkboxLowestEver").prop("checked",!1),N.isLowestOffer=!1,$("#checkboxLowestAll").prop("checked",!1)}switch(oa){case "checkboxRisers":case "checkboxHighestEver":N.isLowestOffer=!1,$("#checkboxLowestAll").prop("checked",!1),N.isLowest=!1,$("#checkboxLowestEver").prop("checked",!1)}switch(oa){case "checkboxMustHaveAmazonOffer":N.mustHaveAmazonOffer=$(fa.target).prop("checked");N.mustHaveAmazonOffer&&(N.mustNotHaveAmazonOffer=!1,$("#checkboxMustNotHaveAmazonOffer").prop("checked",!1));break;
case "checkboxMustNotHaveAmazonOffer":N.mustNotHaveAmazonOffer=$(fa.target).prop("checked");N.mustNotHaveAmazonOffer&&(N.mustHaveAmazonOffer=!1,$("#checkboxMustHaveAmazonOffer").prop("checked",!1));break;case "checkboxLowestEver":N.isLowest=$(fa.target).prop("checked");break;case "checkboxLowestAll":N.isLowestOffer=$(fa.target).prop("checked");break;case "checkboxFilterErotic":N.filterErotic=$(fa.target).prop("checked");break;case "checkboxSingleVariation":N.singleVariation=$(fa.target).prop("checked");
break;case "checkboxHasReviews":N.hasReviews=$(fa.target).prop("checked");break;case "checkboxIsPrimeExclusive":N.isPrimeExclusive=$(fa.target).prop("checked");break;case "checkboxOutOfStock":N.isOutOfStock=$(fa.target).prop("checked")}$("#submitDealQuery").trigger("click")}});var za=function(){N.isRangeEnabled?(Da.children().first().removeClass("fa-caret-right").addClass("fa-caret-down"),Da.attr("title","disable range selections")):(Da.children().first().removeClass("fa-caret-down").addClass("fa-caret-right"),
Da.attr("title","enable range selections"))},Ha=function(){N.isFilterEnabled?(va.children().first().removeClass("fa-caret-right").addClass("fa-caret-down"),va.attr("title","disable filters")):(va.children().first().removeClass("fa-caret-down").addClass("fa-caret-right"),va.attr("title","enable filters"))};za();Ha();Da.click(function(fa){N.isRangeEnabled=!N.isRangeEnabled;za();u()});va.click(function(fa){N.isFilterEnabled=!N.isFilterEnabled;Ha();u()});W.find("> div").on("click",function(fa){fa=$(fa.target);
var oa=fa.data("type");if("undefined"!==typeof oa)N.priceTypes[0]=oa,u();else if("undefined"!==typeof fa.data("warehousecondition")){var G=[],X=[];W.find("input[data-warehousecondition]").each(function(aa,da){aa=$(da).data("warehousecondition");G.push(aa);$(da).prop("checked")&&X.push(aa)});N.warehouseConditions=G!==X?X:G;u()}});Aa.click(function(fa){N.priceTypes[0]!==CsvType.LIGHTNING_DEAL.index&&(Aa.children().removeClass("active"),$(fa.target).addClass("active"),fa=$(fa.target).attr("data-dateRange"),
N.dateRange=fa,N.page=0,isMobile?T():$("#submitDealQuery").trigger("click"))});ya.click(function(fa){ya.children().removeClass("active");$(fa.target).addClass("active");var oa=$(fa.target).attr("data-sort");null==oa&&(oa=$(fa.target).parent().attr("data-sort"));fa=0;switch(oa){case "percentage":fa=4;if(0==N.sortType||4==N.sortType)fa*=-1;break;case "newest":fa=1;break;case "drop":fa=2;2==N.sortType&&(fa*=-1);break;case "salesRank":fa=3;3==N.sortType&&(fa*=-1);break;case "price":fa=5,5==N.sortType&&
(fa*=-1)}N.sortType=fa;N.page=0;isMobile?T():$("#submitDealQuery").trigger("click")});z=sa();$("#deltaPercentRange").rangeSlider({bounds:{min:0,max:100},defaultValues:{min:N.deltaPercentRange[0],max:N.deltaPercentRange[1]},range:{min:5},step:10,formatter:function(fa){return Math.round(fa).toFixed(0)+"%"}}).on("userValuesChanged",u);ma.rangeSlider({bounds:{min:0,max:1E4*z},defaultValues:{min:N.deltaRange[0],max:N.deltaRange[1]},range:{min:50},step:50,formatter:function(fa){var oa=fa==ma.rangeSlider("bounds").max?
">":"";return""+Money.format(fa,{sourceDomainId:storage.domain,noDigits:!0,preValueModifier:oa})}}).on("userValuesChanged",u);na.rangeSlider({bounds:{min:0,max:5E4*z},defaultValues:{min:N.currentRange[0],max:N.currentRange[1]},range:{min:100},step:100,formatter:function(fa){var oa=fa==na.rangeSlider("bounds").max?">":"";return""+Money.format(fa,{sourceDomainId:storage.domain,noDigits:!0,preValueModifier:oa})}}).on("userValuesChanged",u);$("#minRating i").on("click",function(fa){fa=Number($(this).data("rating"));
var oa=N.minRating===fa,G=oa?fa-10:fa;if(oa)for(oa=50;oa>=fa;oa-=10)$('#minRating i[data-rating="'+oa+'"]').removeClass("fa-star").addClass("fa-star-o");else for(oa=10;oa<=fa;oa+=10)$('#minRating i[data-rating="'+oa+'"]').addClass("fa-star").removeClass("fa-star-o");N.minRating=0<G?G:-1;$("#submitDealQuery").trigger("click")});var ea=$(".leftPanelBottomMenu");$("#leftPanelMarkAllVisited").on("click",function(){var fa=$("a:not(.href)"),oa;for(oa in fa){var G=fa[oa].href;G&&-1!=G.indexOf("#!product/")&&
(G=G.split("/"),sessionStorage[G[G.length-1]]=1,$(fa[oa]).parent().css("opacity","0.4"),ra&&ra.setItem(G[G.length-1],keepaTime.now()))}GridDeals.setIsVisited(!0)});$("#leftPanelBackToTop").on("click",function(){ea.hide();O=!1;$("html, body").velocity("scroll",300,function(){O=!0});return!1});var ia=$("#leftPanel"),ua=ia.height();$(window).on("scroll.backToTop",function(fa){O&&("none"==ia.css("display")?$(window).off("scroll.backToTop"):$(this).scrollTop()>ua-200?ea.show(500):ea.hide(300))})}function F(z,
I){var K=z.current[N.priceTypes[0]],A=z.deltaPercent[N.priceTypes[0]];A=100==A?99:A;var J=0<storage.dealsThumbSize?20<A?32:10<A?24:16:20<A?24:16;var S=0==storage.dealsThumbSize?50:100,v=z.current[CsvType.SALES.index],p=-1==v?"":" "+la._473+" "+NumberUtil.format(z.current[CsvType.SALES.index]),H=GraphService.getWebGraphTypeAllOff();H[CsvType.SALES.index]=1;H=GraphService.getUrl(z.asin,storage.domain,S,10,H,31,1);v=-1!=v&&N.priceTypes[0]!=CsvType.SALES.index?'<span name="minigraphSales" title="1 month '+
CsvType.getName(CsvType.SALES.index)+" history."+p+'" style="flex-grow: 1;text-align: right;right: 13px;height:10px; width:'+S+"px; display: inline-block;background:url("+H+') no-repeat right"></span><br>':"";p=GraphService.getWebGraphTypeAllOff();p[N.priceTypes[0]]=1;p=GraphService.getUrl(z.asin,storage.domain,S,10,p,31,1);p=CsvType.getObject(N.priceTypes[0]).graphAPI?"background-image:url("+p+");":"";S='<div class="flex" style="height:12px;">\n\t\t\t\t<span title="1 month '+CsvType.getName(N.priceTypes[0])+
' price history" name="minigraph" style="margin-bottom:2px;height:10px;width:'+S+"px;display:inline-block;"+p+'"></span>'+v+"\n\t\t\t</div>";A='<div class="productDiscountBox">\n\t\t\t\t'+(0==A?"":'<i class="fa fa-arrow-circle-down fa-18 arrowBlue" style="font-size:'+(J+3)+'px !important;"></i>')+'<span class="productSmallPercent-'+J+'">'+(999<A?">999%":0==A?"&nbsp;":A+"%")+"</span>\n\t\t\t</div>";p=v="";if(N.priceTypes[0]===CsvType.SALES.index){H=1>z.avg[N.priceTypes[0]]?"":""+CsvType.format("SALES",
z.avg[N.priceTypes[0]]);var L=""+CsvType.format("SALES",K)}else H=1>z.avg[N.priceTypes[0]]?"":""+Money.format(z.avg[N.priceTypes[0]],{sourceDomainId:N.domainId}),N.priceTypes[0]===CsvType.LIGHTNING_DEAL.index&&(H=0<z.avg[CsvType.AMAZON.index]?z.avg[CsvType.AMAZON.index]:z.avg[CsvType.NEW.index],H=1>H?"":""+Money.format(H,{sourceDomainId:N.domainId})),L=-1==K?la._134:""+Money.format(K,{sourceDomainId:N.domainId}),showReferencePrice(N.domainId)&&(v=1>z.avg[N.priceTypes[0]]?"":'<span class="price__reference">'+
Money.format(z.avg[N.priceTypes[0]],{sourceDomainId:N.domainId,targetDomainId:N.domainId})+"</span>&ensp;",p=-1==K?"":'<span class="price__reference">'+Money.format(K,{sourceDomainId:N.domainId,targetDomainId:N.domainId})+"</span>&ensp;");K='<div class="productDealTable">\n\t\t\t\t<span class="productPriceTableTdSmallS">'+(H?la._385+": ":"")+v+H+'</span><br><span class="productPriceTableTdLargeS">'+la._81+p+L+"</span>\n\t\t\t</div>";v=null==z.categories||0==z.categories.length?'<br><span class="dealsFindRelatedDeals">&ensp;</span>':
'<br><span class="dealsFindRelatedDeals" data-catIds="'+JSON.stringify(z.categories)+'">'+la._420+"</span>";p='<span class="externalAmazon" style="position: absolute;color:#555;cursor: alias;right: 7px;bottom: 7px;" href="'+getAmazonRedirectByDomain(z.domainId,z.asin)+'" title="'+la._99+' Amazon" target="_blank"><i class="fa fa-amazon"></i></span>';H="";N.priceTypes[0]==CsvType.WAREHOUSE.index&&0<z.warehouseCondition&&(H='<span title="'+encodeHTML(z.warehouseConditionComment)+'" class="wdc">'+CsvType.getCondition(z.warehouseCondition)+
"</span><br>");v='<div class="productDealAgoBox">\n                '+H+'\n\t\t\t\t<span class="productDealAgo">'+la._476+" "+prettyDate(keepaTime.now()-z.creationDate)+"</span>"+v+"\n\t\t\t\t"+p+"\n\t\t\t</div>";return M(z,I,S+'<div class="flex">'+A+K+"</div>"+v,J,!1)}function M(z,I,K,A,J){A=imageToHtml(z.imagesCSV,180,"");J="";0==storage.dealsThumbSize&&(J="margin-left: 6px;");5==z.domainId&&(C=16);if(null==z.title)return reportBug(null,"deals: title is null! "+z.domainId+" "+z.asin),"";z.title=
stripHTML(z.title).replace(/"/g,"&quot;");return'<div class="title" style="max-width: 210px;font-size: 14px">'+(z.title.length<=C?z.title:z.title.substr(0,C)+"\u2026")+'</div><a href="#!product/'+z.domainId+"-"+z.asin+'"><div class="productBox" id="pB'+I+'" title="'+z.title+'"><div class="productImageDiv"><div class="productImage" >'+A+'</div></div><div class="productSmallDescription" style="'+J+'">'+K+"</div></div></a>"}function Q(z,I,K){if(0==z.length)$("#filterBar").hide();else{$("#filterBar").show();
for(var A={},J=0,S=0;S<I.length;S++)A[I[S]]={id:z[S],count:K[S],name:I[S]},J+=K[S];S=[];for(var v in A)S.push(v);S.sort();var p="",H=J,L=N.includeCategories[N.domainId];J=0==N.excludeCategories[N.domainId].length&&0==N.includeCategories[N.domainId].length?'<span style="color: #444; white-space: nowrap; text-shadow: #ccc 1px 1px 2px;">'+la._82+" ("+J+")</span>&emsp;":'<a style="white-space: nowrap" id="showAllDeals">'+la._82+" ("+J+")</a>&emsp;";J+='<hr style="margin-top: 9px !important;border-color:rgba(10, 40, 82, 0.5) !important">';
a:for(v in S){v=S[v];var B=!1;for(E in L){var E=L[E];E==A[v].id&&(J+='<span style="color: #222; white-space: nowrap; text-shadow: #ccc 1px 1px 2px;" style="white-space: nowrap" id="'+A[v].id+'">'+v+(0<A[v].count?" ("+A[v].count+")":"")+"</span>&emsp;",B=!0)}if(!B){if(0<N.excludeCategories[N.domainId].length)for(B=0;B<N.excludeCategories[N.domainId].length;B++)if(N.excludeCategories[N.domainId][B]==A[v].id){p+='<span style="white-space: nowrap;">'+v+" ("+A[v].count+')<a class="addCat" rel="'+A[v].id+
'"><i class="fa fa-plus-circle"></i></a></span> &emsp;';H-=A[v].count;continue a}J+='<span style="white-space: nowrap; margin-left: -6px;"><a rel="'+A[v].id+'">'+v+" ("+A[v].count+')</a>&ensp;<a class="removeCat" rel="'+A[v].id+'"><i class="fa fa-times"></i></a></span> &emsp;'}}replaceHtml("filterCats",J);""!=p?(p='<a id="customView" '+(0==L.length?'style="color: #222; white-space: nowrap; text-shadow: #ccc 1px 1px 2px;"':"")+'><span style="color:#0099FF">&uarr;</span>&ensp;'+la._347+" ("+H+')&ensp;<span style="color:#0099FF">&uarr;</span></a><hr style="border-color:#38F !important"><span id="excludedCatsHR">'+
la._348+'</span><div style="color: #777;text-align: center; margin-bottom: -2px; font-size:11px"> '+p+"</div>",replaceHtml("removedCats",p)):replaceHtml("removedCats","");$("#customView").off("click.showAll").on("click.showAll",function(){N.includeCategories[N.domainId]=[]});$("#filterBar").off("click.filter").on("click.filter",function(U){try{if(U.target&&("I"==U.target.nodeName&&(U.target=U.target.parentNode),"A"==U.target.nodeName)){var ka=!1;"showAllDeals"==U.target.id?(N.includeCategories[N.domainId]=
[],N.excludeCategories[N.domainId]=[],ka=!0):"customView"==U.target.id&&(N.includeCategories[N.domainId]=[],ka=!0);var ma=Number($(U.target).attr("rel"));"number"==typeof ma&&ma===ma&&($(U.target).hasClass("removeCat")?(N.excludeCategories[N.domainId].push(ma),N.excludeCategories[N.domainId]=N.excludeCategories[N.domainId].filter(onlyUnique)):$(U.target).hasClass("addCat")?N.excludeCategories[N.domainId].splice(N.excludeCategories[N.domainId].indexOf(ma),1):N.includeCategories[N.domainId]=[ma],ka=
!0);ka&&(Q(z,I,K),N.page=0,isMobile?T():$("#submitDealQuery").trigger("click"))}}catch(na){console.log(na)}})}}function T(){V=!0;dealsTotalResults=1E4;$("#dealsTitleSearchResults").text("");m();h(!1);$("#submitDealQuery").show();$("#submitDealQuery").effect("highlight",{color:"#8CDDFF"},500)}function ha(z,I){setTimeout(function(){z.colorTip({color:"whiteDeals"});z.children().last().each(function(){$(this).css({width:250,top:"-18px"})});z.find(".wdc").colorTip({color:"yellow"})},100);z.find(".dealsFindRelatedDeals").on("click",
function(){N.includeCategories=tryParseJSON($(this).attr("data-catIds"));null==N.includeCategories&&(N.includeCategories=[]);u();return!1});z.find(".externalAmazon").on("click",function(){var J=$(this).attr("href");window.open(J);return!1});z.one("mousedown",function(){$(this).parent().parent().css("opacity","0.4");var J=$(this).parent().attr("href").split("/")[1];sessionStorage[J]=1;ra&&ra.setItem(J,keepaTime.now())});var K=z.find(".productImage > img"),A=K.attr("src");K.mouseenter(function(){var J=
GraphService.getWebGraphTypeAllOff();J[CsvType.AMAZON.index]=1;J[CsvType.NEW.index]=1;J[CsvType.USED.index]=1;J[CsvType.SALES.index]=1;J=GraphService.getUrl(I,storage.domain,180,180,J,365,1);K.attr("src",J);K.attr("title",la._477)});K.mouseleave(function(){K.attr("src",A);K.attr("title","")})}function P(z,I){return'<div class="saveSlotBox"><span title="'+la._480+'" data-slot="'+z+'" class="dealsSaveSlot">'+I+'</span><ul><li data-type="0">'+(la._478+'</li><li data-type="1">'+la._479+'</li><li data-type="2">'+
la._379+'</li></ul><span title="')+la._481+'" class="editSaveSlot"><i class="fa fa-pencil"></i></span></div>'}function R(z){z=z||$("#dealsSaveBox").children(".saveSlotBox");z.find(".dealsSaveSlot").on("click",function(){var I=$(this).attr("data-slot");I=n("slot_"+I,!0);window.location.hash="!deals/"+encodeURIComponent(JSON.stringify(I))});z.find(".editSaveSlot").on("click",function(){$(this).prev().toggle("blind",{direction:"up"},300)});z.find("li").on("click",function(){var I=$(this).closest(".saveSlotBox"),
K=I.find(".dealsSaveSlot"),A=K.attr("data-slot"),J=$(this).attr("data-type");$(this).parent().hide();if(void 0!=A)switch(Number(J)){case 0:g("slot_"+A);break;case 1:var S=K.text();K.attr("contenteditable","true");K.text("");K.focus();K.on("focusout.rename",function(v){K.removeAttr("contenteditable");v=K.text().trim();K.text(v);0==v.length||v.match(/^\s*$/)?K.text(S):(storage["dealsRequest.slotName_"+A]=K.text(),settings.send());K.off("keydown.rename");K.off("focusout.rename")});K.on("keydown.rename",
function(v){v=v.keyCode;var p=$(this);return 13==v||185<v&&193>v||218<v&&223>v?(13==v&&setTimeout(function(){p.trigger("focusout")},0),!1):37==v||39==v||8==v||46==v?!0:20>=$(this).text().length});break;case 2:storage.removeItem("dealsRequest.slot_"+A),storage.removeItem("dealsRequest.slotName_"+A),settings.send(),K.hide("explode",700,function(){I.remove();$("#dealsSaveSlotAdd").show()})}})}function Y(){$(".dealsSaveSlot").each(function(z,I){var K=$(I).attr("data-slot");z=n("slot_"+K,!0);z.perPage=
-1;z=$jscomp.makeIterator(r(z));var A=z.next().value;z.next();A.done(function(J){$(I).text(storage["dealsRequest.slotName_"+K]+(" ("+J.totalResults+")"))})})}var ja={BOX:0,TABLE:1},ra=null,ta=null,pa=storage.domain,ca={driver:localforage.INDEXEDDB,name:"keepaDeals",version:1,size:5E5,storeName:"visitedDeals",description:"Caches visited deals"},sa=function(){var z=1;switch(storage.domain){case "10":z=100;break;case "11":z=100;break;case "12":case "7":z=10;break;case "13":z=2}return z},Z={construct:function(z){for(var I=
$jscomp.makeIterator(Object.getOwnPropertyNames(this)),K=I.next();!K.done;K=I.next())K=K.value,"construct"!=K&&delete this[K];this.page=0;this.domainId=localStorageSupported?storage.domain:1;this.excludeCategories=[];this.includeCategories=[];for(I=0;I<numberOfDomains;I++)this.excludeCategories[I]=[],setTimeout(function(){for(var A=0;A<numberOfDomains;A++)storage.removeItem("dealsExcludedCats."+A),storage.removeItem("dealExcludedCats."+A);storage.removeItem("dealExcludedCats");storage.removeItem("dealsExcludedCats")},
1E4),this.includeCategories[I]=[];I=sa();this.priceTypes=[CsvType.AMAZON.index];this.deltaRange=[0,1E4*I];this.deltaPercentRange=[20,80];this.salesRankRange=[-1,-1];this.currentRange=[500*I,4E4*I];this.minRating=-1;this.isOutOfStock=this.isLowestOffer=this.isLowest=!1;this.titleSearch="";this.isRangeEnabled=!0;this.isFilterEnabled=!1;this.singleVariation=this.filterErotic=!0;this.mustNotHaveAmazonOffer=this.mustHaveAmazonOffer=this.isPrimeExclusive=this.hasReviews=!1;this.sortType=4;this.dateRange=
1;this.warehouseConditions=[2,3,4,5];this.settings={viewTyp:z===ja.TABLE?ja.TABLE:ja.BOX};return this}},N=Z.construct(),f=['&nbsp;<i class="fa fa-sort-numeric-asc"></i>','&nbsp;<i class="fa fa-sort-numeric-desc"></i>'],C=28,V=!1,ba=[],w=!0,O=!0;return{init:function(){storage.domain!=pa&&(Y(),pa=storage.domain);if(w){try{a()}catch(A){console.error(A)}try{b(),ta&&ta.removeOudatedCacheEntries({now:keepaTime.now(),days:Number(storage.dealsClearDays||7)})}catch(A){console.error(A)}}w=!1;$("#contentAlign").css({marginTop:"130px"});
$("#submitDealQuery").off().on("click",function(){$(this).hide();var A=window.location.hash;dealsTotalResults=1E4;V=!1;window.location.hash="!deals/"+encodeURIComponent(JSON.stringify(N));A==window.location.hash&&q()});$("#submitDealCategorySearch").off().on("click",function(){0!=z.val().length&&($("#dealCategorySearchBar").val(""),$("#submitDealCategorySearch").css("background","#fff url("+imgCDNUrl+"search.gif) center no-repeat"),$("#submitDealCategorySearch").attr("title",""),$("#filterBarContent").show(),
$("#categorySearchResults").hide(),u())});$("#dealCategorySearchBar").off().on("input",function(){d($("#submitDealCategorySearch"));K()});var z=$("#dealCategorySearchBar"),I,K=function(){var A=z.val();if(!(3>A.length)){try{clearTimeout(I)}catch(J){}I=setTimeout(function(){network.request({path:"service/search",type:"category",domainId:N.domainId,content:A}).always(function(J){if(null==J||null==J.categories)console.error("category search data is null");else{J=J.categories;var S=[];a:for(H in J){var v=
J[H];if(null!=v.children&&0!=v.children.length)for(var p in v.children)if(J[v.children[p]])continue a;S.push(v.catId)}var H="";p=[];for(v=0;v<S.length;v++){for(var L=J[S[v]],B='<span data-catId="'+L.catId+'">'+L.name+"</span>",E=L.name;null!=L&&0!=L.parent;)if(L=J[L.parent])B='<span data-catId="'+L.catId+'">'+L.name+"</span>&ensp;&#10140;&ensp;"+B,E=L.name+E;-1==E.indexOf("Custom Stores")&&-1==E.indexOf("Special Feature Stores")&&-1==E.indexOf("Kindle")&&p.push([E,B])}p.sort(function(ka,ma){return ka[0]<
ma[0]?-1:ka[0]>ma[0]?1:0});for(var U in p)H+=p[U][1]+"<br>";replaceHtml("categorySearchResults",'<div style="color: #000; margin-bottom: 5px; font-size: 12px;">'+(0==H.length?"No matching subcategory found.":'Choose deal subcategory <sup title="Work in progress! Give us feedback in the comment section." style="color:red">beta</sup>')+"</div>"+H);$("#filterBarContent").hide();$("#categorySearchResults").show();$("#categorySearchResults > span").on("click",function(ka){ka=Number($(ka.target).attr("data-catId"));
N.includeCategories[N.domainId]=[ka];u()});N.includeCategories[N.domainId]=S;u()}})},1E3)}};n("last",!1);q()},loadRequest:n,insertProductParts:M,addSaveSlots:function(){for(var z=la._482,I="",K=!1,A=0;30>A;A++)null!=storage["dealsRequest.slot_"+A]?I+=P(A,storage["dealsRequest.slotName_"+A]||z+A):K=!0;A="<span>"+la._483+"&emsp;</span>";0<I.length&&(A="");K=K?'<div id="dealsSaveSlotAdd" title="'+la._484+'">'+A+'<i class="fa fa-plus-circle fa-lg"></i></div>':"";$("#bodyPanel").prepend('<div id="dealsSaveBox" class="flex">'+
I+K+"</div>");$("#dealsSaveSlotAdd").on("click",function(){for(var J=0;30>J&&void 0!=storage["dealsRequest.slot_"+J];J++);$("#dealsSaveSlotAdd").children("span").remove();if(30>J){g("slot_"+J);var S=""==N.titleSearch?z+J:N.titleSearch;storage["dealsRequest.slotName_"+J]=S;R($(this).before(P(J,S)).prev())}else $(this).hide()});R();Y()},lastRequest:N,formatCategories:Q}};var TrackingComponent=function(){var a={},b=null,d=0,g={},n="",t=!1,h=!1,m=!1,r=!1,q=!1,u="track",D=0,F=[],M=null,Q=!1,T=null,ha=!1,P=[CsvType.AMAZON.index,CsvType.NEW.index,CsvType.USED.index],R=[CsvType.LIGHTNING_DEAL.index,CsvType.NEW_FBA.index,CsvType.NEW_FBM_SHIPPING.index,CsvType.WAREHOUSE.index,CsvType.USED_NEW_SHIPPING.index,CsvType.USED_VERY_GOOD_SHIPPING.index,CsvType.USED_GOOD_SHIPPING.index,CsvType.USED_ACCEPTABLE_SHIPPING.index],Y=function(){var ea=$(".tracking");ea.length&&ea.remove();
D=0;a={};b=null;d=0;g={};n="";q=r=m=h=t=!1;u="track";ha=!1},ja=function(){K([d]);for(var ea=[getDomainByTld("com.mx"),getDomainByTld("com.br"),getDomainByTld("com.au")],ia=getCasinLocalesFromStorage(),ua=!0===ia[0],fa=[],oa=[],G=continents[domainIdToContinent[d]],X=1;X<numberOfDomains;X++)7!=X&&(ua&&-1<G.indexOf(X)&&X!=d&&(ia[X]=!0),-1<ea.indexOf(X)&&!ia[X]?K([X]):-1<G.indexOf(X)&&X!=d?fa.push(X):X!=d&&oa.push(X));fa.concat(oa).forEach(function(aa){ba([aa]).onLoad.done(function(da){"undefined"!==
typeof da&&"undefined"!==typeof da.products&&v([da.products[0]]);K([aa])})})},ra=function(){var ea='<p class="mdc-typography--body2">'+la._147+"</p>";ta()&&(ea=(null!=M||Q?"":'<div class="grid-wrapper-tools" style="position:initial;"><span class="tool__trackback"><span class="trigger"><i class="fa fa-angle-double-left"></i> '+la._919+"</span></span></div>")+'\n                <p class="mdc-typography--body2">'+la._231+"<br><b>"+la._163+'</b></p>\n                <p class="mdc-typography--body2">'+
la._232+":<br>"+la._233+n+"100. "+la._234+n+"97"+la._234_2+".</p>");var ia=N(),ua=za(),fa=Number(get("s_trackingTtl"));ua=material.getSelect("tracking-ttl","tracking-ttl",fa,ua,"",!0,!0);fa=ta()?'<div class="tracking__list-mode-settings"><hr>\n                <p class="mdc-typography--body2">'+la._913+"</p>\n                "+(null!=M?material.getCheckbox("tracking-import-purchased",la._814,!1,!1,"tracking-import-purchased")+"<br>":"")+"\n                "+material.getCheckbox("tracking-overwrite-existing",
la._815,!0,!1,"tracking-overwrite-existing")+"<br>\n                "+material.getCheckbox("tracking-import-oos",la._816,!1,!1,"tracking-import-oos")+"<br>\n            </div>":"";var oa=material.getButton("submitTracking",t?la._681:la._110,null,"bell-o"),G=ta()?'<div class="tracking__submit-overlay-message">\n                <p class="mdc-typography--body2">'+(null!=M?la._224:la._914)+"</p>\n            </div>":"";ea='<div class="tracking'+(isMobile?" tracking--mobile":"")+'" style="display:none;">\n\t\t\t'+
ea+'\n\t\t\t<form id="trackingForm">\n\t\t\t    '+(ta()?"":'<span class="tracking__tab-bar-toggle-hint">'+la._350+'</span>\n\t\t\t\t<div class="tracking__tab-bar-toggle">\n\t\t\t\t\t<i class="fa fa-globe"></i>\n\t\t\t\t</div>')+"\n\t\t\t\t"+ia+"\n\t\t\t\t"+fa+'\n\t\t\t\t<div class="tracking__hint">\n\t\t\t\t\t'+(m?'<p class="mdc-typography--caption tracking__hint--amazononly" style="display:none;">\n\t\t\t\t\t\t<i class="fa fa-info-circle"></i> '+la._873+"<br>\n\t\t\t\t\t</p>":"")+'\n\t\t\t\t\t<p class="mdc-typography--caption tracking__hint--offerdata" style="display:none;">\n\t\t\t\t\t\t<i class="fa fa-info-circle"></i> '+
la._653+'<br>\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<div class="tracking__warning">\n\t\t\t\t\t'+(h?"":'<p class="mdc-typography--body2 tracking__warning--isdrop">\n\t\t\t\t\t\t<i class="fa fa-exclamation-triangle"></i>\n\t\t\t\t\t\t'+(0==storage.accountType?la._705.replace("<br>"," ")+" "+la._706:h?"":la._704.replace("<br>"," ")+" "+la._706)+"\n\t\t\t\t\t</p>")+'\n\t\t\t\t</div>\n\t\t\t\t<div class="tracking__buttons">\n\t\t\t\t\t<span title="'+la._881+'">'+la._874+":</span>&emsp;"+ua+"&emsp;"+
oa+'\n\t\t\t\t</div>\n\t\t\t\t<hr>\n\t\t\t\t<div class="tracking__settings-mode">\n\t\t\t\t    <div>'+(ta()?"":'<span class="trigger--casin-popup href">&raquo; '+la._315+"</span>")+'</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div title="'+la._847+'">'+la._843+":</div>\n\t\t\t\t\t\t"+material.getRadio("tracking-mode-basic",la._844,!0,"tracking-mode",!1,"basic")+"&emsp;\n\t\t\t\t\t\t"+material.getRadio("tracking-mode-advanced",la._845,!1,"tracking-mode",!1,"advanced")+"&emsp;\n\t\t\t\t\t\t"+material.getRadio("tracking-mode-pro",
la._846,!1,"tracking-mode",!1,"pro")+'&emsp;\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="tracking__submit-overlay"><div class="cssload-box-loading"></div>'+G+"</div>\n\t\t\t</form>\n\t\t</div>";replaceHtml(u,ea);material.init(".tracking");B(d);ta()?L():E();na();t?O():z();U()},ta=function(){return 1===D},pa=function(ea,ia,ua){if("object"!==typeof CsvType[ea]||!0!==CsvType[ea].isEnabled||!0!==CsvType[ea].isTrackable)return"";var fa=CsvType[ea],oa=fa.index;if("TRADE_IN"===ea&&ia!==getDomainByTld("com"))return"";
if(ta())var G="percent";else if(fa.currency)a:switch(G=getCurrencyCodeByDomain(d).toLowerCase(),G){case "brl":G="usd";break a;case "aud":case "cad":case "mxn":G="usd"}else G="hashtag";var X="csvtype-"+ia+"-"+oa+"-threshold";G=material.getInputNumberPattern(X,X,CsvType.getName(oa),"","","","off",G);d===getDomainByTld("com.br")&&(G=material.getInputNumberPattern(X,X,CsvType.getName(oa),"","","","off","","",'<i class="mdc-text-field__icon mdc-text-field__icon--custom">'+getCurrencyByDomain(d)+"</i>"));
X=sa(ea,ia);var aa="--csvtype-color:"+fa.color+";--csvtype-color-bg:"+fa.bg+";";0===ea.indexOf("NEW_")&&(aa="--csvtype-color:"+CsvType.NEW.color+";--csvtype-color-bg:"+CsvType.NEW.bg+";");0===ea.indexOf("USED_")&&(aa="--csvtype-color:"+CsvType.USED.color+";--csvtype-color-bg:"+CsvType.USED.bg+";");0===ea.indexOf("REFURBISHED_")&&(aa="--csvtype-color:"+CsvType.REFURBISHED.color+";--csvtype-color-bg:"+CsvType.REFURBISHED.bg+";");var da="";!0===ua&&(da+=" tracking__block--deactivated");fa.isOfferData&&
oa!==CsvType.BUY_BOX_SHIPPING.index&&(da+=" tracking__block--offer-data");ua="";"AMAZON"===ea&&ia===getDomainByTld("in")&&(ua='<div class="tracking__block-overlay--disable" title="Not available for amazon.in"></div>');graphIsRestricted(ia,fa.index)&&(ua='<div class="tracking__block-overlay--disable" title="'+la._895+'"></div>');return'<div class="tracking__block'+da+'" style="'+aa+'" data-type="'+oa+'">\n\t\t\t\t'+G+(ia===d?' <span class="trigger trigger--switch-isdrop" title="'+la._850+'"><span>'+
la._95+'</span> <i class="fa fa-fw fa-retweet"></i></span>':' <span class="trigger--switch-isdrop switch-'+oa+'-isdrop"><span>'+la._95+"</span>")+'\n\t\t\t\t<p class="mdc-text-field-helper-text mdc-text-field-helper-text--persistent">\n  \t\t\t\t\t'+CsvType.getDescriptionTracking(oa)+"\n\t\t\t\t</p>\n\t\t\t\t"+X+'\t\n\t\t\t\t<input type="hidden" name="csvtype-'+ia+"-"+oa+'-isdrop" value="1" />\t\n\t\t\t\t'+ua+"\n\t\t\t</div>"},ca=function(ea,ia){if("object"!==typeof CsvType[ea]||!0!==CsvType[ea].isEnabled||
!0!==CsvType[ea].isTrackable)return"";var ua=CsvType[ea].index,fa="";switch(ea){case "NEW":if(CsvType.NEW_FBA.isTrackable||CsvType.NEW_FBM_SHIPPING.isTrackable)fa+=material.getCheckbox("csvtype-"+ia+"-"+ua+"-shipping",la._836,!1,!1,"csvtype-"+ia+"-"+ua+"-shipping",1)+"<br>";CsvType.NEW_FBA.isTrackable&&(fa+=""+material.getCheckbox("csvtype-"+ia+"-"+ua+"-prime",la._837,!1,!1,"csvtype-"+ia+"-"+ua+"-prime",1));break;case "USED":if(CsvType.USED_NEW_SHIPPING.isTrackable||CsvType.USED_VERY_GOOD_SHIPPING.isTrackable||
CsvType.USED_GOOD_SHIPPING.isTrackable||CsvType.USED_ACCEPTABLE_SHIPPING.isTrackable)fa+=material.getCheckbox("csvtype-"+ia+"-"+ua+"-shipping",la._836,!1,!1,"csvtype-"+ia+"-"+ua+"-shipping",1)+"<br>";CsvType.WAREHOUSE.isTrackable&&(fa+=""+material.getCheckbox("csvtype-"+ia+"-"+ua+"-prime",la._838,!1,!1,"csvtype-"+ia+"-"+ua+"-prime",1));break;case "REFURBISHED":CsvType.REFURBISHED_SHIPPING.isTrackable&&(fa+=""+material.getCheckbox("csvtype-"+ia+"-"+ua+"-shipping",la._836,!1,!1,"csvtype-"+ia+"-"+ua+
"-shipping",1));break;case "LIGHTNING_DEAL":fa+=material.getCheckbox("csvtype-"+ia+"-"+ua+"-upcoming",la._839,!1,!1,"csvtype-"+ia+"-"+ua+"-upcoming",1)+"<br>\n\t\t\t\t\t"+material.getCheckbox("csvtype-"+ia+"-"+ua+"-backinstock",la._840,!1,!1,"csvtype-"+ia+"-"+ua+"-backinstock",1)}return 0===fa.length?"":'<div class="tracking__block-switches">\n\t\t\t\t'+fa+"\n\t\t\t</div>"},sa=function(ea,ia){if(ta())return"";var ua=C(ea,ia);if(null==ua)return"";var fa=function(xa){return CsvType[ea].currency?Money.format(xa,
G):CsvType[ea].index===CsvType.RATING.index?parseFloat(xa/10).toFixed(1):NumberUtil.format(xa,0)},oa=CsvType[ea].currency?n:"#",G={sourceDomainId:d,targetDomainId:d,skipSymbol:!0};ia=CsvType[ea].currency?la._488:la._853;var X=CsvType[ea].currency?la._851:la._852,aa="";ua.decrease.length?ua.decrease.forEach(function(xa){var wa=fa(xa.value);aa+='<tr class="tracking__suggestion-item" data-value="'+wa+'"><td>'+xa.label+"</td><td>"+oa+" "+wa+"</td></tr>"}):aa+='<tr class="tracking__suggestion-item--emtpy"><td colspan="2">'+
X+"</td></tr>";var da="";ua.increase.length?ua.increase.forEach(function(xa){var wa=fa(xa.value);da+='<tr class="tracking__suggestion-item" data-value="'+wa+'"><td>'+xa.label+"</td><td>"+oa+" "+wa+"</td></tr>"}):da+='<tr class="tracking__suggestion-item--emtpy"><td colspan="2">'+X+"</td></tr>";X='<tr class="tracking__suggestion-item--current"><td>'+la._344+"</td><td>-</td></tr>";null!=ua.current&&-1<ua.current&&(X='<tr class="tracking__suggestion-item--current"><td>'+la._344+"</td><td>"+oa+" "+fa(ua.current)+
"</td></tr>");ua=Math.max(ua.decrease.length,ua.increase.length);var qa="";7<ua&&(qa+=" tracking__suggestion--"+(ua-7)+"more");qa+="USED WAREHOUSE COUNT_USED COUNT_REVIEWS REFURBISHED COUNT_REFURBISHED".split(" ").includes(ea)?" tracking__suggestion--right":" tracking__suggestion--left";return'<div class="tracking__suggestion mdc-elevation--z2'+qa+'">\n\t\t\t<div class="tracking__suggestion--decrease">\n\t\t\t\t<table>\n\t\t\t\t\t'+X+"\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>"+la._854+' <i class="fa fa-long-arrow-down"></i></th>\n\t\t\t\t\t\t<th>'+
ia+"</th>\n\t\t\t\t\t</tr>\n\t\t\t\t\t"+aa+'\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\t<div class="tracking__suggestion--increase">\n\t\t\t\t<table>\n\t\t\t\t\t'+X+"\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>"+la._855+' <i class="fa fa-long-arrow-up"></i></th>\n\t\t\t\t\t\t<th>'+ia+"</th>\n\t\t\t\t\t</tr>\n\t\t\t\t\t"+da+"\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>"},Z=function(ea){var ia="",ua="";ea!==d&&(ia='<div class="tracking__sync-switch">'+material.getCheckbox("syncdata-"+ea,"Sync tracking settings from main locale",
!1,!1,"syncdata-"+ea,1)+"</div>",ua='<div class="tracking__sync-overlay"></div>');return"<hr>\n\t\t\t"+ia+'\n\t\t\t<section>\n\t\t\t\t<div>\n\t\t\t\t\t<div data-mode="basic">\t\t\n\t\t\t\t\t\t'+pa("AMAZON",ea)+'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div data-mode="advanced">\n\t\t\t\t\t\t'+ca("LIGHTNING_DEAL",ea)+"\n\t\t\t\t\t\t"+pa("LIGHTNING_DEAL",ea)+"\n\t\t\t\t\t</div>\n\t\t\t\t\t"+(ea===d?'<div class="tracking__block--meta" data-mode="advanced">\n\t\t\t\t\t\t'+material.getInput(!1,"","metadata-memo",
la._808,!1,"metadata-memo","","",!0,"","")+"<br>\n\t\t\t\t\t\t"+material.getInput(!1,"","metadata-tags",la._807,!1,"metadata-tags","","",!0,"","")+"\n\t\t\t\t\t</div>":"")+'\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div data-mode="basic">\n\t\t\t\t\t\t'+pa("NEW",ea)+'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div data-mode="advanced">\n\t\t\t\t\t\t'+ca("NEW",ea)+"\n\t\t\t\t\t\t"+pa("NEW_FBA",ea,!0)+"\n\t\t\t\t\t\t"+pa("NEW_FBM_SHIPPING",ea,!0)+'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div data-mode="pro">\n\t\t\t\t\t\t'+
pa("COUNT_NEW",ea)+'\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div>\t\t\t\n\t\t\t\t\t<div data-mode="basic">\n\t\t\t\t\t\t'+pa("USED",ea)+'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div data-mode="advanced">\n\t\t\t\t\t\t'+ca("USED",ea)+"\n\t\t\t\t\t\t"+pa("WAREHOUSE",ea,!0)+"\n\t\t\t\t\t\t"+pa("USED_NEW_SHIPPING",ea,!0)+"\n\t\t\t\t\t\t"+pa("USED_VERY_GOOD_SHIPPING",ea,!0)+"\n\t\t\t\t\t\t"+pa("USED_GOOD_SHIPPING",ea,!0)+"\n\t\t\t\t\t\t"+pa("USED_ACCEPTABLE_SHIPPING",ea,!0)+'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div data-mode="pro">\n\t\t\t\t\t\t'+
pa("COUNT_USED",ea)+'\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t\t<div data-mode="pro">\n\t\t\t\t<hr>\n\t\t\t\t<p class="mdc-typography--body2">'+la._841+"</p>\n\t\t\t\t<section>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t"+pa("SALES",ea)+"\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t"+pa("RATING",ea)+"\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t"+pa("COUNT_REVIEWS",ea)+'\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t\t<hr>\n\t\t\t\t<p class="mdc-typography--body2">'+la._842+"</p>\n\t\t\t\t<section>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t"+
pa("BUY_BOX_SHIPPING",ea)+"\n\t\t\t\t\t\t"+pa("BUY_BOX_USED_SHIPPING",ea)+"\n\t\t\t\t\t\t"+pa("LISTPRICE",ea)+"\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t"+pa("COLLECTIBLE",ea)+"\n\t\t\t\t\t\t"+pa("COUNT_COLLECTIBLE",ea)+"\n\t\t\t\t\t\t"+pa("TRADE_IN",ea)+"\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t"+pa("REFURBISHED",ea)+"\n\t\t\t\t\t\t"+ca("REFURBISHED",ea)+"\n\t\t\t\t\t\t"+pa("REFURBISHED_SHIPPING",ea,!0)+"\n\t\t\t\t\t\t"+pa("COUNT_REFURBISHED",ea)+"\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t\t"+
ua},N=function(){var ea={id:"tracking__tab-bar",mode:"text",tabs:[{tab:{id:"tracking__tab--"+d,label:'<img src="'+flags[d]+'" /> .'+getTldByDomain(d).replace("com.","").replace("co.","")},panel:{id:"tracking__panel--"+d,content:Z(d)},isActive:!0}],panelsClass:"tracking__panel"};if(!ta()){var ia=domainIdToContinent[d];continents[ia].forEach(function(ua){ua!==d&&ea.tabs.push({tab:{id:"tracking__tab--"+ua,label:'<img src="'+flags[ua]+'" /> .'+getTldByDomain(ua).replace("com.","").replace("co.","")},
panel:{id:"tracking__panel--"+ua,content:""}})});continents.forEach(function(ua,fa){fa!==ia&&ua.forEach(function(oa){oa!==d&&ea.tabs.push({tab:{id:"tracking__tab--"+oa,label:'<img src="'+flags[oa]+'" /> .'+getTldByDomain(oa).replace("com.","").replace("co.","")},panel:{id:"tracking__panel--"+oa,content:""}})})})}return material.getTabs(ea)},f=function(){var ea=$.Deferred(),ia=material.getButton("multilocale__submit",la._848,null,"globe"),ua=material.getButton("multilocale__cancel",la._380,"ban",null,
!1,!0),fa=[13,14],oa=[la._664,la._665,la._353,la._354,la._663],G="";continents.forEach(function(X,aa){var da="";fa.length&&(X=X.filter(function(qa){return!fa.includes(qa)||qa===d}));0!==X.length&&(X.forEach(function(qa){da+=material.getCheckbox("multilocale-"+qa,'<img src="'+flags[qa]+'" /> .'+getTldByDomain(qa).replace("com.","").replace("co.",""),!1,!1,"multilocale[]",qa);da+='<span class="tracking__multilocale-casin-data tracking__multilocale-casin-data--'+qa+'"><i class="fa fa-spinner fa-pulse"></i></span>'}),
G+=da?'<div>\n\t\t\t\t\t<span class="tracking__multilocale-select-all"><i class="fa fa-fw fa-caret-down"></i> '+oa[aa]+"</span>\n\t\t\t\t\t"+da+"\n\t\t\t\t</div>":"")});ia='<div class="tracking__popup">\n\t\t\t\t<form id="tracking__form--multilocale">\t\n\t\t\t\t\t<div class="tracking__multilocale-options">\n\t\t\t\t\t\t'+G+"\n\t\t\t\t\t</div>\t\t\t\t\n\t\t\t\t\t<div>"+ia+"&emsp;"+ua+'</div>\n\t\t\t\t\t<p class="mdc-typography--caption">'+la._349+"</p>\n\t\t\t\t</form>\n\t\t\t</div>";material.init("#tracking__form--multilocale");
setTimeout(function(){var X=$("#tracking__form--multilocale"),aa=X.find('input[value="'+d+'"]');aa.prop("checked",!0);aa.prop("disabled",!0);$("#tracking__tab-bar").find(".mdc-tab:visible").each(function(){var xa=$(this).attr("id").replace("tracking__tab--","");X.find('input[value="'+xa+'"]').prop("checked",!0)});X.find(".tracking__multilocale-select-all").on("click",function(xa){xa=$(this).closest("div");0<xa.find('input[type="checkbox"]:not(:checked)').length?xa.find('input[type="checkbox"]').prop("checked",
!0):xa.find('input[type="checkbox"]:not(:disabled)').prop("checked",!1)});var da=$("#multilocale__submit"),qa=$("#multilocale__cancel");qa.on("click",function(xa){xa.preventDefault();ea.resolve()});da.on("click",function(xa){xa.preventDefault();da.prop("disabled",!0);qa.prop("disabled",!0);var wa=[];X.find("input:checked:not(:disabled)").each(function(){wa.push(Number($(this).val()))});ba(wa,!0).onLoad.done(function(Ca){"undefined"!==typeof Ca&&v(Ca);ea.resolve({enableDomainIds:wa})}).fail(function(){ea.resolve({enableDomainIds:wa})})})},
0);return{onSubmit:ea.promise(),html:ia}},C=function(ea,ia){var ua=ia===a.domainId?a:g[ia];if("undefined"===typeof ua)return{decrease:[],increase:[],current:null};var fa=ua.csv[CsvType[ea].index],oa=ua.stats[CsvType[ea].index]?ua.stats[CsvType[ea].index]:null,G=[],X=[];ua={sourceDomainId:ua.domainId,targetDomainId:d,keepUnit:!0};var aa=null;if(null!==fa){var da=CsvType[ea].currency?Money.format(1,{sourceDomainId:d,targetDomainId:d,skipSymbol:!0}):1;CsvType[ea].index===CsvType.RATING.index&&(da=parseFloat(da/
10).toFixed(1));var qa=[3,5,7,10,20],xa=Number(get("s_percent"));-1===qa.indexOf(xa)&&qa.push(xa);var wa=[];aa=getLast(fa,CsvType[ea]);CsvType[ea].currency&&ia!==d&&(aa=Money.raw(aa,ua));0<aa&&(fa=aa-1,G.push({label:la._856+" ("+(CsvType[ea].currency?n+" ":"")+"-"+da+")",value:fa}),wa.push(fa));oa&&(0<oa.lowest.val&&(oa.lowest.val<aa||-1===aa)&&(fa=Math.floor(oa.lowest.val),CsvType[ea].currency&&ia!==d&&(fa=Money.raw(fa,ua)),-1===wa.indexOf(fa)&&(G.push({label:la._859,value:fa}),wa.push(fa))),0<oa.lowest90.val&&
(oa.lowest90.val<aa||-1===aa)&&(fa=Math.floor(oa.lowest90.val),CsvType[ea].currency&&ia!==d&&(fa=Money.raw(fa,ua)),-1===wa.indexOf(fa)&&(G.push({label:la._383+" 3 "+la._878,value:fa}),wa.push(fa))),0<oa.lowest180.val&&(oa.lowest180.val<aa||-1===aa)&&(fa=Math.floor(oa.lowest180.val),CsvType[ea].currency&&ia!==d&&(fa=Money.raw(fa,ua)),-1===wa.indexOf(fa)&&(G.push({label:la._383+" 6 "+la._878,value:fa}),wa.push(fa))),0<oa.lowest365.val&&(oa.lowest365.val<aa||-1===aa)&&(fa=Math.floor(oa.lowest365.val),
CsvType[ea].currency&&ia!==d&&(fa=Money.raw(fa,ua)),-1===wa.indexOf(fa)&&(G.push({label:la._383+" 1 "+la._879,value:fa}),wa.push(fa))),0<oa.avg.val&&(oa.avg.val<aa||-1===aa)&&(fa=Math.floor(oa.avg.val),CsvType[ea].currency&&ia!==d&&(fa=Money.raw(fa,ua)),-1===wa.indexOf(fa)&&(G.push({label:"90 "+la._857,value:fa}),wa.push(fa))),0<oa.avg180.val&&(oa.avg180.val<aa||-1===aa)&&(fa=Math.floor(oa.avg180.val),CsvType[ea].currency&&ia!==d&&(fa=Money.raw(fa,ua)),-1===wa.indexOf(fa)&&(G.push({label:"180 "+la._857,
value:fa}),wa.push(fa))));0<aa&&qa.forEach(function(Ca){var Ba=Math.floor(aa-aa*Ca/100);-1===wa.indexOf(Ba)&&(G.push({label:"-"+Ca+"%",value:Ba}),wa.push(Ba))});G.sort(function(Ca,Ba){return Ca.value>Ba.value?-1:Ca.value<Ba.value?1:0});wa=[];0<aa&&(fa=aa+1,X.push({label:"Any ("+(CsvType[ea].currency?n+" ":"")+"+"+da+")",value:fa}),wa.push(fa));oa&&(0<oa.highest.val&&(oa.highest.val>aa||-1===aa)&&(da=Math.ceil(oa.highest.val),CsvType[ea].currency&&ia!==d&&(da=Money.raw(da,ua)),-1===wa.indexOf(da)&&
(X.push({label:la._858,value:da}),wa.push(da))),0<oa.highest90.val&&(oa.highest90.val>aa||-1===aa)&&(da=Math.floor(oa.highest90.val),CsvType[ea].currency&&ia!==d&&(da=Money.raw(da,ua)),-1===wa.indexOf(da)&&(X.push({label:la._384+" 3 "+la._878,value:da}),wa.push(da))),0<oa.highest180.val&&(oa.highest180.val>aa||-1===aa)&&(da=Math.floor(oa.highest180.val),CsvType[ea].currency&&ia!==d&&(da=Money.raw(da,ua)),-1===wa.indexOf(da)&&(X.push({label:la._384+" 6 "+la._878,value:da}),wa.push(da))),0<oa.highest365.val&&
(oa.highest365.val>aa||-1===aa)&&(da=Math.floor(oa.highest365.val),CsvType[ea].currency&&ia!==d&&(da=Money.raw(da,ua)),-1===wa.indexOf(da)&&(X.push({label:la._384+" 1 "+la._879,value:da}),wa.push(da))),0<oa.avg.val&&(oa.avg.val>aa||-1===aa)&&(da=Math.ceil(oa.avg.val),CsvType[ea].currency&&ia!==d&&(da=Money.raw(da,ua)),-1===wa.indexOf(da)&&(X.push({label:"90 "+la._857,value:da}),wa.push(da))),0<oa.avg180.val&&(oa.avg180.val>aa||-1===aa)&&(oa=Math.ceil(oa.avg180.val),CsvType[ea].currency&&ia!==d&&(oa=
Money.raw(oa,ua)),-1===wa.indexOf(oa)&&(X.push({label:"180 "+la._857,value:oa}),wa.push(oa))));0<aa&&qa.forEach(function(Ca){var Ba=Math.ceil(aa+aa*Ca/100);-1===wa.indexOf(Ba)&&(X.push({label:"+"+Ca+"%",value:Ba}),wa.push(Ba))});X.sort(function(Ca,Ba){return Ca.value>Ba.value?1:Ca.value<Ba.value?-1:0});CsvType[ea].index===CsvType.RATING.index&&(X=X.filter(function(Ca){return 50>=Ca.value}))}return{decrease:G,increase:X,current:aa}},V=function(){var ea=!1;$("#trackingForm").find(".tracking__block--offer-data .mdc-text-field__input:not(:disabled)").each(function(ia,
ua){if($(ua).val())return ea=!0,!1});ea?$(".tracking__hint--offerdata").show():$(".tracking__hint--offerdata").hide()},ba=function(ea,ia){var ua=$.Deferred(),fa={};ea.forEach(function(oa){"undefined"===typeof g[oa]&&(fa[oa]=[a.asin])});0<Object.keys(fa).length?(ea={path:"product",offerPages:0,history:!0,maxAge:60,type:"casin",refreshProduct:!1},1!==Object.keys(fa).length||ia?ua=networkHelper.loadASINs(ea,fa,""):(ea.asin=a.asin,ea.domainId=Object.keys(fa)[0],ua=network.request(ea))):ua.resolve();return{onLoad:ua.promise()}},
w=function(ea,ia){ea.val(ia);ia.toString().length?ea.next("label").addClass("mdc-floating-label--float-above"):ea.next("label").removeClass("mdc-floating-label--float-above");V()},O=function(){var ea="basic",ia=b.notifyIf||[],ua=b.thresholdValues||[],fa=ua.filter(function(G){return 0<=G.thresholdValueCSV[G.thresholdValueCSV.length-1]&&0<G.domain}).map(function(G){return G.domain}).concat(ia.map(function(G){return G.domain})).filter(function(G){return G!==d});fa=Array.from(new Set(fa));var oa=function(){fa.forEach(function(Ga){Da(Ga,
!0,!0);K([Ga],$("#tracking__tab--"+Ga),!0)});var G={NEW:[],USED:[],REFURBISHED:[]},X={NEW:[],USED:[]},aa=!1,da=!1;ua.forEach(function(Ga){var Na=CsvType.getObject(Ga.csvType),Qa=CsvType.getObjectName(Ga.csvType),Ka=Ga.thresholdValueCSV[Ga.thresholdValueCSV.length-1];if(!(0>Ka)){var Ia=$('input[name="csvtype-'+Ga.domain+"-"+Ga.csvType+'-threshold"]');if(1!==Ia.length)isTest&&![CsvType.EBAY_NEW_SHIPPING.index,CsvType.EBAY_USED_SHIPPING.index].includes(Ga.csvType)&&console.warn("missing input for threshold",
Ga);else{if(Na.currency){var Oa=d,Sa=d;d!==Ga.domain&&Ga.domain===a.domainId&&(Oa=a.domainId);Ka=Money.format(Ka,{sourceDomainId:Oa,targetDomainId:Sa,skipSymbol:!0});Ga.csvType===CsvType.AMAZON.index?aa=!0:[CsvType.NEW.index,CsvType.NEW_FBA.index,CsvType.NEW_FBM_SHIPPING.index].includes(Ga.csvType)&&(da=!0)}else Ka=Ga.csvType===CsvType.RATING.index?Ga.domain===d?Ka.toFixed(1):parseFloat((Ka/10).toFixed(1)):NumberUtil.format(Ka,0);w(Ia,Ka);graphIsRestricted(Ga.domain,Ga.csvType)&&Ia.closest(".tracking__block").find(".tracking__block-overlay--disable").remove();
Ga.isDrop||Ga.domain!==d||Ia.closest(".tracking__block").find(".trigger--switch-isdrop").trigger("click");Ga.csvType===CsvType.NEW_FBA.index?X.NEW.push(Ga.domain):Ga.csvType===CsvType.WAREHOUSE.index?X.USED.push(Ga.domain):Na.isWithShipping&&(Na=Qa.split("_")[0],G[Na]&&G[Na].push(Ga.domain));"basic"!==ea||P.includes(Ga.csvType)||(ea="advanced");P.includes(Ga.csvType)||R.includes(Ga.csvType)||(ea="pro")}}});m&&aa&&!da&&($(".tracking__hint--amazononly").show(),setTimeout(va,1));var qa="false"!==storage.sendUpcomingLightningDealsAlert,
xa="false"!==storage.sendStartLightningDealsAlert;$('input[name$="-upcoming"]').prop("checked",b.lightningDealsAlerts);qa!==b.lightningDealsAlerts&&"basic"===ea&&(ea="advanced");ia.forEach(function(Ga){switch(Ga.notifyIfType){case 1:var Na=$('input[name="csvtype-'+Ga.domain+"-"+Ga.csvType+'-backinstock"]');if(1!==Na.length){isTest&&console.warn("missing input for backinstock",Ga);break}Na.prop("checked",!0).change();xa||(ea="advanced");break;default:isTest&&console.warn("missing notifyIf implementation for notifyIf",
Ga)}});for(var wa in X)if(qa=X[wa],qa.length){qa=$jscomp.makeIterator(qa);for(var Ca=qa.next();!Ca.done;Ca=qa.next())Ca=Ca.value,-1===G[wa].indexOf(Ca)&&(Ca=$('input[name="csvtype-'+Ca+"-"+CsvType[wa].index+'-prime"]'),1!==Ca.length?isTest&&console.warn("missing input for prime",thv):Ca.prop("checked",!0).change())}for(var Ba in G)if(wa=G[Ba],wa.length)for(wa=$jscomp.makeIterator(wa),Ca=wa.next();!Ca.done;Ca=wa.next())qa=$('input[name="csvtype-'+Ca.value+"-"+CsvType[Ba].index+'-shipping"]'),1!==qa.length?
isTest&&console.warn("missing input for shipping",thv):qa.prop("checked",!0).change();wa=Ba="";try{var Fa=JSON.parse(b.metaData);"undefined"!==typeof Fa.memo&&(Ba=Fa.memo);if("undefined"!==typeof Fa.tags){var Ea=Fa.tags;"string"===typeof Fa.tags&&(Ea=[Fa.tags]);0<Ea.length&&(Ea=Ea.join(" "));wa=Ea}}catch(Ga){}w($('input[name="metadata-memo"]'),Ba);w($('input[name="metadata-tags"]'),wa);(Ba.length||wa.length)&&"basic"===ea&&(ea="advanced");$("#tracking-mode-"+ea+"-radio").prop("checked",!0).change();
if(fa.length){var La=$("#tracking__panel--"+d).find('input[type="text"], input[name$="-backinstock"]').serializeArray(),Ma=["metadata-memo","metadata-tags"];d===getDomainByTld("com")&&Ma.push("csvtype-"+d+"-"+CsvType.TRADE_IN.index+"-threshold");La=La.map(function(Ga){return Ma.includes(Ga.name)?!1:Ga.value}).filter(function(Ga){return!1!==Ga});fa.forEach(function(Ga){var Na=$("#tracking__panel--"+Ga).find('input[type="text"], input[name$="-backinstock"]').serializeArray();Na=Na.map(function(Qa){return Qa.value});
Na.length===La.length&&La.every(function(Qa,Ka){return Qa===Na[Ka]})&&$('input[name="syncdata-'+Ga+'"]').prop("checked",!0).change()})}$(".tracking").show()};ba(fa,!0).onLoad.done(function(G){"undefined"!==typeof G&&v(G);setTimeout(oa,0)}).fail(function(){setTimeout(oa,0)})},z=function(){var ea=get("s_trackingMode"),ia=Number(get("s_percent")),ua=get("s_merchantTrack"),fa="false"!==storage.sendUpcomingLightningDealsAlert,oa="false"!==storage.sendStartLightningDealsAlert,G=-1!=a.AMAZON_LAST?a.AMAZON_LAST:
-1!=a.MARKET_NEW_LAST?a.MARKET_NEW_LAST:-1!=a.MARKET_USED_LAST?a.MARKET_USED_LAST:-1,X=function(qa){if(ta())return NumberUtil.format(ia,0);var xa={sourceDomainId:d,targetDomainId:d,skipSymbol:!0};return 0>qa?Money.format(1E7,xa):Money.format(Math.floor(qa-qa*ia/100),xa)},aa=!1,da=!1;"1"!=ua.charAt(CsvType.AMAZON.index)||m||(aa=X(G),$('input[name="csvtype-'+d+"-"+CsvType.AMAZON.index+'-threshold"]').val(aa),aa=!0);"1"!=ua.charAt(CsvType.NEW.index)||r||(da=X(-1!=a.MARKET_NEW_LAST?a.MARKET_NEW_LAST:
G),$('input[name="csvtype-'+d+"-"+CsvType.NEW.index+'-threshold"]').val(da),da=!0);"1"!=ua.charAt(CsvType.USED.index)||q||(ua=X(-1!=a.MARKET_USED_LAST?a.MARKET_USED_LAST:G),$('input[name="csvtype-'+d+"-"+CsvType.USED.index+'-threshold"]').val(ua));m&&aa&&!da&&($(".tracking__hint--amazononly").show(),setTimeout(va,1));fa&&$('input[name="csvtype-'+d+"-"+CsvType.LIGHTNING_DEAL.index+'-upcoming"]').prop("checked",!0).change();oa&&$('input[name="csvtype-'+d+"-"+CsvType.LIGHTNING_DEAL.index+'-backinstock"]').prop("checked",
!0).change();$(".tracking").show();["advanced","pro"].includes(ea)&&$("#tracking-mode-"+ea+"-radio").prop("checked",!0).change()},I=function(){ha=!1;var ea=$("#submitTracking");ea.prop("disabled",!1);ea.html((t?la._681:la._110)+' &ensp;<i class="fa fa-bell-o"></i>');$(".tracking__submit-overlay").hide()},K=function(ea,ia,ua){ea.forEach(function(fa){ia=ia||$(".tracking__multilocale-casin-data--"+fa);var oa=fa===d?a:g[fa];if("undefined"===typeof oa)ua||ia.html("&nbsp;");else{var G=oa.stats[CsvType.AMAZON.index],
X=oa.stats[CsvType.NEW.index],aa=oa.stats[CsvType.USED.index],da=-1,qa=oa=-1;G&&(da=G.current.val?G.current.val:G.current);G&&(oa=X.current.val?X.current.val:X.current);G&&(qa=aa.current.val?aa.current.val:aa.current);0>da&&0>oa&&0>qa?ua||ia.html("&nbsp;"):(fa={sourceDomainId:fa,targetDomainId:d},ua?(G=0<da?"Amazon: "+Money.format(da,fa)+" ":"",G+=0<oa?(G?" - ":"")+CsvType.getName(CsvType.NEW.index)+": "+Money.format(oa,fa)+" ":"",G+=0<qa?(G?" - ":"")+CsvType.getName(CsvType.USED.index)+": "+Money.format(qa,
fa):"",ia.attr("title",G)):(oa="\n\t\t\t\t\t"+(0<da?'<span title="Amazon">'+Money.format(da,fa)+"</span>":'<span style="display:none;"></span>')+"\n\t\t\t\t\t"+(0<oa?'<span title="'+CsvType.getName(CsvType.NEW.index)+'">'+Money.format(oa,fa)+"</span>":'<span style="display:none;"></span>')+"\n\t\t\t\t\t"+(0<qa?'<span title="'+CsvType.getName(CsvType.USED.index)+'">'+Money.format(qa,fa)+"</span>":'<span style="display:none;"></span>')+"\n\t\t\t\t",ia.html(oa)))}})},A=function(ea){var ia=function(Ea,
La){var Ma=CsvType.getObject(La);Ea=Ea.replace(/(\d)\.(\d\d)/g,"$1$2");Ea=Ea.replace(/(\d)\.(\d)/g,"$1$2");Ea=Ea.replace(/(\d),(\d)/g,"$1$2");Ma.currency?Ea=Ea.replace(/^0+/,""):La===CsvType.RATING.index&&(Ea=Ea.replace(/(\d)\.(\d)/g,"$1$2"));return Ea},ua=!1,fa={memo:"",tags:[]},oa={},G={},X=Array.apply(null,Array(CsvType.length)).map(function(Ea){return 0}),aa=!1,da=!0,qa=!0,xa=$("#trackingForm").serializeArray();$.each(xa,function(){if(!["tracking-mode","tracking-ttl"].includes(this.name)&&!this.name.includes("syncdata"))if("tracking-import-purchased"===
this.name)da=!1;else if("tracking-overwrite-existing"===this.name)aa=!0;else if("tracking-import-oos"===this.name)qa=!1;else{var Ea=this.value,La=!0;if("metadata-memo"===this.name)fa.memo=Ea.slice(0,100);else if("metadata-tags"===this.name){Ea=Ea.replace(/\s\s+/g," ");if(Ea.length)for(Ea=Ea.split(" ");200<Ea.join('","').length;)Ea.pop();else Ea=[];fa.tags=Array.from(new Set(Ea))}else{var Ma=this.name.split("-"),Ga=Number(Ma[1]),Na=Number(Ma[2]),Qa=Ma[3];Ma=[Ga,Na].join("-");if(!["prime","shipping"].includes(Qa))switch(Qa){case "threshold":Ea=
ia(Ea,Na);Ea.length&&(Qa=(b&&b.thresholdValues||[]).find(function(Ka){return Ka.csvType===Na&&Ka.domain===Ga&&0<=Ka.thresholdValueCSV[Ka.thresholdValueCSV.length-1]}),!graphIsRestricted(Ga,Na)||Qa)&&(ta()?(G[Ma]={domain:Ga,csvType:Na,notifyIfType:2},X[Na]=-1*Ea):oa[Ma]={domain:Ga,csvType:Na,isDrop:La,thresholdValue:Ea});break;case "isdrop":La=h&&"1"!==Ea?!1:!0;oa[Ma]&&(oa[Ma].isDrop=La);X[Na]&&!La&&(X[Na]*=-1);break;case "upcoming":ua=!0;break;case "backinstock":G[Ma]={domain:Ga,csvType:Na,notifyIfType:1};
break;default:isTest&&console.warn("missing input handling",this,Qa)}}}});"basic"===$('input[name="tracking-mode"]:checked').val()&&(ua="false"!==storage.sendUpcomingLightningDealsAlert,"false"!==storage.sendStartLightningDealsAlert&&$("#tracking__tab-bar").find(".mdc-tab:visible").each(function(){var Ea=$(this).attr("id").replace("tracking__tab--","");G[[Ea,CsvType.LIGHTNING_DEAL.index].join("-")]={domain:Ea,csvType:CsvType.LIGHTNING_DEAL.index,notifyIfType:1}}));delete oa[getDomainByTld("in")+"-"+
CsvType.AMAZON.index];delete G[getDomainByTld("in")+"-"+CsvType.AMAZON.index];userData&&userData.useEbay&&!0===globalEbayArray[d]&&(ta()?(G[d+"-"+CsvType.AMAZON.index]?(xa=G[d+"-"+CsvType.AMAZON.index],G[d+"-"+CsvType.EBAY_NEW_SHIPPING.index]={domain:xa.domain,csvType:CsvType.EBAY_NEW_SHIPPING.index,notifyIfType:2},X[CsvType.EBAY_NEW_SHIPPING.index]=X[xa.csvType]):G[d+"-"+CsvType.NEW.index]&&(xa=G[d+"-"+CsvType.NEW.index],G[d+"-"+CsvType.EBAY_NEW_SHIPPING.index]={domain:xa.domain,csvType:CsvType.EBAY_NEW_SHIPPING.index,
notifyIfType:2},X[CsvType.EBAY_NEW_SHIPPING.index]=X[xa.csvType]),G[d+"-"+CsvType.USED.index]&&(xa=G[d+"-"+CsvType.USED.index],G[d+"-"+CsvType.EBAY_USED_SHIPPING.index]={domain:xa.domain,csvType:CsvType.EBAY_USED_SHIPPING.index,notifyIfType:2},X[CsvType.EBAY_USED_SHIPPING.index]=X[xa.csvType])):(oa[d+"-"+CsvType.AMAZON.index]?(xa=oa[d+"-"+CsvType.AMAZON.index],oa[d+"-"+CsvType.EBAY_NEW_SHIPPING.index]={domain:xa.domain,csvType:CsvType.EBAY_NEW_SHIPPING.index,isDrop:xa.isDrop,thresholdValue:xa.thresholdValue}):
oa[d+"-"+CsvType.NEW.index]&&(xa=oa[d+"-"+CsvType.NEW.index],oa[d+"-"+CsvType.EBAY_NEW_SHIPPING.index]={domain:xa.domain,csvType:CsvType.EBAY_NEW_SHIPPING.index,isDrop:xa.isDrop,thresholdValue:xa.thresholdValue}),oa[d+"-"+CsvType.USED.index]&&(xa=oa[d+"-"+CsvType.USED.index],oa[d+"-"+CsvType.EBAY_USED_SHIPPING.index]={domain:xa.domain,csvType:CsvType.EBAY_USED_SHIPPING.index,isDrop:xa.isDrop,thresholdValue:xa.thresholdValue})));xa=za();var wa=Ha(),Ca=Number($('[name="tracking-ttl"]').val());"undefined"===
typeof xa.find(function(Ea){return Ea.value==Ca})&&(Ca=wa);xa={asin:a.asin,desiredPrices:[],lightningDealsAlerts:ua,mainDomainId:d,metaData:JSON.stringify(fa),notifyIf:[],ttl:Ca,minChangeBetweenNotifications:null,overwriteExistingTrackings:!0,removeTrackingWhenDeleted:!1,removeTrackingWhenPurchased:!1,skipIfNotInStock:!0,desiredPricesInMainCurrency:!0,expireNotify:!0,individualNotificationInterval:-1,isOneTimeImport:!0,notificationType:[]};ta()&&(delete xa.asin,xa.desiredPrices=null,xa.minChangeBetweenNotifications=
X,xa.overwriteExistingTrackings=aa,xa.skipIfNotInStock=qa,null!=M?(xa.removeTrackingWhenDeleted=!0,xa.removeTrackingWhenPurchased=da,xa.wishListId=M):F.length&&(xa.asinList=F));for(var Ba in oa)xa.desiredPrices.push(oa[Ba]);for(var Fa in G)xa.notifyIf.push(G[Fa]);isTest&&console.info("%ctrackingRequest","color:#018786;font-weight:bold;",xa);ta()&&null==M?(alert("@todo API call for asinLists (no wishlist)"),I()):(Ba="addTracking",ta()&&null!=M?Ba="wishListImport":ta()&&(Ba="listImport"),network.request({path:"track",
type:Ba,trackingRequest:xa}).done(function(Ea){ha=!1;if(null==Ea.error)S(Ea);else switch(Ea.error.type){case "userNotKnown":registerAnonymous().done(function(){ya(ea)}).fail(function(Ga){J(Ea,Ga)});break;case "productNotKnown":var La=function(){showPopup("Tracking Error",'<p class="mdc-typography--body2">\n                                        Product is invalid and can not be tracked.\n                                    </p>',!0)};ta()&&Q?(T.close(),setTimeout(function(){La()},500)):(La(),I());
break;case "maxTrackingReached":var Ma=function(){showPopup("Tracking Limit Reached",'<p class="mdc-typography--body2">\n                                        '+la._920.replace("#maxTrackingAllowed#",maxTrackingAllowed)+"<br><br><b>"+la._921+"</b>\n                                    </p>",!0)};ta()&&Q?(T.close(),setTimeout(function(){Ma()},500)):(Ma(),I());break;default:J(Ea)}}).fail(function(Ea){J(Ea)}))},J=function(ea,ia){isTest&&console.info("%csendTrackingFailed","color:#018786;font-weight:bold;",
ea);ia?reportBug(null,"track failed due to anon register failed."):ta()&&null!=M?reportBug(null,"wishlistimport: "+JSON.stringify(ea)+" "+M+" "+F.join()):reportBug(null,"track failed due to error.type: '"+ea.error.type+"'");ta()&&Q?(replaceHtml(u,'<div class="tracking__warning"><p class="mdc-typography--body2">'+la._error+"</p></div>"),$(".tracking__warning p").show()):(setTimeout(showErrorPopup,50),I())},S=function(ea){ea.hash&&("function"==typeof addon&&va("resync"),handleSettingsRequest(ea,!0),
$("#tabTrack").trigger("click"));var ia=storage.token?"r/"+storage.token+"manage":"#!manage";ea="";1==storage.accountType&&"function"!=typeof addon&&(ea='<p class="mdc-typography--body2">\n\t\t\t\t'+la._289+':<br>&raquo; <a href="/'+ia+'" class="href">'+rootURL+ia+"</a>\n\t\t\t</p>");ia=la._287+'\n\t\t\t\t\t<a class="href" target="_parent" href="//'+location.hostname+'/#!manage">'+la._20+"</a>\n\t\t\t\t\t"+la._288;ta()&&(ia=la._223);ea='<div class="tracking'+(isMobile?" tracking--mobile":"")+'">\n\t\t\t\t<p class="mdc-typography--body2 tracking__paragraph--success">\n\t\t\t\t\t<i class="fa fa-check-circle-o" ></i>&emsp;'+
ia+'\n\t\t\t\t</p>\n\t\t\t\t<div id="notification-channels"></div>\n\t\t\t\t'+ea+"\n\t\t\t</div>";$("#"+u).html(ea);SettingsNotification.init()},v=function(ea){for(var ia in ea)"object"===typeof ea[ia]&&null!=ea[ia]&&ea[ia].domainId&&(null==ea[ia].stats&&(ea[ia].stats=getStatistics(ea[ia])),g[ea[ia].domainId]=ea[ia])},p=function(ea){var ia=$("#tracking__panel--"+ea),ua=function(fa,oa,G,X){var aa=["AMAZON","NEW","USED","REFURBISHED","LIGHTNING_DEAL"].includes(fa),da=ia.find('input[name="csvtype-'+
ea+"-"+CsvType[fa].index+'-threshold"]');fa=ia.find('input[name="csvtype-'+ea+"-"+CsvType[fa].index+'-isdrop"]');oa?(da.prop("disabled",!0),da.closest(".mdc-text-field").addClass("mdc-text-field--disabled"),aa||da.closest(".tracking__block").addClass("tracking__block--deactivated")):(da.prop("disabled",!1),da.closest(".mdc-text-field").removeClass("mdc-text-field--disabled"),aa||da.closest(".tracking__block").removeClass("tracking__block--deactivated"),null!=G&&""===da.val()&&(w(da,G),fa.val()!==
X&&(oa=ea===d?"click":"pseudoclick",fa.closest(".tracking__block").find(".trigger--switch-isdrop").trigger(oa))))};ia.find('input[type="checkbox"]').on("change",function(fa){var oa=$(this).attr("name");fa=$(this).prop("checked");switch(oa){case "csvtype-"+ea+"-"+CsvType.NEW.index+"-shipping":var G=ia.find('input[name="csvtype-'+ea+"-"+CsvType.NEW.index+'-prime"]').prop("checked");oa=ia.find('input[name="csvtype-'+ea+"-"+CsvType.NEW.index+'-threshold"]').val();var X=ia.find('input[name="csvtype-'+
ea+"-"+CsvType.NEW.index+'-isdrop"]').val();fa?(ua("NEW",!0),ua("NEW_FBA",!1,oa,X),ua("NEW_FBM_SHIPPING",G,oa,X)):(ua("NEW",G),ua("NEW_FBA",!G),ua("NEW_FBM_SHIPPING",!0));break;case "csvtype-"+ea+"-"+CsvType.NEW.index+"-prime":G=ia.find('input[name="csvtype-'+ea+"-"+CsvType.NEW.index+'-shipping"]').prop("checked");oa=ia.find('input[name="csvtype-'+ea+"-"+CsvType.NEW.index+'-threshold"]').val();X=ia.find('input[name="csvtype-'+ea+"-"+CsvType.NEW.index+'-isdrop"]').val();fa?(ua("NEW",!0),ua("NEW_FBA",
!1,oa,X),ua("NEW_FBM_SHIPPING",!0)):(ua("NEW",G),ua("NEW_FBA",!G),ua("NEW_FBM_SHIPPING",!G));break;case "csvtype-"+ea+"-"+CsvType.USED.index+"-shipping":G=ia.find('input[name="csvtype-'+ea+"-"+CsvType.USED.index+'-prime"]').prop("checked");oa=ia.find('input[name="csvtype-'+ea+"-"+CsvType.USED.index+'-threshold"]').val();X=ia.find('input[name="csvtype-'+ea+"-"+CsvType.USED.index+'-isdrop"]').val();fa?(ua("USED",!0),ua("WAREHOUSE",!1,oa,X),ua("USED_NEW_SHIPPING",G,oa,X),ua("USED_VERY_GOOD_SHIPPING",
G,oa,X),ua("USED_GOOD_SHIPPING",G,oa,X),ua("USED_ACCEPTABLE_SHIPPING",G,oa,X)):(ua("USED",G),ua("WAREHOUSE",!G),ua("USED_NEW_SHIPPING",!0),ua("USED_VERY_GOOD_SHIPPING",!0),ua("USED_GOOD_SHIPPING",!0),ua("USED_ACCEPTABLE_SHIPPING",!0));break;case "csvtype-"+ea+"-"+CsvType.USED.index+"-prime":G=ia.find('input[name="csvtype-'+ea+"-"+CsvType.USED.index+'-shipping"]').prop("checked");oa=ia.find('input[name="csvtype-'+ea+"-"+CsvType.USED.index+'-threshold"]').val();X=ia.find('input[name="csvtype-'+ea+"-"+
CsvType.USED.index+'-isdrop"]').val();fa?(ua("USED",!0),ua("WAREHOUSE",!1,oa,X),ua("USED_NEW_SHIPPING",!0,oa,X),ua("USED_VERY_GOOD_SHIPPING",!0,oa,X),ua("USED_GOOD_SHIPPING",!0,oa,X),ua("USED_ACCEPTABLE_SHIPPING",!0,oa,X)):(ua("USED",G),ua("WAREHOUSE",!G),ua("USED_NEW_SHIPPING",!G),ua("USED_VERY_GOOD_SHIPPING",!G),ua("USED_GOOD_SHIPPING",!G),ua("USED_ACCEPTABLE_SHIPPING",!G));break;case "csvtype-"+ea+"-"+CsvType.REFURBISHED.index+"-shipping":oa=ia.find('input[name="csvtype-'+ea+"-"+CsvType.REFURBISHED.index+
'-threshold"]').val();X=ia.find('input[name="csvtype-'+ea+"-"+CsvType.USED.index+'-isdrop"]').val();fa?(ua("REFURBISHED",!0),ua("REFURBISHED_SHIPPING",!1,oa,X)):(ua("REFURBISHED",!1),ua("REFURBISHED_SHIPPING",!0));break;case "csvtype-"+ea+"-"+CsvType.LIGHTNING_DEAL.index+"-backinstock":(oa=ia.find('input[name="csvtype-'+ea+"-"+CsvType.AMAZON.index+'-threshold"]').val())?X=ia.find('input[name="csvtype-'+ea+"-"+CsvType.AMAZON.index+'-isdrop"]').val():(oa=ia.find('input[name="csvtype-'+ea+"-"+CsvType.NEW.index+
'-threshold"]').val(),X=ia.find('input[name="csvtype-'+ea+"-"+CsvType.NEW.index+'-isdrop"]').val());fa?ua("LIGHTNING_DEAL",!0):ua("LIGHTNING_DEAL",!1,oa,X);break;case "syncdata-"+ea:fa?(ia.find(".tracking__sync-overlay").show(),Aa(ea)):ia.find(".tracking__sync-overlay").hide()}setTimeout(va,1)});ia.find('input[type="checkbox"]').change()},H=function(ea){var ia=$("#tracking__panel--"+ea),ua=ea===d?"click":"pseudoclick";ia.find(".trigger--switch-isdrop").on(ua,function(fa){fa=$(this).closest(".tracking__block");
var oa=fa.data("type"),G=fa.find('input[name="csvtype-'+ea+"-"+oa+'-isdrop"]'),X=1==G.val();G.val(X?0:1);G=la._703;h||(G='<span class="unavailable">'+G+"</span>");$(this).find("span").first().html(X?G:la._95);ea===d&&(X=X?la._849:la._850,$(this).find(".colorTipContent").html(X),$(".switch-"+oa+"-isdrop").trigger("pseudoclick"));fa.find(".tracking__suggestion--decrease").toggle();fa.find(".tracking__suggestion--increase").toggle();h||($('input[name$="-isdrop"][value="0"]').length?($(".tracking__warning--isdrop").show(),
$("#submitTracking").prop("disabled",!0)):($(".tracking__warning--isdrop").hide(),$("#submitTracking").prop("disabled",!1)));setTimeout(va,1)})},L=function(){Q||$("#"+u+" .tool__trackback").click(function(){var ea=u.replace("-tracking","");$("#grid-tools-"+ea.replace("grid-wrapper-","")).show();$("#"+ea).show();$("#"+ea+"-filter").show();$("#"+ea+"-tracking").hide();setTimeout(va,1)})},B=function(ea){ma(ea);H(ea);ka(ea);p(ea);var ia=$("#tracking__panel--"+ea);ia.find(".trigger").colorTip({color:"yellow"});
ia.find(".tracking__block-overlay--disable").colorTip({color:"yellow"});ea===d&&($(".tracking__buttons").find("[title]").colorTip({color:"yellow align-left"}),$(".tracking__settings-mode").find("[title]").colorTip({color:"yellow align-left"}))},E=function(){var ea=tabSwitcher("tracking__tab-bar");$("#tracking__tab-bar").find(".mdc-tab:not(.mdc-tab--active)").hide();ea.listen("MDCTabBar:change",function(ia){ia=ia.detail;ia=$(".tracking .tracking__panel").find(".panel:nth-child("+(Number(ia.activeTabIndex)+
1)+")");ia=Number(ia.attr("id").replace("tracking__panel--",""));Aa(ia);setTimeout(va,1)});$(".tracking__tab-bar-toggle, .tracking__tab-bar-toggle-hint").on("click",function(){if(ha)return!1;var ia=f(),ua=showPopup(la._351+":",ia.html,!0);ja();setTimeout(va,1);ia.onSubmit.done(function(fa){ua.promise.resolve(fa)});ua.promise.done(function(fa){ua.close();setTimeout(va,1);var oa=!1;if(fa&&fa.enableDomainIds){for(var G=1;G<numberOfDomains;G++)if(7!=G&&G!==d){var X=1===$("#tracking__tab--"+G+":visible").length,
aa=-1<fa.enableDomainIds.indexOf(G);aa&&!X?Da(G,!0):!aa&&X&&(Da(G,!1),oa=!0)}$('input[name="tracking-mode"]:checked').change();oa&&(ea.activeTabIndex=0,ea.updatePanel(0))}}).fail(function(fa){})});$(".trigger--casin-popup").on("click",function(){comparePricesOverlay(a.asin,a.domainId)})},U=function(){setTimeout(function(){$("#submitTracking").on("click",function(ea){ya(ea)})},0)},ka=function(ea){var ia=$("#tracking__panel--"+ea);ia.find('input[name$="threshold"]').on("focus",function(ua){ia.find(".tracking__suggestion").hide();
ua=$(this).closest(".tracking__block").find(".tracking__suggestion");ua.css({display:"block"});ua.find("tr").removeClass("active");ua.find('tr[data-value="'+$(this).val()+'"]').addClass("active")});if(ea===d)$("#trackingForm").on("click",function(ua){$(".tracking__suggestion").hide()});ia.find('input[type="text"], .tracking__suggestion').on("click",function(ua){ua.stopPropagation()});ia.find(".tracking__suggestion-item").on("click",function(ua){ua=$(this).data("value");var fa=$(this).closest(".tracking__block").data("type"),
oa=$('input[name="csvtype-'+ea+"-"+fa+'-threshold"]');w(oa,ua);$(this).closest(".tracking__block").find(".tracking__suggestion").find("tr").removeClass("active");$(this).addClass("active");m&&ea===d&&[CsvType.AMAZON.index,CsvType.NEW.index].includes(fa)&&($('input[name="csvtype-'+d+"-"+CsvType.AMAZON.index+'-threshold"]').val().length&&!$('input[name="csvtype-'+d+"-"+CsvType.NEW.index+'-threshold"]').val().length?$(".tracking__hint--amazononly").show():$(".tracking__hint--amazononly").hide(),setTimeout(va,
1))})},ma=function(ea){$("#tracking__panel--"+ea).find('input[name$="threshold"]').on("focusout",function(){var ia=this.name.split("-");ia=Number(ia[2]);0<$(this).val().length&&(ta()?$(this).val(NumberUtil.format(Money.unformat($(this).val()),0)):CsvType.getObject(ia).currency?$(this).val(Money.format(Money.unformat($(this).val()),{sourceDomainId:d,targetDomainId:d,isDivided:!0,skipSymbol:!0})):ia===CsvType.RATING.index?$(this).val(parseFloat(Money.unformat($(this).val())).toFixed(1)):$(this).val(NumberUtil.format(Money.unformat($(this).val()),
0)));m&&ea===d&&[CsvType.AMAZON.index,CsvType.NEW.index].includes(ia)&&($('input[name="csvtype-'+d+"-"+CsvType.AMAZON.index+'-threshold"]').val().length&&!$('input[name="csvtype-'+d+"-"+CsvType.NEW.index+'-threshold"]').val().length?$(".tracking__hint--amazononly").show():$(".tracking__hint--amazononly").hide(),setTimeout(va,1));V()})},na=function(){$('input[name="tracking-mode"]').on("change",function(ea){ea=$('[data-mode="basic"]');var ia=$('[data-mode="advanced"]'),ua=$('[data-mode="pro"]'),fa=
$(this).val();"advanced"===fa?(iframe.isIframe?(ea.show(),ia.show(),ua.hide(),setTimeout(va,1)):(ea.fadeIn(600),ia.fadeIn(600),ua.fadeOut(200)),ia.each(function(){$(this).find("input").prop("disabled",!1)}),ua.each(function(){$(this).find("input").prop("disabled",!0)})):"pro"===fa?(iframe.isIframe?(ea.show(),ia.show(),ua.show(),setTimeout(va,1)):(ea.fadeIn(600),ia.fadeIn(600),ua.fadeIn(600)),ia.each(function(){$(this).find("input").prop("disabled",!1)}),ua.each(function(){$(this).find("input").prop("disabled",
!1)})):(iframe.isIframe?(ea.show(),ia.hide(),ua.hide(),setTimeout(va,1)):(ea.fadeIn(600),ia.fadeOut(200),ua.fadeOut(200)),ia.each(function(){$(this).find('input[name$="shipping"], input[name$="prime"]').prop("checked",!1).change();$(this).find("input").prop("disabled",!0)}),ua.each(function(){$(this).find("input").prop("disabled",!0)}));V()});$('input[name="tracking-mode"]:checked').change()},W=function(){$("#updateTracking").on("click",function(){ra()});$("#deleteTracking").on("click",function(){network.request({path:"track",
asinBatch:[a.asin],type:"deleteTracking"}).done(function(){replaceHtml(u,'<div class="tracking'+(isMobile?" tracking--mobile":"")+'">\n\t\t\t\t\t\t\t<p class="mdc-typography--body2">'+la._437+"</p>\n\t\t\t\t\t\t</div>");setTimeout(function(){ra()},8E3)}).fail(showErrorPopup)})},ya=function(ea){ea.preventDefault();isTest&&console.info("%csubmitTracking","color:#018786;font-weight:bold;","... ... ...");if(!h&&$('input[name$="-isdrop"][value="0"]').length||ha)return!1;ha=!0;var ia=$("#submitTracking");
ia.trigger("focus");ia.prop("disabled",!0);ia.html(la._45+' &ensp;<i class="fa fa-spinner fa-spin"></i>');ta()||$('input[type="checkbox"][name^="syncdata-"]').change();$(".tracking__submit-overlay").show();A(ea)},Aa=function(ea){var ia=$("#tracking__panel--"+d),ua=$("#tracking__panel--"+ea);ua.find('input[name="syncdata-'+ea+'"]').prop("checked")&&(ia.find('input:not([type="checkbox"])').each(function(){var fa=$(this),oa=fa.attr("type"),G=fa.attr("name").split("-");G[1]=ea;var X=Number(G[2]);G=ua.find('input[name="'+
G.join("-")+'"]');if(G.length)switch(oa){case "hidden":fa=fa.val();oa=G.val();fa!==oa&&G.closest(".tracking__block").find(".trigger--switch-isdrop").trigger("pseudoclick");break;case "text":G&&(fa=fa.val(),oa=(b&&b.thresholdValues||[]).find(function(aa){return aa.csvType===X&&aa.domain===ea&&0<=aa.thresholdValueCSV[aa.thresholdValueCSV.length-1]}),graphIsRestricted(ea,X)&&!oa||w(G,fa));break;default:isTest&&console.warn("missing sync handling",oa)}}),ia.find('input[type="checkbox"]').each(function(){var fa=
$(this),oa=fa.attr("name").split("-");oa[1]=ea;(oa=ua.find('input[name="'+oa.join("-")+'"]'))&&oa.prop("checked",fa.prop("checked")).change()}))},Da=function(ea,ia,ua){var fa="tracking__panel--"+ea,oa="tracking__tab--"+ea;ia?($("#"+oa).fadeIn(400),replaceHtml(fa,Z(ea)),material.init("#"+fa),B(ea),ia=$('input[name="csvtype-'+ea+"-"+CsvType.LIGHTNING_DEAL.index+'-upcoming"]'),ia.prop("disabled",!0),ia.closest(".mdc-form-field").css({visibility:"hidden"}),ua||$('input[name="syncdata-'+ea+'"]').prop("checked",
!0).change(),K([ea],$("#tracking__tab--"+ea),!0)):($("#"+oa).fadeOut(),replaceHtml(fa,""))},va=function(ea,ia){iframe.isIframe&&addon(ea,ia)},za=function(){return[{label:"2 "+la._876,value:336},{label:"1 "+la._877,value:720},{label:"3 "+la._878,value:2160},{label:"6 "+la._878,value:4320},{label:"1 "+la._879,value:8760,default:!0},{label:"2 "+la._880,value:17520},{label:"3 "+la._880,value:26280},{label:"10 "+la._880,value:87600}]},Ha=function(){return za().find(function(ea){return!0===ea.default}).value};
return{addonResizeHook:va,getDefaultTtl:Ha,getTtlOptions:za,init:function(ea){Y();a=ea.products[0];null==a.stats&&(a.stats=getStatistics(a));d=a.domainId;t="undefined"!==typeof a&&null!=a.trackingInfos&&a.trackingInfos.isTrackedByUser;h=0!==storage.accountType&&hasDataAccessSubscription;2===a.csv[CsvType.AMAZON.index].length&&-1==a.csv[CsvType.AMAZON.index][1]&&(m=!0);2===a.csv[CsvType.NEW.index].length&&-1==a.csv[CsvType.NEW.index][1]&&(r=!0);2===a.csv[CsvType.USED.index].length&&-1==a.csv[CsvType.USED.index][1]&&
(q=!0);t&&(b=a.trackingInfos.userTracking,ea=!1,b.thresholdValues&&b.thresholdValues.length&&(ea=b.thresholdValues.some(function(ia){return!0!==ia.isDrop})),h=h||ea,d=b.mainDomainId);n=getCurrencyByDomain(d);t?(ea='<div class="tracking'+(isMobile?" tracking--mobile":"")+'">\n\t\t\t\t\t<p class="mdc-typography--body2">'+la._436+'</p>\n\t\t\t\t\t<div class="tracking__buttons">\n\t\t\t\t\t\t'+material.getButton("updateTracking",la._434,null,"pencil")+"&emsp;\n\t\t\t\t\t\t"+material.getButton("deleteTracking",
la._435,null,"trash-o",!1,!0)+"\n\t\t\t\t\t</div>\n\t\t\t\t</div>",replaceHtml(u,ea),W()):ra()},initList:function(ea){Y();D=1;F=[];M=null;Q=!1;T=null;d=Number(ea.domainId);F=ea.asinList||[];M=ea.wishlistId||null;Q=ea.showAsPopup||!1;u=ea.containerId;n=getCurrencyByDomain(d);h=0!==storage.accountType&&hasDataAccessSubscription;Q&&(T=showPopup(la._916.replace("#selectedAsinCount#","<b>"+F.length+"</b>"),'<div id="tracklist"></div>',!0));ra()},setCasinData:v}}();var Seller=function(){var a=function(b){try{var d=graph.prepare(b.domainId);d.asin=b.sellerId;d.graphIndex=4;d.updateCSV=[];d.series=graph.getMerchantSeriesTemplates();var g=[];g[MerchantType.RATING.index]=b.csv[MerchantType.RATING.index];g[MerchantType.RATING_COUNT.index]=b.csv[MerchantType.RATING_COUNT.index];g[MerchantType.LISTINGS_COUNT.index]=b.totalStorefrontAsinsCSV;var n=$("#sellerGraph");d.csv=g;d.type="merchant";d.objectType=MerchantType;d.$container=n;d.$container.show();d.parameter.offsetLeft=
-30;d.parameter.width=float2int(n.parent().width())-170+"px";d.parameter.height="250px";graph.create(d)}catch(t){console.log(t)}};return{init:function(b,d){network.request({path:"pro/seller",domainId:b,seller:d,page:0,perPage:0,storefront:1440,history:!0}).done(function(g){$("#loadingIcon").hide();if(g.merchants&&g.merchants[d]){var n=g.merchants[d],t=g.listSize,h=getLast(n.totalStorefrontAsinsCSV,MerchantType.LISTINGS_COUNT),m=getLastTime(n.totalStorefrontAsinsCSV,MerchantType.LISTINGS_COUNT);g=
"";-1<h&&(g='<br><span style="color:#AA5D5D">Verified Listings: </span>'+NumberUtil.format(h)+'<span style="color:#a2a2a2"> (as of '+(new Date(keepaTime.minutesToEpoch(m))).formatDate("M j, Y")+")</span>");m=0;-1<h&&(m=GridConfig.getRowCountOptions("asin"),m=Math.max.apply(Math,$jscomp.arrayFromIterable(m.values)),m=Math.min(t,m));h=getLast(n.csv[0],MerchantType.RATING)+"%";var r=getLast(n.csv[1],MerchantType.RATING_COUNT);-1==r&&(h=" - ",r="0 (just launched)");n.stats={RATING:statsCSV(n.csv[0],CsvType.COUNT_REVIEWS.index,
1),RATING_COUNT:statsCSV(n.csv[1],CsvType.COUNT_REVIEWS.index,1)};var q=n.ratingCount&&0<n.ratingCount[0]?'&emsp;<span style="color: #a2a2a2">last 30 days: '+NumberUtil.format(n.ratingCount[0])+"</span>":"",u=n.stats&&n.stats.RATING&&n.stats.RATING.avg&&-1!=n.stats.RATING.avg?'&emsp;<span style="color: #a2a2a2">'+n.stats.RATING.avg.days+" day avg: "+n.stats.RATING.avg.val.toFixed(1)+"%</span>":"",D=SellerUtil.isSellerIdAmazon(d,b);t=D?"":'<span id="'+d+'">\n\t\t\t\t\t<a href="https://www.amazon.'+
getTldByDomain(b)+"/gp/aag/details/?seller="+d+'" title="'+la._646+' Amazon">\n\t\t\t\t\t\t'+la._646+' Amazon <i style="margin-left:7px" class="fa fa-external-link" ></i>\n\t\t\t\t\t</a>\n\t\t\t\t</span>';h=D?"":'<br><span style="color:#AA5D5D">'+la._440+": </span>"+h+u+'\n\t\t\t\t\t<br><span style="color:#AA5D5D">'+la._533+": </span>"+NumberUtil.format(r)+q;g=t+"<br>\n\t\t\t\t<span>\n\t\t\t\t\t"+h+"\n\t\t\t\t\t"+g+'\n\t\t\t\t\t<br><span style="color:#AA5D5D">Browseable listings via Keepa: </span> '+
NumberUtil.format(m)+'\n\t\t\t\t\t<br><span style="color:#AA5D5D">Found FBA listings: </span> '+(n.hasFBA?la._254:la._255)+'\n\t\t\t\t\t<br><span style="color:#AA5D5D">Tracked by Keepa since: </span> '+(new Date(keepaTime.minutesToEpoch(n.trackedSince))).formatDate("M j, Y")+'\n\t\t\t\t</span>\n\t\t\t\t<br><br><br><div id="sellerGraph" class="graph"></div>\n\t\t\t';n.sellerCategoryStatistics&&n.sellerCategoryStatistics.length&&(g+='<br><br><br><div>\n\t\t\t\t\t\t<p style="color:#AA5D5D">Seller Category Listing Statistics</p>\n\t\t\t\t\t\t<p style="width:800px;">Overview of the type of products <span style="font-weight:500;">'+
n.sellerName+'</span> is primarily selling, how often Amazon is on those listings and what the avg. sales rank of this seller\'s products is.</p><br>\n\t\t\t\t\t\t<div id="grid-container-seller-category-statistic" class="on-white"></div>\n\t\t\t\t\t</div>');n.sellerBrandStatistics&&n.sellerBrandStatistics.length&&(g+='<br><br><br><div>\n\t\t\t\t\t\t<p style="color:#AA5D5D">Seller Brand Listing Statistics</p>\n\t\t\t\t\t\t<p style="width:800px;">Overview of the products by brand <span style="font-weight:500;">'+
n.sellerName+'</span> is primarily selling, how often Amazon is on those listings and what the avg. sales rank of this seller\'s products is.</p><br>\n\t\t\t\t\t\t<div id="grid-container-seller-brand-statistic" class="on-white"></div>\n\t\t\t\t\t</div>');g=material.getTabs({tabs:[{tab:{icon:"bar-chart",label:"Seller Metrics"},panel:{id:"sellerMetrics",content:g},isActive:!0},0<m?{tab:{icon:"table",label:"Storefront"},panel:{id:"sellerStorefront"}}:null],panelsClass:"dataContent"});replaceHtml("sellerPage",
g);tabSwitcher().listen("MDCTabBar:change",function(F){1==F.detail.activeTabIndex&&(F=$("#sellerStorefront"),F.html()&&50<F.html().length||(replaceHtml("sellerStorefront",'<div id="grid-container-storefront" class="on-white"></div>'),GridStorefront.init(n,"grid-container-storefront")))});$("#sellerName").text(n.sellerName);a(n);n.sellerCategoryStatistics&&n.sellerCategoryStatistics.length&&GridSellerCategoryStatistic.init(n,"grid-container-seller-category-statistic");n.sellerBrandStatistics&&n.sellerBrandStatistics.length&&
GridSellerBrandStatistic.init(n,"grid-container-seller-brand-statistic")}else g='<div class="text_long">Seller <code>'+d+"</code> on Amazon."+getTldByDomain(b)+" not found. Either the seller does not exist or Keepa has never encountered an offer by this seller.</div>",replaceHtml("sellerPage",g)}).fail(function(g){$("#loadingIcon").hide();429==g.status?(showPopup("Quota exceeded",quotaExceeded,!0),addDataUpdateHandler()):showErrorPopup("Seller initialization failed: "+(g.status?g.status:g))})}}}();var compareCache="",comparePricesOverlayActive=!1,dataProduct="",graphShareURL="",prevTitle="",refreshedOnce=!1,shareChartOverlayActive=!1;
function parseCurrentProductPrices(a,b,d){var g=la._93+":",n=la._94+":",t=void 0!=a.PRICE_AMAZON;b&&void 0!=b||(b=a.domainId);var h=function(P){return!t||0>P?"":' <span style="opacity:0.8" title="'+la._342+'">('+Money.format(P,{sourceDomainId:b,targetDomainId:b,skipSymbol:!0})+")</span>"},m=function(P){return!t||0>P?"":' <span style="opacity:0.8" title="'+la._342+'">('+Money.format(P,{sourceDomainId:b,skipSymbol:!0})+")</span>"},r="null"!=a.AMAZON_LAST&&-1!=a.AMAZON_LAST?Money.format(a.AMAZON_LAST,
{sourceDomainId:b,targetDomainId:b}):"",q="null"!=a.MARKET_NEW_LAST&&-1!=a.MARKET_NEW_LAST?Money.format(a.MARKET_NEW_LAST,{sourceDomainId:b,targetDomainId:b}):"",u="null"!=a.MARKET_USED_LAST&&-1!=a.MARKET_USED_LAST?Money.format(a.MARKET_USED_LAST,{sourceDomainId:b,targetDomainId:b}):"",D="",F="",M="";d="<span>";var Q="</span>";showReferencePrice(b)&&(D="null"!=a.AMAZON_LAST&&-1!=a.AMAZON_LAST?"<span>"+Money.format(a.AMAZON_LAST,{sourceDomainId:b})+m(a.PRICE_AMAZON)+"</span>":"",F="null"!=a.MARKET_NEW_LAST&&
-1!=a.MARKET_NEW_LAST?"<span>"+Money.format(a.MARKET_NEW_LAST,{sourceDomainId:b})+m(a.PRICE_NEW)+"</span>":"",M="null"!=a.MARKET_USED_LAST&&-1!=a.MARKET_USED_LAST?"<span>"+Money.format(a.MARKET_USED_LAST,{sourceDomainId:b})+m(a.PRICE_USED)+"</span>":"",d='<span class="price__reference" style="text-align:right;"><span>',Q="</span></span>");m="";""!=r?(m+='<span class="productTableDescriptionPriceDescr">Amazon: </span><span class="productTableDescriptionPrice priceAmazon">'+D+d+r+h(a.PRICE_AMAZON)+
Q+"</span>",""!=q&&(m+='<span class="productTableDescriptionPriceDescr">&emsp;'+g+'</span><span class="productTableDescriptionPriceAlt priceNew">'+F+d+q+h(a.PRICE_NEW)+Q+"</span>"),""!=u&&(m+='<span class="productTableDescriptionPriceDescr">&emsp;'+n+'</span><span class="productTableDescriptionPriceAlt priceUsed">'+M+d+u+h(a.PRICE_USED)+Q+"</span>")):""!=q?(m+='<span class="productTableDescriptionPriceDescr">'+g+'</span><span class="productTableDescriptionPrice priceNew">'+F+d+q+h(a.PRICE_NEW)+Q+
"</span>",""!=u&&(m+='<span class="productTableDescriptionPriceDescr">&emsp;'+n+'</span><span class="productTableDescriptionPriceAlt priceUsed">'+M+d+u+h(a.PRICE_USED)+Q+"</span>")):m=""!=u?m+('<span class="productTableDescriptionPriceDescr">'+n+'</span><span class="productTableDescriptionPrice priceUsed">'+M+d+u+h(a.PRICE_USED)+Q+"</span>"):m+(!0===a.newPriceIsMAP?'<span style="font-size: 12px; color: #999;"> ('+la._907+' <i class="fa fa-info" title="'+la._908+'"></i>)</span>':"");try{var T=getValueAtTime(a.csv[CsvType.LIGHTNING_DEAL.index],
keepaTime.now(),CsvType.LIGHTNING_DEAL);if(0<T){var ha=Money.format(T,{sourceDomainId:a.domainId,targetDomainId:a.domainId});g="";showReferencePrice(b)&&(g=Money.format(T,{sourceDomainId:a.domainId}));m+='&emsp;<span class="productTableDescriptionPriceDescr">'+CsvType.getName(CsvType.LIGHTNING_DEAL.index)+':</span><span class="productTableDescriptionPrice" style="color:'+CsvType.LIGHTNING_DEAL.color+'">'+g+d+ha+Q+"</span>"}}catch(P){console.error(P)}ha=getLastWithShipping(a.csv[CsvType.EBAY_NEW_SHIPPING.index],
CsvType.EBAY_NEW_SHIPPING);T=getLastWithShipping(a.csv[CsvType.EBAY_USED_SHIPPING.index],CsvType.EBAY_USED_SHIPPING);if(isAWS||storage.email&&0<storage.email.indexOf("@amazon."))T=ha=-1;n=keepaTime.now();g=!1;if(0>=a.lastEbayUpdate||0<a.lastEbayUpdate&&20160<n-a.lastEbayUpdate)g=!0;!g&&0<ha[0]&&(n=Money.format(ha[0]+ha[1],{sourceDomainId:b,targetDomainId:b}),h=0==ha[1]?"free shipping":Money.format(ha[0],{sourceDomainId:b,targetDomainId:b})+(0<ha[1]?" + "+Money.format(ha[1],{sourceDomainId:b,targetDomainId:b,
skipSymbol:!0})+" shipping":""),q=r="",showReferencePrice(b)&&(q=0==ha[1]?"free shipping\n":Money.format(ha[0],{sourceDomainId:b})+(0<ha[1]?" + "+Money.format(ha[1],{sourceDomainId:b,skipSymbol:!0})+" shipping":"")+"\n",r="<span>"+Money.format(ha[0]+ha[1],{sourceDomainId:b})+"</span>"),m+='&emsp;<span class="productTableDescriptionPriceDescr">'+CsvType.getName(CsvType.EBAY_NEW_SHIPPING.index).replace(" \ud83d\ude9a","")+':</span><span class="productTableDescriptionPrice priceEbayNew" title="'+q+h+
'" style="color:'+CsvType.EBAY_NEW_SHIPPING.color+'">'+r+d+n+Q+"</span>");!g&&0<T[0]&&(ha=Money.format(T[0]+T[1],{sourceDomainId:b,targetDomainId:b}),g=0==T[1]?"free shipping":Money.format(T[0],{sourceDomainId:b,targetDomainId:b})+(0<T[1]?" + "+Money.format(T[1],{sourceDomainId:b,targetDomainId:b,skipSymbol:!0})+" shipping":""),h=n="",showReferencePrice(b)&&(h=0==T[1]?"free shipping\n":Money.format(T[0],{sourceDomainId:b})+(0<T[1]?" + "+Money.format(T[1],{sourceDomainId:b,skipSymbol:!0})+" shipping":
"")+"\n",n="<span>"+Money.format(T[0]+T[1],{sourceDomainId:b})+"</span>"),m+='&emsp;<span class="productTableDescriptionPriceDescr">'+CsvType.getName(CsvType.EBAY_USED_SHIPPING.index).replace(" \ud83d\ude9a","")+':</span><span class="productTableDescriptionPrice priceEbayUsed" title="'+h+g+'" style="color:'+CsvType.EBAY_USED_SHIPPING.color+'">'+n+d+ha+Q+"</span>");t&&(a=Date.now()/6E4-(a.LASTUPDATE+60*offsetHours),m+='<span style="font-size: 12px; color: #999;">&emsp;&emsp;('+la._123+prettyDate(a)+
")</span>");return m}
function closeProductOverlay(){var a=$("#productOverlay").find("#graph");graph.remove(a.data("domainId"),a.data("asin"),a.data("index"));graph.remove(a.data("domainId"),a.data("asin"),1);$("#overlayShadow").hide();a=function(){$("#productOverlay").css({transform:"translateY(0px)"});replaceHtml("detailProductPage","");$("#detailProductPage").remove()};isMobile?(a(),$("#productOverlay").hide()):$("#productOverlay").velocity("transition.slideUpOut",250,a);$(document).off("click.overlay");$(document).off("keydown.escape.overlay");
overlayClosed=!0;document.title=prevTitle;window.location.href=preOverlayUrl;setupQuotaWidget()}function productUpdate(){refreshedOnce=!1;0==$("#detailProductPage").length?generateProduct():loadProduct(0)}
function addLightningDealBox(a){var b=CsvType.LIGHTNING_DEAL.index;b=a.csv?a.csv[b]:null;if(null!=b){var d=b.length;if(3<d&&-1==b[d-1]&&-1==b[d-3]){var g=0;try{for(;-1==b[d-5];)d-=2;g=b[d-2];for(var n=d;g<keepaTime.now()&&n+2<=b.length;)n+=2,g=b[n-2]}catch(m){console.error(m,b,d)}if(!(keepaTime.now()>g)){var t=(new Date(keepaTime.minutesToEpoch(g))).formatDate("M j, G:i"),h="";5<d&&0<b[d-5]&&(g=Date.now()/6E4-(b[d-6]+offsetMinutes),a=Money.format(b[d-5],{sourceDomainId:a.domainId,targetDomainId:a.domainId}),
h='<br><span style="color:#303030;font-size:12px;">'+la._649+" ("+prettyDate(g)+") "+la._650+" "+a+"</span>");setTimeout(function(){var m='<div style="color:tomato;font-size:19px;width:100%;text-align:center;margin-top:20px">\n\t\t\t\t\t<span><i class="fa fa-bolt"></i>&emsp;'+la._560+'! <span style="color: #6b4a4a;">'+la._648+" "+t+'</span>&emsp;<i class="fa fa-bolt" ></i></span>\n\t\t\t\t\t'+h+"\n\t\t\t\t</div>";$("#subGraphHover").before(m);addon()},0)}}}}
function getProductFromList(a,b){var d=null;if(null!=b)for(var g=0;g<b.length;g++){var n=b[g];if(n.asin===a){d=n;break}}return d}
function loadProduct(a){var b=lastSubUrl.split("-");if(2!==b.length)replaceHtml("productTableDescription","Error:<br>"+la._216);else{var d=b[0],g=b[1];b=g.match(verifyRegExp.asin);if(!b||10>b[1].length)replaceHtml("productTableDescription","Error:<br>"+la._216);else{g=b[1];d=Number(d);comparePricesOverlayActive=!1;compareCache="";shareChartOverlayActive=!1;$("#productTableImageBox").hide();var n=function(t){if(0!==$("#productTableDescription").length)if(t.products){for(var h,m=!1,r=0;r<t.products.length;r++)h=
t.products[r],null!=h&&(h.ASIN=g,h.MANUFACTURER=h.manufacturer,h.TITLE=h.title,h.LASTUPDATE=h.lastUpdate,h.TYPE=h.productType,5==h.productType||3==h.productType||4==h.productType?1==t.products.length&&(m=!0):(h.IMAGES=null==h.imagesCSV?[""]:h.imagesCSV.split(","),null!=h.csv&&(h.AMAZON=h.csv[CsvType.AMAZON.index],h.MARKET_NEW=h.csv[CsvType.NEW.index],h.MARKET_USED=h.csv[CsvType.USED.index],h.SALESRANK=h.csv[CsvType.SALES.index],h.AMAZON_LAST=h.AMAZON[h.AMAZON.length-1],h.MARKET_NEW_LAST=h.MARKET_NEW[h.MARKET_NEW.length-
1],h.MARKET_USED_LAST=h.MARKET_USED[h.MARKET_USED.length-1])));if(1<t.products.length){h=getProductFromList(g,t.products);if(null==h){replaceHtml("productTableDescription",la._121);return}if(5==h.productType){if(null==h.variationCSV||""==h.variationCSV){replaceHtml("productTableDescription",la._121);return}m="<div>Please select a specific variation of this product:</div><br>";if("undefined"!=typeof t.products){replaceHtml("productTableDescription",m+'<div id="variationGrid" class="on-white" data-wrapper="detailProductPage"></div>');
$("#productTableDescription").css("overflowY","auto");GridVariation.init(t.products,"variationGrid",!1);return}if(null==h.variationCSV){replaceHtml("productTableDescription",la._121);return}h.variationCSV=h.variationCSV.split(",");for(var q in h.variationCSV)m+='<br><a href="#!product/'+d+"-"+h.variationCSV[q]+'">Variation '+q+"</a>";replaceHtml("productTableDescription",m);$("#productTableDescription").css("overflowY","auto");return}3==h.productType?(replaceHtml("productTableDescription",la._341),
m=!0):4==h.productType&&(replaceHtml("productTableDescription",la._341),m=!0)}$("#productTableImageBox").show();h=t.products[0];h.timeStamp=Date.now();if(2==h.TYPE)replaceHtml("productTableDescription",la._395);else if(null==h.ASIN)replaceHtml("productTableDescription",'<i class="fa fa-exclamation-circle tomato fa-lg"></i>&emsp;'+la._341);else{var u=keepaTime.now(),D=[];h.stats=getStatistics(h);var F=!0;try{if(null==h.csv||null==h.csv[0]||2==h.csv[0].length&&-1==h.csv[0][1]&&2==h.csv[1].length&&-1==
h.csv[1][1]&&2==h.csv[2].length&&-1==h.csv[2][1]&&null==h.csv[CsvType.COLLECTIBLE.index]&&null==h.csv[CsvType.REFURBISHED.index]&&2==h.csv[3].length&&-1==h.csv[3][1])$("#graph").html('<span style="color:tomato; margin-left: 20px;"><i class="fa fa-exclamation-triangle"></i>&emsp;Product never was in stock since we started tracking it.</span>').show(),F=!1}catch(Q){console.error(Q)}if(m)F?(replaceHtml("productTableDescription",'<div style="color:tomato;font-size: 16px;"><i class="fa fa-exclamation-triangle"></i>&emsp;'+
la._341+'</div><br>Below is our <strong>outdated</strong> historical data for this product:<br><br><div id="priceHistory" class="active"><div class="graph unselectable" id="graph"></div></div>'),q=$("#graph"),m=graph.prepare(d),m.csv=h.csv,m.salesRanks=h.salesRanks,m.syncedGraphs=D,D.push(m),m.salesRankCategoryTrees=h.salesRankCategoryTrees,m.salesRankReference=h.salesRankReference,m.salesRankCategories=h.salesRankCategories,m.asin=h.ASIN,m.graphIndex=0,m.stats=h.stats,m.buyBoxSellerIdHistory=h.buyBoxSellerIdHistory,
m.buyBoxUsedHistory=h.buyBoxUsedHistory,m.offers=h.offers,m.$container=q,m.$container.show(),m.parameter.width=float2int(q.parent().width())-200+"px",m.parameter.interval=(u-h.trackingSince)/60,m.parameter.forceInterval=!0,graph.create(m),addSubGraphMenu(h,d,D),$("#casinLine").hide()):replaceHtml("productTableDescription",la._341);else{graphShareURL=GraphService.getShareUrl(h.asin,d);m=q="";if(null==h.IMAGES||0==h.IMAGES.length||null==h.IMAGES[0]||""==h.IMAGES[0])q+='<img src="'+imgCDNUrl+'no-img.gif"/>';
else{r=h.IMAGES[0].substring(h.IMAGES[0].length-4,h.IMAGES[0].length);".gif"==r||".jpg"==r||".png"==r?filename=h.IMAGES[0].substring(0,h.IMAGES[0].length-4):(filename=h.IMAGES[0],r=".jpg");q+='<div id="mainImageDiv">';for(var M=0;M<h.IMAGES.length&&7>M;M++)r=h.IMAGES[M].substring(h.IMAGES[M].length-4,h.IMAGES[M].length),".gif"==r||".jpg"==r||".png"==r?filename=h.IMAGES[M].substring(0,h.IMAGES[M].length-4):(filename=h.IMAGES[M],r=".jpg"),m+='<div id="'+M+'" class="productThumb" style="background:url('+
imageServer+filename+"._SL75_"+r+') center center no-repeat"></div>',q+='<img id="i'+M+'" src="'+imageServer+filename+"._SX500_SY500_"+r+'" style="display:none;"/>';q+="</div>";replaceHtml("productTableImageBoxThumbs",m)}replaceHtml("productTableImageBoxMain",q);network.request({path:"tracking/community",type:"product",asin:g,maxAge:0}).always(function(Q){t.trackings=Q.comTrackings;h.trackingInfos=getTrackingInfos(d,t.trackings,h);addLightningDealBox(h);Q=h.csv[CsvType.RATING.index];var T=h.csv[CsvType.COUNT_REVIEWS.index],
ha=h.csv[CsvType.EXTRA_INFO_UPDATES.index];ha=null==ha?0:ha[ha.length-2];var P="";if(null!=Q&&null!=T&&10080>keepaTime.now()-ha){Q=-1<Q[Q.length-1]?Q[Q.length-1]:0;T=-1<T[T.length-1]?T[T.length-1]:0;ha=(Q/10).toFixed(1);P="";var R=h.stats[CsvType.RATING.index];R&&R.avg&&0<R.avg.val&&R.avg.val!=Q&&(P=R.avg.val>Q?"down":"up",P='&ensp;<i title="rating is '+(R.avg.val<Q?"improving":"in decline")+'" class="fa fa-arrow-circle-'+P+'" ></i>');P='&emsp;<span style="white-space: nowrap;" class="small">'+(getStarsFromRating(Q)+
'&ensp;<span style="color:#cea000">'+ha+P+"</span>&ensp;(")+(T+" reviews)</span>")}Q='<div id="productInfoBox">'+('<div class="productTableDescriptionTitle">'+stripHTML(h.TITLE)+P+"</div>");prevTitle=document.title;T=document.createElement("div");T.innerHTML=stripHTML(h.TITLE);document.title=docTitlePrefix+T.innerHTML;Q=Q+('<div class="productTableDescriptionBrand">'+("null"!=h.MANUFACTURER&&null!=h.MANUFACTURER?la._122+h.MANUFACTURER:"")+"</div>")+parseCurrentProductPrices(h,d);getCurrencyByDomain(d);
T=Date.now()/6E4-(h.LASTUPDATE+60*offsetHours);ha="";"undefined"!=typeof h.lastPriceChange&&(ha=Date.now()/6E4-(h.lastPriceChange+60*offsetHours),ha=",&ensp;"+la._532+": "+prettyDate(ha));P=60<T?'&ensp;<i id="refreshProduct" title="'+la._217+'" class="fa fa-refresh fa-rotate-90" style="cursor: pointer;"></i>&nbsp;':"";Q+='<span style="font-size: 12px; color: #999;">&emsp;&emsp;('+la._123+prettyDate(T)+P+ha+")</span>";T='<img class="amznLogo" src="'+imgCDNUrl+"amazon/small/"+getTldByDomain(d)+'.png">';
ha="";if(globalEbayArray[h.domainId]){ha="#888";P="unverified if sold on ebay";if(20160>u-getLastTime(h.csv[CsvType.EBAY_NEW_SHIPPING.index],CsvType.EBAY_NEW_SHIPPING)||20160>u-getLastTime(h.csv[CsvType.EBAY_USED_SHIPPING.index],CsvType.EBAY_USED_SHIPPING))ha="#000",P="";ha='&emsp;<a href="'+getEbayRedirectByDomain(h.domainId,h.asin,!0)+'" rel="ebay" title="'+P+'" style="display: inline-block;font-size: 23px;line-height: 20px;transform: scale(1.2,1);color:'+ha+'"><span>e</span><span style="margin-left: -2px;">b</span><span style="margin-left: -2px;">a</span><span style="margin-left: -2px;">y</span></a>'}P=
7!=storage.domain?'<li class="tabItem" class="hidden" id="tabMore" rel="more">Data</li>':"";var Y=null!=h.variationCSV&&12<h.variationCSV.length||null!=h.variations&&1<h.variations.length;Y=(R=14==h.domainId)||!Y?"":'<li class="tabItem" class="hidden" id="tabVariation" rel="more">'+la._747+"</li>";var ja="Guild Product"!==h.productGroup?'<li class="tabSubItem" data-box="#MoreTab2">Offers</li>':"",ra=null;if(h.categories&&0<h.categories.length&&!R)try{var ta=JSON.parse(JSON.stringify(dealWrapperInstance.get().loadRequest("last")));
null==ta.includeCategories&&(ta.includeCategories=[]);ta.includeCategories[h.domainId]=h.categories;ta.dateRange=4;ra="https://keeepa.amztoolz.com/#!deals/"+encodeURIComponent(JSON.stringify(ta))}catch(sa){reportBug(sa)}ta=null!=ra?'<li class="tabItem tabDeals"><a href="'+ra+'">&rarr;&ensp;'+la._420+"</a></li>":"";Q+='</div><div class="tabBox"><div><ul id="tabHead" class="flex"><li class="tabItem active" id="tabGraph" rel="graph">'+la._124+"</li>"+(R?"":'<li class="tabItem" id="tabTrack" rel="track">'+la._125+
"</li>")+P+Y+'<li class="tabItem" id="tabAmazon"><a href="'+getAmazonRedirectByDomain(d,h.ASIN)+'" rel="amazon"><span style="margin-left:20px"></span>'+T+'<span class="margin-left: 10px;">'+la._99_2+"</span></a>"+ha+"</li>"+ta+'</ul></div><div id="tabContent"><div id="priceHistory" class="active"><div class="graph unselectable" id="graph"></div></div><div class="productTrack" id="track"></div><div class="productInfos" id="infos"></div><div class="productLoadingTab" id="loadingTab"></div><div id="more" class="hidden" style="margin-right: 10px;position: relative;min-height:60px;"><div><ul id="tabHeadSub"><li class="tabSubItem active" data-box="#MoreTab1">Product Details</li>'+
ja+'<li class="tabSubItem" data-box="#MoreTab3">Buy Box Statistics</li><li class="tabSubItem" data-box="#MoreTab4">Buy Box Used Statistics</li></ul></div><div id="loadingIconAdv" style="position: absolute !important;left: 185px;top: 80px;"><div id="loadingProgress"></div></div>'+(0==storage.accountType?'<div style="margin:15px 0;color:#b30093;font-weight:500;font-style:italic;">'+la._925+"</div><br>":"")+'<div style="margin-top: 20px;"><div class="active" id="MoreTab1"></div><div class="hidden" id="MoreTab2"></div><div class="hidden" id="MoreTab3"></div><div class="hidden" id="MoreTab4"></div></div></div><div id="variation"></div></div></div>';
replaceHtml("productTableDescription",Q);$(".priceEbayNew, .priceEbayUsed").colorTip({color:"twitter"});var pa=$("#tabContent"),ca=$("#tabHead");if(!refreshedOnce)$("#refreshProduct").one("click",function(){refreshedOnce=!0;$("#refreshProduct").addClass("fa-spin");loadProduct(1)});setTimeout(function(){storage.previewCasin&&function(){callCasin(function(sa){comparePricesLine(h.ASIN,d,sa)},h.ASIN,d,!0)}()},1);$("#tabGraph").click(function(){$(this).hasClass("active")||(pa.children(".active").hide().removeClass("active"),
$("#priceHistory").addClass("active"),$("#priceHistory").fadeIn(),ca.children().removeClass("active"),$("#tabGraph").addClass("active"),$("#subGraphButtons").show())});$("#tabTrack").click(function(){$(this).hasClass("active")||(0===$("#track .tracking").length&&(TrackingComponent.init(t),$("#grid-tools-variation").show(),$("#grid-wrapper-variation").show(),$("#grid-wrapper-variation-filter").show()),$("#priceHistory").hide(),pa.children(".active").hide().removeClass("active"),$("#track").addClass("active").fadeIn(),
ca.children().removeClass("active"),$("#tabTrack").addClass("active"))});$("#tabMore").click(function(){$(this).hasClass("active")||(pa.css("height",""),$("#subGraphButtons").hide(0),$("#refreshProductBox").hide(0),pa.children(".active").hide(0).removeClass("active"),$("#more").addClass("active").fadeIn().width($("#tabContent").width()),ca.children().removeClass("active"),$("#tabMore").addClass("active"),iframe.loadDataOffers("MoreTab1",h))});$("#tabHeadSub").on("click",function(sa){sa=$(sa.target);
sa.hasClass("active")||(sa.siblings(".active").removeClass("active"),sa.addClass("active"),sa=$(sa.data("box")),sa.siblings(".active").removeClass("active").addClass("hidden"),sa.removeClass("hidden").addClass("active"),iframe.loadDataOffers(sa.attr("id"),h),addon("resize",50+float2int($("#initPage").height())))});$("#tabVariation").on("click",function(sa){$(this).hasClass("active")||(pa.css("height",""),pa.children(".active").hide(0).removeClass("active"),$("#variation").addClass("active").fadeIn().width(pa.width()),
ca.children().removeClass("active"),$("#tabVariation").addClass("active"),iframe.loadVariationMatrix(h))});h.stats||(h.stats=getStatistics(h));dataProduct=h;F&&(ta=$("#graph"),Q=graph.prepare(d),Q.csv=h.csv,Q.p=h,Q.salesRanks=h.salesRanks,Q.salesRankCategoryTrees=h.salesRankCategoryTrees,Q.isParentSalesRank=h.isParentSalesRank,Q.salesRankReference=h.salesRankReference,Q.salesRankCategories=h.salesRankCategories,Q.asin=h.ASIN,Q.graphIndex=0,Q.syncedGraphs=D,D.push(Q),Q.stats=h.stats,Q.buyBoxSellerIdHistory=
h.buyBoxSellerIdHistory,Q.buyBoxUsedHistory=h.buyBoxUsedHistory,Q.offers=h.offers,Q.$container=ta,Q.$container.show(),null!=h.trackingInfos&&h.trackingInfos.isTrackedByUser&&(Q.parameter.tracking=h.trackingInfos.userTracking),Q.parameter.width=float2int(ta.parent().width())-200+"px",graph.create(Q),addSubGraphMenu(h,d,D));addThumbEvents();TrackingComponent.init(t);triggerTrack&&($("#tabTrack").trigger("click"),triggerTrack=!1);setupQuotaWidget(!0)})}}}else replaceHtml("productTableDescription",la._341)};
network.request({path:"product",history:!0,type:"ws",domainId:d,asin:g,maxAge:3,refreshProduct:1==a}).done(function(t){var h=keepaTime.now(),m=getProductFromList(g,t.products),r=null!==m?m.csv[CsvType.SALES.index]:null,q=null===r||2===r.length&&-1===r[1];null!==m&&null!==m.parentAsin&&null==m.variationCSV?(isTest&&console.log("loading parentAsin: "+m.parentAsin+" "+d),network.request({path:"product",history:!0,type:"ws",domainId:d,asin:m.parentAsin,maxAge:3,onlyParent:!0,refreshProduct:1==a}).done(function(u){u=
getProductFromList(m.parentAsin,u.products);try{null!=u.variationCSV&&(null==m.variationCSV||m.variationCSV.length<u.variationCSV.length)&&(m.variationCSV=u.variationCSV);var D=null!=u.csv&&null!=u.csv[CsvType.SALES.index]?u.csv[CsvType.SALES.index].length:0;if(q){if(1<D){var F=u.csv[CsvType.SALES.index][D-2],M=u.csv[CsvType.SALES.index][D-1];-1==M&&3<D?(F=u.csv[CsvType.SALES.index][D-4],259200<h-F&&(u.csv[CsvType.SALES.index][D-2]=F+60)):259200<h-F&&0<M&&(u.csv[CsvType.SALES.index].push(F+60,-1),
D+=2)}m.csv[CsvType.SALES.index]=u.csv[CsvType.SALES.index];m.isParentSalesRank=2<D}else if(2<D){var Q=getWeightedMean(u.csv[CsvType.SALES.index],h,30,CsvType.SALES,u.domainId),T=getWeightedMean(m.csv[CsvType.SALES.index],h,30,CsvType.SALES,m.domainId),ha=Math.min(Q,T)/Math.max(Q,T);.88<ha&&(console.log("merged parent and child sales rank history",ha),m.csv[CsvType.SALES.index]=mergeCSV(m.csv[CsvType.SALES.index],u.csv[CsvType.SALES.index],CsvType.SALES),m.isParentSalesRank=!0)}}catch(P){}finally{n(t)}}).fail(function(u){n(t)})):
n(t)}).fail(function(t){replaceHtml("productTableDescription","server not responding: <br>"+la._error)})}}}
function showMoreDataGraph(a,b,d){var g=graph.getGraphObject(b,a.ASIN,0,!1);if("undefined"==typeof g||null==g)console.error("maingraph undefined");else{if(!keepaApp&&300!=g.$container.height()){var n=Math.min(g.$container.height(),300),t=float2int(g.$container.find(".legend > table").height());n=Math.max(n,t);float2int(g.$container.height())!=n&&g.$container.height(n);g.plot.resize();graph.redraw(g,!0,!0)}n=$("#moreDataGraph");0<n.children().length?(addon("resize",float2int($("#initPage").height()+
n.height())),n.css("pointerEvents","auto"),n.show("fade",function(){graph.syncGraphAlignment(g)})):(b=graph.prepare(b),b.csv=a.csv,b.asin=a.ASIN,b.syncedGraphs=d,d.push(b),b.axes.x[0].show=!0,keepaApp||(b.axes.x[0].tickFormatter=function(){return""}),b.graphIndex=1,b.stats=a.stats,b.$container=n,b.preProcessedCSV=!0,keepaApp||b.$container.show(),b.parameter.width=g.parameter.width,b.parameter.height="150px",keepaApp&&(b.parameter.height=window.innerHeight-80),null!=a.trackingInfos&&a.trackingInfos.isTrackedByUser&&
(b.parameter.tracking=a.trackingInfos.userTracking),graph.create(b),setTimeout(addon,1))}}function hideSalesRankGraph(a,b){var d=graph.getGraphObject(a,b,2,!1);"undefined"!=typeof d&&(d&&d.$container.css("pointerEvents","none"),d.$container.hide("fade",function(){var g=graph.getGraphObject(a,b,0,!1);g&&(g.$container.height(g.parameter.height),g.plot.resize(),graph.redraw(g,!0,!1),addon())}))}
function showSalesRankGraph(a,b,d){try{if("undefined"==typeof a.salesRanks||null==a.salesRanks||2==a.csv[CsvType.SALES.index].length&&-2==a.csv[CsvType.SALES.index][1])return;var g=graph.getGraphObject(b,a.ASIN,0,!1);if("undefined"==typeof g||null==g){console.error("maingraph undefined");return}var n=graph.prepare(b);n.syncedGraphs=d;n.asin=a.ASIN;n.axes.x[0].show=!0;keepaApp||(n.axes.x[0].tickFormatter=function(){return""});"undefined"==typeof a.salesRankCategoryTrees&&(a.salesRankCategoryTrees=
{});"undefined"==typeof a.salesRankCategories&&(a.salesRankCategories={});for(var t=-2;0>t;t++)if(a.salesRankReference==t&&"undefined"==typeof a.salesRankCategoryTrees[t]){var h=""+t;a.salesRankCategoryTrees[h]=[{catId:t,name:"Root Category"}];a.salesRankCategories[h]={domainId:a.domainId,catId:h,name:-2==t?"Launchpad":"Root Category",children:[],parent:-1,highestRank:0,productCount:0,contextFreeName:-2==t?"Launchpad":"Root Category"}}t={};h={};var m={};for(u in a.salesRankCategoryTrees)h["#"+u]=
a.salesRankCategoryTrees[u];for(var r in a.salesRankCategories)m["#"+r]=a.salesRankCategories[r];if(null!=a.salesRanks)for(var q in a.salesRanks)t["#"+q]=a.salesRanks[q];if(0===Object.keys(a.salesRankCategoryTrees).length&&a.salesRankCategoryTrees.constructor===Object)return;var u=[];for(var D in t)u[D]=t[D];u["#"+a.salesRankReference]=a.csv[CsvType.SALES.index];D=[];var F=getCategorySalesRanks(h,m,u);if(0==F.length)return;r=0;t=[];t["#"+a.salesRankReference]=a.csv[CsvType.SALES.index];if(null!=a.salesRanks)for(var M=
$jscomp.makeIterator(F),Q=M.next();!Q.done;Q=M.next()){var T=Q.value;"undefined"!=typeof a.salesRanks[T.cr.catId]&&(t["#"+T.cr.catId]=a.salesRanks[T.cr.catId],D.push({data:a.salesRanks[T.cr.catId],catId:T.cr.catId}),r++)}n.allRanksOrdered=D;n.csv=t;var ha=n.axes.y[n.axes.y.length-1].index;ha=2;F=!0;var P=[n.axes.y[0]],R;for(R in u)P.push({index:ha++,tickDecimals:0,min:0,alignTicksWithAxis:0,position:"right",tickFormatter:function(pa,ca){return"#"+NumberUtil.format(pa)},transform:"0"===storage.salesRankInverse?
null:function(pa){return-pa},inverseTransform:"0"===storage.salesRankInverse?null:function(pa){return-pa},tickColor:"rgba(0, 255, 0, 0.13)",show:F,defaultShow:F}),F=!1;if(!keepaApp&&300!=g.$container.height()){var Y=Math.min(g.$container.height(),300),ja=float2int(g.$container.find(".legend > table").height());Y=Math.max(Y,ja);float2int(g.$container.height())!=Y&&g.$container.height(Y);g.plot.resize();graph.redraw(g,!0,!0)}var ra=$("#salesRankGraph");if(0<ra.children().length){addon("resize",float2int($("#initPage").height()+
ra.height()));ra.css("pointerEvents","auto");ra.show("fade",function(){graph.syncGraphAlignment(g)});return}d.push(n);if(null!=a.salesRankReferenceHistory){d=[];for(ha=0;ha<a.salesRankReferenceHistory.length;ha+=2){var ta=a.salesRankReferenceHistory[ha+1];m["#"+ta]?a.salesRankReferenceHistory[ha+1]=m["#"+ta].name:d.push(ta)}0<d.length&&network.request({path:"pro/category",domainId:b,categoryIds:d,version:3}).done(function(pa){for(var ca=0;ca<a.salesRankReferenceHistory.length;ca+=2){var sa=a.salesRankReferenceHistory[ca+
1];pa.categories[sa]&&(a.salesRankReferenceHistory[ca+1]=pa.categories[sa].name)}})}n.axes.y=P;n.graphIndex=2;n.$container=ra;n.salesRanks=t;n.salesRankCategoryTrees=h;n.salesRankReference="#"+a.salesRankReference;n.salesRankCategories=m;n.salesRankReferenceHistory=a.salesRankReferenceHistory;n.preProcessedCSV=!0;n.parameter.width=g.parameter.width;n.parameter.height="125px";keepaApp&&(n.parameter.height=window.innerHeight-80);keepaApp||n.$container.show();graph.create(n)}catch(pa){reportBug(pa,a.asin+
" "+a.domainId),console.log(pa)}setTimeout(addon,1)}
function addSubGraphMenu(a,b,d){if(keepaApp){if(hasDataAccessSubscription)try{showSalesRankGraph(a,b,d)}catch(T){isTest?console.log(T):reportBug(T)}showMoreDataGraph(a,b,d)}else{var g=null==a.trackingInfos?"":'<span class="shareChart" id="trackingInfos"><span class="statsDate">'+a.trackingInfos.users+'</span>&nbsp;<i class="fa fa-users fa-18"></i>&ensp;'+la._421+"</span>",n=storage.previewCasin?"":'<span class="shareChart " id="compareChart"><i class="fa fa-globe fa-18"></i>&ensp;'+la._315+"</span>",
t=storage.previewCasin?'<i id="compareChart" title="'+la._315+'" class="fa fa-globe fa-18" style="font-size: 37px !important;margin-right: 20px;opacity: 0.4;"></i><div id="loadingIconCasin" style="text-align:center;clear: both;"></div>':"",h='<div class="legendTip"></div><div style="font-size: 10px;margin-left:30px;color:#7d7d7d;margin-bottom:-5px;position:relative;width: 600px;">'+(isMobile?"":la._509)+"&emsp;\ud83d\ude9a = "+la._465+"<br>"+la._510+"</div>",m="1"==storage.moreData?'<i class="fa fa-minus-square-o fa-18"></i>&ensp;'+
la._430:'<i class="fa fa-clone fa-18"></i>&ensp;'+la._429;$("#graph").after('<div id="salesRankGraph" class="graph" style="display:none;margin-top: 10px;"></div><div id="moreDataGraph" class="graph" style="display:none;margin-top: 10px;"></div>'+h+'<div id="subGraphHover" style="position: relative;"><div class="flex subGraphHoverAlignment"><div></div><div id="statisticsContent" class="hidden"></div><div></div></div>'+(null==a.trackingInfos?"":'<div class="flex subGraphHoverAlignment"><div></div><div id="trackingInfosContent" class="hidden"></div><div></div></div>')+
'</div><div id="casinLine" class="flex">'+t+'<div id="subGraphButtons">'+g+'<span class="shareChart" id="statistics"><i class="fa fa-bar-chart fa-18"></i>&ensp;'+la._382+"</span>"+n+'<span class="shareChart" id="shareChart"><i class="fa fa-share fa-18"></i>&ensp;'+la._313+'</span><span class="shareChart" id="moreData">'+m+"</span></div></div>");var r=$(".toggleSalesRankGraph");$("#salesRankGraph").hover(function(){r.css({background:"#e9f6ea",borderRadius:"16px",boxShadow:"0px 0px 7px 2px #e9f6ea"})},
function(){r.css({background:"#fff",boxShadow:"0px 0px 7px 2px #fff"})});try{"1"===storage.showSalesRankGraph&&showSalesRankGraph(a,b,d)}catch(T){isTest?console.log(T):reportBug(T)}"1"==storage.moreData&&showMoreDataGraph(a,b,d);$("#compareChart").on("click",function(){comparePricesOverlay(a.ASIN,b)});null!=a.trackingInfos&&(t=function(T,ha,P){var R="";g[ha][P]&&-1!=g[ha][P]?(5==T?g[ha][P].val&&(R="#"+NumberUtil.format(g[ha][P].val)):R='<span style="white-space: nowrap">'+Money.format(g[ha][P].val,
{sourceDomainId:b,targetDomainId:b})+"</span>",R="avg"==P?R+('<br><span class="statsDate">'+la._422.replace("X",g[ha].avg.count)+"</span>"):"current"==P?R+('<br><span class="statsDate">'+prettyDate(keepaTime.now()-g[ha][P].date)+"</span>"):R+('<br><span class="statsDate">'+(new Date(keepaTime.minutesToEpoch(g[ha][P].date))).formatDate("M j, Y")+"</span>")):R="current"==P?'<span style="font-size:11px;">'+la._83+"</span>":'<span style="font-size:11px;">-</span>';return'<td class="statsRow'+T+'">'+R+
"</td>"},g=a.trackingInfos,n=g.isTrackedByUser?'<tr><td class="statsRow1">'+la._423+"</td>"+t(2,"amazon","current")+t(3,"mnew","current")+t(4,"mused","current")+"</tr><tr>":"",t=1<g.users||!g.isTrackedByUser?'<td class="statsRow1">'+la._342+" "+la._385+"</td>"+t(2,"amazon","avg")+t(3,"mnew","avg")+t(4,"mused","avg")+"</tr>":"",replaceHtml("trackingInfosContent",'<table id="trackingInfoTable"><tr><th></th><th rel="2">Amazon</th><th rel="3">'+la._148+'</th><th rel="4">'+la._149+"</th></tr>"+n+"<tr>"+
t+'</table><div style="padding:10px;">'+(1<g.users?g.users+" "+la._424:g.isTrackedByUser?la._426:"1 "+la._425)+"</div>"));try{n=function(T,ha){try{if(void 0===q[ha]||0>q[ha].lowest&&-2!==q[ha].current)F.find(".statsRow"+T).hide(0),F.find("th[rel="+T+"]").hide(0)}catch(P){console.error(q,T,ha,P)}};t=function(T,ha,P){var R="";try{if(void 0===q[ha])return"";q[ha][P]&&-1!=q[ha][P]&&-1!=q[ha][P].val&&-2!==q[ha][P]?"avgDrops"==P?R=q[ha][P]+'<br><span class="statsDate">'+la._397+"</span>":(5==T?q[ha][P].val&&
(R="#"+NumberUtil.format(q[ha][P].val)):R=Money.format(q[ha][P].val,{sourceDomainId:b,targetDomainId:b}),R="avg"==P?R+('<br><span class="statsDate">'+la._386.replace("X",q[ha].avg.days)+"</span>"):"avg180"==P?R+('<br><span class="statsDate">'+la._386.replace("X","180")+"</span>"):"current"==P?R+('<br><span class="statsDate">'+prettyDate(keepaTime.now()-q[ha][P].date)+"</span>"):R+('<br><span class="statsDate">'+(new Date(keepaTime.minutesToEpoch(q[ha][P].date))).formatDate("M j, Y")+"</span>")):R=
-2===q[ha].current?'<span style="color: #666;"><i class="fa fa-lock"></i></span>':"current"==P?'<span style="font-size:11px;">'+la._134+"</span>":'<span style="font-size:11px;">-</span>'}catch(Y){return console.log(Y),""}return'<td class="statsRow'+T+'">\n\t\t\t\t\t'+R+"\n\t\t\t\t</td>"};var q=a.stats,u=4296<keepaTime.now()-a.trackingSince?'<tr><td class="statsRow1"></td>\n\t\t\t'+t(2,"amazon","avg180")+"\n\t\t\t"+t(3,"mnew","avg180")+"\n\t\t\t"+t(4,"mused","avg180")+"\n\t\t\t"+t(5,"salesrank","avg180")+
"\n\t\t\t</tr>":"",D=-2===q.salesrank.current?'<span style="color:#666;display:inline-block;font-size:11px;padding:5px 15px;"><i class="fa fa-lock"></i> = '+la._909+"</span>":"";replaceHtml("statisticsContent",'<table id="statsTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<th></th>\n\t\t\t\t\t<th rel="2">Amazon</th>\n\t\t\t\t\t<th rel="3">'+la._148+'</th>\n\t\t\t\t\t<th rel="4">'+la._149+'</th>\n\t\t\t\t\t<th rel="5">'+la._391+'</th>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td style="color: rgb(60, 179, 113);" class="statsRow1">'+
la._383+"<br></td>\n\t\t\t\t\t"+t(2,"amazon","lowest")+"\n\t\t\t\t\t"+t(3,"mnew","lowest")+"\n\t\t\t\t\t"+t(4,"mused","lowest")+"\n\t\t\t\t\t"+t(5,"salesrank","lowest")+'\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td class="statsRow1">'+la._344+"</td>\n\t\t\t\t\t"+t(2,"amazon","current")+"\n\t\t\t\t\t"+t(3,"mnew","current")+"\n\t\t\t\t\t"+t(4,"mused","current")+"\n\t\t\t\t\t"+t(5,"salesrank","current")+'\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td style="color: tomato" class="statsRow1">'+la._384+"</td>\n\t\t\t\t\t"+
t(2,"amazon","highest")+"\n\t\t\t\t\t"+t(3,"mnew","highest")+"\n\t\t\t\t\t"+t(4,"mused","highest")+"\n\t\t\t\t\t"+t(5,"salesrank","highest")+'\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td class="statsRow1">'+la._385+"</td>\n\t\t\t\t\t"+t(2,"amazon","avg")+"\n\t\t\t\t\t"+t(3,"mnew","avg")+"\n\t\t\t\t\t"+t(4,"mused","avg")+"\n\t\t\t\t\t"+t(5,"salesrank","avg")+"\n\t\t\t\t</tr>\n\t\t\t\t"+u+'\n\t\t\t\t<tr>\n\t\t\t\t\t<td class="statsRow1">'+la._396+'<br><span style="font-size:11px;">90 '+la._857+"</span></td>\n\t\t\t\t\t"+
t(2,"amazon","avgDrops")+"\n\t\t\t\t\t"+t(3,"mnew","avgDrops")+"\n\t\t\t\t\t"+t(4,"mused","avgDrops")+"\n\t\t\t\t\t"+t(5,"salesrank","avgDrops")+"\n\t\t\t\t</tr>\n\t\t\t</table>"+D);var F=$("#statsTable");n(2,"amazon");n(3,"mnew");n(4,"mused");n(5,"salesrank")}catch(T){}$("#shareChart").on("click",function(){shareChart()});$("#moreData").on("click",function(){if("1"==storage.moreData){storage.moreData="0";settings.send();$(this).html('<i class="fa fa-clone fa-18"></i>&ensp;'+la._429);var T=graph.getGraphObject(b,
a.asin,1,!1);T&&T.$container.css("pointerEvents","none");$("#moreDataGraph").hide("fade",function(){var ha=graph.getGraphObject(b,a.asin,0,!1);ha&&(ha.$container.height(ha.parameter.height),ha.plot.resize(),graph.redraw(ha,!0,!1),addon())})}else $(this).html('<i class="fa fa-minus-square-o fa-18"></i>&ensp;'+la._430),storage.moreData="1",settings.send(),showMoreDataGraph(a,b,d)});var M=$("#statisticsContent"),Q=$("#trackingInfosContent");$("#statistics").hover(function(){M.show(0)},function(){M.hide(0)});
$("#trackingInfos").hover(function(){Q.show(0)},function(){Q.hide(0)})}}
function getTrackingInfos(a,b,d){function g(q,u){u=u[u.length-1];for(var D={date:0,val:0},F={date:0,val:99999999999},M={val:-1,count:0},Q={date:0,val:-1},T=0,ha=b.length;T<ha;T++){var P=b[T];P&&0<P.createDate&&(n=!0,t=P);if(null!=P&&null!=P.thresholdValues)for(var R in P.thresholdValues){var Y=P.thresholdValues[R],ja=Y.csvType==q;q!=CsvType.USED.index||Y.csvType!=CsvType.WAREHOUSE.index&&Y.csvType!=CsvType.USED_ACCEPTABLE_SHIPPING.index&&Y.csvType!=CsvType.USED_GOOD_SHIPPING.index&&Y.csvType!=CsvType.USED_NEW_SHIPPING.index&&
Y.csvType!=CsvType.USED_VERY_GOOD_SHIPPING.index||(ja=!0);q!=CsvType.NEW.index||Y.csvType!=CsvType.NEW_FBA.index&&Y.csvType!=CsvType.BUY_BOX_SHIPPING.index&&Y.csvType!=CsvType.NEW_FBM_SHIPPING.index||(ja=!0);if(ja&&Y.domain==a&&null!=Y.thresholdValueCSV&&0<Y.thresholdValueCSV.length){var ra=Y.thresholdValueCSV[Y.thresholdValueCSV.length-2];ja=Y.thresholdValueCSV[Y.thresholdValueCSV.length-1];if(0<P.createDate){Q.val=ja;Q.date=ra;var ta=6E4*(offsetMinutes+ra);d.CDATE=d.CDATE?Math.min(d.CDATE,ta):ta}if(Y.isDrop){F.val>=
ja&&(F.val=ja,F.date=ra);D.val<=ja&&(D.val=ja,D.date=ra);0>M.val&&M.val++;if(4<M.count&&(Y=M.val/M.count,-1!=u&&.7<Math.min(u,Y)/Math.max(u,Y)&&(Y=u),.7>Math.min(ja,Y)/Math.max(ja,Y)))continue;M.count++;M.val+=ja}}}}-1!=M.val&&(M.val=0!=M.count?M.val/M.count:-1);return{highest:0==D.val?-1:D,current:1>Q.val?-1:Q,avg:1>M.val?-1:M,lowest:99999999999==F.val?-1:F,pctToAvg:1>M.val?-1:M.val}}if(void 0==b||null==b||0==b.length)return null;var n=!1,t=null,h=g(CsvType.AMAZON.index,d.AMAZON),m=g(CsvType.NEW.index,
d.MARKET_NEW),r=g(CsvType.USED.index,d.MARKET_USED);n&&(d.desiredPrices=[h.current.val,m.current.val,r.current.val]);return{amazon:h,mnew:m,mused:r,users:b.length,isTrackedByUser:n,userTracking:t}}
function statsCSV(a,b,d){if(null!=a){var g=CsvType.getObject(b);if(null!=g){var n=g.isWithShipping,t=n?3:2,h=n?2:1,m=keepaTime.now(),r=m-a[0],q=m-129600,u=m-259200,D=m-525600,F={date:0,val:0},M={date:0,val:getValueAtTime(a,q,g)},Q={date:0,val:getValueAtTime(a,u,g)},T={date:0,val:getValueAtTime(a,D,g)},ha={date:0,val:99999999999},P={date:0,val:M.val},R={date:0,val:Q.val},Y={date:0,val:T.val},ja={date:0,val:0},ra=90,ta=-1,pa=0;129600>r&&(ra=Math.floor(r/1440));for(var ca=1440*ra,sa=-1,Z=1,N=a.length;Z<
N;Z+=t){var f=a[Z];if(""!=f&&-1!=f){f=Number(f);if(n){var C=Number(a[Z-2]);f+=0>C?0:C}C=Number(a[Z-1]);F.val<=f&&(F.val=f,F.date=C);M.val<=f&&-1<M.val&&C>q&&(M.val=f,M.date=C);Q.val<=f&&-1<Q.val&&C>u&&(Q.val=f,Q.date=C);T.val<=f&&-1<T.val&&C>D&&(T.val=f,T.date=C);ha.val>=f&&(ha.val=f,ha.date=C);P.val>=f&&C>q&&(P.val=f,P.date=C);R.val>=f&&C>u&&(R.val=f,R.date=C);Y.val>=f&&C>D&&(Y.val=f,Y.date=C);if(!(1440>r))if(m-Number(a[Z-1])<ca){if(1!=Z){f<sa&&(b==CsvType.SALES.index?(C=sa/f,(1E4>sa||5E4>sa&&1.03<
C||1.05<C)&&pa++):pa++);sa=f;if(0>ta)if(0>Number(a[Z-t]))ta=0;else{ta=(ca-(m-Number(a[Z-1])))/1440;C=Number(a[Z-t]);if(n){var V=Number(a[Z-2]);C+=0>V?0:V}ta*=Number(C)}Z+h==N?0>a[Z-t]||(ta+=(m-a[N-t])/24*f):ta+=f*(Number(a[Z+h])-Number(a[Z-1])/1440)}}else sa=f,Z==N-h&&-1!=a[Z]&&(ta=Number(a[Z]))}}0<pa&&(pa=Math.round(pa/ra*3000.5)/100,pa=5>pa?pa.toFixed(1):pa.toFixed(0));b=Number(a[a.length-h]);n&&-1<b&&(n=Number(a[a.length-1]),b+=0>n?0:n);ja.val=b;ja.date=a[a.length-t];t=getWeightedMean(a,keepaTime.now(),
180,g,d);a=getWeightedMean(a,keepaTime.now(),90,g,d);return{avg:1>a?-1:{days:90,val:a},avg180:1>t?-1:{days:180,val:t},avgDrops:pa,current:1>ja.val?-2==ja.val?-2:-1:ja,highest:0==F.val?-1:F,highest90:0>=M.val?-1:M,highest180:0>=Q.val?-1:Q,highest365:0>=T.val?-1:T,hoursSinceFirstRecord:r/60,lowest:99999999999==ha.val||1>ha.val?-1:ha,lowest90:99999999999==P.val||1>P.val?-1:P,lowest180:99999999999==R.val||1>R.val?-1:R,lowest365:99999999999==Y.val||1>Y.val?-1:Y,pctToAvg:1>a?-1:a}}}}
function getStatistics(a){var b={},d;for(d in a.csv)b[d]=statsCSV(a.csv[d],d,a.domainId);b.amazon=b[CsvType.AMAZON.index];b.mnew=b[CsvType.NEW.index];b.mused=b[CsvType.USED.index];b.salesrank=b[CsvType.SALES.index];return b}
function addThumbEvents(){$(".productThumb").hover(function(){for(var a=0;8>a;a++)$("#i"+a).hide();$("#i"+$(this).attr("id")).show();a=$("#productTableDescription");var b=$("#productTableImageBoxMain");b.width(float2int(a.width())+48);b.height(float2int(a.height())+20);b.show();return!1},function(){$("#i"+$(this).attr("id")).hide();$("#productTableImageBoxMain").hide();return!1})}
function shareChart(){if(!shareChartOverlayActive){shareChartOverlayActive=!0;$("#tabGraph").trigger("click");var a='<div id="overlayShadowTop2" class="hidden"></div><div id="shareChartOverlay" class="hidden"><div class="text_long shadow" style="text-align:justify; color: #444; width: 500px !important;"> <div id="shareChartOverlay-close"><i class="fa fa-times-circle fa-2x"></i></div><div><i class="fa fa-share fa-lg fa-2x"></i><div style="font-size: 18px; margin: 0 0 20px;display: inline-block; color: #111">&emsp;'+la._313+
'</div></div><img style="height:200px;margin-bottom: 10px;" src="'+graphShareURL+'"</img><hr style="border-color:#38F !important">'+la._297+'<br><input class="selectable" id="shareChartInput" type="text" rel="site" autocomplete="off" class="site" role="textbox" readonly="readonly" style="display: inline-block; "></div></div>';$("#shareChart").before(a);$("#shareChartInput").val(graphShareURL);$("#shareChartInput").click(function(){$(this).select()});var b=$("#shareChartOverlay");b.velocity("transition.shrinkIn",
150);$("#overlayShadowTop2").show();a=function(){shareChartOverlayActive=!1;$("#overlayShadowTop2").hide();b.velocity("transition.shrinkOut",150,function(){b.remove()});addon()};$("#overlayShadowTop2").click(a);$("#shareChartOverlay-close").click(a);try{iframe.getIframeHeight()<80+$("#shareChartOverlay").height()&&addon("resize",80+float2int($("#shareChartOverlay").height()))}catch(d){}}}
function comparePricesLine(a,b,d){function g(R){n=t[R];var Y='<img src="'+flags[R]+'">';null!=n&&n.hasReviews&&(Q+='<a target="_blank" title="open reviews on Amazon.'+getTldByDomain(R)+'" href="http://www.amazon.'+getTldByDomain(R)+"/product-reviews/"+a+'">'+Y+"</a>",T=!0);if(!(null==n||0>n.AMAZON_LAST&&0>n.MARKET_NEW_LAST&&0>n.MARKET_USED_LAST&&0>n.BUY_BOX_LAST&&0>n.BUY_BOX_USED_LAST)){var ja=0<currencyDomainId?currencyDomainId:b;m=0>n.AMAZON_LAST?"":Money.format(n.values[0],{sourceDomainId:ja,targetDomainId:ja,
skipSymbol:!0});r=0>n.MARKET_NEW_LAST?"":Money.format(n.values[1],{sourceDomainId:ja,targetDomainId:ja,skipSymbol:!0});q=0>n.MARKET_USED_LAST?"":Money.format(n.values[2],{sourceDomainId:ja,targetDomainId:ja,skipSymbol:!0});u=0>n.BUY_BOX_LAST?"":Money.format(n.values[3],{sourceDomainId:ja,targetDomainId:ja,skipSymbol:!0});D=0>n.BUY_BOX_USED_LAST?"":Money.format(n.values[3],{sourceDomainId:ja,targetDomainId:ja,skipSymbol:!0});F=!0;var ra='data-domain="'+R+'"',ta="function"==typeof loadProductIFrame?
"http://www.amazon."+getTldByDomain(R)+"/dp/"+a:getAmazonRedirectByDomain(R,a),pa=' style="'+(0==m.length?"display:none;":"color:"+CsvType.AMAZON.color+";"+(R==d.lowestAmazonDomain?"box-shadow: 0 3px 4px -3px #000;font-weight: bold;":""))+'"',ca=' style="'+(0==r.length?"display:none;":"color:"+CsvType.NEW.color+";"+(R==d.lowestNewDomain?"box-shadow: 0 3px 4px -3px #000;font-weight: bold;":""))+'"',sa=' style="'+(0==q.length?"display:none;":"color:"+CsvType.USED.color+";"+(R==d.lowestUsedDomain?"box-shadow: 0 3px 4px -3px #000;font-weight: bold;":
""))+'"',Z=' style="'+(0==u.length?"display:none;":"color:"+CsvType.BUY_BOX_SHIPPING.color+";"+(R==d.lowestBBDomain?"box-shadow: 0 3px 4px -3px #000;font-weight: bold;":""))+'"';R=' style="'+(0==D.length?"display:none;":"color:"+CsvType.BUY_BOX_USED_SHIPPING.color+";"+(R==d.lowestBBUsedDomain?"box-shadow: 0 3px 4px -3px #000;font-weight: bold;":""))+'"';var N=n.csv[CsvType.LIGHTNING_DEAL.index],f=getValueAtTime(N,keepaTime.now(),CsvType.LIGHTNING_DEAL);ja=Money.format(f,{sourceDomainId:ja,targetDomainId:ja,
skipSymbol:!0});ja=getLastTime(N,CsvType.LIGHTNING_DEAL)<keepaTime.now()?'<span style="display:none;"></span>':'<span style="color:red;" title="'+CsvType.getName(CsvType.LIGHTNING_DEAL.index)+'"> <i class="fa fa-bolt" ></i> \n\t\t\t'+(0>f?'<i class="fa fa-clock-o" ></i>':""+ja)+' <i class="fa fa-bolt" ></i>  \n\t\t\t</span>';M+="<span "+ra+'><a target="_blank" href="'+ta+'">'+Y+ja+("<span"+Z+' title="'+CsvType.getName(CsvType.BUY_BOX_SHIPPING.index)+'">'+u+"</span><span")+(pa+' title="'+CsvType.getName(CsvType.AMAZON.index)+
'">'+m+"</span><span")+(ca+' title="'+CsvType.getName(CsvType.NEW.index)+'">'+r+"</span>")+(CsvType.BUY_BOX_USED_SHIPPING.isEnabled?"<span"+R+' title="'+CsvType.getName(CsvType.BUY_BOX_USED_SHIPPING.index)+'">'+D+"</span>":"")+("<span"+sa+' title="'+CsvType.getName(CsvType.USED.index)+'">'+q+"</span></a></span>")}}for(var n,t={},h=0;h<d.length;h++)n=d[h],null!=n&&(2==n.productType||3==n.productType||4==n.productType||5==n.productType?d[h]=null:(t[n.domainId]=n,n.AMAZON=n.csv[CsvType.AMAZON.index],
n.MARKET_NEW=n.csv[CsvType.NEW.index],n.MARKET_USED=n.csv[CsvType.USED.index],n.SALESRANK=n.csv[CsvType.SALES.index],n.AMAZON_LAST=n.AMAZON[n.AMAZON.length-1],n.MARKET_NEW_LAST=n.MARKET_NEW[n.MARKET_NEW.length-1],n.MARKET_USED_LAST=n.MARKET_USED[n.MARKET_USED.length-1],n.BUY_BOX_LAST=getLast(n.csv[CsvType.BUY_BOX_SHIPPING.index],CsvType.BUY_BOX_SHIPPING),n.BUY_BOX_USED_LAST=getLast(n.csv[CsvType.BUY_BOX_USED_SHIPPING.index],CsvType.BUY_BOX_USED_SHIPPING),n.hasReviews=n.csv[CsvType.COUNT_REVIEWS.index]&&
0<n.csv[CsvType.COUNT_REVIEWS.index][n.csv[CsvType.COUNT_REVIEWS.index].length-1]));calcComparePrices(d,b);var m,r,q,u,D,F=!1,M="",Q=h="",T=!1,ha=0<currencyDomainId?getCurrencyByDomain(currencyDomainId):getCurrencyByDomain(b);var P='<span class="casinLineContinent"><div><span class="casinLineLabel">'+la._352+" "+ha+"</span>";g(1);g(6);g(11);F?(T&&(Q='<span class="casinReview"><span>Reviews:&ensp;</span>'+Q+"</span>",P+=Q),M=P+"</div><div>"+M+"</div></span>"):M="";Q="";h+=M;M="";T=F=!1;P='<span class="casinLineContinent"><div><span class="casinLineLabel">'+
la._353+" "+ha+"</span>";g(2);g(3);g(4);g(8);g(9);g(14);F?(T&&(Q='<span class="casinReview"><span>Reviews:&ensp;</span>'+Q+"</span>",P+=Q),M=P+"</div><div>"+M+"</div></span>"):M="";Q="";h+=M;M="";T=F=!1;P='<span class="casinLineContinent"><div><span class="casinLineLabel">'+la._354+" "+ha+"</span>";g(5);g(10);F||T?(T&&(Q='<span class="casinReview"><span>Reviews:&ensp;</span>'+Q+"</span>",P+=Q),M=P+"</div><div>"+M+"</div></span>"):M="";Q="";h+=M;M="";T=F=!1;P='<span class="casinLineContinent"><div><span class="casinLineLabel">'+
la._663+" "+ha+"</span>";g(13);F?(T&&(Q='<span class="casinReview"><span>Reviews:&ensp;</span>'+Q+"</span>",P+=Q),M=P+"</div><div>"+M+"</div></span>"):M="";Q="";h+=M;M="";T=F=!1;P="";$("#compareChart").after(h);$(".casinReview > a").colorTip({color:"yellow"});addon();setTimeout(addon,450)}
function comparePricesOverlay(a,b){if(!comparePricesOverlayActive){comparePricesOverlayActive=!0;0<$("#grid-container-casin").length&&$("#overlayShadowTop3").trigger("click");var d=getCasinLocalesFromStorage(),g='<span id="casinLocales" style="opacity:'+(!0===d[0]?"0.3":"1")+'">',n=LocaleType.getByRegionOrder(!0),t;for(t in n){var h=n[t];2<(h+"").length?(0<t&&(g+="</span> "),g+="<span><span>"+h+"</span>"):g+='<input type="checkbox" data-domain="'+h+'" id="casinLocaleRadio'+h+'"'+(!0===d[h]?' checked="checked"':
"")+">"+getTldByDomain(h)+"&ensp;"}d='<div id="overlayShadowTop3" class="hidden"></div>\n\t\t\t<div id="comparePricesOverlay" class="customCheckbox" style="display:none;width:90%;">\n\t\t\t\t<div class="text_long shadow" style="text-align:justify;color:#444;width:98%;position:relative;">\n\t\t\t\t\t<div id="comparePricesOverlay-close"><i class="fa fa-times-circle fa-2x"></i></div>\n\t\t\t\t\t<div><i class="fa fa-globe fa-lg fa-2x"></i>\n\t\t\t\t\t\t<div style="font-size:18px; margin:0 10px 20px;display:inline-block;color:#111;">'+
la._317+'</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="flex flexWrap">\n\t\t\t\t\t\t<div id="grid-container-casin" class="on-white"></div>\n\t\t\t\t\t\t<div style="flex-grow:2;margin-left:20px;min-width:400px;"><div class="graph" id="compareGraphHolder"></div></div>\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<hr style="border-color:#38F !important;">\n\t\t\t\t\t<div style="min-width:600px;">'+la._318+'</div>\n\t\t\t\t\t<br><div class="casin-settings">Reduce load time by limiting the locales to retrieve:&emsp;\n\t\t\t<span><input type="checkbox" id="casinLimitedRadio"'+
((!0===d[0]?' checked="checked"':"")+">Only same region</span>\n\t\t\t"+(g+'</span></span>\n\t\t</div>\n\t\t\t\t\t<br>\n\t\t\t\t\t<div style="text-align: center;"><input type="checkbox" id="previewCasinRadio"\''))+(storage.previewCasin?' checked="checked"':"")+'"> '+la._511+"</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t";$("#tabContentIFrame").append(d);$("#tabContent").append(d);$("#comparePricesInput").click(function(){$(this).select()});$("#previewCasinRadio").click(function(){$(this).is(":checked")?
storage.previewCasin=1:storage.removeItem("previewCasin");settings.send()});$("#casinLimitedRadio").click(function(){var r=getCasinLocalesFromStorage();$(this).is(":checked")?(r[0]=!0,$("#casinLocales").css("opacity","0.3")):(r[0]=!1,$("#casinLocales").css("opacity","1").effect("highlight"));storage.casinLocales=JSON.stringify(r);settings.send()});for(d=1;d<numberOfDomains;d++)7!=d&&$("#casinLocaleRadio"+d).click(function(){var r=$(this).data("domain"),q=getCasinLocalesFromStorage();$(this).is(":checked")?
q[Number(r)]=!0:q[Number(r)]=!1;storage.casinLocales=JSON.stringify(q);settings.send()});var m=$("#comparePricesOverlay");m.velocity("transition.shrinkIn",150,function(){$("#overlayShadowTop3").show();var r=function(){comparePricesOverlayActive=!1;$("#overlayShadowTop3").hide();m.velocity("transition.shrinkOut",150,function(){m.remove()});addon();graph.remove(b,a,3)};$("#overlayShadowTop3").click(r);$("#comparePricesOverlay-close").click(r);var q=function(u){for(var D=[],F=0;F<u.length;F++){var M=
u[F];if(null!=M){M.converted||(M.converted=[]);for(var Q in CsvType)if("object"==typeof CsvType[Q]&&CsvType[Q].isEnabled){var T=CsvType[Q].index;null==M.csv||null==M.csv[T]||0==M.csv[T].length||2==M.csv[T].length&&0>M.csv[T][1]&&-2!=M.csv[T][1]||(D[T]=!0,!M.converted[Q]&&CsvType[Q].currency&&exchangeCurrencyCSV(M.csv[T],CsvType[Q],M.domainId,b),M.converted[Q]=!0)}}}F=null;M="";if(rearrangeCsvTypes){var ha=CsvType.getObjectsSorted();ha=$jscomp.makeIterator(ha);for(Q=ha.next();!Q.done;Q=ha.next())Q=
Q.value,"object"===typeof Q&&D[Q.index]&&!graphIsRestricted(b,Q.index)&&(null==F&&(F=Q),M+='<span rel="'+CsvType.getObjectName(Q.index)+'">'+CsvType.getName(Q.index)+"</span> ")}else for(ha in CsvType)"object"==typeof CsvType[ha]&&D[CsvType[ha].index]&&!graphIsRestricted(b,CsvType[ha].index)&&(null==F&&(F=CsvType[ha]),M+='<span rel="'+ha+'">'+CsvType.getName(CsvType[ha].index)+"</span> ");D='<div class="flex flexWrap" id="casTypes">'+M+"</div>";var P=$("#compareGraphHolder");P.before(D);$("#casTypes").children().first().addClass("active");
$("#casTypes").on("click",function(ja){if("SPAN"==ja.target.nodeName){ja=$(ja.target);var ra=CsvType[ja.attr("rel")];ja.parent().children().removeClass("active");ja.addClass("active");Y(u,ra)}});var R=null,Y=function(ja,ra){try{var ta=null;null!=R&&(ta=R.parameter);graph.remove(b,a,3);R=graph.prepare(b);null!=ta&&(R.parameter=ta,R.parameter.forceInterval=!0);R.asin=a;R.graphIndex=3;R.updateCSV=[];R.series=graph.getLocaleSeriesTemplates(CsvType.getObjectName(ra.index));ta=[];for(var pa=[],ca=0;ca<
ja.length;ca++){var sa=ja[ca];if(null!=sa&&"undefined"!==typeof R.series[LocaleType.getName(sa.domainId)]){var Z=getStatistics(sa);"undefined"!=typeof Z[ra.index]&&2!=sa.productType&&3!=sa.productType&&4!=sa.productType&&5!=sa.productType&&(pa[sa.domainId]=Z[ra.index],ta[sa.domainId]=sa.csv[ra.index],R.updateCSV[sa.domainId]=sa.csv[CsvType.EXTRA_INFO_UPDATES.index],R.series[LocaleType.getName(sa.domainId)].isDisabled=!1,graphIsRestricted(sa.domainId,ra.index)&&(R.series[LocaleType.getName(sa.domainId)].series.label+=
'&ensp;<i class="fa fa-lock"></i>&ensp;'))}}R.stats=pa;R.csv=ta;R.csvType=ra.index;R.type="locales";R.objectType=LocaleType;R.$container=P;R.$container.show();R.preResizeHook=function(){$("#casTypes").hide()};R.resizeHook=function(){$("#casTypes").css("width",R.parameter.width);$("#casTypes").show()};R.parameter.offsetLeft=-30;R.preResizeHook();R.parameter.width=float2int(P.parent().width())-170+"px";R.resizeHook();R.parameter.height="250px";graph.create(R)}catch(N){console.log(N)}};Y(u,F)};callCasin(function(u){for(var D,
F=!1,M=0;M<u.length;M++)D=u[M],null!=D&&(2==D.productType||3==D.productType||4==D.productType||5==D.productType?u[M]=null:(F=!0,D.AMAZON=D.csv[CsvType.AMAZON.index],D.MARKET_NEW=D.csv[CsvType.NEW.index],D.MARKET_USED=D.csv[CsvType.USED.index],D.SALESRANK=D.csv[CsvType.SALES.index],D.BUY_BOX_LAST=getLast(D.csv[CsvType.BUY_BOX_SHIPPING.index],CsvType.BUY_BOX_SHIPPING),D.AMAZON_LAST=D.AMAZON[D.AMAZON.length-1],D.MARKET_NEW_LAST=D.MARKET_NEW[D.MARKET_NEW.length-1],D.MARKET_USED_LAST=D.MARKET_USED[D.MARKET_USED.length-
1]));F&&(calcComparePrices(u,b),setTimeout(function(){q(u);GridCasin.init(u,b,"grid-container-casin").always(function(){addon("resize",float2int($(document).height()))})},0))},a,b,!1)})}}
function callCasin(a,b,d,g){var n=$("#loadingIconCasin");g&&n.show();var t=getCasinLocalesFromStorage(),h={};d=continents[domainIdToContinent[d]];for(var m=1;m<numberOfDomains;m++)if(7!=m){if(!0===t[0]){for(var r=!1,q=0;q<d.length&&!r;q++)d[q]==m&&(r=!0);if(!r)continue}else if(t&&!t[m])continue;h[m]=[b]}0===Object.keys(h).length?g&&n.hide():networkHelper.loadASINs({path:"product",offerPages:0,history:!0,maxAge:60,type:"casin",refreshProduct:!1},h,"").done(function(u){g&&n.hide();a&&a(u);"object"===
typeof TrackingComponent&&"function"===typeof TrackingComponent.setCasinData&&TrackingComponent.setCasinData(u)})}
function calcComparePrices(a,b,d){a.lowestAmazon=99999999999;a.lowestNew=99999999999;a.lowestUsed=99999999999;a.lowestBB=99999999999;a.lowestBBUsed=99999999999;for(var g=0;g<a.length;++g){var n=a[g];if(null!=n){n.values=[n.AMAZON_LAST,n.MARKET_NEW_LAST,n.MARKET_USED_LAST,n.BUY_BOX_LAST,n.BUY_BOX_USED_LAST];for(var t=0;5>t;t++)0>n.values[t]||(n.values[t]=Money.raw(n.values[t],{sourceDomainId:n.domainId,targetDomainId:0<d?d:0<currencyDomainId?currencyDomainId:b,keepUnit:!0}));n=a[g];-1!=n.values[0]&&
n.values[0]<a.lowestAmazon&&(a.lowestAmazon=n.values[0],a.lowestAmazonDomain=n.domainId);-1!=n.values[1]&&n.values[1]<a.lowestNew&&(a.lowestNew=n.values[1],a.lowestNewDomain=n.domainId);-1!=n.values[2]&&n.values[2]<a.lowestUsed&&(a.lowestUsed=n.values[2],a.lowestUsedDomain=n.domainId);-1!=n.values[3]&&n.values[3]<a.lowestBB&&(a.lowestBB=n.values[3],a.lowestBBDomain=n.domainId);-1!=n.values[4]&&n.values[4]<a.lowestBBUsed&&(a.lowestBBUsed=n.values[4],a.lowestBBUsedDomain=n.domainId)}}};var priceDataAPI=function(){var a,b,d,g,n,t,h,m,r,q,u,D,F,M,Q,T=!1,ha=0,P="",R=0,Y={},ja={AL:"Alabama",AK:"Alaska",AS:"American Samoa",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District Of Columbia",FM:"Federated States Of Micronesia",FL:"Florida",GA:"Georgia",GU:"Guam",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MH:"Marshall Islands",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",
MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",MP:"Northern Mariana Islands",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PW:"Palau",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VI:"Virgin Islands",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"},
ra=[],ta=function(ma){var na=$.Deferred();0==Object.keys(ra).length?$.getScript("https://js.stripe.com/v3/").done(function(){O=Stripe(ma);ra[ma]=O;na.resolve(O)}).fail(function(){na.reject()}):(null==ra[ma]&&(ra[ma]=Stripe(ma)),O=ra[ma],na.resolve(O));return na},pa=function(){var ma=null,na=null,W=function(){$("#formContent").hide();$("#popupTitle").hide();$("#loadingIconPopup").show()},ya=function(){$("#formContent").show();$("#popupTitle").show();$("#loadingIconPopup").hide()},Aa=!1,Da="service/stripe",
va="api",za=function(Ha){setTimeout(function(){null!=Ha.billingContact&&$("#frmNameS").val(Ha.billingContact);null!=Ha.billingZipCode&&$("#frmZipS").val(Ha.billingZipCode)},1);return'<div id="cardForm" class="stripeForm"><form><div class="group">    <label>      <span>Cardholder Name</span>      <input class="field" name="cardholder-name" id="frmNameS" placeholder="Cardholder full name and/or Company" required autocomplete="billing name" />    </label>  </div>  <div class="group">    <label>      <span>Card</span>      <div id="card-element" class="field"></div>    </label><div id="card-errors" role="alert"></div>  </div>  <button class="button" type="submit">Submit</button>  <div class="outcome">    <div class="error" role="alert"></div>    <div class="success">      Success!    </div>  </div></form></div>'};
return{getAuthenticatedSource:function(Ha,ea,ia,ua,fa,oa){function G(da){ya();var qa=document.querySelector("#cardForm .success"),xa=document.querySelector("#cardForm .error");qa.classList.remove("visible");xa.classList.remove("visible");da.token?(qa.querySelector("#cardForm .token").textContent=da.token.id,qa.classList.add("visible")):da.error&&(da=da.error.message,"Your postal code is incomplete."===da&&(da="Your postal code next to your credit card details is incomplete. If you do not see the field, re-enter your credit card information manually."),
xa.textContent=da,xa.classList.add("visible"));$("#checkoutForm").show()}Aa="pk_live_d8cHyZoVVZdRXDvnxSmuoQTM"!=Ha;Da="service/stripe";va=Aa?"data":"api";na=$.Deferred();var X=fa,aa=function(){O.createSource(X,{usage:"reusable",owner:{name:ua?ua.billingContact:oa,email:storage.email,address:{city:ua?ua.billingCity:"",country:ua?ua.billingCountry:"",line1:ua?ua.billingStreet:"",postal_code:ua?ua.billingZipCode:"",state:ua?ua.billingState:""}}}).then(function(da){console.info("payment 0...",da.error);
if(da.error)G(da);else{var qa=da.source;network.request({path:Da,dashboard:va,type:"createSource",token:qa.id,billingContact:oa}).done(function(xa){console.info("payment 6...");if(400==xa.code){ya();xa=xa.errorMsg;var wa='<p class="mdc-typography--body2">Please verify your card information and try again.</p>';"Your card was declined. Reason: do not honor."===xa&&(wa='<p class="mdc-typography--body2">\n\t\t\t\t\t\t\t\t\t\t\t\t\tAccording to our payment provider Stripe your card has been declined with the "do not honor" reason by your bank.<br>\n\t\t\t\t\t\t\t\t\t\t\t\t\tSince our company is based in Germany your bank might be blocking the payment as it is an international one.<br> \n\t\t\t\t\t\t\t\t\t\t\t\t\tPlease contact your card issuer for more information and ask them to allow the payment to proceed with the next attempt.\n\t\t\t\t\t\t\t\t\t\t\t\t</p>');
showPopPopup("Payment Error",'<section class="block--mdc-typography">\n\t\t\t\t\t\t\t\t\t\t\t\t<p class="mdc-typography--body2">Payment issue: '+xa+"</p>\n\t\t\t\t\t\t\t\t\t\t\t\t"+wa+'\n\t\t\t\t\t\t\t\t\t\t\t\t<p class="mdc-typography--body2"> \n\t\t\t\t\t\t\t\t\t\t\t\t\tYou can also contact <a class="href" href="mailto:info@keepa.com">info@keepa.com</a> for help \n\t\t\t\t\t\t\t\t\t\t\t\t\tor check out our <a class="href" href="https://discuss.keepa.com/t/faq-payments-premium-access/7819">FAQ - Payments premium access</a>.\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t</section>',
!0);$("#checkoutForm").show()}else na.resolve(qa)}).fail(function(xa){console.info("payment 6e...");na.reject(la._error)})}})};null!=X?aa():(ma=showPopup("Enter Credit Card Information",'<div id="loadingIconPopup"></div><div style="width:600px" ><div id="formContent"></div></div>',!0),ma.promise.fail(function(){na.reject("Process aborted. Please try again.")}),na.always(ma.close),$("#popupTitle").parent().css({background:"#ececed"}),W(),ta(Ha).done(function(){ya();$("#formContent").html(za(ua));X=
O.elements().create("card",{style:{base:{iconColor:"#666EE8",color:"#000",lineHeight:"40px",fontWeight:300,fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSize:"15px","::placeholder":{color:"#acb4bd"}}},hidePostalCode:!0});X.mount("#card-element");X.on("change",function(da){G(da)});$("#cardForm form").on("submit",function(da){da.preventDefault();oa=$("#formContent").find("#frmNameS").val();$("#formContent").find("#frmZipS").val();W();aa();return!1})}));return na},loadStripe:ta}}(),ca=function(){var ma=
"",na=0,W;for(W in a.PayedService){var ya=a.PayedService[W];if("API"==ya.type&&ya.variant.endsWith("_"))0==na&&(a.PayedServiceTypes.API.pricePerRequest=a.PayedServiceVariants[ya.variant].price/a.PayedServiceVariants[ya.variant].variant),na++,ma+=H(W,a.PayedServiceVariants[ya.variant],a.PayedServiceTypes.API);else if("KEYWORDS"==ya.type||"NEW_ASIN_FEED"==ya.type)na++,ma+=L(W,a.PayedServiceVariants[ya.variant],a.PayedServiceTypes[ya.type])}if(W=!!b&&0<b.length||!!d&&0<d.length){storage.hasAPI||(storage.hasAPI=
1,settings.send());var Aa="ends";for(ya=0;ya<d.length;ya++){var Da=d[ya];if(0==Da.paymentCancelledDate&&!Da.cancel_at_period_end){Aa="will be renewed";break}}Aa=null==n||0==n[1]?"":" and "+Aa+" on "+(new Date(n[1])).formatDate("M j, Y %a%t G:i");ya=Date.now();Da=!1;if(null!=b)for(var va=0;va<b.length;va++){var za=b[va];if(!(-1===za.payedService.indexOf("API")||0===za.paymentReceivedDate||0<za.paymentCancelledDate||za.subscriptionStart>ya)){if(za.subscriptionStart+za.subscriptionDuration<ya){if(za.cancel_at_period_end)continue;
if(za.subscriptionStart+za.subscriptionDuration+3456E5<ya)continue}Da=!0}}ya=null!=g&&g.hasActiveSubscription&&!Da;Aa='<div>\n\t\t\t\t\tYour active subscription level generates <span class="black">'+(null==n?0:n[0])+"</span>\n\t\t\t\t\t"+a.PayedServiceTypes.API.variantDescription+Aa+(ya?' (<a href="#!settings/1">Data subscription</a>)':"")+".<br>\n\t\t\t\t\tYou can increase your token rate by "+(ya?'<a class="trigger-tab" data-tab="3">adding an API subscription</a>':"upgrading your subscription")+
".\n\t\t\t\t</div>\n\t\t\t";if(64==t.length){Aa+='<br><div>Private API access key:&emsp;<div style="display:inline-block;" class="darkgrey">'+t+'</div><i id="tokenDelete" title="invalidate the current key and generate new one" class="fa fa-refresh tomato "></i></div>';Aa+='<div>Currently available tokens:&emsp;<span class="darkgrey">'+h+"</span>";Aa+='&emsp;&emsp;&emsp;Current token flow reduction:&emsp;<span class="darkgrey">'+Math.round(m)+"&ensp;("+m.toFixed(4)+")</span></div>";Aa+='<br><div style="display: flex;align-items: center;">Notification webhook endpoint:&emsp;<input maxlength="2000" style="width: 300px;display: inline-block;margin-top: -1px;" id="webhookInput" class="inputDefault" '+
(userData.apiWebhook?'value="'+userData.apiWebhook+'"':"")+' placeholder="http://..."><span id="saveWebHook" class="href" style="margin-left:16px" title="Save"><i class="fa fa-floppy-o" style="font-size: 15px;"></i></span><span id="testWebHook" class="href" style="margin-left:12px" title="Send test notification"><i class="fa fa-exchange fa-lg" style="font-size: 15px;"></i></span></div>';if(null!=d&&0<d.length){ya='<br><br><div>Active subscriptions:</div>\n\t\t\t\t\t\t<div id="activeSubscriptions" style="width:600px;" class="borderTopGreen">';
for(Da=0;Da<d.length;Da++)if(va=d[Da],za=a.PayedService[va.payedService],null==za&&"API_Access_1"==va.payedService&&(za={API_Access_1:{type:"API",variant:"API_1"}}),0==va.paymentCancelledDate&&null!=za){T=!0;za="";if(va.cancel_at_period_end)za="<span>This subscription is cancelled and will not incur any new charges.</span>";else if(null!=r&&0<r.length)for(var Ha=0;Ha<r.length;Ha++){var ea=r[Ha];if(ea.subscription.id==va.subscriptionId){za=Money.format(ea.amountDue,{sourceDomainId:3,targetDomainId:3,
forceEuropeanStyle:!0});Ha="";showReferencePrice(3)&&(Ha=' <span class="price__reference">(~ '+Money.format(ea.amountDue,{sourceDomainId:3})+")</span>");za='<div>\n\t\t\t\t\t\t\t\t\t\t\t<span style="color:black">Upcoming invoice:&ensp;</span>\n\t\t\t\t\t\t\t\t\t\t\t<span>'+za+Ha+" on "+(new Date(1E3*Number(ea.nextPaymentAttempt))).formatDate("M j, Y %a%t G:i")+".</span>\n\t\t\t\t\t\t\t\t\t\t</div>";break}}ea=Money.format(va.net,{sourceDomainId:3,targetDomainId:3,forceEuropeanStyle:!0,noDigits:!0});
Ha=0==va.includedTax?"":Money.format(va.includedTax,{sourceDomainId:3,targetDomainId:3,forceEuropeanStyle:!0});Ha=0==va.includedTax?"":" (+ "+Ha+" VAT)";var ia="";showReferencePrice(3)&&(ia=0==va.includedTax?"":" (+ ~"+Money.format(va.includedTax,{sourceDomainId:3})+" VAT)",ia='<br><span class="price__reference">(~ '+Money.format(va.net,{sourceDomainId:3})+" / month"+ia+")</span>");ya+='<div style="align-items:center;justify-content:space-between;" class="subscriptionBox borderLeft flex">\n\t\t\t\t\t\t\t\t<div style="padding-right:10px;">\n\t\t\t\t\t\t\t\t\t<span style="color:black;font-size:14px;">'+
va.productName+"</span>\n\t\t\t\t\t\t\t\t\t<br>"+ea+" / month"+Ha+"&ensp;-&ensp;subscribed since: "+(new Date(va.createDate)).formatDate("M j, Y")+ia+"\n\t\t\t\t\t\t\t\t\t<br>"+za+'\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div id="'+va.subscriptionId+'">\n\t\t\t\t\t\t\t';za=!1;if(null!=q)for(ea=0;ea<q.length;ea++)if(q[ea].subscription.id==va.subscriptionId){za=!0;break}0<va.paymentReceivedDate&!za?(za=(new Date(va.subscriptionStart+va.subscriptionDuration)).formatDate("M j"),ea='<i class="editSubscription fa fa-pencil fa-lg darkgrey" title="edit subscription"></i>&emsp;',
"undefined"==typeof a.PayedService[va.payedService]&&(ea=""),ya+=va.cancel_at_period_end?'<i data-end="'+za+'" class="canceledSubscription fa fa-calendar-times-o red" title="subscription is cancelled and will terminate on '+za+'"></i>':ea+'<i data-end="'+za+'" class="cancelSubscription fa fa-trash fa-lg red " title="cancel subscription"></i>',va.cancel_at_period_end&&(ya+='&emsp;<i class="fa fa-fw fa-repeat href resumeSub"  title="resume subscription" rel="'+va.subscriptionId+'"></i>')):ya=18E4<Date.now()-
va.createDate?ya+'<div id="retryPayment" style="cursor:pointer;font-weight:bold;"><span style="color:tomato;">Payment failed.<br><span>Try again now <i class="fa fa-repeat" style="margin-left:7px;"></i></span></span></div>':ya+'<span class="black">Payment Pending</span>';ya+="</div></div>"}Da=null!=g&&!g.hasOnlyAPISubscription;va="";null!=g&&g.hasActiveSubscription&&g.hasAPISubscription&&(va='<p class="mdc-typography--body2" style=""><br><span style="color:#3cb371;font-weight:bold;">\n\t\t\t\t\t\t\tYou have automatically been granted access to our <a class=\'href\' href=\'#!data\'>Data</a> features via your currently active API subscription.</span>\n\t\t\t\t\t\t\t'+
(Da?'<span style="font-size: smaller;"> Unless you are making use of the extra 5 tokens/min and daily quota you can cancel your separate Data Access subscription.</span>':"")+"\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t"+(Da?'<p class="mdc-typography--body2" style="font-weight: bold;"><br>\n\t\t\t\t\t\t\t<a href="#!settings/1" class="href"><i class="fa fa-long-arrow-right"></i> Manage your Data Access subscription&ensp;<i class="fa fa-external-link"></i></a>\n\t\t\t\t\t\t</p>':""));T&&(Aa+=ya+va+"</div>")}Aa=
Aa+"<br>"+createCreditCard(D||u)}ya=F&&0>F?'<div><span style="color:#000">Your current account balance:&emsp;<i class="fa fa-fw fa-money"></i> \n'+Money.format(-1*F,{sourceDomainId:3,targetDomainId:3,noDigits:!1,forceEuropeanStyle:!0})+"</span>&ensp;(will be applied to future invoices)</div>":"";Aa+=ya;ya='<br><hr style="border-color:mediumSeaGreen !important"><div>Receipts:</div><br><table class="paymentTable"><tr><th>Date</th><th>Total</th><th>Price Plan</th><th>Start Date</th><th>End Date</th><th>Payment Method</th><th>Type</th><th>Invoice</th><th>Status</th></tr>';
if(null!=b)for(Da=b.length-1;0<=Da;Da--){va=b[Da];za=0==va.subscriptionStart?"-":(new Date(va.subscriptionStart)).formatDate("M j, Y");ea=0==va.subscriptionStart?"-":(new Date(va.subscriptionStart+va.subscriptionDuration)).formatDate("M j, Y");Ha=Money.format(va.totalBill,{sourceDomainId:3,targetDomainId:3,forceEuropeanStyle:!0});ia="";showReferencePrice(3)&&(ia=' <span class="price__reference">(~ '+Money.format(va.totalBill,{sourceDomainId:3})+")</span>");var ua=va.totalBill-va.creditApplied;ya+=
"<tr>\n\t\t\t\t\t\t\t<td>"+(new Date(va.createDate)).formatDate("M j, Y")+"</td> \n\t\t\t\t\t\t\t<td>"+Ha+ia+"</td> \n\t\t\t\t\t\t\t<td>"+((1<va.quantity?va.quantity+"x ":"")+va.payedService.replaceAll("_"," "))+"</td>\n\t\t\t\t\t\t\t<td>"+za+"</td>\n\t\t\t\t\t\t\t<td>"+ea+"</td>\n\t\t\t\t\t\t\t<td>"+(0>ua?"Credit":0==va.totalBill?"-":va.paymentProvider)+"</td>\n\t\t\t\t\t\t\t<td>"+(va.isUpgrade?"Upgrade":"Regular")+"</td>\n\t\t\t\t\t\t\t<td>"+(0>ua||0==ua&&0==va.creditApplied?" - ":'<a download class="darkgrey" href="'+
ajaxURL+"api/service/?user="+storage.token+"&type=getInvoicePDF&billId="+va.billId+'"><i class="fa fa-file-pdf-o"></i> Download</a>')+"</td>\n\t\t\t\t\t\t\t<td>"+(0>ua?'<span style="color: #999;font-style: italic;">-</span>':0==va.totalBill?'<span style="color: #999;font-style: italic;">free</span>':0==ua?'<span style="color: #999;font-style: italic;">paid with credit</span>':0<va.paymentReceivedDate&&0<va.paymentCancelledDate?'<span style="color:#2196F3">Refunded ('+(new Date(va.paymentCancelledDate)).formatDate("M j")+
")</span>":0!=va.paymentReceivedDate?'<span class="green">Payment Received</span>':0!=va.paymentCancelledDate?'<span class="red">Cancelled ('+(new Date(va.paymentCancelledDate)).formatDate("M j")+")</span>":'Pending - <a class="black cancelOrder" rel="'+va.billId+'">Cancel order</a>')+"</td>\n\t\t\t\t\t\t</tr>"}Aa+=ya+"</table>"}E=1;if(!isTest){var fa=function(G,X){X=X.replace("/","_");if(G){for(var aa=G.topic_list.topics.length,da={},qa=0;qa<aa;qa++)da[G.topic_list.topics[qa].title]=G.topic_list.topics[qa];
G="";aa=Object.keys(da).sort();for(qa=0;qa<aa.length;qa++){var xa=da[aa[qa]];52!=xa.id&&111!=xa.id&&112!=xa.id&&(G+='<div><a href="'+(discourseBaseUrl+"/t/"+xa.slug+"/"+xa.id)+'"><span>'+xa.title+"</span></a></div>")}replaceHtml(X,G)}};discourseApi.category("api/none",function(G){fa(G,"api/none")});discourseApi.category("api/apirequests",function(G){fa(G,"api/apirequests")});discourseApi.category("api/apiobjects",function(G){fa(G,"api/apiobjects")})}W=material.getTabs({tabs:[W?{tab:{icon:"address-card",
label:"Your Access"},panel:{id:"paymentStatus",content:Aa},isActive:W}:null,{tab:{icon:"star-o",label:"API Features"},panel:{id:"apiFeatures",content:'<div>Get access to our price history data of Amazon products with our API (application programming interface). It offers:</div><br><ul style="list-style: none;line-height:19px;text-indent:-1.8em;padding-left: 1.8em;"><li>&#x271C;&emsp;Over <a href="#!features">3 billion tracked products</a></li><li>&#x271C;&emsp;Live pricing and availability</li><li>&#x271C;&emsp;Price history data for almost all offer types: Amazon, Marketplace New and Used, Warehouse Deals, FBA, FBM, Collectibles and Refurbished, eBay - and many more.</li><li>&#x271C;&emsp;Sales Rank, Offers count, Rating and Review count history. </li><li>&#x271C;&emsp;Complete access to all marketplace offers</li><li>&#x271C;&emsp;Customizable price history graph images</li><li>&#x271C;&emsp;Extensive Buy Box information including price and seller history</li><li>&#x271C;&emsp;Category details, searches and browsing</li><li>&#x271C;&emsp;Product Finder: Search our entire database for products matching any criteria</li><li>&#x271C;&emsp;Best sellers lists containing up to 500k ASINs.</li><li>&#x271C;&emsp;Third party sellers metrics, including rating and rating count history, top seller lists, and storefront access with up to 100k ASINs.</li><li>&#x271C;&emsp;Find millions of deals that match your criteria with complete access to our Deals with search, filter and sorting capability. </li><li>&#x271C;&emsp;Easy use: Request data in JSON format via RESTful API, TLS encrypted.</li><li>&#x271C;&emsp;Ready to use <a target="_blank" href="https://packagist.org/packages/keepa/php_api">PHP</a>  and <a target="_blank" href="https://github.com/keepacom/api_backend">Java framework</a> for fast integration</li><li>&#x271C;&emsp;English and German support via <a href="#!discuss/c/api/apisupport">forum</a> and <a target="_blank" href="mailto:info@keepa.com?subject=Keepa API">email</a></li></ul><div style="margin-top:25px;text-align: center;"><a target="_blank" href="mailto:info@keepa.com?subject=Questions about Keepa API" title="info@keepa.com">Have Questions? Contact us.</a>&emsp;<a rel="terms">Terms and Conditions</a></div>'},
isActive:!W},{tab:{icon:"book",label:"Documentation"},panel:{id:"documentations",content:'<div><div id="discussAPI"><div class="black">General Information</div><div id="api_none"></div><br><div class="black">Available Requests</div><div id="api_apirequests"></div><br><div class="black">Response JSON Objects</div><div id="api_apiobjects"></div></div></div>'}},{tab:{icon:"shopping-cart",label:"Pricing Plans"},panel:{id:"pricingPlans",content:'<span>All plans are prepaid for 1 month with a subscription model. A subscription can be cancelled at any time. Multiple plans can be active on the same account and an upgrade is possible at any time, a downgrade once per month. The plans differentiate by the number of tokens generated per minute. For example: With a single token you can retrieve the complete data set for one product. Unused tokens expire after one hour. You can find more information on how our plans work <a href="https://keeepa.amztoolz.com/#!discuss/t/how-our-api-plans-work/">in our documentation</a>.</span><br>'+
(null!=n&&5<n[0]?'<br><div style="color: #fff;background: #ec553a;padding: 10px;border-radius: 10px;font-size: 15px;">The new subscription <strong>will be added to your existing subscription level.</strong> If you want to upgrade an existing subscription instead you can do so at "Your Access" via the pencil icon next to an existing subscription.</div>':"")+'<br><div id="apiOffers"></div><div style="margin-top:25px;text-align: center;"><a target="_blank" href="mailto:info@keepa.com?subject=Questions about Keepa API" title="info@keepa.com">Have Questions? Contact us.</a>&emsp;<a rel="terms">Terms and Conditions</a></div><div style="font-size:smaller;text-align: center;margin-top: 15px;">Our API is only available to users that have registered a Keepa account.<br></div>'}}],
panelsClass:"appsContent"})+'<div id="pricingPlansUpdate" class="appsContent"></div>';insertPage('<span class="paper" style="min-width: 900px;"><div id="GCBTab1">'+W+'</div><div  class="appsContent" style="padding: 20px;display: none"><div id="backButton">&larr; Back</div><div id="GCBTab2"></div><div id="GCBTab3"></div><div id="GCBTab4"></div></div></span><div class="unselectable" style="line-height:50px;">&nbsp;</div>');var oa=tabSwitcher();/[0-9]/.test(lastSubUrl)&&(0<lastSubUrl&&3>=lastSubUrl?
(W=0==storage.accountType||"undefined"===typeof storage.hasAPI?lastSubUrl-1:lastSubUrl,oa.activeTabIndex=W,oa.updatePanel(W)):document.location.hash="#!api");$(".trigger-tab").on("click",function(){var G=Number($(this).data("tab"));oa.activeTabIndex=G;oa.updatePanel(G)});B();$("#apiOffers").html(ma);$(".editSubscription, .editCard, #saveWebHook, #testWebHook, .resumeSub").colorTip({color:"darkgrey"});$("#tokenDelete, .cancelSubscription, .canceledSubscription").colorTip({color:"red"});$(".editSubscription").on("click",
function(){var G=$(this).parent().attr("id");if(null==G)reportBug(null,"not found subscriptionId");else{for(var X=null,aa=0;aa<d.length;aa++){var da=d[aa];if(da.subscriptionId==G){X=da;break}}if(null==X)reportBug(null,"not found subscription");else{aa=!1;"API"==a.PayedService[X.payedService].type&&(aa=!0);var qa=showPopup("Edit subscription","You can update your invoice address for this subscription "+(aa?"or change the subscribed plan. An updated plan will be effective immediately and the subscription fee will be prorated.":
"")+'<br><br><span class="button" id="editBilling"><i class="fa fa-book" ></i>&ensp;Update invoice address&ensp;</span>&emsp;'+(aa?'<span class="button" id="editSub"><i class="fa fa-plus-circle" ></i>&ensp;Upgrade / Downgrade subscription&ensp;</span>':""),!0);$("#editBilling").on("click",function(){var xa=function(){$("#priceApiForm").show();$("#sendUpdatedBilling").show();$("#loadingIconPopup").hide()};replaceHtml("popupMessage",A(X)+'<span class="button" id="sendUpdatedBilling">&ensp;Save&ensp;</span>');
$("#sendUpdatedBilling").on("click",function(){var wa={};if(K(wa)){$("#priceApiForm").hide();$("#sendUpdatedBilling").hide();$("#loadingIconPopup").show();var Ca={billingContact:wa["billing-name"],billingStreet:wa["billing-address"],billingCity:wa["billing-city"],billingZipCode:wa["billing-zip"],billingState:wa["billing-state"],billingCountry:wa["billing-country"],billingVatId:wa["billing-vatId"].replace(/[-,;_:#. ]/g,""),billingBusiness:wa["billing-business"]};wa=$("#priceApiForm").find("#frmCountryS").find(":selected");
var Ba=$("#vatIdErrors");wa={paymentIntentRequest:Ca,countryCode:$(wa).data("code"),isEu:"1"===$(wa).attr("rel")};isTest&&console.info("%csend validateData:","color:orange",wa);priceDataAPI.validateVatIdPromise(wa).done(function(Fa){isTest&&console.info("%cvalidationPromiseResult:","color:orange",Fa);null==Fa||!0!==Fa.success?(xa(),priceDataAPI.handleValidateVatIdError(Fa,$("#vatIdErrors"))):!0===Fa.valid&&0===Fa.invalidFields.length?(Ba.html(""),Ba.hide(),isTest&&(!0===Fa.validationNeeded?console.info("%cVatId:",
"color:green","everything is valid - proceed ..."):console.info("%cVatId:","color:green","no validation needed - proceed ...")),network.request({path:"service/stripe",type:"editAddressSubscription",content:JSON.stringify(Ca),subscriptionId:G,dashboard:"api"}).done(function(Ea){qa.close();N()}).fail(function(){qa.close();setTimeout(function(){showErrorPopup()},500)})):(xa(),Ba.html(Fa.msg),Ba.show())}).fail(function(Fa){priceDataAPI.handleValidateVatIdError(Fa,Ba);xa()})}})});$("#editSub").on("click",
function(){if(storage.email&&-1!=storage.email.indexOf("@")&&settings.isEmailVerified){var xa="";$(".panels.appsContent").hide();$(".dynamic-toolbar").hide();setTimeout(function(){$("#pricingPlansUpdate").attr("style","").fadeIn(250).attr("rel","active")},100);qa.close();var wa=24192E5>Date.now()-Q,Ca=!1,Ba=Number(a.PayedServiceVariants[a.PayedService[X.payedService].variant].variant),Fa;for(Fa in a.PayedService){var Ea=a.PayedService[Fa];if("API"==Ea.type&&Ea.variant.endsWith("_")){var La=Number(a.PayedServiceVariants[Ea.variant].variant);
33!=na||a.PayedServiceTypes.API.pricePerRequest||(a.PayedServiceTypes.API.pricePerRequest=a.PayedServiceVariants[Ea.variant].price/La);na++;if(La==Ba&&Ca)xa+='<br><div style="text-align: center;width: 775px;">\u2191&emsp;Downgrade&emsp;\u2191<br>\u2193&emsp;Upgrade&emsp;\u2193</div><br>';else{var Ma=La<=Ba;wa&&Ma||(Ma&&(Ca=!0),La!=Ba&&(xa+=H(Fa,a.PayedServiceVariants[Ea.variant],a.PayedServiceTypes.API)))}}}Ca="";wa&&(Ca="<br><div>You can only downgrade once per 30 days. You can not downgrade again.</div>");
replaceHtml("pricingPlansUpdate","<div>Choose the new plan:</div><br>"+xa+Ca);sa();$(".gcContainer").on("click",function(){var Ga=$(this).attr("rel");if(Ga){var Na=a.PayedService[Ga];replaceHtml("pricingPlansUpdate",'<div id="loadingIconPopup"></div>');$("#loadingIconPopup").show();network.request({path:"service/stripe",type:"upcomingInvoice",subscriptionId:G,subscriptionPlan:Ga,dashboard:"api"}).done(function(Qa){var Ka=Qa.invoices;if(null==Ka||0==Ka[0].length||null==Ka[0])showErrorPopup();else{Ka=
Ka[0];for(var Ia=Qa=0,Oa="",Sa="",Za=0;Za<Ka.lines.data.length;Za++){var Wa=Ka.lines.data[Za];Wa.subscription==G&&(0>Wa.amount?(Oa=Wa.description,Qa=-1*Wa.amount):(Sa=Wa.description,Ia=Wa.amount))}Ka=H(Ga,a.PayedServiceVariants[Na.variant],a.PayedServiceTypes.API);var Ra=-Qa+Ia;Za=Money.format(a.PayedServiceVariants[Na.variant].price,{sourceDomainId:3,targetDomainId:3,noDigits:!0,forceEuropeanStyle:!0});Wa=Money.format(Qa,{sourceDomainId:3,targetDomainId:3,forceEuropeanStyle:!0});var Ja=Money.format(Ia,
{sourceDomainId:3,targetDomainId:3,forceEuropeanStyle:!0});Ra=Money.format(Ra,{sourceDomainId:3,targetDomainId:3,forceEuropeanStyle:!0});replaceHtml("pricingPlansUpdate","<div>Your new plan:</div><br>"+Ka+('<div><span style="margin-left: 30px;">You are about to change your current subscription.</span><span><ul style="line-height: 20px; color: #000; margin: 20px 20px 20px 50px;text-indent: -1.4em;"><li>&bull;&emsp;The new plan will replace your old one immediately after we have received payment.</li><li>&bull;&emsp;You can upgrade your plan as often as you want, but a downgrade is only possible once per month.</li><li>&bull;&emsp;Refund: '+
Wa+" - "+Oa+"</li><li>&bull;&emsp;Prorated charge: "+Ja+" - "+Sa+"</li>"+(Qa>Ia?"<li>&bull;&emsp;You will receive a credit in your account of: "+Ra+". This credit will be applied to future billing cycles.</li>":"<li>&bull;&emsp;Immediate amount due: "+Ra+"</li>")+"<li>&bull;&emsp;New monthly subscription cost: "+Za+'</li></ul></span></div><div style="padding: 10px 0px 0 80px;"  class="flex"><span id="gcPay" style="width: 300px; display: inline-block;"><span style="font-size: 20px;">Yes,</span><br><span style="padding-left: 20px; display: inline-block;">I want to <span id="purchaseText">update my subscription</span>.')+
((Qa>Ia?"":" Your credit card will be charged immediately with "+Ra+".")+' I have read, understood and accept the <a style="cursor: alias !important;" rel="terms">Terms and Conditions</a>.</span></span><span id="gcAbort" style="width: 300px; display: inline-block; margin-left: 30px;"><span style="font-size: 20px;">Abort,</span><br><span style="padding-left: 20px; display: inline-block;">I need to change something.</span></span></div>'));$("#pricingPlansUpdate").find(".gcContainer").css("cursor","default");
$("#pricingPlansUpdate #gcAbort").off("click").on("click",function(){N()});var Xa=!1;$("#pricingPlansUpdate #gcPay").off("click").on("click",function(){null!=G&&9<G.length?Xa||(Xa=!0,X.payedService=Ga,function(Ya){replaceHtml("pricingPlansUpdate",'<div id="loadingIcon"></div>');$("#loadingIcon").show();network.request({path:"service/stripe",type:"subscription",content:JSON.stringify(X),subscriptionId:G,dashboard:"api"}).done(function(Ta){console.info("payment 9g...");var Pa=function(ab){var Va=material.getButton("closePopup",
"Attempt payment again","credit-card",null,!1,!1),bb='<section><span class"tomato">Your credit card could not be charged. '+(null!=ab.errorMsg?ab.errorMsg:"")+"</span></section>";300<=ab.code&&(bb=405==ab.code?'<div><span class"tomato">The coupon code you have entered is not valid.</span></div>':'<div><span class"tomato">'+(ab.errorMsg?ab.errorMsg:"")+" Your order was aborted and your credit card could not be charged. Please repeat the process with a valid credit card. We accept Visa, MasterCard and American Express.</span></div>");
replaceHtml("pricingPlansUpdate",bb+"<br><div>"+Va+"</div>");$("#closePopup").on("click",function(cb){cb.preventDefault();null!=ab.url?(window.open(ab.url),priceDataAPI.init()):ka()})},Ua=function(){replaceHtml("pricingPlansUpdate",'<div>Thank you for your purchase!<br><br>Once we have processed the payment your API access will be updated. <strong>This will take a couple minutes!</strong></div><br><br><span class="button" id="openDash">Open your dashboard</span>');$("#openDash").off("click").on("click",
function(ab){priceDataAPI.init()})};if(300<=Ta.code||null!=Ta.errorMsg)Pa(Ta);else{if(null==Ta.paymentIntent)Ua();else switch(Ta.paymentIntent.status){case "succeeded":Ua();break;case "requires_payment_method":Pa(Ta);break;case "requires_action":console.info("payment 10...",Ta),priceDataAPI.loadStripe("pk_live_d8cHyZoVVZdRXDvnxSmuoQTM").done(function(ab){console.info("payment 11...");ab.handleCardPayment(Ta.paymentIntent.clientSecret).then(function(Va){console.info("payment 12...",Va);Va.error?(Ta.errorMsg=
Va.error.message,Pa(Ta)):Ua()})}).fail(function(){showErrorPopup()})}Xa=!1}}).fail(function(){showErrorPopup();Xa=!1})}(null),Xa=!1):showErrorPopup()})}}).fail(function(){qa.close();setTimeout(function(){showErrorPopup()},500)})}})}else replaceHtml("popupMessage","<div>"+la._428+"</div>")})}}});$("#testWebHook").on("click",function(){network.request({path:"service/stripe",type:"testWebhook",webhookUrl:$("#webhookInput").val(),dashboard:"api"}).done(function(G){-1==G.code?showPopup("Webhook test",
"You did not specify a valid URL. Please check your input.",!0):showPopup("Webhook test","The server response status code to our test payload was:&emsp;<strong>"+G.code+"</strong><br><br>Note: Only the status code 200 will be interpreted as a success.",!0)}).fail(showErrorPopup)});$("#saveWebHook").on("click",function(){network.request({path:"service/stripe",type:"updateWebhook",webhookUrl:$("#webhookInput").val(),dashboard:"api"}).done(function(G){-1==G.code?showPopup("Webhook test","You did not specify a valid URL. Please check your input.",
!0):showPopup("Webhook URL updated!","Your webhook URL was successfully updated.",!0)}).fail(showErrorPopup)});$(".resumeSub").on("click",function(G){var X=$(this).attr("rel");G=material.getButton("resumeSubscription","Resume Subscription","repeat",null,!1,!1);var aa=showPopup("Resume subscription","<div>This will remove your cancellation and continue automatic renewals of your subscription.</div><br><br>"+G,!0);$("#resumeSubscription").on("click",function(){aa.close();network.request({path:"service/stripe",
type:"resumeSubscription",subscriptionId:X,dashboard:"api"}).done(function(){N()}).fail(V)})});$(".cancelSubscription").on("click",function(){var G=$(this),X=G.parent().attr("id");if(null!=X){var aa=showPopup("Cancel subscription","If you cancel your subscription it will end on "+G.data("end")+' (you will not be refunded any pro-rated amount) and will not be renewed. Do you want to continue?<br><br><span class="button" id="cancelSub">&ensp;Yes, cancel subscription&ensp;</span>',!0);$("#cancelSub").on("click",
function(){aa.close();network.request({path:"service/stripe",type:"cancelSubscription",subscriptionId:X,dashboard:"api"}).done(function(da){N()}).fail(function(){setTimeout(function(){showErrorPopup()},500)})})}});$("#editCC, #addCC").on("click",C);$("#removeCC").on("click",function(){var G=showPopup("Delete Credit Card",'This will delete your attached credit card. Your subscription will terminate unless you provide a new payment method before the end of your billing cycle. Do you want to continue?<br><br><span class="button" id="deleteTokenConfirm">&ensp;Yes&ensp;</span>',
!0);$("#deleteTokenConfirm").on("click",function(){G.close();network.request({path:"service/stripe",type:"deleteSource",dashboard:"api"}).done(function(X){setTimeout(function(){showPopup("Payment method removed!","Your payment method was successfully deleted.",!0);N()},300)}).fail(function(X){setTimeout(function(){showPopup("Removal issue",X,!0)},300)})})});$("#tokenDelete").on("click",function(){var G=$(this),X=showPopup("Generate new API access key",'Your current key will be invalidated and all future requests with it will be denied. Do you want to continue?<br><br><span class="button" id="deleteTokenConfirm">&ensp;Yes&ensp;</span>',
!0);$("#deleteTokenConfirm").on("click",function(){X.close();network.request({path:"service/stripe",type:"deleteKey",dashboard:"api"}).done(function(aa){aa.key?(t=aa.key,G.prev().text(t)):setTimeout(function(){showErrorPopup()},500)}).fail(function(){setTimeout(function(){showErrorPopup()},500)})})});$(".cancelOrder").on("click",function(){var G=$(this);network.ajax(ajaxURL+"api/service/?user="+storage.token+"&type=cancelOrder&billId="+G.attr("rel")).done(N).fail(V)});$("#retryPayment").on("click",
function(){Z($(this).parent().attr("id"))});sa();$(".gcContainer").on("click",function(){var G=$(this).attr("rel");G&&I(G)})},sa=function(){$(".gcContainer").hover(function(){$(this).children(".gcValue").css({backgroundColor:"#666"});$(this).find(".gcPrice").css({color:"#fff"});$(this).children(".triangle").css({borderColor:"#9FC5B0 transparent #9FC5B0 #666"})},function(){$(this).children(".gcValue").css({backgroundColor:"#444"});$(this).find(".gcPrice").css({color:"#000"});$(this).children(".triangle").css({borderColor:"#9FC5B0 transparent #9FC5B0 #444"})})},
Z=function(ma){$("#paymentStatus").html('<div id="loadingIcon"></div>');$("#loadingIcon").show();var na=function(W){N();setTimeout(function(){showErrorPopup()},500)};network.request({path:"service/stripe",type:"getHostedInvoice",subscriptionId:ma,dashboard:"api"}).done(function(W){W.url&&0<W.url.length?window.location.href=W.url:na(W)}).fail(function(W){na(W)})},N=function(){network.request({path:"service/stripe",type:"countries",dashboard:"api"}).done(function(ma){Y=ma.countries;network.request({path:"service/stripe",
type:"offers",dashboard:"api"}).done(function(na){na.offers?(M=na.user,a=na.offers,na.payments?(b=na.payments.payments,Q=na.payments.lastDowngrade,d=na.payments.subscriptions,g=na.subscriptionStatus):b=Q=d=g=null,null==d&&(d=[]),n=na.paymentStatus,t=na.key,h=na.tokens,m=na.tokenFlowReduction,r=na.invoices,q=na.pendingInvoices,u=na.card,D=na.source,F=na.balance,ca()):showErrorPopup()}).fail(function(){showErrorPopup()})}).fail(function(){showErrorPopup()})},f=!1,C=function(){if(!f){f=!0;var ma=d[d.length-
1];pa.getAuthenticatedSource("pk_live_d8cHyZoVVZdRXDvnxSmuoQTM",r&&0<r.length?r[0].amountDue:ma.totalBill,!0,ma).done(function(na){setTimeout(function(){showPopup("Payment method updated!","Your payment method for future payments was successfully updated.",!0);N()},300)}).fail(function(na){setTimeout(function(){showPopup("Payment issue",na,!0)},300)}).always(function(){f=!1})}},V=function(){showErrorPopup()},ba=function(){if(null==b)return null;for(var ma=0;ma<b.length;ma++){var na=b[ma];if(0==na.paymentCancelledDate&&
0==na.paymentReceivedDate)return na}return null},w=0,O,z=!1,I=function(ma){pa.loadStripe("pk_live_d8cHyZoVVZdRXDvnxSmuoQTM");var na=$.Deferred();U(na.promise());network.request({path:"user/settings",type:"getSettings"}).done(function(W){if(2!=storage.accountType&&settings.isEmailVerified)na.resolve("Before you can continue you have to sign in.");else{var ya=W.ear;w=W.timeStamp;M=W.user;if(!M.emailAddress||-1==M.emailAddress.indexOf("@")||null!=ya&&"VERIFIED"!=EmailStatus[ya.status])na.resolve(la._428);
else{var Aa=a.PayedService[ma];if(null!=ba()){na.resolve("<div>You are not allowed not make a purchase while you have an unpaid order pending. Please issue the payment for your order first (if you have not already). You can also cancel the order.</div>");return}ya="API"==Aa.type?H(ma,a.PayedServiceVariants[Aa.variant],a.PayedServiceTypes.API):L(ma,a.PayedServiceVariants[Aa.variant],a.PayedServiceTypes[Aa.type]);var Da=a.PayedServiceVariants[Aa.variant].variant+" "+a.PayedServiceTypes.API.variantDescription,
va=Money.format(a.PayedServiceVariants[Aa.variant].price,{sourceDomainId:3,targetDomainId:3,noDigits:!0,forceEuropeanStyle:!0}).replace(/\.|,/g,""),za='<div><span style="margin-left: 30px;">You are about to purchase access to our API for '+a.PayedServiceTypes.API.subscriptionDurationDescription+" with "+Da+" for "+va+'.</span><span><ul style="line-height: 20px; color: #000; margin: 20px 20px 20px 50px;text-indent: -1.4em;"><li>&bull;&emsp;The API access will be activated on your Keepa account immediately after we have received the payment.</li><li>&bull;&emsp;Our price plans are subscription based. The plan will <span style="text-decoration: underline;">automatically renew</span> unless cancelled and all payments are non-refundable.</li><li>&bull;&emsp;Cancellation of the subscription is possible at any time and will end the subscription at the end of the monthly term.</li><li>&bull;&emsp;You can upgrade your API access any time by subscribing to additional plans or upgrading existing subscriptions.</li><li>&bull;&emsp;We accept credit cards through our payment provider Stripe. Contact us if you require other methods of payment.</li></ul></span></div>',
Ha='<span style="margin-left: 30px;">The plan will be applied to your current active Keepa account <div style="margin: 10px 0 10px 80px;"><span style="font-family: Verdana, Arial, sans-serif" id="accountEmail"><span style="color:#000">'+storage.username+'</span> with the email <span style="color:#000">'+storage.email+"</span></span></div></span>",ea=null;try{null!=d&&0<d.length?ea=d[d.length-1]:null!=b&&0<b.length&&(ea=b[b.length-1])}catch(oa){console.log(oa)}if("undefined"!=typeof b&&null!=b)for(var ia=
0;ia<b.length;ia++){var ua=b[ia];if(null!=ua&&"Paypal"==ua.paymentProvider&&!(55296E5<Date.now()-ua.createDate)){z=!0;break}}ea=A(ea);na.resolve(ya+za+Ha+ea+'<div  class="flex" style="padding: 10px 0px 0 80px;"><span id="gcProceed" style="width: 300px; display: inline-block;"><span style="font-size: 20px;">Proceed</span><br><span style="padding-left: 20px; display: inline-block;">You will be able to review your information.</span></span><span id="gcAbort" style="width: 300px; display: inline-block; margin-left: 30px;"><span style="font-size: 20px;">Return</span><br><span style="padding-left: 20px; display: inline-block;">I want to use a different price plan or change the account.</span></span></div>');
$("#GCBTab2").find(".gcContainer").css("cursor","default");$("#gcAbort").off("click").on("click",function(){ka()});var fa=function(){$("#priceApiForm").show();$("#loadingIconPopup").hide()};$("#gcProceed").off("click").on("click",function(){var oa={};if(K(oa)){$("#priceApiForm").hide();$("#loadingIconPopup").show();var G=$("#priceApiForm").find("#frmCountryS").find(":selected"),X=$("#vatIdErrors"),aa={paymentIntentRequest:{billingBusiness:oa["billing-business"],billingCity:oa["billing-city"],billingContact:oa["billing-name"],
billingState:oa["billing-state"],billingStreet:oa["billing-address"],billingVatId:oa["billing-vatId"].replace(/[-,;_:#. ]/g,""),billingZipCode:oa["billing-zip"]},countryCode:$(G).data("code"),isEu:"1"===$(G).attr("rel")};isTest&&console.info("%csend validateData:","color:orange",aa);priceDataAPI.validateVatIdPromise(aa).done(function(da){fa();isTest&&console.info("%cvalidationPromiseResult:","color:orange",da);if(null==da||!0!==da.success)priceDataAPI.handleValidateVatIdError(da,$("#vatIdErrors"));
else if(!0===da.valid&&0===da.invalidFields.length){X.html("");X.hide();isTest&&(!0===da.validationNeeded?console.info("%cVatId:","color:green","everything is valid - proceed ..."):console.info("%cVatId:","color:green","no validation needed - proceed ..."));var qa=Y[aa.countryCode];v(ma,Aa,Da,va,oa,oa["billing-business"]&&da.valid&&da.validationNeeded?qa.b2bRate:qa.b2cRate)}else X.html(da.msg),X.show()}).fail(function(da){priceDataAPI.handleValidateVatIdError(da,X);fa()})}})}handleSettingsRequest(W,
!0)}}).fail(function(W){401==W.status?(settings.reset(!1,!1),na.resolve("Before you can continue you have to sign in.")):na.resolve(la._error)})},K=function(ma){var na=!0;$("#priceApiForm").find("input, select").each(function(ya,Aa){"radio"!==$(Aa).attr("type")&&(ya=new RegExp(Aa.pattern),!$(Aa).attr("required")||null!=$(Aa).val()&&""!=$(Aa).val()&&"None"!=$(Aa).val()&&ya.test($(Aa).val())?(ma[$(Aa).attr("name")]=$(Aa).val(),$(Aa).css("border",""),ya="billing-country"!=$(Aa).attr("name")&&"billing-state"!=
$(Aa).attr("name")?"":"0px"):($(Aa).css("border","2px solid tomato"),ya="billing-country"==$(Aa).attr("name")||"billing-state"==$(Aa).attr("name")?"":"1px",na=!1),$(Aa).css("padding",ya))});var W=$("#priceApiForm").find("#frmCountryS").find(":selected");"US"!==$(W).data("code")&&(ma["billing-state"]="");ma["billing-business"]="business-radio"==$("#b2bRadio").find(":checked")[0].id;!0!==ma["billing-business"]&&(ma["billing-vatId"]="");"1"!==$(W).attr("rel")&&(ma["billing-vatId"]="");return na},A=function(ma){setTimeout(function(){var ya=
$("#b2bRadio"),Aa=$("#frmCountryS"),Da=function(){var va="business-radio"==ya.find(":checked")[0].id,za=va&&"1"==$(Aa.find(":selected")).attr("rel"),Ha=$("#frmVATS");za?Ha.parent().show(500):Ha.parent().hide(500);$("#frmNameS").prev("label").text(va?"Company":"Full name");$("#vatIdErrors").hide();va="US"==$(Aa.find(":selected")).data("code");za=$("#frmStateS");va?(za.prop("disabled",!1),za.prop("required",!0),za.css({opacity:1})):(za.val(""),za.prop("disabled",!0),za.prop("required",!1),za.css({opacity:.3}))};
[ya,Aa].map(function(va){return va.on("change",Da)});Da();null!=ma&&(null!=ma.billingContact&&0<ma.billingContact.length&&$("#frmNameS").val(ma.billingContact),null!=ma.billingStreet&&0<ma.billingStreet.length&&$("#frmAddressS").val(ma.billingStreet),null!=ma.billingCity&&0<ma.billingCity.length&&$("#frmCityS").val(ma.billingCity),null!=ma.billingState&&0<ma.billingState.length&&$("#frmStateS").val(ma.billingState),null!=ma.billingZipCode&&0<ma.billingZipCode.length&&$("#frmZipS").val(ma.billingZipCode),
null!=ma.billingCountry&&0<ma.billingCountry.length&&$("#frmCountryS").val(ma.billingCountry).trigger("change"),null!=ma.billingVatId&&0<ma.billingVatId.length&&$("#frmVATS").val(ma.billingVatId),!0===ma.billingBusiness&&($("#business-radio").prop("checked",!0),Da()))},1);var na=material.getRadio("individual","Individual",!0,"billing-country"),W=material.getRadio("business","Business",!1,"billing-country");return'<div id="priceApiForm" class="flex keepa">\n\t\t\t\tInvoice Address<br>\n\t\t\t\t<form>\n\t\t\t\t\t<section id="b2bRadio">'+
na+W+'</section>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<label for="frmNameS">Full name</label>\n\t\t\t\t\t\t<input name="billing-name" id="frmNameS" placeholder="Full name and/or Company" required pattern=".*\\S{3,}.*" autocomplete="billing name">\n\t\t\t\t\t</span>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<label for="frmAddressS">Address</label>\n\t\t\t\t\t\t<input name="billing-address" required id="frmAddressS" placeholder="123 Any Street" pattern=".*\\S{2,}.*" autocomplete="billing street-address">\n\t\t\t\t\t</span>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<label for="frmCityS">City</label>\n\t\t\t\t\t\t<input name="billing-city" required id="frmCityS" placeholder="New York" pattern=".*\\S{2,}.*" autocomplete="billing locality">\n\t\t\t\t\t</span>\n\t\t\t\t\t<section style="height:50px;"> </section>\n\t\t\t\t\t<span>\t\t\t\t\t\t\n\t\t\t\t\t\t'+
S()+'\n\t\t\t\t\t</span>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<label for="frmZipS">Zip</label>\n\t\t\t\t\t\t<input name="billing-zip" required id="frmZipS" placeholder="10011" pattern=".*\\S{2,}.*" autocomplete="billing postal-code">\n\t\t\t\t\t</span>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t'+J()+'\n\t\t\t\t\t</span>\t\t\t\t\n\t\t\t\t</form>\n\t\t\t\t<span style="display:none; padding: 0 11px;">\n\t\t\t\t\t<label for="frmVATS">VAT identification number</label>\n\t\t\t\t\t<input style="width: 420px;" name="billing-vatId" id="frmVATS" placeholder="Required for business customers in EU (eg: EU999999999)"></span>\n\t\t\t\t</span>\n\t\t\t\t<div id="vatIdErrors" style="display:none;padding:20px 10px;"></div>\n\t\t\t</div>\n\t\t\t<div style="width:400px;height:300px;" id="loadingIconPopup"></div>'},
J=function(){for(var ma="",na=[],W=[],ya="US GB DE FR JP CA CN IT ES IN MX BR AU".split(" "),Aa=$jscomp.makeIterator(ya),Da=Aa.next();!Da.done;Da=Aa.next())W.push(Y[Da.value]);for(var va in Y)na.push([Y[va].name,Y[va]]);na.sort(function(ea,ia){return ea[0].localeCompare(ia[0])});for(var za in na)W.push(na[za][1]);for(var Ha in W)na=W[Ha],ma+='<option rel="'+(na.isEU?1:0)+'" data-code="'+na.id+'" value="'+na.name+'">'+na.name+"</option>",Number(Ha)==ya.length-1&&(ma+="<option disabled>----------------</option>");
return'<label for="frmCountryS">Country</label>\n\t\t\t<select name="billing-country" required id="frmCountryS" autocomplete="billing country" style="width: 204px;padding: 1px;">\n\t\t\t\t<option value="None"></option>\n\t\t\t\t'+ma+"\n\t\t\t</select>"},S=function(){var ma=[];for(na in ja)ma.push(na);var na="";for(var W in ma){var ya=ma[W];na+='<option value="'+ya+'">'+ya+"</option>"}return'<label for="frmStateS">State</label>\n\t\t\t<select name="billing-state" required id="frmStateS" autocomplete="billing region" style="width: 204px;padding: 1px;">\n\t\t\t\t<option value=""></option>\n\t\t\t\t'+
na+"\n\t\t\t</select>"},v=function(ma,na,W,ya,Aa,Da){var va=$.Deferred();U(va.promise());var za="",Ha="";0<Da&&(za=" + "+Da+"% VAT",Ha='<div class="vatIdNotice">\n\t\t\t\t\t<i class="fa fa-info-circle"></i>&emsp;'+Da+"% VAT will be added (Reverse Charge not applicable).\n\t\t\t\t</div>");var ea='<div id="paymentMethods" class="flex">Your payment method<div id="paymentProviderRadio"><input checked type="radio" name="paymentProvider" value="CreditCard">Credit Card</input><br><br>If you can not pay via Credit Card we also accept payment through Paypal. Recurring payments are not supported via Paypal, so if you choose this payment option you will have to manually purchase a new API plan each month. <b>Your access is not subscription based if payed through Paypal.</b><br><input type="radio" name="paymentProvider" value="Paypal">Paypal</input></div></div>',
ia="";null!=n&&80352E5<n[2]-w&&(ia=" (We only allow price plan extension for a maximum of 3 months in advance)");ia=null!=n&&0!=n[0]?'<div id="planOptions" class="flex">If paid through Paypal: Do you want to upgrade your existing plan or extend your access?<div id="planOptionsRadio"><input type="radio" name="planOptions" value="true">Upgrade</input>&emsp;<input type="radio" name="planOptions" value="false"><span>Extend'+ia+'</span></input></div><span style="padding: 10px 0 0 10px;width: 700px;font-size: 12px;">If you choose "Extend" your new plan will start when your current ones end ('+
(new Date(n[2])).formatDate("M j, Y")+').<br>If you choose "Upgrade" your new plan will be active simultanousely as your current one (the allowed requests per minute will be added) and the plan duration and price will be adjusted to match the remaining term of your currently active plan (ends at '+(new Date(n[1])).formatDate("M j, Y")+").</span></div>":"";z||(ia=ea="");Ha='<div id="billingReview" class="flex keepa">Please review your '+$("#priceApiForm").html()+"</div>"+Ha;va.resolve(Ha+ea+ia+('<div style="padding: 10px 0px 0 80px;"  class="flex"><span id="gcPay" style="width: 300px; display: inline-block;"><span style="font-size: 20px;">Yes,</span><br><span style="padding-left: 20px; display: inline-block;">I want to <span id="purchaseText">purchase</span> '+
a.PayedServiceTypes.API.description+" with "+W+' for <span id="finalPrice">'+ya+za+'</span> and I have read, understood and accept the <a style="cursor: alias !important;" rel="terms">Terms and Conditions</a>.</span></span><span id="gcChangeAccount" style="width: 300px; display: inline-block; margin-left: 30px;"><span style="font-size: 20px;">Abort,</span><br><span style="padding-left: 20px; display: inline-block;">I need to change something.</span></span></div>'));$("#planOptions").hide();!0===Aa["billing-business"]&&
$("#billingReview #business-radio").attr("checked",!0);$("#billingReview").find("input, select").each(function(fa,oa){if("radio"===$(oa).attr("type"))$(oa).attr("disabled",!0);else{null!=$(oa).val()&&0!=$(oa).val().length||$(oa).attr("placeholder","");$(oa).val(Aa[$(oa).attr("name")]);$(oa).attr("readonly","");if("billing-country"==$(oa).attr("name")||"billing-state"==$(oa).attr("name"))fa=$(oa).val()?$(oa).val():"",$(oa).parent().append('<input readonly value="'+fa+'">'),$(oa).remove();"billing-vatId"==
$(oa).attr("name")&&$(oa).val($(oa).val().replace(/[-,;_:#. ]/g,""))}});$("#billingReview #vatIdErrors").remove();R=a.PayedServiceTypes.API.subscriptionDuration;$("#planOptionsRadio").off("click").on("click",function(fa){fa=$(fa.target).attr("value");var oa=a.PayedServiceVariants[na.variant].price,G=a.PayedServiceTypes.API.subscriptionDuration;switch(fa){case "true":R=n[1]-w;ha=R/G*oa;P=Money.format(ha,{sourceDomainId:3,targetDomainId:3,forceEuropeanStyle:!0});$("#finalPrice").text(P);$("#finalPrice").css("fontSize",
"16px");$("#finalPrice").effect("highlight",5E3);$("#purchaseText").text("upgrade my current");$("#paymentProviderRadio").children('input[value="BankTransfer"]').attr("disabled","").attr("title","Bank Transfer is not an option when upgrading you current plan.").prop("checked",!1);break;case "false":$("#paymentProviderRadio").children('input[value="BankTransfer"]').removeAttr("disabled").removeAttr("title"),R=a.PayedServiceTypes.API.subscriptionDuration,P=ya,$("#finalPrice").text(ya),$("#purchaseText").text("extend my"),
$("#finalPrice").css("fontSize","")}});$("#paymentProviderRadio").off("click").on("click",function(fa){"Paypal"==$("#paymentProviderRadio input[name=paymentProvider]:checked").val()?$("#planOptions").show("slideDown"):$("#planOptions").hide("slideUp")});null!=n&&80352E5<n[2]-w&&($("#planOptionsRadio").children('[value="true"]').trigger("click"),$("#planOptionsRadio").children('[value="false"]').attr("disabled","true"));var ua=!1;$("#gcPay").off("click").on("click",function(fa){if("terms"==$(fa.target).attr("rel"))return p(),
fa.stopImmediatePropagation(),!1;if(!ua){ua=!0;fa=$("#paymentProviderRadio input[name=paymentProvider]:checked").val();var oa=$("#planOptionsRadio input[name=planOptions]:checked").val();z||(fa="CreditCard");var G="CreditCard"==fa,X=!0;"undefined"==typeof fa?($("#paymentProviderRadio").css("color","tomato"),$("#paymentProviderRadio").effect("highlight",600),X=!1):$("#paymentProviderRadio").css("color","");G||null==n||0==n[0]||"undefined"!=typeof oa?$("#planOptionsRadio").css("color",""):($("#planOptionsRadio").css("color",
"tomato"),$("#planOptionsRadio").effect("highlight",600),X=!1);if(X){var aa={payedService:ma,paymentProvider:fa,billingContact:Aa["billing-name"],billingStreet:Aa["billing-address"],billingCity:Aa["billing-city"],billingZipCode:Aa["billing-zip"],billingState:Aa["billing-state"],billingCountry:Aa["billing-country"],billingBusiness:Aa["billing-business"],billingVatId:Aa["billing-vatId"].replace(/[-,;_:#. ]/g,"")};if(G){var da=function(){var xa=$("#billingReview").parent();xa.html('<div id="loadingIcon"></div>');
$("#loadingIcon").show();$("#backButton").hide();network.request({path:"service/stripe",type:"subscription",content:JSON.stringify(aa),dashboard:"api"}).done(function(wa){console.info("payment 9a...");var Ca=function(Fa){var Ea=material.getButton("closePopup","Attempt payment again","credit-card",null,!1,!1),La='<section><span class"tomato">Your credit card could not be charged. '+(null!=Fa.errorMsg?Fa.errorMsg:"")+"</span></section>";300<=Fa.code&&(La=405==Fa.code?'<div><span class"tomato">The coupon code you have entered is not valid.</span></div>':
'<div><span class"tomato">'+(Fa.errorMsg?Fa.errorMsg:"")+" Your order was aborted and your credit card could not be charged. Please repeat the process with a valid credit card. We accept Visa, MasterCard and American Express.</span></div>");xa.html(La+"<br><div>"+Ea+"</div>");$("#closePopup").on("click",function(Ma){Ma.preventDefault();null!=Fa.url?(window.open(Fa.url),priceDataAPI.init()):ka()})},Ba=function(){xa.html('<div>Thank you for your purchase!<br><br>Once we have processed the payment your API access will be activated.</div><br><br><span class="button" id="openDash">Open your dashboard</span>');
$("#openDash").off("click").on("click",function(Fa){priceDataAPI.init()})};if(300<=wa.code||null!=wa.errorMsg)Ca(wa);else if(null==wa.paymentIntent)Ba();else switch(wa.paymentIntent.status){case "succeeded":Ba();break;case "requires_payment_method":Ca(wa);break;case "requires_action":console.info("payment 10..."),priceDataAPI.loadStripe("pk_live_d8cHyZoVVZdRXDvnxSmuoQTM").done(function(Fa){console.info("payment 11...");Fa.handleCardPayment(wa.paymentIntent.clientSecret).then(function(Ea){console.info("payment 12...");
Ea.error?(wa.errorMsg=Ea.error.message,Ca(wa)):Ba()})}).fail(function(){showErrorPopup()})}}).fail(function(wa){xa.html(la._error)})};pa.getAuthenticatedSource("pk_live_d8cHyZoVVZdRXDvnxSmuoQTM",a.PayedServiceVariants[na.variant].price*(1+Da/100),!1,aa).done(function(xa){da()}).fail(function(xa){setTimeout(function(){showPopup("Payment issue",xa,!0)},300)}).always(function(){ua=!1})}else{aa.isUpgrade="true"==oa;aa.subscriptionDuration=R;var qa=$("#billingReview").parent();qa.html('<div id="loadingIcon"></div>');
$("#loadingIcon").show();$("#backButton").hide();network.ajax({url:"api/service/?user="+storage.token+"&type=paymentIntend",dataType:"json",type:"POST",data:JSON.stringify(aa)},!0).done(function(xa){if(0!=parseInt(xa))if(xa.unpaid)qa.html('<div><span class"tomato">Your order was aborted.</span><br>You are not allowed not make a purchase while you have an unpaid order pending. Please issue the payment for your order first (if you have not already). You can also cancel the order.</div>');else if(xa.paymentUrl)document.location=
xa.paymentUrl;else{$("#backButton").hide();var wa=xa.bankAccount;xa='<div>Thank you for your purchase!<br><br>You can <a href="'+ajaxURL+"api/service/?user="+storage.token+"&type=getInvoicePDF&billId="+xa.payment.billId+'" download id="downloadInvoice">download your invoice here&ensp;<i class="fa fa-file-pdf-o"></i></a><br>Once we have received the payment your API access will be activated (we will send you an email).</div><br><br><div id="paymentMethods">Please issue the payment to the following German bank account<div id="paymentProviderRadio"><div>Reference:&emsp;'+
xa.payment.billId+"</div><div>Remmittee:&emsp;"+wa.remittee+"</div><div>Transfer Amount:&emsp;"+Money.format(xa.payment.totalBill,{sourceDomainId:3,targetDomainId:3,forceEuropeanStyle:!0})+"</div><div>IBAN:&emsp;"+wa.iban+"</div><div>BIC:&emsp;"+wa.bic+"</div><div>Bank:&emsp;"+wa.bank+"</div></div></div>";qa.html(xa)}else qa.html(la._error)}).fail(function(xa){qa.html(la._error)})}}else ua=!1}});$("#gcChangeAccount").off("click").on("click",function(){ka()})},p=function(){var ma=$.Deferred();network.ajax(CDNUrl+
"termsAPI.txt?"+(new Date).getDate()).done(function(na){ma.resolve('<div id="printTerms" style="cursor: pointer; z-index: 1; position: absolute; right: -169px; top: 74px;"><i class="fa fa-print"></i> Print Terms</div><div id="termsAPI" style="padding-right: 20px; text-align:justify; width: 1000px;">'+na+"</div>");U(ma.promise());$("#printTerms").on("click",function(){var W=window.open("","Terms and Conditions","height=800,width=1000");W.document.write("<html><head><title>Terms and Conditions for Keepa.com's API</title>");
W.document.write("</head><body >");W.document.write($("#termsAPI").html());W.document.write("</body></html>");W.document.close();W.focus();W.print();W.close()})}).fail(function(){ma.resolve("<div>"+la._error+"</div>");U(ma.promise());reportBug(null,"pTerms")})},H=function(ma,na,W,ya){var Aa=100*(1-na.price/(W.pricePerRequest*na.variant));ya=NumberUtil.format(Aa);ya=0==ya?"":"save "+ya+"%";0>=Aa&&(ya="");Aa=Money.format(na.price,{sourceDomainId:3,targetDomainId:3,noDigits:!0,forceEuropeanStyle:!0}).replace(/\.|,/g,
"");var Da="";showReferencePrice(3)&&(Da='<br><span class="gcPrice reference">&ensp;<span class="price__reference--light">(~ '+Money.format(na.price,{sourceDomainId:3})+' / <span title="'+W.subscriptionDurationDescription+'">month</span>)</span></span>');return'<span class="gcContainer" rel="'+ma+'">\n\t\t\t<span class="gcLabel" style="margin-left: 3px;">Keepa API Plan</span>\n\t\t\t<span class="gcValue">'+na.variant+'<div style="line-height: 13px;font-size: 11px;bottom: 6px;position: relative; text-align: center;">'+
W.variantDescription+'<br><span style="color: #C3C3C3;">&#8793; '+NumberUtil.format(44640*Number(na.variant))+' per month</span></div></span><span class="triangle"></span><span class="gcLabel" >'+ya+'</span>\n\t\t\t<span class="gcRebate">\n\t\t\t\t<span class="gcPrice">&ensp;'+Aa+' / <span title="'+W.subscriptionDurationDescription+'">month</span></span>\n\t\t\t\t'+Da+"\n\t\t\t</span>\n\t\t\t</span>"},L=function(ma,na,W){return'<span class="gcContainer" rel="'+ma+'"><span class="gcLabel" style="margin-left: 3px;">Keepa API Plan</span><span class="gcValue">'+
W.description+'<div style="line-height: 13px;font-size: 11px;bottom: 6px;position: relative; text-align: center;">'+W.variantDescription+'<br><span style="color: #C3C3C3;">&nbsp;</span></div></span><span class="triangle"></span><span class="gcLabel" ></span><span class="gcRebate"><span class="gcPrice">&ensp;'+Money.format(na.price,{sourceDomainId:3,targetDomainId:3,noDigits:!0,forceEuropeanStyle:!0})+' / <span title="'+W.subscriptionDurationDescription+'">month</span></span></span></span>'},B=function(){$(".appsContent").off("click").on("click",
function(ma){switch($(ma.target).attr("rel")){case "terms":return p(),ma.stopImmediatePropagation(),!1}return!0});$("#backButton").off("click").on("click",function(){ka()})},E=1,U=function(ma){var na=E+1;replaceHtml("GCBTab"+na,"");$("#loadingIcon").show();$("#GCBTab"+(na-1)).hide();E++;ma.progress(function(W){replaceHtml("GCBTab"+na,W);$("#GCBTab"+na).parent().fadeIn();$("#GCBTab"+na).fadeIn()});ma.done(function(W){$("#loadingIcon").hide();replaceHtml("GCBTab"+na,W);$("#GCBTab"+na).parent().fadeIn();
$("#GCBTab"+na).fadeIn();B();$("#tabContentIFrame").height()}).fail(function(){$("#loadingIcon").hide();if(!(1>=E)){var W=$("#GCBTab"+(E-1));2==E&&$("#GCBTab2").parent().hide();$("#GCBTab"+E).hide();W.fadeIn();E--;$("#tabContentIFrame").height()}})},ka=function(){if(!(1>=E)){var ma=$("#GCBTab"+(E-1));2==E&&$("#GCBTab2").parent().hide();$("#GCBTab"+E).hide();ma.fadeIn();E--;$("#tabContentIFrame").height()}};return{statesUS:ja,init:N,cardPayment:pa,loadStripe:ta,validateVatIdPromise:function(ma){var na=
$.Deferred(),W={invalidFields:[],msg:"",success:!0,valid:!0,validationNeeded:!1};if(!0!==ma.paymentIntentRequest.billingBusiness||0===ma.paymentIntentRequest.billingVatId.length||!0!==ma.isEu)return na.resolve(W),na;W.validationNeeded=!0;var ya=ma.countryCode;"GR"==ya&&(ya="EL");if(0!==ma.paymentIntentRequest.billingVatId.indexOf(ya))return W.valid=!1,W.msg="The given VAT ID does not match the selected country.\n\t\t\t\t\t<br>Please check the provided data or remove the VAT ID to proceed.",na.resolve(W),
na;if(0===ma.paymentIntentRequest.billingVatId.indexOf("DE"))return na.resolve(W),na;network.request({path:"service/stripe",type:"vatId",content:JSON.stringify(ma.paymentIntentRequest),dashboard:"api"}).done(function(Aa){isTest&&console.info("%cVatIdResult:","color:orange",Aa);if(null==Aa.vatVerification)na.reject(W);else{var Da=function(va){"B"===va.Erg_Name&&W.invalidFields.push("Company name");"B"===va.Erg_Str&&W.invalidFields.push("Address");"B"===va.Erg_Ort&&W.invalidFields.push("City");"B"===
va.Erg_PLZ&&W.invalidFields.push("Postal code")};switch(Aa.vatVerification.ErrorCode){case 200:isTest&&console.info("%cVatId:","color:green","valid - check address fields...");Da(Aa.vatVerification);break;case 201:case 202:case 203:case 204:isTest&&console.info("%cVatId:","color:red","invalid");Da(Aa.vatVerification);W.valid=!1;break;case 209:case 210:case 211:case 212:W.valid=!1;break;default:W.success=!1,W.valid=!1}W.success&&(W.invalidFields.length||!0!==W.valid)&&(Da="Validation of the given VAT ID and billing address failed due to the following reasons:<br>\n\t\t\t\t\t\t<ul>",
W.valid||(Da+="<li>The provided VAT ID has an invalid format ("+Aa.vatVerification.ErrorCode+").</li>"),W.invalidFields.length&&(Da+="<li>The following address fields do not match the ones registered with the given VAT ID:<br>\n\t\t\t\t\t\t\t<span>"+W.invalidFields.join(", ")+"</span><br>",null!=Aa.vatSuggestion&&(Aa.vatSuggestion.company_name||Aa.vatVerification.company_address)&&(Da=Da+"Did you mean?<br>"+(Aa.vatSuggestion.company_name+"<br>"),Da+=Aa.vatSuggestion.company_address.replace(/(?:\r\n|\r|\n)/g,
"<br>")+"<br>"),Da+="</li>"),W.msg=Da+"</ul><br>Please check the provided data or remove the VAT ID to proceed.");na.resolve(W)}}).fail(function(Aa){na.reject(Aa)});return na},handleValidateVatIdError:function(ma,na){reportBug(null,"vat id validation failed: "+JSON.stringify(ma));na.html('There was a problem validating your <strong>VAT ID</strong>. Please try again later \n\t\t\t\t\t\tor remove the VAT ID from your billing data.<br>If the error persists, please contact \n\t\t\t\t\t\t<a href="mailto:info@keepa.com" class="href">info@keepa.com</a>.');
na.show()}}}();var SettingsNotification=function(){var a=isTest?"holzerindustries_bot":"keepa_bot",b={},d=20,g=function(){var Y=$("#idEmail"),ja=$("#saveEmail");Y.on("input",function(){ja.show();ja.next(".channel-error").remove()});Y.on("focusout",function(){var ra=Y.val(),ta=ra.trim();ra===storage.email||""===ta&&"undefined"===typeof storage.email?ja.hide():""===ta?ja.show():(ja.next(".channel-error").remove(),verifyRegExp.email.test(ta)?ja.show():ja.hide().after('<span class="channel-error">'+la._49+"</span>"))});
ja.click(function(){if(emailChangePasswordRequired&&!isSocialAccount&&hasDataAccessSubscription){var ra=material.getInput(!0,"","passwordSendEmail",la._6,!1,"passwordSendEmail","","",!0,"","","password"),ta=material.getButton("sendEmail",la._978,"floppy-o",null,!1,!0),pa=showPopup(la._979,'<form id="passwordSendEmailForm">\n\t\t\t\t\t\t<p class="mdc-typography--body2">'+la._980+'</p>\n\t\t\t\t\t\t<div class="m-t-0 m-b-30"style="width:400px;">'+ra+"</div>\n                        "+ta+"\n\t\t\t\t\t</form>",
!0);material.init("#passwordSendEmailForm");setTimeout(function(){$("#passwordSendEmailForm").on("submit",function(ca){ca.preventDefault();ca=$("#passwordSendEmail").val();ca.length&&(pa.close(),n(ca))})})}else n()})},n=function(Y){var ja=$("#idEmail"),ra=ja.val(),ta=ra.trim(),pa="undefined"!==typeof storage.email;if(ra!==storage.email&&(""!==ta||pa)){var ca=storage.email;if(""===ta){ra=material.getButton("emailKeep","Keep it, but deactivate price alerts via email","toggle-off",null,!1,!1);var sa=
material.getButton("emailRemove","Remove email","trash-o",null,!1,!0),Z=showPopup("Remove email address",'<div style="width:600px;">Are you sure you want to remove your email address from your account? You will no longer be able to sign in using your email address. (Unless your username is your email as well.)</div><br><br>'+ra+"&emsp;"+sa,!0);$("#emailKeep").on("click",function(){Z.close();$("#saveEmail").hide();ja.val(storage.email);b.defaultNotificationType[ha("email")]&&$("#channel-email").find(".channel-toggle").click()});
$("#emailRemove").on("click",function(){Z.close();storage.removeItem("email");t(pa,ta,ca,Y)});Z.promise.fail(function(){ja.val(storage.email)})}else storage.email=ta,t(pa,ta,ca,Y)}},t=function(Y,ja,ra,ta){var pa={};""===ja&&(pa.removeEmail=!0);emailChangePasswordRequired&&!isSocialAccount&&hasDataAccessSubscription&&(pa.password=ta);settings.send(pa).done(function(ca){var sa=[];ca.status.length?sa=ca.status:sa.push(ca.status);0===sa[0]?($("#saveEmail").hide(),$("#idEmail").val(ja),ca=b.defaultNotificationType[ha("email")],
(!Y&&!ca||""===ja&&ca)&&$("#channel-email").find(".channel-toggle").click()):-2===sa[0]?(storage.email=ra,showPopPopup("Error",la._76,!0)):(storage.email=ra,showErrorPopup())}).fail(function(ca){storage.email=ra;showErrorPopup()})},h=function(){var Y=$("#idTelegramBot");network.request({path:"user/settings",type:"getBotStatus"}).done(function(ja){ja.error||(ja=u(ja.botProfiles,"tg"),!1===ja?q():(Y.val(ja),Y.after('<i id="telegramBotDelete" class="fa fa-times tomato fa-lg"></i>&emsp;'),Y.addClass("default"),
$("#telegramBotDelete").on("click",function(ra){r(ra)})))})},m=function(){var Y=$("#idTelegramBot");Y.val()||network.request({path:"user/settings",type:"getBotStatus"}).done(function(ja){ja=u(ja.botProfiles,"tg");!1!==ja&&(Y.val(ja),Y.after('<i id="telegramBotDelete" class="fa fa-times tomato fa-lg"></i>&emsp;'),Y.off("click"),Y.addClass("default"),$("#channel-telegramBot").find(".fa-toggle-off").click(),$("#telegramBotDelete").on("click",function(ra){r(ra)}))}).fail().always(function(){d--;0<=d&&
setTimeout(function(){m()},1E3)})},r=function(Y){var ja=$(Y.currentTarget),ra=ja.closest(".channel-wrapper");network.request({path:"user/session",type:"botLogout",content:"tg"}).done(function(){$("#idTelegramBot").val("");ja.remove();ra.find(".fa-toggle-on").click();q()}).fail(function(ta){showErrorPopup(ta)})},q=function(){var Y=$("#idTelegramBot");Y.removeClass("default");Y.on("click",function(){var ja=window.open("about:blank","_blank");network.request({path:"user/settings",type:"getBotStatus"}).done(function(ra){ra.hash&&
(ja.location.href="https://telegram.me/"+a+"?start=lnktref"+ra.hash,m())}).fail(function(){ja.close();showErrorPopup()})})},u=function(Y,ja){var ra=!1;Y&&Y.groupedUserProfiles[ja]&&(Y=Y.groupedUserProfiles[ja][0],"undefined"!==typeof Y&&(ra=(Y.first_name?Y.first_name+" ":"")+(Y.last_name?Y.last_name:"")));return ra},D=function(){var Y=$("#channel-browser"),ja=!1;serviceWorker.checkSubscription().done(function(ra){ja=!0}).fail(function(ra){ja=ra?!1:null}).always(function(){if(null!=ja){var ra=la._569+
(ja?" "+la._570:"");replaceHtmlEl(Y.find(".hint")[0],ra);ra=Y.find(".channel-toggle");ja&&ra.hasClass("fa-toggle-off")&&ra.addClass("fa-toggle-on").removeClass("fa-toggle-off");var ta=!1;$("#testMessage").on("click",function(){ta||(serviceWorker.showNotification(),ta=!0,setTimeout(function(){ta=!1},5E3))});ra.on("click",function(pa){var ca=pa.currentTarget;ca=$(replaceHtmlEl(ca.closest("div"),'<i class="fa fa-refresh fa-rotate-90 fa-spin fa-fw fw-lg"></i>&emsp;'));if(ja){var sa=!0;serviceWorker.unsubscribePush().fail(function(){sa=
!1}).always(function(){ca=$(replaceHtmlEl(ca.closest("div")[0],sa?'<i class="channel-toggle fa fa-toggle-off fa-fw fa-lg"></i>&emsp;':'<i class="channel-toggle fa fa-toggle-on fa-fw fa-lg"></i>&emsp;'));D()})}else{var Z=!0;serviceWorker.subscribePush().fail(function(){Z=!1}).always(function(){ca=$(replaceHtmlEl(ca.closest("div")[0],Z?'<i class="channel-toggle fa fa-toggle-on fa-fw fa-lg"></i>&emsp;':'<i class="channel-toggle fa fa-toggle-off fa-fw fa-lg"></i>&emsp;'));D()})}})}})},F=function(){$("#channel-rss").find("input").on("click",
function(Y){Y=$(Y.currentTarget);Y.focus();Y.select()})},M=function(){if(triggerUnsubscribe){triggerUnsubscribe=!1;var Y=$("#idEmail"),ja=$("#saveEmail");0!=Y.val().length&&(Y.val(""),ja.click(),window.location.hash="!settings",setTimeout(function(){$("#notification-channels p").first().before('<p><span style="color: orangered;font-weight: bold;">You are now unsubscribed from our price alerts via email!</span></p>')},500))}},Q=function(){$(".channel-toggle:not(.settings)").on("click",function(Y){T(Y)})},
T=function(Y){var ja=$(Y.currentTarget),ra=ja.closest(".channel-wrapper");if(!ra.is("#channel-browser")){Y=ra.attr("id").replace(/channel-/,"");var ta=ha(Y),pa=b.defaultNotificationType[ta],ca=$("#idEmail");"email"!==Y||pa||""!==ca.val()?("email"===Y&&pa&&(ra=$("#channel-settingsLightningDeals").find(".channel-toggle.fa-toggle-on"),ra.length&&($(ra).click(),$("#channel-settingsLightningDeals").effect("highlight",1E3))),ra=$("#idTelegramBot"),"telegramBot"!==Y||pa||""!==ra.val()?(ja=$(replaceHtmlEl(ja.closest("div")[0],
'<i class="fa fa-refresh fa-rotate-90 fa-spin fa-fw fw-lg"></i>&emsp;')),b.defaultNotificationType[ta]=!b.defaultNotificationType[ta],storage.defaultNotificationType=JSON.stringify(b.defaultNotificationType),settings.send().done(function(){}).fail(showErrorPopup).always(function(){ja=$(replaceHtmlEl(ja.closest("div")[0],pa?'<i class="channel-toggle fa fa-toggle-off fa-fw fa-lg"></i>&emsp;':'<i class="channel-toggle fa fa-toggle-on fa-fw fa-lg"></i>&emsp;'));ja.on("click",function(sa){T(sa)})})):ra.click()):
(Y=$("#saveEmail"),0===ra.find(".channel-error").length&&Y.after('<span class="channel-error">'+la._90+"</span>"),ca.focus(),Y.hide())}},ha=function(Y){return{email:0,browser:3,desktop:3,telegramBot:7,mobileApp:6}[Y]},P=function(){$(".channel-toggle.settings").on("click",function(ja){R(ja)});var Y=$("#idRearm");Y.on("change",function(ja){(ja=Y.val())?(ja=Number(ja),!ja||1>ja||365<ja?(showPopup("Error",la._283+1+la._284+365+".",!0),ja="undefined"!=storage.defaultNotificationInterval?storage.defaultNotificationInterval:
"",Y.val(0<ja?Number(ja)/1440:"")):(set("defaultNotificationInterval",1440*Number(ja)),settings.send().done(function(){}).fail(showErrorPopup).always(function(){$("#channel-settingsRearmTimer").find(".channel-toggle").removeClass("fa-toggle-off").addClass("fa-toggle-on")}))):(set("defaultNotificationInterval",0),settings.send().done(function(){}).fail(showErrorPopup).always(function(){$("#channel-settingsRearmTimer").find(".channel-toggle").removeClass("fa-toggle-on").addClass("fa-toggle-off")}))})},
R=function(Y){var ja=$(Y.currentTarget);Y=ja.closest(".channel-wrapper").attr("id").replace(/channel-/,"");ja=$(replaceHtmlEl(ja.closest("div")[0],'<i class="fa fa-refresh fa-rotate-90 fa-spin fa-fw fw-lg"></i>&emsp;'));switch(Y){case "settingsLightningDeals":var ra="true"===storage.sendUpcomingLightningDealsAlert;set("sendUpcomingLightningDealsAlert",!ra);break;case "settingsLightningDealsStartAlerts":ra="true"===storage.sendStartLightningDealsAlert;set("sendStartLightningDealsAlert",!ra);break;
case "settingsRearmTimer":Y=(ra="undefined"!=storage.defaultNotificationInterval&&0<storage.defaultNotificationInterval)?0:2;ra?$("#idRearm").val(""):$("#idRearm").val(Y);set("defaultNotificationInterval",Number(1440*Y).toFixed(0));break;default:isTest&&console.info("%cSettings:","color:blue;","missing settings handling > ",Y)}settings.send().done(function(){}).fail(showErrorPopup).always(function(){var ta=(ra?'<i class="channel-toggle fa fa-toggle-off fa-fw fa-lg"></i>&emsp;':'<i class="channel-toggle fa fa-toggle-on fa-fw fa-lg"></i>&emsp;').replace("channel-toggle",
"channel-toggle settings");ja=$(replaceHtmlEl(ja.closest("div")[0],ta));ja.on("click",function(pa){R(pa)})})};return{init:function(){network.request({path:"user/settings",type:"getSettings",maxAge:6E4}).done(function(Y){b=Y.user;Y=serviceWorker.checkSupport();var ja="https://vimeo.com/keepatutorials/meet-keepa-on-telegram-messenger";3==storage.language&&(ja="https://vimeo.com/keepatutorials/triff-keepa-auf-dem-telegram-messenger");var ra=browserInfo(),ta=getAppLinksAndBadges();ra={email:[{name:la._5,
hint:la._562,icon:"fa-envelope-o",action:'<input type="text" name="email" id="idEmail" rel="ids" value="'+(storage.email||"")+'" placeholder="'+la._69+'" /><div><i id="saveEmail" class="fa fa-floppy-o tomato fa-lg"></i>&emsp;</div>',active:b.defaultNotificationType[ha("email")]}],telegramBot:[{name:"Telegram Messenger",hint:la._584+'<br><a href="'+ja+'" target="_blank"><i class="fa fa-vimeo" ></i>'+la._651+"</a>",icon:"fa-telegram",action:'<input name="idTelegramBot" id="idTelegramBot" rel="ids" value="" placeholder="'+
la._585+'" readonly="readonly" type="text">&emsp;',active:b.defaultNotificationType[ha("telegramBot")]}],browser:[{name:la._568,hint:la._569,icon:"fa-bullhorn",action:"<span>"+ra.name+" "+ra.version+"</span>",active:!1}],mobileApp:[{name:la._35,hint:"&rarr; "+la._929+" &larr;",icon:"fa-mobile",action:'<p class="app-store-icons">\n                            <a class="app-store--android" href="'+ta.linkGooglePlay+'"\n                                target="_blank">'+ta.badgeGooglePlay+'</a>\n                            <a class="app-store--ios" href="'+
ta.linkAppStore+'" \n                                target="_blank">'+ta.badgeAppStore+"</a>\n                        </p>",active:!1}],rss:[{name:la._576,hint:la._577,icon:"fa-rss",action:'<input type="text" value="'+ajaxURL+"user/rss/?feed="+b.rssHash+'" readonly="readonly" />',active:!0}]};Y||delete ra.browser;var pa={};ja="";for(var ca in ra)ra.hasOwnProperty(ca)&&(ta=ra[ca][0],pa={channelIdentifier:ca,channelIcon:ta.icon,channelName:ta.name,channelHint:ta.hint,channelAction:ta.action,channelToggle:ta.active?
"fa-toggle-on":"fa-toggle-off"},ja+='<div id="channel-channelIdentifier" class="channel-wrapper">\n\t\t<div><i class="fa channelIcon fa-fw fa-30"></i></div>\n\t\t<div>channelName</div>\n\t\t<div><i class="channel-toggle fa channelToggle fa-fw fa-lg"></i>&emsp;</div>\n\t\t<div class="action">channelAction\n\t\t<p class="hint">channelHint</p>\n\t\t</div>\n\t\t</div>'.replace(new RegExp(Object.keys(pa).join("|"),"gi"),function(N){return pa[N]}));ca={};ra=storage.sendUpcomingLightningDealsAlert;"undefined"!=
typeof ra&&(ca.settingsLightningDeals={name:la._402,hint:la._714,icon:"",action:la._431,active:"true"===ra});ra=storage.sendStartLightningDealsAlert;"undefined"!=typeof ra&&(ca.settingsLightningDealsStartAlerts={name:"",hint:la._715,icon:"",action:'<span style="line-height:16px;margin:8px 0 6px;">'+la._713+"</span>",active:"true"===ra});ra=storage.defaultNotificationInterval;"undefined"!=typeof ra&&(ra=Number(ra)/1440,ca.settingsRearmTimer={name:la._432,hint:'<span><a target="_blank" href="https://discuss.keepa.com/t/continuous-tracking-rearm-timer/62?u=keepa"><i class="fa fa-external-link"></i>'+
la._755+"</a></span>",icon:"",action:'<input type="text" name="rearm" id="idRearm" rel="ids" value="'+(0<ra?ra:"")+'" placeholder="'+la._433+'" class="xs" /><span>&ensp;('+la._143+")</span>",active:0<ra});ra="";var sa='<div id="channel-channelIdentifier" class="channel-wrapper">\n\t\t<div><i class="fa channelIcon fa-fw fa-30"></i></div>\n\t\t<div>channelName</div>\n\t\t<div><i class="channel-toggle fa channelToggle fa-fw fa-lg"></i>&emsp;</div>\n\t\t<div class="action">channelAction\n\t\t<p class="hint">channelHint</p>\n\t\t</div>\n\t\t</div>'.replace("channel-toggle",
"channel-toggle settings"),Z;for(Z in ca)ta=ca[Z],pa={channelIdentifier:Z,channelIcon:"",channelName:ta.name,channelHint:ta.hint,channelAction:ta.action,channelToggle:ta.active?"fa-toggle-on":"fa-toggle-off"},ra+=sa.replace(new RegExp(Object.keys(pa).join("|"),"gi"),function(N){return pa[N]});replaceHtml("notification-channels",'<p class="mdc-typography--body2">'+la._586+'</p>\n\t\t\t\t\t<div id="pseudo-form">\n\t\t\t\t\t\t'+ja+'\n\t\t\t\t\t\t\n\t\t\t\t\t\t<h4 class="mdc-typography--subheading1">'+
la._948+"</h4>\n\t\t\t\t\t\t"+ra+"\n\t\t\t\t\t</div>");Q();g();h();Y&&D();F();M();P();$("#loadingIcon").hide();addon()}).fail(function(Y){401===Y.status&&settings.reset(!1,!1)})}}}(),SettingsSubscription=function(){var a=[],b,d,g,n,t,h,m,r,q,u=function(){a=[];r=q=m=h=t=n=g=d=b=null},D=function(z){if(0==storage.accountType)replaceHtml("settingsBox",'<span class="subsubHeadline2">'+la._52+"</span><br>"+la._53),$("#settingsSelect").hide(),$("#settingsBox").show(),$("#settingsTabs").css("borderTop","0px"),
setTimeout(function(){showLoginOverlay()},1);else if(z||""===$("#subscriptions-tab").html())F(),M().done(Q)},F=function(){replaceHtml("subscriptions-tab",'<div id="loadingIconPopup"></div>');$("#loadingIconPopup").show()},M=function(){return network.request({path:"service/stripe",type:"offers",includeData:!0,dashboard:"data"}).done(function(z){if(z.offers){u();b=z.offers;m=z.source;r=z.balance;t=z.invoices;h=z.pendingInvoices;z.payments&&(d=z.payments.payments,g=z.payments.subscriptions,n=z.subscriptionStatus,
q=z.payments.lastDowngrade);null==g&&(g=[]);isTest&&console.info("%cgetOffersAndSubscriptionStatus:","color:green",z);z=!1;try{if(null!=g)for(var I=g.length-1;0<=I;I--){var K=g[I];"Data_Access_Year"!=K.payedService&&"Data_Access_Year_19"!=K.payedService||0<K.paymentReceivedDate||0<K.paymentCancelledDate||(z=!0)}}catch(p){reportBug(p)}I=null!=n&&null!=n.services&&(-1<n.services.indexOf("Data_Access_Year")||-1<n.services.indexOf("Data_Access_Year_19"));K=!I&&null!=n&&null!=n.services&&(-1<n.services.indexOf("Data_Access")||
-1<n.services.indexOf("Data_Access_19"));for(var A in b.PayedService){var J=b.PayedService[A],S="DATA"==J.type,v="DATA_YEAR"==J.type;if(!(z&&S||!v&&!S||S&&I||v&&K)&&(!v||I||K||z)){S=b.PayedServiceTypes[J.type];J=b.PayedServiceVariants[J.variant];J={sku:A,name:S.description,description:S.variantDescription,hint:'This includes the product details, offers table and variation data export, as \n\t\t\t\t\t\t\t\twell as the product list imports and exports, best seller, top seller and seller \n\t\t\t\t\t\t\t\tstorefront lists. Also included is the Product Finder and the Category Tree.<br><br>\n\t\t\t\t\t\t\t\t<a class=\'quota-info\'>Access is subjected to a daily usage quota to prevent \n\t\t\t\t\t\t\t\tabuse.</a> More details can be found <a href="https://discuss.keepa.com/t/data-features-access-free-vs-monthly-subscription/5845" target="_blank">here.</a><br>\n\t\t\t\t\t\t\t\tImportant note: Account sharing is not allowed.<br>\n\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\tAdditional parts of the subscription:<br>\n\t\t\t\t\t\t\t\t- Access to interactive <b>Sales Rank history</b> graphs<br>\n\t\t\t\t\t\t\t\t- Access to interactive <b>Buy Box price history</b> graphs<br>\n\t\t\t\t\t\t\t\t- Access to interactive <b>eBay price history</b> graphs<br>\n\t\t\t\t\t\t\t\t- Access to interactive <b>Offer Count and Review/Rating history</b> graphs<br>\n\t\t\t\t\t\t\t\t- Basic access to our API with 5 token/min<br>\n\t\t\t\t\t\t\t\t- Price increase tracking<br><br>\n                                &raquo;<a style="cursor:alias !important;font-style:italic;" class="link--terms">Terms and Conditions</a><br>\n\t\t\t\t\t\t\t',
bucketSize:J.variant,interval:J.interval,currencyDomainId:3,price:J.price,active:!0,paymentPending:!1,subscribed:n?n.hasActiveSubscription&&!n.hasOnlyAPISubscription:!1,subscribedTill:n?n.dataEndDate:0};J.priceFormatted=Money.format(J.price,{sourceDomainId:J.currencyDomainId,targetDomainId:J.currencyDomainId,noDigits:!0,forceEuropeanStyle:!0});if(null!=g)for(v=g.length-1;0<=v;v--)if(S=g[v],S.payedService==A){v=0==S.subscriptionStart?"-":(new Date(S.subscriptionStart)).formatDate("M j, Y");J.subscriptionStart=
S.subscriptionStart;J.startDate=v;J.createDate=(new Date(S.createDate)).formatDate("M j, Y");J.createDateRaw=S.createDate;J.paymentPending=0==S.paymentReceivedDate&&0==S.paymentCancelledDate;J.endDate=0==S.subscriptionStart?"-":(new Date(S.subscriptionStart+S.subscriptionDuration)).formatDate("M j, Y");J.cancel_at_period_end=S.cancel_at_period_end;J.paymentCancelledDate=S.paymentCancelledDate;J.paymentProvider=S.paymentProvider;J.subscriptionId=S.subscriptionId;J.quantity=S.quantity;break}a[A]=J}}}else showErrorPopup()}).fail(function(){showErrorPopup()})},
Q=function(){var z="",I=!1;for(H in a){var K=a[H];if(!0!==K.active&&!0!==K.subscribed)return;var A="";if(null==K.startDate||K.paymentPending||0!=K.paymentCancelledDate){var J=[];for(L in b.PayedServiceVariants)if(L.startsWith("DATA_BASIC")){var S=b.PayedServiceVariants[L];J.push(Money.format(S.price,{sourceDomainId:K.currencyDomainId,targetDomainId:K.currencyDomainId,noDigits:!0,forceEuropeanStyle:!0})+" / "+S.interval)}A+='<p><i class="fa fa-fw fa-info-circle"></i>'+J.join(" or ")+"</p>"}else A+=
'<p><i class="fa fa-fw fa-calendar-o"></i>Subscribed since '+K.createDate+"</p>";if(null!=K.endDate&&!K.paymentPending&&0==K.paymentCancelledDate){J='<i class="fa fa-fw fa-'+(K.cancel_at_period_end?"ban":"refresh")+'"></i>';S="";if(null!=t)for(var v=0;v<t.length;v++){var p=t[v];if(p.subscription.id==K.subscriptionId){S=Money.format(p.amountDue,{sourceDomainId:K.currencyDomainId,targetDomainId:K.currencyDomainId,noDigits:!1,forceEuropeanStyle:!0});break}}if(null!=h)for(v=0;v<h.length;v++)if(h[v].subscription.id==
K.subscriptionId){K.paymentPending=!0;break}A+="<p>"+(K.cancel_at_period_end?'<span style="color:#ff6347">'+J+"Will terminate on "+K.endDate+"</span>":J+"Will renew on "+K.endDate)+"</p>";K.cancel_at_period_end&&"Complimentary"!=K.paymentProvider&&"Data_Access"!=K.sku&&"Data_Access_Year"!=K.sku&&(A+='<p><i class="fa fa-fw fa-repeat"></i><span class="href" rel="'+K.subscriptionId+'" id="resumeSub">Resume subscription</span></p>');1<K.quantity&&(A+='<p><i class="fa fa-fw fa-info"></i><span style="font-weight:bold;">'+
K.quantity+"</span> active Data subscriptions</p>");A+=""==S?"":'<p><i class="fa fa-fw fa-money"></i>Upcoming charge '+S+"</p>";if(!K.cancel_at_period_end&&!K.paymentPending){if("Data_Access"==K.sku||"Data_Access_19"==K.sku)A+='<p class="subdetails__yearly" data-sku="'+K.sku+'" title="Save 20% by changing your billing cycle from monthly to yearly">\n                        <i class="fa fa-fw fa-clock-o"></i>Switch to yearly\n                    </p>';A+='<p class="subdetails__upgrade" data-sku="'+
K.sku+'" title="Upgrade your data access to increase your daily quota">\n                        <i class="fa fa-fw fa-pencil"></i>'+(1<K.quantity?"Upgrade or Downgrade":"Upgrade")+"\n                    </p>";A+='<p class="subdetails__update-billing" data-sku="'+K.sku+'">\n\t\t\t\t\t\t\t<i class="fa fa-fw fa-book"></i>Update invoice address \n\t\t\t\t\t\t</p>'}K.cancel_at_period_end||(I=!0)}K.paymentPending&&(A=18E4<Date.now()-K.createDateRaw?'<div id="retryPayment" data-id="'+K.subscriptionId+'"><span style="color:tomato;">Payment failed.<br><span>Try again now <i class="fa fa-repeat"></i></span></span></div>':
'<div><span style="color:orange;">Payment pending<i id="refreshSubscription" class="fa fa-refresh"></i></span></div>');J=K.priceFormatted;1<K.quantity&&K.subscribed&&(J=Money.format(K.price*K.quantity,{sourceDomainId:K.currencyDomainId,targetDomainId:K.currencyDomainId,noDigits:!0,forceEuropeanStyle:!0}));v=S=void 0;K.subscribed&&K.cancel_at_period_end||K.disabled?v=K.cancel_at_period_end?"Subscription is cancelled":K.paymentPending?"Payment pending":"":K.paymentPending&&!K.subscribed?v="Payment pending":
S=material.getButton("toggleSubscription-"+K.sku,K.subscribed?"Cancel":"Subscribe",K.subscribed?"ban":"lock",null,!1,K.subscribed?!0:!1);p=K.description.replace("Data",'<a href="#!data">Data</a>');z+='<div class="sub-wrapper'+(!0===K.disabled?" disable":"")+'">\n                    <div>'+(S?S:v)+"</div>\n\t\t\t\t\t<div>\n                        "+K.name+" "+(K.subscribed?"- "+J+" / "+K.interval:"")+"\n\t\t\t\t\t\t"+(1<K.quantity&&K.subscribed?'<p style="margin-bottom: 4px;">Base price: '+K.priceFormatted+
" / "+K.interval+"</p>":"")+"\n                        "+A+'       \n                    </div>\n\t\t\t\t\t<div class="description">'+p+'\n\t\t\t\t\t\t<p class="hint">'+K.hint+"</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>"}var H=n&&n.hasAPISubscription?'<p class="mdc-typography--body2" style="font-weight: bold;">\n\t\t\t\t<a href="#!api" class="href"><i class="fa fa-long-arrow-right"></i> Manage your API subscription&ensp;<i class="fa fa-external-link"></i></a>\n\t\t\t</p>':"";A=n&&n.hasActiveSubscription&&
n.hasOnlyAPISubscription?'<p><span style="color:#3cb371;">\n\t\t\t\tYou have automatically been granted access to our Data features via your currently active API subscription. No need to subscribe.</span><br>\n\t\t\t\tIn case you need to increase your daily quota you can of course subscribe to additional packages.\n\t\t\t</p>':"";z=(hasDataAccessSubscription?"":"<p>Keepa can be used <span>free of charge</span>.<br><br>\n\t\t\tFor our most advanced users we offer subscriptions that provide access to <span>premium features</span>.<br>\n\t\t\t</p>")+
"\n\t\t\t"+A+"\n\t\t\t<div>"+z+'</div>\n\t\t\t<div id="subscriptions-form"></div>';var L=I&&0===A.length?'<br>\n\t\t\t\t&raquo; How do I cancel my subscription?<br>\n\t\t\t\tJust click on the orange "Cancel" button and confirm to unsubscribe. Your subscription then will terminate on the end of your current billing cycle.':"";K="Data_Access"!==K.sku&&"Data_Access_19"!==K.sku||!I||0!==A.length?"":'<br>\n\t\t\t\t&raquo; How do I switch from a monthly plan to a yearly one?<br>\n\t\t\t\tClick on the blue label "Switch to yearly".';
K='<p style="font-style: italic;">\n\t\t\t\t<i class="fa fa-question-circle"></i> Questions? Have a look at our <a href="https://discuss.keepa.com/t/faq-payments-premium-access/7819" target="_blank">FAQ - Payments premium access</a>  or <a target="_blank" href="mailto:info@keepa.com?subject=Questions about Keepa Data Subscription" title="info@keepa.com">contact us via e-mail.</a>&emsp;\n\t\t\t\t'+(L||K?"<br>The most commonly asked questions:":"")+"\n\t\t\t\t"+L+"\n\t\t\t\t"+K+"\n\t\t\t</p>";I=I?createCreditCard(m):
"<br>";A=r&&0>r?'<div><span style="color:#000">Your current account balance:&emsp;<i class="fa fa-fw fa-money"></i> \n\t\t\t'+Money.format(-1*r,{sourceDomainId:3,targetDomainId:3,noDigits:!1,forceEuropeanStyle:!0})+"</span>&ensp;(will be applied to future invoices)</div>":"";if(null!=d){L='<br><hr class="hr -green"><div>Receipts:</div><br><table class="paymentTable"><tr><th>Date</th><th>Total</th><th>Price Plan</th><th>Start Date</th><th>End Date</th><th>Payment Method</th><th>Type</th><th>Invoice</th><th>Status</th></tr>';
for(J=d.length-1;0<=J;J--){S=d[J];v=S.totalBill-S.creditApplied;p=0==S.subscriptionStart?"-":(new Date(S.subscriptionStart)).formatDate("M j, Y");var B=0==S.subscriptionStart?"-":(new Date(S.subscriptionStart+S.subscriptionDuration)).formatDate("M j, Y"),E=Money.format(v,{sourceDomainId:3,targetDomainId:3,forceEuropeanStyle:!0}),U="";showReferencePrice(3)&&(U=' <span class="price__reference">(~ '+Money.format(v,{sourceDomainId:3})+")</span>");L+="<tr>\n\t\t\t\t\t\t\t<td>"+(new Date(S.createDate)).formatDate("M j, Y")+
"</td> \n\t\t\t\t\t\t\t<td>"+E+U+"</td> \n\t\t\t\t\t\t\t<td>"+((1<S.quantity?S.quantity+"x ":"")+S.payedService.replace(/_/g," ").replace(" 19",""))+"</td>\n\t\t\t\t\t\t\t<td>"+p+"</td>\n\t\t\t\t\t\t\t<td>"+B+"</td>\n\t\t\t\t\t\t\t<td>"+(0>v?"Credit":0==S.totalBill?"-":S.paymentProvider)+"</td>\n\t\t\t\t\t\t\t<td>"+(S.isUpgrade?"Upgrade":"Regular")+"</td>\n\t\t\t\t\t\t\t<td>"+(0>v||0==v&&0==S.creditApplied?" - ":'<a download class="darkgrey" href="'+ajaxURL+"api/service/?user="+storage.token+"&type=getInvoicePDF&billId="+
S.billId+'"><i class="fa fa-file-pdf-o"></i> Download</a>')+"</td>\n\t\t\t\t\t\t\t<td>"+(0>v||0==v&&0==S.creditApplied?'<span style="color: #999;font-style: italic;">free</span>':0==v?'<span style="color: #999;font-style: italic;">paid with credit</span>':0<S.paymentReceivedDate&&0<S.paymentCancelledDate?'<span style="color:#2196F3">Refunded ('+(new Date(S.paymentCancelledDate)).formatDate("M j")+")</span>":0!=S.paymentReceivedDate?'<span class="green">Payment Received</span>':0!=S.paymentCancelledDate?
'<span class="red">Cancelled ('+(new Date(S.paymentCancelledDate)).formatDate("M j")+")</span>":"Pending")+"</td>\n\t\t\t\t\t\t</tr>"}L+="</table>"}else L="";replaceHtml("subscriptions-tab",H+z+K+I+A+L);$(".editCard").colorTip({color:"darkgrey"});T()},T=function(){$(".quota-info").on("click",function(){showPopup("Data Access Quota",infoQuotaGeneral,!0)});$(".link--terms").on("click",w);$("#editCC, #addCC").on("click",P);$("#removeCC").on("click",function(){var z=showPopup("Delete Credit Card",'This will delete your attached credit card. Your subscription will terminate unless you provide a new payment method before the end of your billing cycle. Do you want to continue?<br><br><span class="button" id="deleteTokenConfirm">&ensp;Yes&ensp;</span>',
!0);$("#deleteTokenConfirm").on("click",function(){z.close();network.request({path:"service/stripe",type:"deleteSource",dashboard:"data"}).done(function(I){setTimeout(function(){showPopup("Payment method removed!","Your payment method was successfully deleted.",!0);D(!0)},300)}).fail(function(I){setTimeout(function(){showPopup("Removal issue",I,!0)},300)})})});$("#resumeSub").on("click",function(z){z=$("#resumeSub").attr("rel");var I=null;for(K in a)a[K].subscriptionId==z&&(I=a[K]);var K=material.getButton("resumeSubscription",
"Resume Subscription","repeat",null,!1,!1);var A=showPopup("Resume subscription "+I.name,"<div>This will remove your cancellation and continue automatic renewals of your subscription, beginning on "+I.endDate+" - the end of your current billing cycle.</div><br><br>"+K,!0);$("#resumeSubscription").on("click",function(){F();A.close();network.request({path:"service/stripe",type:"resumeSubscription",subscriptionId:I.subscriptionId,dashboard:"data"}).done(function(){D(!0)}).fail(showErrorPopup)})});$("#refreshSubscription").on("click",
function(z){D(!0)});$(".sub-wrapper .mdc-button").on("click",function(z){z.preventDefault();z=$(z.currentTarget);var I=a[z.attr("id").replace("toggleSubscription-","")];if(I.subscribed){z=material.getButton("cancelSubscription","Cancel Subscription","ban",null,!1,!0);var K=showPopup("Cancel subscription "+I.name,"<div>"+(I.paymentPending?"If you cancel your subscription it will terminate immediately.":"If you cancel your subscription it will terminate on "+I.endDate+" - the end of your current billing cycle.")+
"</div>"+("Data_Access_Year"==I.sku||"Data_Access"==I.sku?"<br><div style='font-style: italic;color: #8a2424;'>Note:<br>Our Data subscription fees are 19 \u20ac / month since May 2021 for new subscriptions.<br>Should you ever decide to subscribe again the higher fees will apply.</div>":"")+"<br><br>"+z,!0);$("#cancelSubscription").on("click",function(){F();K.close();var A={path:"service/stripe",type:"cancelSubscription",subscriptionId:I.subscriptionId,dashboard:"data"};I.paymentPending&&(A.cancelNow=
!0);network.request(A).done(function(){D(!0)}).fail(function(J){showPopup("Error",J.errorMsg,!0)})})}else network.request({path:"user/settings",type:"getSettings"}).always(function(A){(A=A.user)&&A.emailAddress&&-1!=A.emailAddress.indexOf("@")&&settings.isEmailVerified?ta(I):showPopup(I.name+" - Subscription",la._428,!0)})});$(".subdetails__upgrade").on("click",function(){var z=$(this).data("sku"),I=a[z];network.request({path:"user/settings",type:"getSettings"}).always(function(K){(K=K.user)&&K.emailAddress&&
-1!=K.emailAddress.indexOf("@")&&settings.isEmailVerified?ca(z):showPopup(I.name+" - Subscription",la._428,!0)})});$(".subdetails__yearly").on("click",function(){var z=$(this).data("sku"),I=a[z];network.request({path:"user/settings",type:"getSettings"}).always(function(K){(K=K.user)&&K.emailAddress&&-1!=K.emailAddress.indexOf("@")&&settings.isEmailVerified?Z(z):showPopup(I.name+" - Subscription",la._428,!0)})});$(".subdetails__update-billing").on("click",function(){f($(this).data("sku"))});$("#retryPayment").on("click",
function(){R($(this).data("id"))})},ha=!1,P=function(){if(!ha){ha=!0;var z=g[g.length-1];priceDataAPI.cardPayment.getAuthenticatedSource("pk_live_vZtwJ2C0mPQs55shQOZtruWI",t&&0<t.length?t[0].amountDue:z.totalBill,!0,z).done(function(I){setTimeout(function(){showPopup("Payment method updated!","Your payment method for future payments was successfully updated.",!0);D(!0)},300)}).fail(function(I){setTimeout(function(){showPopup("Payment issue",I,!0)},300)}).always(function(){ha=!1})}},R=function(z){F();
var I=function(K){D(!0);setTimeout(function(){showErrorPopup()},500)};network.request({path:"service/stripe",type:"getHostedInvoice",subscriptionId:z,dashboard:"data"}).done(function(K){K.url&&0<K.url.length?window.location.href=K.url:I(K)}).fail(function(K){I(K)})},Y=function(z){return z.elements().create("card",{style:{base:{iconColor:"#8898AA",color:"#000",lineHeight:"36px",fontWeight:300,fontSize:"1rem","::placeholder":{color:"rgba(0, 0, 0, 0.6)"}},invalid:{iconColor:"#e85746",color:"#e85746"}},
hidePostalCode:!0})},ja=function(z,I,K,A,J,S,v,p){priceDataAPI.cardPayment.getAuthenticatedSource("pk_live_vZtwJ2C0mPQs55shQOZtruWI",K,!1,A,J,S).done(function(H){z.isNewSubscription&&V(I);ra(z,I,A,v,p)}).fail(function(){}).always(function(){})},ra=function(z,I,K,A,J){var S={path:"service/stripe",type:"subscription",content:JSON.stringify(K),dashboard:"data"};z.isNewSubscription||(S.subscriptionId=K.subscriptionId);isTest&&console.log(S);network.request(S).done(function(v){z.isNewSubscription&&(busy=
!1);console.info("payment 9a data...",v);var p=function(B){var E=material.getButton("closePopup","Attempt payment again","credit-card",null,!1,!1),U='<section><span class"tomato">Your credit card could not be charged. '+(null!=B.errorMsg?B.errorMsg:"")+"</span></section>",ka=null;z.isNewSubscription?(300<=B.code&&(U=405==B.code?'<div><span class"tomato">The coupon code you have entered is not valid.</span></div>':'<div><span class"tomato">'+(B.errorMsg?B.errorMsg:"")+" Your order was aborted and your credit card could not be charged. Please repeat the process with a valid credit card. We accept Visa, MasterCard and American Express.</span></div>"),
ka=showPopPopup("Error processing payment",U+"<br><div>"+E+"</div>",!0),ba(I)):replaceHtml("updateDataPopupWrapper",U+"<div>"+E+"</div>");addon();var ma=!1;$("#closePopup").on("click",function(na){na.preventDefault();null!=B.url&&(window.open(B.url),ma=!0);ka&&ka.close();A.resolve({updated:ma})})},H=function(B){if(z.isNewSubscription){var E="";B.couponMsg&&(E='<br><div style="color:darkgreen">'+B.couponMsg+"</div><br>");B='<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div style="color:#00b753; font-size: 16px;"><i class="fa fa-check-circle-o" ></i>&emsp;Thank you for subscribing!</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<br>You have successfully signed up for the Data subscription with the account: <span style="color:#00b753;font-weight:bold;">'+
storage.username+"</span><br><br>\n\t\t\t\t\t\t\t\t\t\t\t\t\tOnce we have processed the payment your subscription will be activated. This usually takes less than a minute. You might have to reload Keepa.<br>\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+E+"<br>\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+infoQuotaGeneral+"\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>";$("#"+I).html(B);$("#formContent").html("");if(B=storage.showGraphs){B=JSON.parse(B);for(var U in CsvType)"object"===typeof CsvType[U]&&graphIsRestricted(Number(storage.domain),
CsvType[U].index,!0)&&![CsvType.EBAY_NEW_SHIPPING.index,CsvType.EBAY_USED_SHIPPING.index].includes(Number(CsvType[U].index))&&(B[CsvType[U].index]=1);storage.showGraphs=JSON.stringify(B);storage.moreData=1;storage.showSalesRankGraph=1;settings.send()}null!==J&&J(!0)}else L(B)},L=function(B){var E=material.getButton("closePopup","Ok, close","window-close",null,!1,!1),U=!0,ka="";300<=B.code?(U=!1,ka='<section><span class"tomato">Your order was aborted. Your credit card could not be charged. Please repeat the process with a valid credit card.</span></section>'):
ka=z.isSwitchToYearly?"<section>Thank you for switching to the yearly Data subscription!<br><br>Your new billing term is yearly.</section>":z.isUpgrade?"<section>Thank you for your purchase!<br><br>Once we have processed the payment your Data access will be updated. <strong>This will take a couple of minutes!</strong></section>":"<section>Your downgrade has been successful and takes affect immediately.</section>";replaceHtml("updateDataPopupWrapper",ka+"<div>"+E+"</div>");$("#loadingIconPopup").hide();
addon();$("#closePopup").on("click",function(ma){ma.preventDefault();A.resolve({updated:U})})};if(300<=v.code||null!=v.errorMsg)p(v);else if(null==v.paymentIntent)H(v),z.isNewSubscription&&ba(I);else switch(v.paymentIntent.status){case "succeeded":H(v);z.isNewSubscription&&ba(I);break;case "requires_payment_method":p(v);z.isNewSubscription&&ba(I);break;case "requires_action":console.info("payment 10..."),priceDataAPI.loadStripe("pk_live_vZtwJ2C0mPQs55shQOZtruWI").done(function(B){console.info("payment 11...");
B.handleCardPayment(v.paymentIntent.clientSecret).then(function(E){z.isNewSubscription&&ba(I);console.info("payment 12...");E.error?(v.errorMsg=z.isNewSubscription||E.error.message?E.error.message:E.error,p(v)):H(v)})}).fail(function(){z.isNewSubscription&&ba(I);showErrorPopup()})}}).fail(function(v){console.info(v.status);z.isNewSubscription?($("#formContent").html(""),$("#"+I).html(v.errorMsg||la._error),ba(I)):(A.resolve({updated:!1}),setTimeout(function(){showErrorPopup()},500))})},ta=function(z){isTest&&
console.info("%cinitCheckout sub:","color:orange",z);var I=network.request({path:"service/stripe",type:"location",dashboard:"data"});network.request({path:"service/stripe",type:"countries",dashboard:"data"}).done(function(K){I.done(function(A){var J="";showReferencePrice(z.currencyDomainId)&&(J=", ~ "+Money.format(z.price,{sourceDomainId:z.currencyDomainId}));J=z.priceFormatted+" (incl. VAT"+J+")";showPopup(z.name+" - Subscription",'<div id="formContent"></div>'+pa(K.countries,A.json?tryParseJSON(A.json):
null,z,J,function(){})+'<div style="width=300px" id="loadingIconPopup"></div>',!0).promise.always(function(){D(!0)})})}).fail(function(){showErrorPopup()})},pa=function(z,I,K,A,J){if(0<$("#checkoutForm").length)return null;if(2!=storage.accountType)return"<div>Before you can continue you have to sign in.</div>";if(!storage.email||-1==storage.email.indexOf("@")||!settings.isEmailVerified)return"<div>"+la._428+"</div>";var S=$.Deferred(),v=material.getRadio("monthly","19 \u20ac / Month",!0,"interval"),
p=material.getRadio("yearly","189 \u20ac / Year",!1,"interval"),H=material.getRadio("individual","Individual",!0,"bcb"),L=material.getRadio("business","Business",!1,"bcb"),B='<div style="width: 204px;"> '+material.getInput(!0,".*\\S{3,}.*","formName","Full name","billing name","name","required",!1,!0)+"</div>",E='<div style="width: 384px;">'+material.getInput(!0,".*\\S{2,}.*","formAddress","Address","billing street-address","ship-address","billing address is required",!1,!0)+"</div>",U="<div>"+material.getInput(!0,
".*\\S{2,}.*","formCity","City","billing address-level2","ship-city","City is required",!1,!0)+"</div>",ka="<div>"+material.getInput(!0,".*\\S{2,}.*","formPostcode","Postal code","billing postal-code","ship-zip","billing ZIP / postal code",!1,!0)+"</div>",ma=O(!1,"card-element"),na=[];for(W in priceDataAPI.statesUS)na.push({value:W,label:W});na='<div style="margin-top:12px;" id="formStateWrapper">'+material.getSelect("formState","billing-state","",na,"State",!1,!0)+"</div>";I=material.getCountrySelect(z,
I?I.country:"");var W=material.getCheckbox("terms",'I have read and accept the <a style="cursor: alias !important;"  id="terms" class="href" >Terms and Conditions</a>.',!1,!0,"terms");var ya=material.getInput(!1,verifyRegExp.vatId.source,"formVatId","VAT ID","billing vat-id","vatId","e.g. DE999999999",!1,!1),Aa=material.getButton("submitCheckout","Subscribe now","lock"),Da=A+" every month",va=A.replace("incl.","excl.")+" every month";A='<form id="checkoutForm" style="width: 600px; display:none">\n\t\t\t\t\t\t'+
(n&&n.hasActiveSubscription&&n.hasOnlyAPISubscription?'<p><span style="color:#3cb371;font-weight:bold;">\n\t\t\t\tYou have automatically been granted access to our Data features via your currently active API subscription. No need to subscribe.</span><br>\n\t\t\t\tIn case you need to increase your daily quota you can of course subscribe to additional packages.<br><br>\n\t\t\t</p>':"")+'\n\t\t\t\t\t\t<section id="b2bRadio" >'+H+L+'<span class="sub_hint sub_hint--radio" title="Only required for tax purposes. Both offer the same features."><i class="fa fa-question-circle"></i></span></section>\n\t\t\t\t\t\t<div class="flex" style="justify-content: space-between;">'+
B+E+'</div>\n\t\t\t\t\t\t<div class="flex" style="justify-content: space-between;">'+I+'<div class="flex" style="width: 384px;justify-content: space-between;">'+U+ka+na+"</div></div>\n\t\t\t\t\t\t"+ya+'\n\t\t\t\t\t\t<div id="vatIdErrors" style="display:none;"></div>\n\t\t\t\t\t\t'+ma+'\n\t\t\t\t\t\t<section id="intervalRadio" >'+v+p+'</section>\n\t\t\t\t\t\t<div class="flex" style="justify-content: space-between;">'+W+Aa+'</div>\n\t\t\t\t\t\t<aside class="mdc-typography--subtitle2" style="margin-top: 10px;color: brown;"><i class="fa fa-exclamation" ></i>&emsp;\nYou will be charged <span id="subPrice"> '+
(Da+"</span>.\n</aside> <div>Cancellation of the subscription is possible at any time and will end the subscription at the end of the term. The subscription will automatically renew unless cancelled and all payments are non-refundable.</div>\n\t\t\t\t\t</form>");material.init("#checkoutForm");setTimeout(function(){var za=$("#checkoutForm");za.find(".sub_hint").colorTip({color:"blue"});var Ha=$("#b2bRadio"),ea=$("#intervalRadio"),ia=$("#countrySelect"),ua=0,fa=function(){var oa="business-radio"==Ha.find(":checked")[0].id,
G=oa&&z[ia.find(":selected")[0].id].isEU;$("#formVatId").parent()[G?"slideDown":"hide"](ua);$("#formVatId-validation-msg")[G?"slideDown":"hide"](ua);$("#formName").next("label").text(oa?"Company":"Full name");G="yearly-radio"==ea.find(":checked")[0].id;$("#subPrice").text(G?oa?"189 \u20ac (excl. VAT) every year":"189 \u20ac (incl. VAT) every year":oa?va:Da);$("#vatIdErrors").hide();oa="US"==$(ia.find(":selected")).attr("id");G=$("#formStateWrapper");var X=G.find("select");oa?(X.prop("disabled",!1),
X.prop("required",!0),G.css({visibility:"visible"})):(X.val(""),X.prop("disabled",!0),X.prop("required",!1),G.css({visibility:"hidden"}))};[Ha,ia].map(function(oa){return oa.on("change",fa)});ea.on("change",function(){var oa="yearly-radio"==ea.find(":checked")[0].id,G="business-radio"==Ha.find(":checked")[0].id;$("#subPrice").text(oa?G?"189 \u20ac (excl. VAT) every year":"189 \u20ac (incl. VAT) every year":G?va:Da);oa?$("#formCoupon").parent().children().hide("slow"):$("#formCoupon").parent().children().show("slow")});
fa();za.fadeIn("slow");ua=250;priceDataAPI.loadStripe("pk_live_vZtwJ2C0mPQs55shQOZtruWI").done(function(oa){var G=Y(oa);G.mount("#card-element");za.on("submit",function(X){X.preventDefault();V("checkoutForm");$("#vatIdErrors").hide();X="yearly-radio"==ea.find(":checked")[0].id;var aa={payedService:X?"Data_Access_Year_19":K.sku,paymentProvider:"CreditCard",coupon:X?"":za.find("#formCoupon").val(),billingContact:za.find("#formName").val().trim(),billingStreet:za.find("#formAddress").val().trim(),billingCity:za.find("#formCity").val().trim(),
billingZipCode:za.find("#formPostcode").val().trim(),billingState:za.find("#formState").val(),billingCountry:za.find("#countrySelect").find(":selected")[0].getAttribute("data-country"),billingVatId:za.find("#formVatId").val().replace(/[-,;_:#. ]/g,""),billingBusiness:"business-radio"==Ha.find(":checked")[0].id};!0!==aa.billingBusiness&&(aa.billingVatId="");X=za.find("#countrySelect").find(":selected")[0].id;!0!==z[X].isEU&&(aa.billingVatId="");var da={billingContact:"formName",billingStreet:"formAddress",
billingCity:"formCity",billingZipCode:"formPostcode"},qa=!0;["billingContact","billingStreet","billingCity","billingZipCode"].forEach(function(Ca){if(aa[Ca].length<("billingContact"===Ca?3:2)){qa=!1;Ca=da[Ca];var Ba=$("#"+Ca);document.querySelector("#"+Ca).parentNode.MDCTextField.value="";Ba.attr("required",!0)}});var xa=!0;!0!==za.find("#terms-checkbox").prop("checked")&&(xa=!1);if(qa&&xa){var wa=$("#vatIdErrors");priceDataAPI.validateVatIdPromise({paymentIntentRequest:aa,countryCode:X,isEu:z[X].isEU}).done(function(Ca){isTest&&
console.info("%cvalidationPromiseResult:","color:orange",Ca);null==Ca||!0!==Ca.success?(priceDataAPI.handleValidateVatIdError(Ca,$("#vatIdErrors")),ba("checkoutForm")):!0===Ca.valid&&0===Ca.invalidFields.length?(isTest&&(!0===Ca.validationNeeded?console.info("%cVatId:","color:green","everything is valid - proceed with createSource..."):console.info("%cVatId:","color:green","no validation needed - proceed with createSource...")),ja({isNewSubscription:!0,isUpgrade:!1,isSwitchToYearly:!1},"checkoutForm",
Number(K.price),aa,G,za.find("#formName").val().trim(),S,J)):(wa.html(Ca.msg),wa.show(),ba("checkoutForm"))}).fail(function(Ca){priceDataAPI.handleValidateVatIdError(Ca,wa);ba("checkoutForm")});return!1}ba("checkoutForm")})});$("#terms").on("click",function(oa){oa.preventDefault();w();return!1})},0);return A},ca=function(z){var I=function(A,J){var S=sa(A),v=showPopup(1<A.quantity?"Upgrade / Downgrade Data Access subscription":"Upgrade Data Access subscription",S.html+'<div style="width=300px" id="loadingIconPopup"></div>',
!0);addon();S.onUpdate.done(function(p){v.promise.resolve(p)});v.promise.done(function(p){v.close();addon();!0===p.updated&&(J?getBucketInformation():D(!0))}).fail(function(p){})};if(z){var K=a[z];"undefined"===typeof K?isTest&&console.info("%cSub is undefined!","color:red; ",z):I(K)}else M().done(function(){var A,J;for(J in a)!0===a[J].subscribed&&(A=a[J]);I(A,!0)})},sa=function(z){for(var I=$.Deferred(),K=z.cancel_at_period_end,A="undefined"===typeof storage.email||""===storage.email||0===storage.email.length,
J=24192E5>Date.now()-q,S=z.quantity,v=[],p=J?S:1;60>=p;p++)(K||A)&&S!==p||v.push({value:p,label:p});p=100*S;var H=Money.format((1500==z.price?1900:14900==z.price?18900:z.price)*S,{sourceDomainId:z.currencyDomainId,targetDomainId:z.currencyDomainId,noDigits:!0,forceEuropeanStyle:!0});v=material.getSelect("dataQuantity","dataQuantity",S,v,!1,!0);var L=material.getButton("updateDataSubmit",1<S?"Upgrade / Downgrade now":"Upgrade now",null,"refresh"),B=material.getButton("cancelUpdate","Cancel","ban",
null,!1,!0),E="You can add additional Data Access subscriptions to increase your daily quota and/or allow additional users to share your account. Each additional person requires another plan.\n\t\t\t<br><br>Currently you have <b>"+S+"</b> subscription"+(1<S?"s":"")+".";1<S&&(E+=J?"<br><div>You can only downgrade once per month. You can not downgrade again.</div>":"<br>To downgrade decrease the number of subscriptions.");J=O(!1,"card-element");K='<div id="updateDataPopupWrapper" class="updatedata">\n                <form id="checkoutForm">\n                    <section>'+
(K?"As your Data Access subscription is cancelled you cannot edit it. You need to subscribe anew once the current period is over.":E)+"</section>\n                    "+(A?'<section style="color:#ff4500;">In order to upgrade / downgrade your subscription your email address is required. You can add it <a href="https://keeepa.amztoolz.com/#!channels/" class="href">here</a>.</section>':"")+"\n                    <section>Quantity:&emsp;"+v+'&emsp;<span class="updatedata__quota highlight">= '+p+'% Quota</span></section>\n                    <section>Your <span class="updatedata__pricehint">current</span> '+
z.interval+'ly subscription fee:&emsp;<span class="updatedata__price highlight">'+H+"</span> / "+z.interval+'</section>\n                    <section id="proration" class="hidden"></section>\n                    <section id="card-element-update-wrapper" style="display:none;">'+J+"</section>\n                    <div>"+L+"&emsp;"+B+"</div>\n                    "+("month"===z.interval?'<section class="mdc-typography--caption" style="color:tomato; margin-top: 30px;"><hr class="hr -tomato" /><i class="fa fa-info-circle"></i>\n                Important note: This does not change your monthly plan to a yearly plan. An upgrade increases your\n                daily quota.<br>\n                To convert to a yearly payment click on \u201cSwitch to yearly\u201d on your subscription dashboard. \n                Switching will use your remaining time on your monthly term and apply a prorated credit to the \n                yearly fee.<br>\n                Please note: It is not possible to switch back to a monthly billing cycle during a yearly term.<br>\n                If you have questions please contact us at <a class="href" href="mailto:info@keepa.com">info@keepa.com</a>.\n            </section>':
"")+"\n                </form>\n            </div>";material.init("#checkoutForm");setTimeout(function(){var U=$("#checkoutForm"),ka=$("#updateDataSubmit"),ma=$("#cancelUpdate");ka.prop("disabled",!0);var na=$("#dataQuantity"),W=H;na.on("change",function(){var Da=Math.max(Math.min(Number($(this).val()),60),1),va=100*Da;W=Money.format((1500==z.price?1900:14900==z.price?18900:z.price)*Da,{sourceDomainId:z.currencyDomainId,targetDomainId:z.currencyDomainId,noDigits:!0,forceEuropeanStyle:!0});$(".updatedata__quota").text("= "+
va+"% Quota");$(".updatedata__price").text(W);$(".updatedata__pricehint").text(Da===S?"current":"new");ka.prop("disabled",Da===S||1>Da);replaceHtml("proration","");$("#proration").hide();addon();$("#card-element-update-wrapper").hide();Da!=S&&Aa()});$("#cancelUpdate").on("click",function(Da){Da.preventDefault();I.resolve({updated:!1})});var ya={},Aa=function(){var Da=Math.max(Math.min(Number(na.val()),60),1);na.prop("disabled",!0);ka.prop("disabled",!0);ma.prop("disabled",!0);var va=function(za){if(null==
za||0==za[0].length||null==za[0])showErrorPopup();else{za=za[0];for(var Ha=0,ea=0,ia="",ua="",fa=0;fa<za.lines.data.length-1;fa++){var oa=za.lines.data[fa];oa.subscription==z.subscriptionId&&(oa.description=oa.description.replace(". Provides access to all features of the Data section",""),0>oa.amount?(ia=oa.description,Ha=-1*oa.amount):(ua=oa.description,ea=oa.amount))}za=-Ha+ea;Ha=Money.format(Ha,{sourceDomainId:3,targetDomainId:3,forceEuropeanStyle:!0});ea=Money.format(ea,{sourceDomainId:3,targetDomainId:3,
forceEuropeanStyle:!0});za=Money.format(za,{sourceDomainId:3,targetDomainId:3,forceEuropeanStyle:!0});replaceHtml("proration","<ul>"+((S>Da?'<li>You will receive a credit in your account of:&emsp;<span class="highlight">'+za+"</span></li>\n\t\t\t\t\t\t\t<li>&bull;&emsp;This credit will be applied to future invoices (<strong>no refund possible</strong>).</li>":'<li>Immediate amount due:&emsp;<span class="highlight">'+za+'</span>&emsp;<i class="fa fa-question" title="\n\t\t\t\t\t\t\t<p><span>Refund:</span>'+
(Ha+" - "+ia+"</p>\n\t\t\t\t\t\t\t<p><span>Prorated charge:</span>"+ea+" - "+ua+'</p>\n\t\t\t\t\t\t"></i></li>\n\t\t\t\t\t\t\t<li>&bull;&emsp;The updated Quota limit will take effect immediately after we have received payment.</li>'))+"<li>&bull;&emsp;You can upgrade your Data access as often as you want, but a downgrade is only possible once per month.</li></ul>"));$("#proration").show();S>Da?$("#card-element-update-wrapper").hide():$("#card-element-update-wrapper").show();addon();$(".fa-question").colorTip({color:"blue"});
na.prop("disabled",!1);ka.prop("disabled",Da===S||1>Da);ma.prop("disabled",!1)}};ya[Da]?va(ya[Da]):network.request({path:"service/stripe",type:"upcomingInvoice",subscriptionId:z.subscriptionId,subscriptionPlan:"Data_Access"==z.sku?"Data_Access_19":"Data_Access_Year"==z.sku?"Data_Access_Year_19":z.sku,quantity:Da,dashboard:"data"}).done(function(za){ya[Da]=za.invoices;va(za.invoices)}).fail(function(){I.resolve({updated:!1});setTimeout(function(){showErrorPopup()},500)})};priceDataAPI.loadStripe("pk_live_vZtwJ2C0mPQs55shQOZtruWI").done(function(Da){var va=
Y(Da);va.mount("#card-element");U.on("submit",function(za){za.preventDefault();V("checkoutForm");za=g.find(function(Ha){return Ha.subscriptionId==z.subscriptionId});"undefined"===typeof za?(I.resolve({updated:!1}),setTimeout(function(){showErrorPopup()},500)):(za.quantity=Math.max(Math.min(Number(na.val()),60),1),za.quantity>S?ja({isNewSubscription:!1,isUpgrade:!0,isSwitchToYearly:!1},"checkoutForm",null,za,va,za.billingContact,I,null):ra({isNewSubscription:!1,isUpgrade:!1,isSwitchToYearly:!1},"checkoutForm",
za,I,null))})})},0);return{onUpdate:I.promise(),html:K}},Z=function(z){var I=function(A,J){if("Data_Access_Year"!=A.sku&&"Data_Access_Year_19"!=A.sku){A=N(A);var S=showPopup("Change billing cycle to yearly",A.html+'<div style="width=300px" id="loadingIconPopup"></div>',!0);addon();A.onUpdate.done(function(v){S.promise.resolve(v)});S.promise.done(function(v){S.close();addon();!0===v.updated&&(J?getBucketInformation():D(!0))}).fail(function(v){})}};if(z){var K=a[z];"undefined"===typeof K?isTest&&console.info("%cSub is undefined!",
"color:red; ",z):I(K)}else M().done(function(){var A,J;for(J in a)!0===a[J].subscribed&&(A=a[J]);I(A,!0)})},N=function(z){var I=$.Deferred(),K=z.cancel_at_period_end,A="undefined"===typeof storage.email||""===storage.email||0===storage.email.length,J=material.getButton("updateDataSubmit","Switch to yearly now",null,"refresh"),S=material.getButton("cancelUpdate","Cancel","ban",null,!1,!0),v=O(!1,"card-element");K='<div id="updateDataPopupWrapper" class="updatedata">\n                <form id="checkoutForm">\n                    <section>'+
(K?"As your Data Access subscription is cancelled you cannot edit it. You need to subscribe anew once the current period is over.":"Save 20% on your subscription fees by switching to the yearly billing cycle. Switching now will use your remaining time on your monthly term and apply a prorated credit to the yearly fee.")+"</section>\n                    "+(A?'<section style="color:#ff4500;">In order to edit your subscription your email address is required. You can add it <a href="https://keeepa.amztoolz.com/#!channels/" class="href">here</a>.</section>':
"")+'\n                    <section id="proration" class="hidden"></section>\n                    <section id="card-element-update-wrapper" style="display:none;">'+v+"</section>\n                    <div>"+J+"&emsp;"+S+'</div>\n                    <section class="mdc-typography--caption" style="color:tomato; margin-top: 30px;"><hr class="hr -tomato" /><i class="fa fa-info-circle"></i>\n\t\t\t\t\t\tImportant note: Cancellation is possible at any time. All payments are non-refundable. It is not possible to switch back to a monthly billing cycle during a yearly term.\n\t\t\t\t\t\t<br>If you have questions please contact us at <a class="href" href="mailto:info@keepa.com">info@keepa.com</a>.</section>\n                </form>\n            </div>';
material.init("#checkoutForm");setTimeout(function(){var p=$("#checkoutForm"),H=$("#updateDataSubmit"),L=$("#cancelUpdate");H.prop("disabled",!0);L.on("click",function(E){E.preventDefault();I.resolve({updated:!1})});H.prop("disabled",!0);L.prop("disabled",!0);var B=function(E){if(null==E||0==E[0].length||null==E[0])showErrorPopup();else{E=E[0];for(var U=0,ka=0,ma="",na="",W=0;W<E.lines.data.length;W++){var ya=E.lines.data[W];ya.subscription==z.subscriptionId&&(ya.description=ya.description.replace(". Provides access to all features of the Data section",
""),0>ya.amount?(ma=ya.description,U=-1*ya.amount):(na=ya.description,ka=ya.amount))}W=-U+ka;U=Money.format(U,{sourceDomainId:3,targetDomainId:3,forceEuropeanStyle:!0});ka=Money.format(ka,{sourceDomainId:3,targetDomainId:3,forceEuropeanStyle:!0});ya=Money.format(W,{sourceDomainId:3,targetDomainId:3,forceEuropeanStyle:!0});E=Money.format(E.lines.data[E.lines.data.length-1].amount,{sourceDomainId:3,targetDomainId:3,forceEuropeanStyle:!0});replaceHtml("proration",'\n                        <section>Your new subscription fee:&emsp;<span class="updatedata__price highlight">'+
E+"</span> / Year</section>\n                        <ul>"+(0>=W?'<li>You will receive a credit in your account of:&emsp;<span class="highlight">'+ya+"</span></li>\n\t\t\t\t\t\t\t<li>&bull;&emsp;This credit will be applied to future invoices (<strong>no refund possible</strong>).</li>":'<li>Immediate amount due:&emsp;<span class="highlight">'+ya+'</span>&emsp;<i class="fa fa-question" title="\n\t\t\t\t\t\t\t<p><span>Refund:</span>'+(U+" - "+ma+"</p>\n\t\t\t\t\t\t\t<p><span>Prorated charge:</span>"+
ka+" - "+na+'</p>\n\t\t\t\t\t\t"></i></li>'))+"</ul>\n\t\t\t\t\t");$("#proration").show();$("#card-element-update-wrapper").show();addon();$(".fa-question").colorTip({color:"blue"});H.prop("disabled",!1);L.prop("disabled",!1);priceDataAPI.loadStripe("pk_live_vZtwJ2C0mPQs55shQOZtruWI").done(function(Aa){var Da=Y(Aa);Da.mount("#card-element");p.on("submit",function(va){va.preventDefault();V("checkoutForm");va=g.find(function(za){return za.subscriptionId==z.subscriptionId});"undefined"===typeof va?(I.resolve({updated:!1}),
setTimeout(function(){showErrorPopup()},500)):(va.payedService="Data_Access_Year_19",ja({isNewSubscription:!1,isUpgrade:!1,isSwitchToYearly:!0},"checkoutForm",null,va,Da,va.billingContact,I,null))})})}};network.request({path:"service/stripe",type:"upcomingInvoice",subscriptionId:z.subscriptionId,subscriptionPlan:"Data_Access_Year_19",quantity:z.quantity,dashboard:"data"}).done(function(E){B(E.invoices)}).fail(function(){I.resolve({updated:!1});setTimeout(function(){showErrorPopup()},500)})},0);return{onUpdate:I.promise(),
html:K}},f=function(z){if(z){var I=a[z];"undefined"===typeof I?isTest&&console.info("%cSub is undefined!","color:red; ",z):network.request({path:"service/stripe",type:"countries",dashboard:"data"}).done(function(K){K=C(I,K.countries);var A=showPopup("Update invoice address",K.html+'<div style="width=300px" id="loadingIconPopup"></div>',!0);K.onUpdate.done(function(J){A.promise.resolve(J)});A.promise.done(function(J){A.close();!0===J.updated&&D(!0)}).fail(function(J){})}).fail(function(){showErrorPopup()})}},
C=function(z,I){for(var K=$.Deferred(),A=null,J=0;J<g.length;J++){var S=g[J];if(S.subscriptionId==z.subscriptionId){A=S;break}}var v=Object.values(I).find(function(na){return na.name===A.billingCountry});J=material.getButton("updateBillingAddressSubmit","Update invoice address","book");S=material.getButton("cancelBillingAddress","Cancel","ban",null,!1,!0);var p=material.getRadio("individual","Individual",!0!==A.billingBusiness,"bcb"),H=material.getRadio("business","Business",!0===A.billingBusiness,
"bcb"),L='<div style="width: 204px;"> '+material.getInput(!0,".*\\S{3,}.*","formName","Full name","billing name","name","required",!1,!0,"",A.billingContact)+"</div>",B='<div style="width: 384px;">'+material.getInput(!0,".*\\S{2,}.*","formAddress","Address","billing street-address","ship-address","billing address is required",!1,!0,"",A.billingStreet)+"</div>",E="<div>"+material.getInput(!0,".*\\S{2,}.*","formCity","City","billing address-level2","ship-city","City is required",!1,!0,"",A.billingCity)+
"</div>",U="<div>"+material.getInput(!0,".*\\S{2,}.*","formPostcode","Postal code","billing postal-code","ship-zip","billing ZIP / postal code",!1,!0,"",A.billingZipCode)+"</div>",ka=[];for(ma in priceDataAPI.statesUS)ka.push({value:ma,label:ma});var ma='<div style="margin-top:12px;" id="formStateWrapper">'+material.getSelect("formState","billing-state",A.billingState?A.billingState:"",ka,"State",!1,!0)+"</div>";v=material.getCountrySelect(I,v?v.id:"");ka=material.getInput(!1,verifyRegExp.vatId.source,
"formVatId","VAT ID","billing vat-id","vatId","e.g. DE999999999",!1,!1,"",A.billingVatId);J='<div id="updateBillingAddressPopupWrapper" style="width: 600px;">\n\t\t\t\t<section style="margin-bottom: 12px;">Changes to your invoice address will only apply to future invoices.<br>If you have questions please contact us at <a class="href" href="mailto:info@keepa.com">info@keepa.com</a>.</section>\n\t\t\t\t<form id="updateBillingAddressForm" style="width: 600px;">\n\t\t\t\t\t<section id="b2bRadio" >'+p+
H+'<span class="sub_hint sub_hint--radio" title="Only required for tax purposes. Both offer the same features."><i class="fa fa-question-circle"></i></span></section>\n\t\t\t\t\t<div class="flex" style="justify-content: space-between;">'+L+B+'</div>\n\t\t\t\t\t<div class="flex" style="justify-content: space-between;">'+v+'<div class="flex" style="width: 384px;justify-content: space-between;">'+E+U+ma+"</div></div>\n\t\t\t\t\t"+ka+'\n\t\t\t\t\t<div id="vatIdErrors" style="display:none;"></div>\n\t\t\t\t\t<div>'+
J+"&emsp;"+S+"</div>\n\t\t\t\t</form>\n\t\t\t</div>";material.init("#updateBillingAddressForm");setTimeout(function(){var na=$("#updateBillingAddressForm"),W=$("#b2bRadio"),ya=$("#countrySelect"),Aa=0,Da=function(){var va="business-radio"==W.find(":checked")[0].id,za=va&&I[ya.find(":selected")[0].id].isEU;$("#formVatId").parent()[za?"slideDown":"hide"](Aa);$("#formVatId-validation-msg")[za?"slideDown":"hide"](Aa);$("#formName").next("label").text(va?"Company":"Full name");$("#vatIdErrors").hide();
va="US"==$(ya.find(":selected")).attr("id");za=$("#formStateWrapper");var Ha=za.find("select");va?(Ha.prop("disabled",!1),Ha.prop("required",!0),za.css({visibility:"visible"})):(Ha.val(""),Ha.prop("disabled",!0),Ha.prop("required",!1),za.css({visibility:"hidden"}))};[W,ya].map(function(va){return va.on("change",Da)});Da();na.fadeIn("slow");Aa=250;na.find(".sub_hint").colorTip({color:"blue"});$("#cancelBillingAddress").on("click",function(va){va.preventDefault();K.resolve({updated:!1})});na.on("submit",
function(va){va.preventDefault();V("updateBillingAddressForm");$("#vatIdErrors").hide();var za={billingContact:na.find("#formName").val().trim(),billingStreet:na.find("#formAddress").val().trim(),billingCity:na.find("#formCity").val().trim(),billingZipCode:na.find("#formPostcode").val().trim(),billingState:na.find("#formState").val(),billingCountry:na.find("#countrySelect").find(":selected")[0].getAttribute("data-country"),billingVatId:na.find("#formVatId").val().replace(/[-,;_:#. ]/g,""),billingBusiness:"business-radio"==
W.find(":checked")[0].id};!0!==za.billingBusiness&&(za.billingVatId="");va=na.find("#countrySelect").find(":selected")[0].id;!0!==I[va].isEU&&(za.billingVatId="");var Ha={billingContact:"formName",billingStreet:"formAddress",billingCity:"formCity",billingZipCode:"formPostcode"},ea=!0;["billingContact","billingStreet","billingCity","billingZipCode"].forEach(function(ua){if(za[ua].length<("billingContact"===ua?3:2)){ea=!1;ua=Ha[ua];var fa=$("#"+ua);document.querySelector("#"+ua).parentNode.MDCTextField.value=
"";fa.attr("required",!0)}});if(ea){var ia=$("#vatIdErrors");priceDataAPI.validateVatIdPromise({paymentIntentRequest:za,countryCode:va,isEu:I[va].isEU}).done(function(ua){isTest&&console.info("%cvalidationPromiseResult:","color:orange",ua);null==ua||!0!==ua.success?(priceDataAPI.handleValidateVatIdError(ua,$("#vatIdErrors")),ba("updateBillingAddressForm")):!0===ua.valid&&0===ua.invalidFields.length?(isTest&&(!0===ua.validationNeeded?console.info("%cVatId:","color:green","everything is valid - proceed with editAddressSubscription..."):
console.info("%cVatId:","color:green","no validation needed - proceed with editAddressSubscription...")),network.request({path:"service/stripe",type:"editAddressSubscription",content:JSON.stringify(za),subscriptionId:z.subscriptionId,dashboard:"data"}).done(function(fa){isTest&&console.log(fa);fa=material.getButton("closePopup","Ok, close","window-close",null,!1,!1);na.html('<p style="color:#00b753;margin:2em 0;">You invoice address has been successfully updated.</p><br><div>'+fa+"</div>");ba("updateBillingAddressForm");
$("#closePopup").on("click",function(oa){oa.preventDefault();K.resolve({updated:!0})})}).fail(function(fa){na.html(la._error);ba("updateBillingAddressForm")})):(ia.html(ua.msg),ia.show(),ba("updateBillingAddressForm"))}).fail(function(ua){priceDataAPI.handleValidateVatIdError(ua,ia);ba("updateBillingAddressForm")})}else ba("updateBillingAddressForm")})},0);return{onUpdate:K.promise(),html:J}},V=function(z){$("#"+z).hide();$("#loadingIconPopup").show()},ba=function(z){$("#"+z).show();$("#loadingIconPopup").hide()},
w=function(){network.ajax(CDNUrl+"termsSubscriptions.txt?"+(new Date).getDate()).done(function(z){showPopPopup("Terms and Conditions",'<div id="printTerms" style="cursor: pointer; z-index: 1; position: absolute; right: 50px;top: 10px;"><i class="fa fa-print"></i> Print Terms</div><div id="termsAPI" style="padding-right: 20px; text-align:justify; width: 1000px;height:'+(window.innerHeight-200)+'px;overflow-y: auto;">'+z+"</div>",!0);$("#printTerms").on("click",function(I){I=window.open("","Terms and Conditions",
"height=800,width=1000");I.document.write("<html><head><title>Terms and Conditions for Keepa.com's Data Subscription</title>");I.document.write("</head><body >");I.document.write($("#termsAPI").html());I.document.write("</body></html>");I.document.close();I.focus();I.print();I.close()})}).fail(showErrorPopup)},O=function(z,I){I='<div style="width: 300px;">\n                <label><span>Credit Card</span><div id="'+I+'" style="border-bottom: 1px solid #e2e2e2 !important;" class="field"></div></label>\n            </div>';
z=z?'<div style="margin-top:-8px;">\n                '+material.getInput(!1,".{4,}","formCoupon","Coupon code","","coupon-code","Leave empty if you have no valid coupon code.",!1,!0,"margin-top: 8px;")+"\n            </div>":"";return'<div class="flex" style="justify-content: space-between;">\n                '+I+'<div class="stripeForm" id="cardForm">\n                <div class="outcome2">\n                    <div class="error" role="alert"></div>\n                    <div class="success">Success!</div>\n                </div>\n            </div>'+
z+'\n            </div>\n            <div class="mdc-typography--caption" style="margin:8px 0 4px;">\n                <i class="fa fa-info-circle" style="color: #444;"></i>&emsp;We currently only accept the following credit/debit cards: Visa, Mastercard & American Express\n            </div>'};return{init:D,initUpdateData:ca,reset:u}}(),createCreditCard=function(a){var b="";if(null!=a)switch(a.type||a.object){case "card":a=a.typeData?a.typeData:a.card?a.card:a;var d=a.brand,g="credit-card";"Visa"==
d?(d="",g="cc-visa"):"MasterCard"==d?(d="",g="cc-mastercard"):"Diners Club"==d?(d="",g="cc-diners-club"):"JCB"==d?(d="",g="cc-jcb"):"Discover"==d?(d="",g="cc-discover"):"American Express"==d&&(d="",g="cc-amex");b+='<br><div><span style="color:black">Payment method:</span>&ensp;<span><i class="legendColorBox fa fa-'+(g+' fa-22" ></i> ')+d+" ending with "+a.last4+" (exp: "+a.expMonth+"/"+a.expYear+')</span>&emsp;<i class="editCard fa fa-pencil fa-lg darkgrey" id="editCC" title="edit credit card"></i>&emsp;<i class="editCard fa fa-trash-o fa-lg darkgrey" id="removeCC" title="remove credit card"></i></div>'}else b+=
'<br><div><i class="legendColorBox fa fa-exclamation-triangle fa-lg red" ></i>&emsp;<span class="href" id="addCC">No payment method is attached to your account. Click here to add new a payment method.</span></div>';return b},tabBars,SettingsPage=function(){var a=function(){var d=tabSwitcher();tabBars=d;$("#contentAlign").css(contentAlignCss);$("#contentAlign").css({minWidth:"900px",maxWidth:"900px"});d.listen("MDCTabBar:change",function(n){1==n.detail.activeTabIndex&&SettingsSubscription.init()});
var g=parseInt(lastSubUrl);/[0-9]/.test(g)?(1==g&&SettingsSubscription.init(),d.activeTabIndex=g,d.updatePanel(g)):"#!settings"===lastUrl&&(d.activeTabIndex=2,d.updatePanel(2));0==storage.accountType?(replaceHtml("settingsBox",'<span class="subsubHeadline2">'+la._52+"</span><br>"+la._53),$("#settingsSelect").hide(),$("#settingsBox").show(),$("#settingsTabs").css("borderTop","0px")):(SettingsNotification.init(),$("#notification-channels").attr("rel","active"),b(),isSettings=!0,insertSettings(),d.listen("MDCTabBar:change",
function(n){1==n.detail.activeTabIndex&&SettingsSubscription.init()}))},b=function(){var d=getNewPasswordHtml(),g='<div id="passCheck" ><table class="trackFormTable"><tr><td colspan="2"><label for="pwCheck">'+la._60+'</label></td></tr><tr><td class="trackFormTable-id"><input type="password" rel="ids" maxlength="1024" name="pwCheck" id="pwCheck" /><div style="padding: 10px;"></div><input type="submit" id="submitDelete" class="button" value="'+la._61+'" /></tr></table></div>';d='<section class="block--mdc-typography">\n            <p class="mdc-typography--body2"><a class="href switch-tab" data-tab="0">&raquo; '+
la._942+'</a></p>\n            <p class="mdc-typography--body2"><span class="href settings-chpw">&raquo; '+(isSocialAccount?"Create account credentials":la._63)+'</span></p>\n            <form id="addTrackForm" method="post" action="" style="display:none;">\n                '+d+'\n                <br><input type="submit" id="submit" class="button" value="'+la._64+'"><br>\n            </form>\n        </section>';var n='<section class="block--mdc-typography">\n\t\t\t<hr class="hr -tomato">';n=hasDataAccessSubscription?
n+('<div id="settingsDeletion">\n\t\t\t\t\t<p class="mdc-typography--body2"><i class="fa fa-info-circle -tomato"></i> '+la._992+'</p>\n\t\t\t\t\t<p class="mdc-typography--caption">'+la._66+"<br>\n\t\t\t\t\t"+la._940.replace('">info'," "+storage.username+'">info')+"</p>\n\t\t\t\t</div>"):n+('<div id="settingsDeletion">\n\t\t\t\t\t<p class="mdc-typography--body2">'+la._66+'<br>\n\t\t\t\t\t<span id="settingsDeleteUndo" style="display:none">'+la._67+'</span>\n\t\t\t\t\t<span id="settingsDelete">&raquo; '+
la._68+'</span>\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<form id="deleteForm" method="post" action="" style="display:none;">\n\t\t\t\t\t<p class="mdc-typography--body2">'+la._65+'</p>\n\t\t\t\t\t<p class="mdc-typography--body2">\n\t\t\t\t\t\t'+g+"\n\t\t\t\t\t</p>\n\t\t\t\t</form>");n+="</section>";network.request({path:"user/settings",type:"getSettings"}).done(function(q){q=q.user;var u='&ensp;<i title="'+la._518+'" class="fa fa-times tomato clickable fa-lg"></i>&emsp;&emsp;',D=q.twitterUsername?
'<span rel="twitterLogin"><i class="fa fa-witter fa-lg"></i>&ensp;'+q.twitterUsername+u+"</span>":"",F=q.googleUsername?'<span rel="googleLogin"><i class="fa fa-ogle"></i>&ensp;'+q.googleUsername+u+"</span>":"";u=q.amazonUsername?'<span rel="amazonLogin"><i class="fa fa-amazon"></i>&ensp;'+q.amazonUsername+u+"</span>":"";var M=q.twitterUsername||q.googleUsername||q.amazonUsername;u=M?'<span id="removeLinks"><span>'+la._514+"&emsp;</span>"+D+F+u+"</span>":"";D='<div class="borderLeft">'+u+"</div><br><br>";
M||(D="");M=$("#settingsBox");F="";null!=q.sessions&&0<q.sessions.length&&(F='<table id="sessionsList"></table>',$.getScript("//keeepa.amztoolz.com/_cdn/bowser.js").done(function(){var Q="<tr><th>"+la._956+"</th><th>"+la._957+"</th><th>"+la._958+"</th><th>"+la._959+"</th><th> </th></tr>";q.sessions.sort(function(ra,ta){return ra.lastVisit<ta.lastVisit?1:-1});for(var T=$jscomp.makeIterator(q.sessions),ha=T.next();!ha.done;ha=T.next()){ha=ha.value;var P={browser:{name:""},os:{name:""},platform:{type:""}};""===
ha.device&&(ha.device="KeepaMobile");var R="";ha.device&&(P=bowser.getParser(ha.device).parsedResult,0===ha.device.indexOf("KeepaMobile")?(R=ha.device.split(" "),1===R.length?(P.os={name:"Android / iOS",version:""},P.browser={name:"Keepa Mobile App",version:""}):(R=R[0].split("/")[1],P.browser={name:"Keepa Mobile App",version:R}),R=""+P.os.name+(P.os.version?" "+P.os.version:"")+(P.browser.name?", "+P.browser.name+(P.browser.version?" ("+P.browser.version+")":""):"")):R=""+P.os.name+(P.os.versionName?
" "+P.os.versionName:"")+(P.browser.name?", "+P.browser.name+" ("+P.browser.version+")":""));var Y=P.platform.type,ja="";if("desktop"==Y)"Windows"==P.os.name&&(Y="windows"),"Linux"==P.os.name&&(Y="linux"),"iOS"==P.os.name&&(Y="apple");else if("mobile"==Y||"tablet"==Y)ja="font-size: 23px;";Q+='<tr><td><i class="fa fa-'+(Y+' fa-lg" style="width: 15px;text-align: center;'+ja+'"></i>&emsp;')+R+'</td><td title="'+ha.ip+'">'+(ha.country||"")+"</td><td>"+(new Date(keepaTime.minutesToEpoch(ha.lastVisit))).formatDate("M j, Y %a%t G:i")+
"</td><td>"+(new Date(keepaTime.minutesToEpoch(ha.created))).formatDate(isTest?"M j, Y %a%t G:i":"M j, Y")+'</td><td class="removeDevice" data-id="'+ha.id+'"><i class="fa fa-ban fa-lg"></i> '+la._960+"</td></tr>"}$("#sessionsList").html(Q);$(".removeDevice").hover(function(){$(this).find(".fa").css({color:"red"})},function(){$(this).find(".fa").css({color:""})});$(".removeDevice").on("click",function(ra){ra.target.attributes["data-id"]&&network.request({path:"user/session",type:"deleteSession",token:ra.target.attributes["data-id"].value}).done(function(ta){if(null==
ta.error){var pa=$(ra.target).parent();pa.hide("slow",function(){pa.remove()})}else showErrorPopup()}).fail(function(ta){showErrorPopup()})})}));M.prepend(D+F);$("#removeLinks").on("click",function(Q){Q=Q.target;"colorTip"==Q.parentElement.className&&(Q=Q.parentElement.parentElement);"colorTip"==Q.className&&(Q=Q.parentElement);"I"==Q.nodeName&&(Q=$(Q).parent().attr("rel"),void 0==Q||""==Q?(showErrorPopup(),reportBug(null,"ssoremove rel is undefined")):network.request({path:"user/session",type:"ssoremove",
content:Q}).done(function(T){null==T.error?a():"nopw"==T.error.type?showPopup("No password set","You can not remove this linked external account, as your Keepa account does not have any other method of authentication. You need to set up account credentials first or add another external account.",!0):showErrorPopup()}).fail(function(T){showErrorPopup();a()}))});M.find("#openIDoogle").click(function(){var Q=getSocialLoginURL("googleLogin","","0");window.open(Q,popupName,popupSettings)});M.find("#openIDwitter").click(function(){var Q=
getSocialLoginURL("twitterLogin","","0");window.open(Q,popupName,popupSettings)});M.find("#openIDmazon").click(function(){var Q=getSocialLoginURL("amazonLogin","","0");window.open(Q,popupName,popupSettings)});$("#settingsBox .fa-times").colorTip("red")}).fail(function(q){401==q.status&&settings.reset(!1,!1)});replaceHtml("settingsBox",d+n);2!=storage.accountType&&($(".settings-chpw").hide(),$("#passCheck").hide());$(".switch-tab").on("click",function(){var q=$(this).data("tab");tabBars.activeTabIndex=
q;setTimeout(function(){tabBars.updatePanel(q)},100)});$(".settings-chpw").on("click.pass",function(){$("#addTrackForm").show("Blind");$("#passBox").show("Blind");$(this).off("click.pass");$(this).removeClass()});var t=!1;$("#addTrackForm").submit(function(q){q.preventDefault();if(t)return!1;q=$("#oldPW").val().trim();var u=$("#newPW").val().trim(),D=$("#newPW2").val().trim(),F=$("#addTrackForm").find("#submit");F.val(la._45);if(0!=q.length){if(u!=D){q=la._236;$("label[for=newPW]").append('<span class="error">'+
q+"</span>");F.val(la._64);return}t=!0;network.request({path:"user/session",type:"changepw",password:u,oldPassword:q}).always(function(M){t=!1;if(null==M.error)F.val(la._44),settings.retrieve();else{var Q="",T="";switch(M.error.type){case "newPWWrong":Q="newPW";T=la._74;break;case "oldPWWrong":Q="oldPW";T=isSocialAccount?la._48:la._75;break;case "usernametaken":Q="oldPW";T=la._50;break;default:reportBug(null,"user/session/ changepw default "+JSON.stringify(M)),showErrorPopup()}0!=M.status&&($("label[for="+
Q+"]").append('<span class="error">'+T+"</span>"),F.val(la._64))}})}else F.val(la._44);setTimeout(function(){F.val(la._64)},1E3)});$("#settingsDelete").on("click.passCheck",function(){if(2!=storage.accountType&&0!=storage.accountType){$(this).hide();var q=$("#settingsDeleteUndo");q.show();q.on("click.remove",function(){$(this).off("click.remove");$(this).hide();$(this).html(la._67);$(this).css("color","#000");$("#settingsDelete").show()});window.setTimeout(function(){settingsUndo(q)},1E3)}else $("#settingsDeletion").hide("Blind"),
$("#deleteForm").show("Blind"),$(this).off("click.passCheck"),$(this).removeClass()});var h=!1,m=$("#deleteForm"),r=function(){if(hasDataAccessSubscription||h)return!1;h=!0;$("span.error").remove();network.request({path:"user/session",type:"delete",password:m.find("#pwCheck").val().trim()}).always(function(q){h=!1;null==q.error?($("#settingsPage").hide("explode",1E3,function(){window.location.hash=""}),logout()):"pwrong"==q.error.type?(q=la._76,$("label[for=pwCheck]").append('<span class="error">'+
q+"</span>")):(reportBug(null,"user/session deleteAccount "+JSON.stringify(q)),showErrorPopup())})};m.submit(function(q){q.preventDefault();q=material.getButton("confirmDelete",la._68,null,"trash");var u=material.getButton("cancelDelete",la._380,"ban",null,!1,!0),D=showPopup(la._66,'<div style="margin:1em 0 2em 0;width:500px;">\n\t\t\t\t\t'+la._899+"\n\t\t\t\t\t"+(hasDataAccessSubscription?'<br><br><span style="color:red;">'+la._898+"</span>":"")+'\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div style="margin:1em 0;">\n\t\t\t\t\t'+
q+"&emsp;"+u+"\n\t\t\t\t</div>",!0);$("#cancelDelete").on("click",function(F){D.close();return!1});$("#confirmDelete").on("click",function(F){D.close();r()})})};return{init:a}}();var StartPage=function(){var a=function(h,m,r,q){var u=getBaseUrl();h=h||(new Date).formatDate("M d, Y");m=m||la._25;return'\n\t\t\t\t<p class="mdc-typography--caption">'+h+'</p>\n\t\t\t\t<h6 class="mdc-typography--headline6">'+m+'</h6>\n\t\t\t\t<p class="mdc-typography--body2">'+(r||"&hellip;")+'</p>\n\t\t\t\t<p class="mdc-typography--body2"><a class="mdc-typography--button href" href="'+(q||u+"#!news")+'">'+la._733+"</a></p>\n\t\t\t"},b=function(h,m,r,q,u,D,F){m='<div class="teaser__slide-text">\n\t\t\t\t<h2 class="mdc-typography--headline2">'+
h+'</h2>\n\t\t\t\t<p class="mdc-typography--body2">'+m+"</p>\n\t\t\t\t"+(r?'<p class="mdc-typography--body2"><a class="mdc-button mdc-button--raised" href="'+q+'">'+r+"</a></p>":"")+"\n\t\t\t</div>";h='<div class="teaser__slide-image">\n\t\t\t\t<img srcset="'+imgCDNUrl+"start/"+u+"_1x.jpg 1x, "+imgCDNUrl+"start/"+u+'_2x.jpg 2x" src="'+imgCDNUrl+"start/"+u+'_1x.jpg" alt="'+h+'" />\n\t\t\t</div>';return'<div class="teaser__slide'+(F?" teaser__slide--reverse":"")+'"'+(D?' style="display:none;"':"")+
">\n\t\t\t\t\t"+(F?""+h+m:""+m+h)+"\t\t\t\t\t\n\t\t\t\t</div>"},d=function(){$(".teaser__slide-text-icons").find("a").each(function(h,m){return $(m).colorTip({color:"black"})});$("#opera").on("click",function(h){showPopup("How to use Keepa in Opera",'Our extension is not available on the Opera add-ons website. How to get it: <br><br>1. Install the <a target="_blank" href="https://addons.opera.com/en/extensions/details/download-chrome-extension-9/?display=en">Download Chrome Extension</a> add-on<br>2. Install our <a target="_blank" href="https://chrome.google.com/webstore/detail/neebplgakaahbhdphmkckjjcegoiijjo">Chrome extension</a>',
!0);return!1})},g=function(){var h=$($(".teaser--small").get(2)),m,r=function(){window_focus&&"#!"==lastHash&&network.request({path:"service/features",type:"website"}).done(function(q){if(0!=parseInt(q)){0==h.length&&clearInterval(m);q=q.data;q=q.productCount;for(var u=[7,13],D=0,F="",M=1;M<numberOfDomains;M++)-1<u.indexOf(M)||(D+=q[M],F+='<span title="Amazon.'+getTldByDomain(M)+'">\n\t\t\t\t\t\t\t\t<img src="'+flags[M]+'" />&nbsp;&nbsp;'+NumberUtil.format(q[M])+"&emsp; \n\t\t\t\t\t\t\t</span> ");
q='\n\t\t\t\t\t\t<p class="mdc-typography--body2">'+la._189.replace("<span id='productCount'></span>",NumberUtil.format(D))+'</p>\n\t\t\t\t\t\t<p class="mdc-typography--caption teaser__domains">'+F+'</p>\n\t\t\t\t\t\t<p class="mdc-typography--body2 teaser__user-count">&nbsp;</p>\n\t\t\t\t\t';h.html(q);m=setTimeout(r,2E3)}})};r()},n=function(){var h=function(r,q){discourseApi.topic(r,function(u){try{if(u){var D=(new Date(u.created_at)).formatDate("M d, Y"),F=u.title,M=u.post_stream.posts[0].cooked;
u=null;if(12524==r)u='<span>Now available on Google Play Store and Apple App Store</span><br><div>&emsp;<a href="https://play.google.com/store/apps/details?id=com.keepa.mobile"><img src="https://keeepa.amztoolz.com/_cdn/img/app-store/en_badge_web_generic_no_border.png" alt="Get it on Google Play" width="186" height="55"></a> &emsp;&emsp;<a href="https://apps.apple.com/app/keepa-price-tracker/id1518541385"><img src="https://keeepa.amztoolz.com/_cdn/img/app-store/Download_on_the_App_Store_Badge_US-UK_RGB_blk_092917.svg" alt="Get it on Apple App Store" width="165" height="55"></a></div>';
else{M=M.replace(/(<([^>]+)>)/ig,"");M=M.replace(/\r?\n|\r/g," @@@");var Q;null!==(Q=/(^.*?[a-z]{2,}[.!?:])\s+\W*/.exec(M))?M=Q[0].replace(":",".").replace(/ @@@/g,"<br>"):(M=M.replace(/ @@@/g," "),M=M.split(" ",10).join(" ")+"&hellip;");u=M}q.html(a(D,F,u))}}catch(T){isTest&&console.log("Could not load news:",T)}})},m=$(".teaser--small");window&&window.news&&"undefined"!==typeof window.news&&(h(window.news[0],$(m.get(0))),h(window.news[1],$(m.get(1))))},t=function(){if(!0!==h){var h=!0;isTest&&console.time("loading slick scripts");
$.when(LoaderUtil.css(CDNUrl+"slick-1.8.1.css"),LoaderUtil.js(CDNUrl+"slick-1.8.1.min.js")).then(function(){isTest&&console.timeEnd("loading slick scripts");var m={adaptiveHeight:isMobile,autoplay:!0,autoplaySpeed:3E4,dots:!0,nextArrow:'<button class="mdc-fab mdc-fab--mini slick-next" aria-label="'+la._612+'">\n\t\t\t\t\t\t\t\t<i class="fa fa-angle-right mdc-fab__icon"></i>\n\t\t\t\t\t\t\t</button>',prevArrow:'<button class="mdc-fab mdc-fab--mini slick-prev" aria-label="'+la._614+'">\n\t\t\t\t\t\t\t\t<i class="fa fa-angle-left mdc-fab__icon"></i>\n\t\t\t\t\t\t\t</button>'};
$(".carousel--extension div").show();$(".carousel--extension").slick(m);7!=Number(storage.domain)&&(m.autoplay=!1,$(".carousel--data div").show(),$(".carousel--data").slick(m))}).fail(showErrorPopup)}};return{init:function(){PageLayoutGrid.init("start");var h=getBaseUrl(),m=la._719+"\n\t\t\t\t<br><br>\n\t\t\t\t"+la._290+'*\n\t\t\t\t<p class="mdc-typography--caption teaser__slide-text-icons">\n\t\t\t\t\t<a href="https://addons.mozilla.org/firefox/addon/keepa/" title="'+la._720+'" target="_blank"><img src="'+
imgCDNUrl+'firefox_128x128.png" alt="Firefox" /></a>\n\t\t\t\t\t<a href="https://chrome.google.com/webstore/detail/neebplgakaahbhdphmkckjjcegoiijjo" title="'+la._721+'" target="_blank"><img src="'+imgCDNUrl+'chrome_128x128.png" alt="Chrome" /></a>\n\t\t\t\t\t<a id="opera" href="#!" title="'+la._722+'" target="_blank"><img src="'+imgCDNUrl+'opera_128x128.png" alt="Opera" /></a>\n\t\t\t\t\t<a href="https://microsoftedge.microsoft.com/addons/detail/ejefaeioamebhekmfaclajddbpnnobje" title="'+la._723+
'" target="_blank"><img src="'+imgCDNUrl+'edgechromium_128x128.png" alt="Edge" /></a>\n\t\t\t\t\t<a href="https://apps.apple.com/us/app/id1533805339" title="Install on Safari 14"><img src="'+imgCDNUrl+'safari_128x128.png" alt="Safari 14" /></a>&emsp;&emsp;\n\t\t\t\t</p>\t\t\t\n\t\t\t\t<p class="mdc-typography--caption">* '+la._724+"</p>\t\n\t\t\t",r="";7!=Number(storage.domain)&&(r='<div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12">\n\t\t\t\t<div class="teaser--large carousel carousel--data">\n\t\t\t\t\t'+
b(la._734,la._735+" *",la._717,"https://discuss.keepa.com/t/data-features-access-free-vs-monthly-subscription/5845","data",!1,!0)+"\n\t\t\t\t\t"+b(la._736,la._737,la._730,h+"#!finder","finder",!0,!0)+"\n\t\t\t\t\t"+b(la._738,la._739,la._730,h+"#!viewer","viewer",!0,!0)+"\n\t\t\t\t\t"+b(la._740,la._741,la._730,h+"#!bestseller","bestseller",!0,!0)+"\n\t\t\t\t\t"+b(la._742,la._743,!1,!1,"increase",!0,!0)+'\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12">\n\t\t\t\t<p class="mdc-typography--caption footnote">\n\t\t\t\t\t* '+
la._744+'<br><br><a href="#!disclaimer" class="href -data">'+la._165+'</a>&emsp;<a href="#!disclaimer" class="href -data">'+la._168+'</a>&emsp;<a href="#!disclaimer" class="href -data">'+la._170+"</a>\n\t\t\t\t</p>\n\t\t\t</div>");h='\n\t\t\t\t<div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12">\n\t\t\t\t\t<div class="teaser--large carousel carousel--extension">\n\t\t\t\t\t\t'+b(la._718,m,!1,!1,"pricehistory",!1)+"\n\t\t\t\t\t\t"+b(la._726,la._725,!1,!1,"track",!0)+"\n\t\t\t\t\t\t"+
b(la._731,""+la._727,!1,!1,"compare",!0)+"\n\t\t\t\t\t\t"+b(la._728,la._729,la._730,h+"#!deals","deals",!0)+'\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="mdc-layout-grid__cell mdc-elevation--z3 block block--elevated">\n\t\t\t\t\t<div class="teaser--small">\n\t\t\t\t\t\t'+a()+'\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="mdc-layout-grid__cell mdc-elevation--z3 block block--elevated">\n\t\t\t\t\t<div class="teaser--small">\n\t\t\t\t\t\t'+a()+'\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-8-tablet mdc-elevation--z3 block block--elevated">\n\t\t\t\t\t<div class="teaser--small">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t'+
r+"\n\t\t\t";PageLayoutGrid.initBodyPanel(h);d();g();n();t()}}}();var enableWishlistTrackingComponent=isTest&&!1,trackingFormFocusTrigger=!1;
function importWish(){var a=/https?:\/\/.*?amazon\.(de|com\.mx|com|co\.uk|co\.jp|ca|fr|cn|it|es|in)\/.*?\/([A-Z0-9]{11,13}).*/,b=/([A-Z0-9]{11,13})/,d='<a class="href" href="http://www.amazon.'+getTldByDomain(storage.domain)+'/registry/wishlist/" target="_blank">'+la._218+"</a>",g=material.getInput(!0,/([A-Z0-9]{11,13})|(https?:\/\/.*?amazon\.(de|com\.mx|com|co\.uk|co\.jp|ca|fr|cn|it|es|in)\/.*?\/([A-Z0-9]{11,13}).*)/.source,"importWish","Wish List URL",!1,"",la._226,"",!0,"",""),n=material.getButton("wishlistSubmit",
la._225,null,"paper-plane");replaceHtml("settingsBox",'<section id="step1">\n\t\t\t<p class="mdc-typography--body2">'+la._219+'</p>\n\t\t\t<p class="mdc-typography--body2">'+la._220+d+la._221+la._221_2+". "+la._222+'</p>\n\t\t\t<div style="width:100%">'+g+"</div>\n\t\t\t"+n+'\n\t\t\t<hr class="hr">\n\t\t\t<p class="mdc-typography--caption">'+la._256+'</p>\n\t\t</section>\n\t\t<section id="step2">'+(enableWishlistTrackingComponent?'<div id="step2List"></div><div id="step2Form"></div>':"")+'</section>\n\t\t<section id="step3" style="display:none;">\n\t\t\t<div style="color:#00b753;font-size:16px;"><i class="fa fa-bell-o"></i>&emsp;'+
la._223+'</div><br>\n\t\t\t<div id="notification-channels"></div>\n\t\t</section>\n\t\t<div id="wishError" style="color:red;padding-top:10px;clear:both;"></div>\n\t\t<div id="loadingIcon" style="text-align:center;"><p class="mdc-typography--body2"><br><br><br>'+la._224+"</p></div>\n\t");material.init("#settingsBox");d=storage.wishlistAddonId;var t=storage.domain;storage.wishlistAddonImport?(showPopup("Unsupported Wish List Import",'Private Wish List import is currently not working. Please go back to Amazon, set your Wish List privacy setting to "Shared" and use the URL to import it on Keepa.',
!0),storage.removeItem("wishlistAddonImport"),storage.removeItem("wishlistDomain")):(d&&(t=storage.wishlistDomain||t,storage.removeItem("wishlistAddonId"),storage.removeItem("wishlistAddonImport"),storage.removeItem("wishlistDomain"),$("#importWish").text(d),setTimeout(function(){$("#wishlistSubmit").trigger("click")},0)),d=document.getElementById("importWish"),$(d).blur(function(){storage.wishlist=this.innerHTML}),storage.wishlist&&(d.innerHTML=storage.wishlist),$("#importWish").keypress(function(h){13==
h.which&&$("#wishlistSubmit").trigger("click");return 13!=h.which}),network.request({path:"service/wishlist",type:"getLists"}).done(function(h){var m=h.wishLists;h=h.noHistoryProducts||[];if(m&&0!=m.length){var r={};for(q in m)"null"!=q&&m[q]&&(r[m[q].createDate+""+100*Math.random()]=m[q]);var q="";for(var u=Object.keys(r).sort().reverse(),D=0;D<u.length;D++){for(var F=r[u[D]],M=F?F.name:"?",Q=0,T=0,ha=0;ha<F.items.length;ha++)null!=F.items[ha]&&("0"==F.items[ha][3]?T++:Q++);0==F.lastUpdate&&(F.lastUpdate=
F.createDate);ha=keepaTime.now()-F.lastUpdate;var P=15<ha;q+='<div class="mdc-card wishlist-card">\n\t\t\t\t\t\t<div class="mdc-card__media mdc-card__media--16-9">\n\t\t\t\t\t\t\t<div class="mdc-card__media-content">'+getProductIconsCard(F,h)+'</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t\t<div class="wishlist-card__primary">\n\t\t\t\t\t\t\t<h2 class="mdc-typography--subtitle1"><a href="#!manage/0-0-0-0-0-'+F.id+'">'+M+'</a></h2>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="wishlist-card__secondary mdc-typography--body2">\n\t\t\t\t\t\t\t<dt>'+
la._539+":</dt><dd>"+(new Date(keepaTime.minutesToEpoch(F.createDate))).formatDate("M j, Y")+" ("+prettyDate(keepaTime.now()-F.createDate)+")</dd>\n\t\t\t\t\t\t\t<dt>"+la._540+":</dt><dd>"+(new Date(keepaTime.minutesToEpoch(F.lastUpdate))).formatDate("M j, Y")+" ("+prettyDate(ha)+")</dd>\n\t\t\t\t\t\t\t<dt>"+la._203+":</dt><dd>Amazon."+getTldByDomain(F.domain)+'&emsp;<a href="'+getAmazonWishListUrl(F)+'" target="_blank" title="'+la._646+" Amazon."+getTldByDomain(F.domain)+'"><i class="fa fa-external-link"></i></a></dd>\n\t\t\t\t\t\t\t<dt>'+
la._543+":</dt><dd>"+T+'&emsp;<span style="color:grey;">('+Q+" "+la._544+')</span></dd>\n\t\t\t\t\t\t\t<hr style="border-top: 1px solid #d8d8d8;">\n\t\t\t\t\t\t\t<div class="wishlistcard__settings">\n\t\t\t\t\t\t\t\t'+material.getCheckbox("isOneTimeImport-"+F.id,la._707+' <i class="fa fa-spinner fa-spin" style="display:none;"></i>',!F.isOneTimeImport,!1,"isOneTimeImport-"+F.id,0)+"\n\t\t\t\t\t\t\t\t"+material.getCheckbox("removeTrackingWhenPurchased-"+F.id,la._814+' <i class="fa fa-spinner fa-spin" style="display:none;"></i>',
!F.removeTrackingWhenPurchased,!1,"removeTrackingWhenPurchased-"+F.id,0)+"\n\t\t\t\t\t\t\t\t"+material.getCheckbox("overwriteExistingTrackings-"+F.id,la._815+' <i class="fa fa-spinner fa-spin" style="display:none;"></i>',F.overwriteExistingTrackings,!1,"overwriteExistingTrackings-"+F.id,1)+"\n\t\t\t\t\t\t\t\t"+material.getCheckbox("skipIfNotInStock-"+F.id,la._816+' <i class="fa fa-spinner fa-spin" style="display:none;"></i>',!F.skipIfNotInStock,!1,"skipIfNotInStock-"+F.id,0)+'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div class="mdc-card__actions">\n\t\t\t\t\t\t\t<div class="mdc-card__action-buttons">\n\t\t\t\t\t\t\t\t<button class="mdc-button mdc-card__action mdc-card__action--button refreshWL" rel="'+
F.id+'"'+(P?"":" disabled")+' style="color:'+(P?"forestgreen":"grey")+';">'+(P?'<i class="fa fa-fw fa-refresh"></i> '+la._537:""+la._542)+'</button>\n\t\t\t\t\t\t\t\t<button class="mdc-button mdc-card__action mdc-card__action--button delete" rel="'+F.id+'" style="color:tomato;"><i class="fa fa-fw fa-trash-o"></i> '+la._545+"</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>"}$("#trackedLists").remove();u&&u.length&&$(".paper").after('<div id="trackedLists">\n\t\t\t\t\t<h2 class="mdc-typography--subtitle1">'+
la._535+':</h2>\n\t\t\t\t\t<div class="box__wishlists">\n\t\t\t\t\t'+q+"\n\t\t\t\t\t</div>\n\t\t\t\t</div>");$(".box__wishlists .delete").on("click",function(R){var Y=$(R.currentTarget),ja=Y.attr("rel");R=null;for(var ra in m)if("null"!=ra&&m[ra]&&m[ra].id==ja){R=m[ra];break}if(null!=R){var ta=showPopup('<i class="fa fa-trash-o"></i>&ensp;'+la._545,'<span id="messageOp">\n\t\t\t\t\t\t<div>'+la._547.replace("{NAME}","<b>"+R.name+"</b>")+'</div>\n\t\t\t\t\t\t<span style="font-size:larger;">\n\t\t\t\t\t\t\t<br><span class="settings-chpw" id="removeTrackings">\u00bb '+
la._548+'</span>\n\t\t\t\t\t        <br><span class="settings-chpw" id="keepTrackings">\u00bb '+la._549+"</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>",!0),pa=function(ca){ta.close();network.request({path:"service/wishlist",type:"deleteList",content:ja,deleteTrackings:ca}).done(function(sa){var Z=Y.closest(".wishlist-card");Z.hide("explode",700,function(){Z.remove()})}).fail(function(sa){showErrorPopup("Status: "+sa.status+" | Error: "+sa.errorMsg)})};$("#removeTrackings").on("click",function(ca,
sa){pa(!0)});$("#keepTrackings").on("click",function(ca,sa){pa(!1)})}});$(".box__wishlists .refreshWL").on("click",function(R){var Y=$(R.currentTarget).attr("rel");R=null;for(var ja in m)if("null"!=ja&&m[ja]&&m[ja].id==Y){R=m[ja];break}if(null!=R){var ra=showPopup('<i class="fa fa-refresh"></i>&ensp;'+la._537,'<span id="messageOp">\n\t\t\t\t\t\t<div>'+la._536.replace("{NAME}","<b>"+R.name+"</b>")+'</div>\n\t\t\t\t\t\t<span style="font-size:larger;">\n\t\t\t\t\t\t\t<br><span class="settings-chpw" id="updateWishList">\u00bb '+
la._538+"</span>\n\t\t\t\t\t\t</span>\t\t\t\t\n\t\t\t\t\t</span>",!0),ta=function(){ra.update("<div>"+la._45+"</div>");network.request({path:"track",type:"wishListRefresh",wishListId:Y}).done(function(pa){null==pa.error?ra.update("<div>"+la._223+"</div>"):ra.update("<div>"+la._error+"</div>");importWish()})};$("#updateWishList").on("click",function(pa,ca){ta()})}});$('.wishlistcard__settings input[type="checkbox"]').on("change",function(){var R=this,Y=$(this).parent().parent().find("label").find("i");
Y.show();var ja=$(this).attr("name").split("-"),ra=ja[0];ja=ja[1];var ta=$(this).val();ta=$(this).prop("checked")&&1==ta||!$(this).prop("checked")&&0==ta;var pa={};network.request({path:"track",type:"wishListUpdate",trackingRequest:(pa.wishListId=ja,pa[ra]=ta,pa)}).done(function(ca){ca.error&&($(R).prop("checked",!$(R).prop("checked")),showErrorPopup())}).fail(function(ca){showErrorPopup("Status: "+ca.status+" | Error: "+ca.errorMsg)}).always(function(){Y.hide()})})}}),$("#wishlistSubmit").click(function(){var h=
$("#importWish").val();$("#trackedLists").velocity("slideUp");var m,r="";if(m=a.exec(h))t=getDomainByTld(m[1]),r=m[2];else if(m=b.exec(h))r=m[1];else{""==h?$("#importWish")[0].reportValidity():$("#importWish-validation-msg").effect("highlight");return}$("#step1").hide("blind");$("#loadingIcon").show();network.request({path:"service/wishlist",type:"getASINs",domainId:t,content:r}).done(function(q){$("#loadingIcon").hide();q=q.queryResult[t];0==q.length?(5==storage.language?replaceHtml("wishError",
'<p class="mdc-typography--body2">'+la._227+r+" "+la._228+"Amazon."+getTldByDomain(t)+")</p>"):replaceHtml("wishError",'<p class="mdc-typography--body2">'+la._227+r+" "+la._228+" Amazon."+getTldByDomain(t)+"</p>"),$("#step1").show("blind")):wishlistStep2(q,r,t)}).fail(function(q){replaceHtml("wishError","<br>"+la._error)});$(this).text(la._110)}))}
function getProductIcons(a,b){var d="",g=a.length;b=b?35:9>g?"100":18<g?"35":"70";for(var n=0;n<g&&63>n;n++){var t=a[n];d+='<div class="productIcon" style="width: '+b+"px; height: "+b+"px; background:"+(41<n&&62<g?"linear-gradient(to bottom, rgba(255,255,255,0) 17%, rgba(255,255,255,1) 90%),":"")+"url("+(""!=t?imageServerAsin+t+".01._SL"+b+"_.jpg":imgCDNUrl+"no-photo-available.png")+') no-repeat center center"></div>'}return d}
function getProductIconsCard(a,b){for(var d="",g=0,n={},t=$jscomp.makeIterator(a.items),h=t.next();!h.done;n={$jscomp$loop$prop$item$791:n.$jscomp$loop$prop$item$791},h=t.next())if(n.$jscomp$loop$prop$item$791=h.value,!0!==a.removeTrackingWhenPurchased||"0"===n.$jscomp$loop$prop$item$791[3])if(h=b.find(function(m){return function(r){return r.asin===m.$jscomp$loop$prop$item$791[0]}}(n)))if(h=imageToUrl(h.imagesCSV,90),!1===h&&(h=imgCDNUrl+"no-photo-available.png"),d+='<div class="productIcon" style="width:90px;height:90px;margin:12px 1px;background:url('+
h+') no-repeat center center"></div>',g++,8<=g)break;return d}
function wishlistStep2(a,b,d){if(enableWishlistTrackingComponent)replaceHtml("step2List",'<p class="mdc-typography--body2">'+la._229+a.length+la._230+"</p><br>"+getProductIcons(a,!1)+"<br><br>"),TrackingComponent.initList({asinList:a,domainId:d,wishlistId:b,containerId:"step2Form"});else{var g=0!==storage.accountType&&hasDataAccessSubscription,n=getProductIcons(a,!1)+'\n\t\t<p class="mdc-typography--body2">'+la._229+a.length+la._230+'</p>\n\t\t<p class="mdc-typography--body2">'+la._231+"</p>\n\t",
t=getCurrencyByDomain(d),h=function(Q){var T=0==storage.accountType?la._705:g?"":la._704;T=g?"":'&ensp;<a href="https://keeepa.amztoolz.com/#!settings/1" title="'+T+'"><i class="fa fa-lock fa-lg"></i></a>';return'<td class="trackFormTable-less trackFormTable-less-more"><div>%</div>\n\t\t\t\t'+material.getRadio("is-drop-1-"+Q,la._95,!0,"is-drop-"+Q,!1,1)+"<br>\n\t\t\t\t"+material.getRadio("is-drop-0-"+Q,la._703,!1,"is-drop-"+Q,!g,0)+T+"\n\t\t\t</td>"},m=10==d?"":'<td class="trackFormTable-currency"></td>\n\t\t<td class="trackFormTable-price"><input type="text" rel="price" placeholder="'+
la._83+'" name="priceAmazon" id="priceAmazon" maxlength="10"></td>\n\t\t'+h(CsvType.AMAZON.index);h='<table class="trackFormTable">\n\t\t\t<tr>\n\t\t\t\t<td colspan="3"><label for="priceAmazon">Amazon.'+getTldByDomain(d)+':</label></td>\n\t\t\t\t<td colspan="3"><label for="priceNew">'+la._93+':</label></td>\n\t\t\t\t<td colspan="3"><label for="priceUsed">'+la._94+":</label></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t"+m+'\n\t\t\t\t\n\t\t\t\t<td class="trackFormTable-currency"></td>\n\t\t\t\t<td class="trackFormTable-price"><input type="text" rel="price" placeholder="'+
la._83+'" name="priceNew" id="priceNew" maxlength="10"></td>\n\t\t\t\t'+h(CsvType.NEW.index)+'\n\t\t\t\t\n\t\t\t\t<td class="trackFormTable-currency"></td>\n\t\t\t\t<td class="trackFormTable-price"><input type="text" rel="price" placeholder="'+la._83+'" name="priceUsed" id="priceUsed" maxlength="10"></td>\n\t\t\t\t'+h(CsvType.USED.index)+"\t\t\t\t\n\t\t\t</tr>\n\t\t</table>";m=material.getCheckbox("importPurchased",la._814,!1,!1,"importPurchased");var r=material.getCheckbox("overwriteExisting",la._815,
!0,!1,"overwriteExisting"),q=material.getCheckbox("oosAlert",la._816,!1,!1,"oosAlert"),u=material.getButton("wishlistSubmit2",la._110,null,"bell-o");replaceHtml("step2",n+('<form id="addTrackForm" method="post" action="">\n\t\t\t<p class="mdc-typography--body2">\n\t\t\t\t'+la._163+"<br>"+la._108+'\n\t\t\t</p>\n\t\t\t<div style="padding:16px 0;">\n\t\t\t\t'+h+'\n\t\t\t</div>\t\t\t\n\t\t\t<p class="mdc-typography--body2">'+la._232+":<br>"+la._233+t+"100. "+la._234+t+"97"+la._234_2+'.</p>\n\t\t\t<div style="padding-top:16px;">\n\t\t\t\t'+
m+"<br>\n\t\t\t\t"+r+"<br>\n\t\t\t\t"+q+'<br>\n\t\t\t</div>\n\t\t\t<div style="padding-top:20px;">\n\t\t\t\t'+u+"\n\t\t\t</div>\n\t\t</form>"));var D=function(){trackingFormFocusTrigger=!0;var Q=$(this).attr("id"),T="borderShadowCoral";"priceNew"===Q?T="borderShadowBlue":"priceUsed"===Q&&(T="borderShadowBlack");$('input[rel="price"]').removeClass();$(this).addClass(T+"Input")};$("#priceAmazon").focus(D);$("#priceNew").focus(D);$("#priceUsed").focus(D);10==d?D.call($("#priceNew")):D.call($("#priceAmazon"));
$(".trackFormTable-price").children().focusout(function(){if(0<$(this).val().length){var Q=parseInt($(this).val());Q&&(1>Q||99<Q)&&(Q="",showPopup("Error","value must be between 1% and 99%",!0));Q=Q?Q:"";$(this).val(Q);trackingFormFocusTrigger=!1}});$(".trackFormTable-less-more a").colorTip({color:"yellow"});n=$('[name^="is-drop"]');n.attr("tabindex",-1);n.on("click",function(){var Q=this.name.slice(-1);2==Q?D.call($("#priceUsed")):1==Q?D.call($("#priceNew")):D.call($("#priceAmazon"))});var F=!1,
M=!1;$("#wishlistSubmit2").click(function(Q){Q.preventDefault();if(trackingFormFocusTrigger&&!M)M=!0,setTimeout(function(){$("#wishlistSubmit2").trigger("click")},100);else{M=!1;if(F)return!1;F=!0;$("#step2").hide("blind");$("#loadingIcon").show();$("#wishlistSubmit2").val(la._45);$("span.error").remove();replaceHtml("wishError","");var T=function(ha){$("#wishlistSubmit2").val(la._110);reportBug(null,"wishlistimport: "+JSON.stringify(ha)+" "+b+" "+a.join());showErrorPopup()};(function(){function ha(ta,
pa){/.*price.*/i.test(ta)&&(pa=pa.replace(/(\d)\.(\d\d)/g,"$1$2"),pa=pa.replace(/(\d),(\d)/g,"$1$2"),pa=pa.replace(/^0+/,""));return pa}var P={},R=$("#addTrackForm").serializeArray();$.each(R,function(){if(-1!==this.name.indexOf("price")&&this.value){var ta=this.name.replace("price","").toUpperCase(),pa=CsvType[ta].index,ca=g?!R.some(function(sa){return sa.name==="is-drop-"+pa&&0===parseInt(sa.value)}):!0;P[ta]={price:ha(this.name,this.value),isDrop:ca}}});var Y=-1*TrackingComponent.getDefaultTtl();
Y={wishListId:b,mainDomainId:Number(d),ttl:Y,expireNotify:!0,desiredPrices:null,desiredPricesInMainCurrency:!0,isOneTimeImport:!0,removeTrackingWhenDeleted:!0,removeTrackingWhenPurchased:!$("#importPurchased-checkbox")[0].checked,overwriteExistingTrackings:$("#overwriteExisting-checkbox")[0].checked,skipIfNotInStock:!$("#oosAlert-checkbox")[0].checked,notificationType:[],individualNotificationInterval:-1,minChangeBetweenNotifications:[],notifyIf:[]};Y.minChangeBetweenNotifications=Array.apply(null,
Array(CsvType.length)).map(function(ta){return 0});Y.notifyIf.push({domain:Y.mainDomainId,csvType:CsvType.LIGHTNING_DEAL.index,notifyIfType:1});for(var ja in P){var ra=P[ja];10==d&&"AMAZON"===ja||!ra.price||(Y.notifyIf.push({domain:Y.mainDomainId,csvType:CsvType[ja].index,notifyIfType:2}),Y.minChangeBetweenNotifications[CsvType[ja].index]=ra.isDrop?-Number(ra.price):Number(ra.price))}network.request({path:"track",type:"wishListImport",trackingRequest:Y}).done(function(ta){F=!1;if(null==ta.error)$("#loadingIcon").hide(),
ta.hash&&handleSettingsRequest(ta,!0),$("#step1").hide(),$("#step3").show("blind"),SettingsNotification.init();else switch(ta.error.type){case "userNotKnown":registerAnonymous().done(function(){$("#wishlistSubmit2").trigger("click")}).fail(T);break;case "productNotKnown":showPopup("Tracking Error","Product is invalid and can not be tracked.",!0);resetTrack();break;case "maxTrackingReached":showPopup("Tracking Limit Reached",la._920.replace("#maxTrackingAllowed#",maxTrackingAllowed)+"<br><br><b>"+
la._921+"</b>",!0);$("#wishlistSubmit2").val(la._110);break;default:T(ta)}}).fail(function(){F=!1;$("#step2").show("blind");$("#loadingIcon").hide();replaceHtml("wishError","<br>"+la._error);$("#wishlistSubmit2").val(la._110)})})()}});$("#addTrackForm").submit(function(Q){Q.preventDefault()});$("#step2").show("blind")}};var IAP=function(){function a(h){t();var m=$.Deferred(),r=Date.now()+""+Math.floor(1E5*Math.random());b[r]=m;h.value.parameters={env:"prod"};window.postMessage({key:"IAP",value:h.value,id:r,origin:"keepaIAP",location:""+document.location},"*");return m.promise()}var b={},d=null,g=$.Deferred(),n=!1,t=function(){n||(n=!0,window.addEventListener("message",function(h){if(h.data&&h.data.key&&"IAPResponse"==h.data.key){var m=b[h.data.id];m&&(delete b[h.data.id],m.resolve(h.data))}},!1))};return{getSkuDetails:function(){return a({value:{method:"getSkuDetails"}})},
buy:function(h){return a({value:{method:"buy",sku:h}})},consumePurchase:function(){return a({value:{method:"consumePurchase"}})},getPurchases:function(){return a({value:{method:"getPurchases"}}).done(function(h){if(!h.response||h.response.errorType)clearInterval(interval),g.reject("notInstalled"),console.log(h);else if(h=h.response.response,h.details){d={};h=$jscomp.makeIterator(h.details);for(var m=h.next();!m.done;m=h.next())(m=m.value)&&m.state&&(d[m.sku]=m)}})},getActive:function(){return d},
onReady:function(){return g}}}();var filename,activeSubMenu=0,hoveredSubMenu=-1,$subMenus=$(".subMenu"),leftPanelVisible=!1,newThemeColor="#444";
function initMenu(){$subMenus=$(".subMenu");var a=$("#topMenu");$("#topMenu").on("click",function(g){var n=g.target.hash||window.location.hash.split("/")[0];n=n.replace("%21","!");"#!"!=n.substring(0,2)&&(n="#!"+n.substring(1));if(void 0!==n){a.find("a").attr("style","");$subMenus.hide();$subMenus.find("a").attr("style","");if("showSearchBar"==$(g.target).attr("id")||"showSearchBar"==$(g.target).parent().attr("id"))n="#!search";var t={"box-shadow":"rgba(255, 255, 255, 0.568627) 0px -13px 13px -9px inset"},
h={"margin-top":"80px",height:""},m=!1,r=n,q=!1,u=$("#subPanel");switch(n){case "":case "#!":case "#!sso":case "#!settings":case "#!channels":h["margin-top"]="40px";break;case "#!comment":case "#!community":case "#!discuss":h["margin-top"]="40px";t.background="rgba(128, 128, 128, 0.4)";break;case "#!tmp":case "#!track":case "#!product":return;case "#!deals":t.background="rgba(108, 166, 245, 0.4)";newThemeColor="#566D8D";h["margin-top"]="40px";r="#!deals";q=!0;break;case "#!tracking":q=!1;case "#!import":case "#!notification":case "#!notificationAPI":case "#!manage":r=
"#!tracking";newThemeColor="#905246";t.background="rgba(255, 99, 71,0.4)";h.background="rgba(0, 0, 0, 0.27) linear-gradient(to bottom, rgba(147, 84, 73, 0.8) 0, rgba(255, 74, 74, 0.6) 100%)";break;case "#!imageapi":case "#!bot":case "#!addon":case "#!android":case "#!api":case "#!app":r="#!addon";newThemeColor="#417156";t.background="rgba(60, 179, 113, 0.4)";h.background="rgba(0, 0, 0, 0.27) linear-gradient(to bottom, rgba(70, 118, 91, 0.8) 0, rgba(60, 179, 113, 0.4) 100%)";break;case "#!bestseller":case "#!categorytree":case "#!data":case "#!finder":case "#!seller":case "#!topseller":case "#!viewer":r=
"#!data";newThemeColor="#77435f";t.background="rgba(197, 67, 138, 0.4)";h.background="linear-gradient(rgba(118, 70, 106, 0.8) 0px, rgba(179, 60, 109, 0.4) 100%) rgba(0, 0, 0, 0.27)";break;case "#!faq":case "#!disclaimer":case "#!news":case "#!features":r="#!features";newThemeColor="#8F6129";t.background="rgba(255, 140, 0, 0.4)";h.background="rgba(0, 0, 0, 0.27) linear-gradient(to bottom, rgba(149, 103, 47, 0.8) 0, rgba(255, 140, 0, 0.4) 100%)";break;case "#!dev":r="#!discuss";newThemeColor="#777777";
t.background="rgba(192, 192, 192, 0.4)";h.background="rgba(137, 137, 137, 1) linear-gradient(to bottom, rgba(144, 144, 144, 0.8) 0, rgba(28, 28, 28, 0.4) 100%)";break;case "#!search":if("50px"!=$("#subPanel").css("height"))t.background="rgba(192, 192, 192, 0.4)",h.height="50px",h["margin-top"]="80px",h.background="rgba(137, 137, 137, 1) linear-gradient(to bottom, rgba(144, 144, 144, 0.8) 0, rgba(28, 28, 28, 0.4) 100%)",m=!0,$("#showSearchBar").css(t);else{if("#!search"!=(g.target.hash||window.location.hash.split("/")[0])){$("#topMenu").trigger("click");
return}h.height="50px";h["margin-top"]="80px";m=!0}q=$("#leftPanel").is(":visible");break;default:t.background="rgba(192, 192, 192, 0.6)"}updateThemeColor(newThemeColor);a.find('a[href="'+r+'"]').css(t);$subMenus.first().parent().find('ul[rel="'+r+'"]').show();$subMenus.find('a[href="'+n+'"]').css({cursor:"default","border-bottom":"1px solid white",background:"linear-gradient(rgba(255, 255, 255, 0) 33px, rgba(255, 255, 255, 0.44) 100%)"});u.css(h);m?($("#searchBar").fadeIn(),setTimeout(function(){$("#searchInput").focus()},
10)):$("#searchBar").hide();q?(leftPanelVisible=!0,$("#leftPanel").show()):leftPanelVisible&&($("#deltaPercentRange").rangeSlider("destroy"),$("#deltaRange").rangeSlider("destroy"),$("#currentRange").rangeSlider("destroy"),$("#leftPanel").hide().empty(),leftPanelVisible=!1)}});"onhashchange"in window?(hashChangeSupport=!0,window.onhashchange=updateHashedMenu):interval=window.setInterval(updateHashedMenu,100);updateHashedMenu();var b=0,d=function(){var g=$("#topPanel").width();g!=b&&(b=g,1080>b?$("#logo").velocity({width:"52px"},
300):$("#logo").velocity({width:"216px"},300))};$(window).on("resize",d);d()}var hashChangeSupport=!1,lastUrl="",lastHash="",lastRootUrl="",lastSubUrl="",ignoreNext=0,busy=!1,clickedObjectReference=null,rootPreventLoop=!1,overlayClosed=!1,triggerTrack=!1,triggerUnsubscribe=!1,preOverlayUrl="";
function updateHashedMenu(){if("undefined"==typeof isSnapshotPage&&(hashChangeSupport||!busy))if(!hashChangeSupport&&skipAsyncInterval)skipAsyncInterval=!1;else{try{clearTimeout(iframeTimeout)}catch(q){}busy=!0;var a=window.location.hash;a=a.replace("%21","!");var b=a.indexOf("?");if(-1<b&&!a.startsWith("#!sso")&&!a.startsWith("#!discuss"))window.location.hash=a.substr(a,b);else if("#!"!=a.substring(0,2))window.location.hash="#!"+a.substring(1);else{b=a.split("/");var d=b[0];"undefined"==typeof isLoggerPage&&
network.cancel();var g=$("#graph");0<g.length?(graph.remove(g.data("domainId"),g.data("asin"),g.data("index"),!1),graph.remove(g.data("domainId"),g.data("asin"),g.data("index"),!0),graph.remove(g.data("domainId"),g.data("asin"),1,!1)):"#!product"!=d&&"#!manage"!=d&&graph.removeAll();if("#!language"==d)window.location.hash="",storage.language=b[1],verifyRegExp.domainId.test(storage.language)&&(storage.domain=storage.language),refreshDomain(storage.domain),settings.refresh(),d="",location.reload();
else{if("#!signup"===d||"#!signupLoginFail"===d)"#!signupLoginFail"===d&&showPopPopup("Login Failed",'No Keepa account is connected with the chosen "login with" option. You can register a new one instead or use a different login option.',!0),window.location.hash="",2!=storage.accountType&&window.setTimeout(function(){showLoginOverlay();$("#registerTab").trigger("click")},800),d="";if("#!tgMessengerLogin"!==d){"#!logout"===d&&(window.location.hash="",logout(),d="");if("#!sso"===d){if(inIframe())return;
sso=getQueryVariable("sso");sig=getQueryVariable("sig");$(".subMenu").hide();if(2==storage.accountType){sendToDiscussSSO();return}window.setTimeout(function(){showLoginOverlay();$("#loginTab").trigger("click")},800)}"#!search"===d&&(g=[],g=b,g.splice(0,1),b[1]=g.join("/"));if("#!pricedataapi"==d)d="",window.location.hash="#!api";else{if("#!r"==d){if(64<=b[1].length){var n=b[1].substring(64);d=b[1].substr(0,64);var t=b[2]&&0<b[2].length?"/"+b[2]:"";if(storage.token!=d){g=storage.install;var h=storage.optOut_crawl,
m=storage.overlayPriceGraph,r=storage.revealStock;network.clearDatabase();storage.clear();g&&(storage.install=g);h&&(storage.optOut_crawl=h);m&&(storage.overlayPriceGraph=m);r&&(storage.revealStock=r);initializeSettings();settings.setToken(d,!0);settings.retrieve(!1).always(function(){window.location.hash="#!"+n+t})}setTimeout(function(){window.location.hash="#!"+n+t},100)}lastSubUrl=d="";window.location.hash="#!tmp"}"#!discuss"===d&&callSubPage(0);1<b.length?(b=b[1],b!=lastSubUrl&&(lastSubUrl=b,
d==lastUrl&&callSubPage(0))):lastSubUrl="";if(""==d&&""==lastUrl&&!rootPreventLoop)generateStartPage(),rootPreventLoop=!0;else if(""==d&&""!=lastUrl)-1==lastUrl.indexOf(" by ")&&(document.title="Keepa.com"),rootPreventLoop=!1,activeSubMenu=0,$("#bodyPanel").hide(),$("#contentStartPage").show(),-1==lastUrl.indexOf("#!product")&&(preOverlayUrl=lastHash),lastUrl=d,lastHash=a,$(".menuItem, .subList").attr("style","");else if(d!=lastUrl&&("#!track"==d?(d="#!product",triggerTrack=!0):"#!trackDelete"==d?
setTimeout(function(){var q=deleteTracking();q&&q.done(function(){showPopup("Tracking deleted",la._437,!0)}).fail(showErrorPopup).always(function(){location.hash="!notification"})},0):"#!unsubscribe"==d?(d="#!channels",triggerUnsubscribe=!0):"#!verify"==d?generateVerifyEmail():"#!pwreset"==d&&($("#loginOverlay-close").trigger("click"),$("#domainName").css("color","rgb(255, 99, 71)"),$("#contentStartPage").hide(),generatePWreset()),-1==lastUrl.indexOf("#!product")&&-1==lastUrl.indexOf("#!finder")&&
-1==lastUrl.indexOf("#!viewer")&&(preOverlayUrl=lastHash),lastHash=a,lastUrl=d,rootPreventLoop=!1,$("#topMenu").trigger("click"),$("#bodyPanel").show(),"#!search"==lastUrl?0<lastSubUrl.length&&loadPage(lastUrl):loadPage(lastUrl),d.match(/#!comment-.*/))){$('a[href="#!comment"]').trigger("click");return}busy=!1}}}}}}var skipAsyncInterval=!1;
function updateSub(a,b,d,g){busy=!0;clickedObjectReference=a;$("#contentStartPage").is(":visible")?$("#bodyPanel").show():skipAsyncInterval=!0;$(".menu"+d).trigger("click");a.siblings().attr("style","");a.css("color",b);checkURL(g);busy=!1}function checkURL(a){a||(a=window.location.hash);var b=a.split("|");a=b[0];1<b.length&&(b=b[1],b!=lastSubUrl&&(lastSubUrl=b));loadPage(a);a!=lastUrl&&(lastUrl=a,ignoreNext=1)}
function settingsUndo(a){if(a.is(":visible")){var b=a.html(),d=/(\d+)/.exec(b),g=Number(d[1]);1==g?network.request({path:"user/session",type:"delete"}).done(function(n){$("#settingsPage").hide("explode",1E3,function(){replaceHtml("bodyPanel","");window.location.hash=""});logout()}).fail(showErrorPopup):(a.html(b.replace(d[1],g-1)),window.setTimeout(function(){settingsUndo(a)},1E3))}}
function getNewPasswordHtml(){return'<div id="passBox" style="display:none;" ><table class="trackFormTable"><tr><td class="trackFormTable-empty">&nbsp;</td><td colspan="2"><label for="oldPW">'+(isSocialAccount?la._4:la._57)+'</label></td><td colspan="2"><label for="newPW">'+la._58+'</label></td><td colspan="2"><label for="newPW2">'+la._59+'</label></td></tr><tr><td class="trackFormTable-empty">&nbsp;</td><td class="trackFormTable-id"><input autocapitalize="off" autocorrect="off" type="'+(isSocialAccount?
"text":"password")+'" rel="ids" maxlength="1024" name="oldPW" id="oldPW" /></td><td class="trackFormTable-empty">&nbsp;</td><td class="trackFormTable-id"><input type="password" rel="ids" maxlength="1024" name="newPW" id="newPW" /></td><td class="trackFormTable-empty">&nbsp;</td><td class="trackFormTable-id"><input type="password" rel="ids" maxlength="1024" name="newPW2" id="newPW2" /></td><td class="trackFormTable-empty">&nbsp;</td></tr></table></div>'}
function settingsFailLabels(a){var b=[];a.status.length?b=a.status:b.push(a.status);for(var d=0;d<b.length;d++){switch(b[d]){case 0:break;case 1:errorLabel="username";errorMsg="amazon locale not valid";break;case 2:errorLabel="password";errorMsg="language not valid";break;case 3:errorLabel="idEmail";errorMsg="<br />"+la._49;break;case 4:errorLabel="idTwitter";errorMsg="<br />"+la._72;break;default:reportBug(null,"settings.send() "+JSON.stringify(a)),showErrorPopup()}0!=b[d]&&($("label[for="+errorLabel+
"]").append('<span class="error">'+errorMsg+"</span>"),$("#submit").val(la._64))}}var isSettings;
function insertSettings(){get("s_boxVertical")||resetSettings(0);try{var a=JSON.parse(get("showGraphs"))}catch(B){a=graph.getDefaultShowGraphSetting(),reportBug(B,get("showGraphs")+" "+B)}var b=get("s_range"),d=get("graphScale"),g=get("extremeFilter"),n=get("s_dateFormat"),t=get("s_trackingMode"),h=Number(get("s_trackingTtl")),m=get("s_merchantTrack"),r=get("s_boxHorizontal");get("s_position");var q=get("s_boxType"),u=get("optOut_crawl"),D=get("overlayPriceGraph"),F=get("revealStock");t="<li>\n\t\t\t<sep>&#x271C;</sep>"+
la._843+'<sep>&emsp;-</sep>\n\t\t\t<span id="s_trackingMode">\n\t\t\t\t<a'+("basic"===t?" active":"")+' rel="basic">'+la._844+"</a>\n\t\t\t\t<a"+("advanced"===t?" active":"")+' rel="advanced">'+la._845+"</a>\n\t\t\t\t<a"+("pro"===t?" active":"")+' rel="pro">'+la._846+"</a>\n\t\t\t</span>\n\t\t</li>";var M="";TrackingComponent.getTtlOptions().forEach(function(B){M+="<a"+(h===B.value?" active":"")+' rel="'+B.value+'">'+B.label+"</a>"});var Q="<li>\n\t\t\t<sep>&#x271C;</sep>"+la._874+'<sep>&emsp;-</sep>\n\t\t\t<span id="s_trackingTtl">\n\t\t\t\t'+
M+"\n\t\t\t</span>\n\t\t</li>",T=storage.sendUpcomingLightningDealsAlert,ha="";"undefined"!=typeof T&&(ha="<li><sep>&#x271C;</sep>"+la._431+'<sep>&emsp;-</sep><span id="s_upcomingLightningDeals"><a multi '+("true"==T?"active":"")+' rel="true">'+la._254+"</a><a multi "+("false"==T?"active":"")+' rel="false">'+la._255+"</a></span></li>");var P=storage.sendStartLightningDealsAlert;T="";"undefined"!=typeof P&&(T="<li><sep>&#x271C;</sep>"+la._713+'<sep>&emsp;-</sep><span id="s_startLightningDeals"><a multi '+
("true"==P?"active":"")+' rel="true">'+la._254+"</a><a multi "+("false"==P?"active":"")+' rel="false">'+la._255+"</a></span></li>");var R=[1,2,3],Y=storage.useSmile;P="";"undefined"!=typeof Y&&-1<R.indexOf(Number(storage.domain))&&(P='<li><sep>&#x271C;</sep>Amazon Smile<sep>&emsp;-</sep><span id="s_useSmile"><a multi '+("true"==Y?"active":"")+' rel="true">'+la._254+"</a><a multi "+("false"==Y?"active":"")+' rel="false">'+la._255+"</a></span></li>");R="";R="<li><sep>&#x271C;</sep>"+la._987+'<sep>&emsp;-</sep>\n\t\t<span id="noCouponsForAlerts">\n\t\t\t<a '+
("true"!==storage.noCouponsForAlerts?"active":"")+' rel="false">'+la._254+"</a>\n\t\t\t<a "+("true"===storage.noCouponsForAlerts?"active":"")+' rel="true">'+la._255+"</a>\n\t\t\t\n\t\t</span>\n\t</li>";Y="";Y="<li><sep>&#x271C;</sep>"+la._988+'<sep>&emsp;-</sep>\n\t\t<span id="noPrimeExclAlerts">\n\t\t\t<a '+("true"!==storage.noPrimeExclAlerts?"active":"")+' rel="false">'+la._254+"</a>\n\t\t\t<a "+("true"===storage.noPrimeExclAlerts?"active":"")+' rel="true">'+la._255+"</a>\n\t\t</span>\n\t</li>";
var ja="<li>\n\t\t<sep>&#x271C;</sep>&emsp;"+la._975+'<sep>&emsp;-</sep>\n\t\t<span id="stockMaxOrderQty">\n\t\t\t<a '+("true"==storage.stockMaxOrderQty?"active":"")+' rel="true">'+la._254+"</a>\n\t\t\t<a "+("false"==storage.stockMaxOrderQty?"active":"")+' rel="false">'+la._255+"</a>\n\t\t</span>\n\t</li>",ra=storage.defaultNotificationInterval,ta="";if("undefined"!=typeof ra){ra=Number(ra)/1440;ta=0<ra?"active":"";var pa=0==ra?"active":"";0==ra&&(ra="-");ta="<li><sep>&#x271C;</sep>"+la._432+'<sep>&emsp;-</sep><span id="s_rearm"><div contenteditable="true"  class="editBox">'+
ra+"</div><a "+ta+' style="cursor:default"> '+la._143+"</a><a multi "+pa+' rel="true">'+la._433+'</a></span><span><a title="How does it work?" target="_blank" href="https://discuss.keepa.com/t/continuous-tracking-rearm-timer/62?u=keepa"><i class="fa fa-15 fa-external-link" ></i></a></span></li>'}ra=1==a[0]?"active":"";pa=1==a[1]?"active":"";a=1==a[2]?"active":"";var ca="24"==b?"active":"",sa="168"==b?"active":"",Z="744"==b?"active":"",N="2160"==b?"active":"",f="8760"==b?"active":"";b="-1"==b?"active":
"";var C="0"==g?"active":"";g="1"==g?"active":"";var V="D, M j G:i"==n?"active":"",ba="G:i %- d/m/Y"==n?"active":"",w="M j, g a"==n?"active":"",O="j. M, G %U%h%r"==n?"active":"",z="G%\u6642n%\u6708j%\u65e5"==n?"active":"",I="1"==m.charAt(0)?"active":"",K="1"==m.charAt(1)?"active":"";m="1"==m.charAt(2)?"active":"";var A="0"==r?"active":"";r="1"==r?"active":"";var J="0"==q?"active":"";q="1"==q?"active":"";var S="0"==u?"active":"";u="1"==u?"active":"";var v="0"==D?"active":"";D="1"==D?"active":"";var p=
"0"==F?"active":"";F="1"==F?"active":"";var H=Number(storage.s_range),L=24!=H&&168!=H&&744!=H&&2160!=H&&8760!=H&&-1!=H;replaceHtml("settingsContent",'<section id="settingsTab">\n\t\t\t<span class="settingLabel">'+la._252+'</span>\n\t\t\t<ul id="chartList" rel="chart">\n\t\t\t\t<li>\n\t\t\t\t\t<sep>&#x271C;</sep>'+la._253+'<sep>&emsp;-</sep>\n\t\t\t\t\t<span id="showGraphs">\n\t\t\t\t\t\t<a multi '+ra+' rel="0">Amazon</a>\n\t\t\t\t\t\t<a multi '+pa+' rel="1">'+la._93+"</a>\n\t\t\t\t\t\t<a multi "+
a+' rel="2">'+la._94+"</a>\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<sep>&#x271C;</sep>"+la._135+'<sep>&emsp;-</sep>\n\t\t\t\t\t<span id="s_range">\n\t\t\t\t\t\t<a '+ca+' rel="24">'+la._136+"</a>\n\t\t\t\t\t\t<a "+sa+' rel="168">'+la._137+"</a>\n\t\t\t\t\t\t<a "+Z+' rel="744">'+la._139+"</a>\n\t\t\t\t\t\t<a "+N+' rel="2160">'+la._140+"</a>\n\t\t\t\t\t\t<a "+f+' rel="8760">'+la._141+"</a>\n\t\t\t\t\t\t<a "+b+' rel="-1">'+la._142+"</a>\n\t\t\t\t\t\t<div "+(L?'style="border: 1px solid #4c6bca;"':
"")+' title="Using a custom interval will remove the Day option." contenteditable="true" class="editBox" onclick="this.innerText =\'\'">'+((L?H/24+" ":la._812+": ")+la._143)+"</div>\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<sep>&#x271C;</sep>"+la._144+'<sep>&emsp;-</sep>\n\t\t\t\t\t<span id="graphScale">\n\t\t\t\t\t\t<a '+("0"==d?"active":"")+' rel="0">'+la._146+"</a>\n\t\t\t\t\t\t<a "+("1"==d?"active":"")+' rel="1">'+la._145+"</a>\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<sep>&#x271C;</sep>"+
la._164+'<sep>&emsp;-</sep>\n\t\t\t\t\t<span id="extremeFilter">\n\t\t\t\t\t\t<a '+C+' rel="0">'+la._254+"</a>\n\t\t\t\t\t\t<a "+g+' rel="1">'+la._255+"</a>\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<sep>&#x271C;</sep>"+la._257+'<sep>&emsp;-</sep>\n\t\t\t\t\t<span id="s_dateFormat">\n\t\t\t\t\t\t<a '+V+' rel="D, M j G:i">'+(new Date).formatDate("D, M j G:i")+"</a>\n\t\t\t\t\t\t<a "+ba+' rel="G:i %- d/m/Y">'+(new Date).formatDate("G:i %- d/m/Y")+"</a>\n\t\t\t\t\t\t<a "+w+' rel="M j, g a">'+
(new Date).formatDate("M j, g a")+"</a>\n\t\t\t\t\t\t<a "+O+' rel="j. M, G %U%h%r">'+(new Date).formatDate("j. M, G %U%h%r")+"</a>\n\t\t\t\t\t\t<a "+z+' rel="G%\u6642n%\u6708j%\u65e5">'+(new Date).formatDate("G%\u6642n%\u6708j%\u65e5")+'</a>\n\t\t\t\t\t\t<div title="Supported switches are \n a, A, B, c, d, D, F, g, G, h, H, i, I, j, l, L, m,\n M, n, N, O, P, r, s, S, t, U, w, W, y, Y, z, Z\n To escape chars, use %. \n\n For more information, Google: \'PHP date\'" contenteditable="true" class="editBox">'+
n+'</div>\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<span class="settingLabel">'+la._258+'</span>\n\t\t\t<ul id="trackList" rel="tracking">\n\t\t\t\t'+t+"\n\t\t\t\t<li>\n\t\t\t\t\t<sep>&#x271C;</sep>"+la._259+'<sep>&emsp;-</sep>\n\t\t\t\t\t<span id="s_percent">\n\t\t\t\t\t\t<div contenteditable="true" class="editBox">'+get("s_percent")+'</div><a style="cursor:default"> %&emsp;('+la._260+")</a>\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<sep>&#x271C;</sep>"+la._261+'<sep>&emsp;-</sep>\n\t\t\t\t\t<span id="s_merchantTrack">\n\t\t\t\t\t\t<a multi '+
I+' rel="0">Amazon</a>\n\t\t\t\t\t\t<a multi '+K+' rel="1">'+la._93+"</a>\n\t\t\t\t\t\t<a multi "+m+' rel="2">'+la._94+"</a>\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t\t"+Q+"\n\t\t\t\t"+ha+"\n\t\t\t\t"+T+"\n\t\t\t\t"+ta+"\n\t\t\t\t"+P+"\n\t\t\t\t"+R+"\n\t\t\t\t"+Y+'\n\t\t\t</ul>\n\t\t\t<span class="settingLabel">'+la._262+'</span>\n\t\t\t<ul id="addonList" rel="addon">\n\t\t\t\t<li>\n\t\t\t\t\t<sep>&#x271C;</sep>'+la._56+'<sep>&emsp;-</sep>\n\t\t\t\t\t<span id="s_language">\n\t\t\t\t\t\t<a rel="1"><img id="lang_en" src="'+
englishFlag+'" /></a>\n\t\t\t\t\t\t<a rel="3"><img id="lang_de" src="'+flag_3+'" /></a>\n\t\t\t\t\t\t<a rel="4"><img id="lang_fr" src="'+flag_4+'" /></a>\n\t\t\t\t\t\t<a rel="5"><img id="lang_jp" src="'+flag_5+'" /></a>\n\t\t\t\t\t\t<a rel="7"><img id="lang_cn" src="'+flag_7+'" /></a>\n\t\t\t\t\t\t<a rel="8"><img id="lang_it" src="'+flag_8+'" /></a>\n\t\t\t\t\t\t<a rel="9"><img id="lang_es" src="'+flag_9+'" /></a>\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<sep>&#x271C;</sep><span id="currencySettings"><a rel="currencySettings">'+
la._949+"</a></span>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<sep>&#x271C;</sep>"+la._263+'<sep>&emsp;-</sep>\n\t\t\t\t\t<span id="s_boxVertical">\n\t\t\t\t\t\t<div id="test" contenteditable="true" class="editBox">'+get("s_boxVertical")+'</div><a style="cursor:default"> px&emsp;('+la._264+")</a>\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<sep>&#x271C;</sep>"+la._265+'<sep>&emsp;-</sep>\n\t\t\t\t\t<span id="s_boxHorizontal">\n\t\t\t\t\t\t<a '+A+' rel="0">'+la._266+"</a>\n\t\t\t\t\t\t<a "+
r+' rel="1">'+la._267+"</a>\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<sep>&#x271C;</sep>"+la._271+'<sep>&emsp;-</sep>\n\t\t\t\t\t<span id="s_boxType">\n\t\t\t\t\t\t<a '+J+' rel="0">'+la._272+"</a>\n\t\t\t\t\t\t<a "+q+' rel="1">'+la._273+"</a>\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<sep>&#x271C;</sep>"+la._418+'<sep>&emsp;-</sep>\n\t\t\t\t\t<span id="overlayPriceGraph">\n\t\t\t\t\t\t<a '+D+' rel="1">'+la._254+"</a>\n\t\t\t\t\t\t<a "+v+' rel="0">'+la._255+'</a>\n\t\t\t\t\t\t<a style="color: #6b90fd !important;" rel="-1">Setup</a>\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<sep>&#x271C;</sep>'+
la._438+'<sep>&emsp;-</sep>\n\t\t\t\t\t<span id="revealStock">\n\t\t\t\t\t\t<a '+F+' rel="1">'+la._254+"</a>\n\t\t\t\t\t\t<a "+p+' rel="0">'+la._255+'</a>\n\t\t\t\t\t\t<a style="color: #962b2b !important;" rel="-1">'+(hasDataAccessSubscription?"":"Requires Data subscription.")+" "+la._950+"</a>\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t\t"+ja+"\n\t\t\t\t<li>\n\t\t\t\t\t<sep>&#x271C;</sep>"+la._411+'<sep>&emsp;-</sep>\n\t\t\t\t\t<span id="optOut_crawl">\n\t\t\t\t\t\t<a '+S+' rel="0">'+la._254+"</a>\n\t\t\t\t\t\t<a "+
u+' rel="1">'+la._255+'</a>\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<sep>&#x271C;</sep><span id="s_reset"><a rel="resetSettings">'+la._278+"</a></span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</section>");$(".editBox").on("focusout",function(){var B=$(this),E=B.parent().attr("id");if("s_dateFormat"!=E){var U=1,ka=90;"s_boxVertical"==E&&(U=170,ka=500);"s_rearm"==E&&(U=1,ka=365);"s_range"==E&&(U=1,ka=4E3,B.text(B.text().replace(/\D/g,"")));var ma=Number(B.text());!ma||ma<U||ma>ka?(showPopup("Error",
la._283+U+la._284+ka+".",!0),"s_range"==E?insertSettings():B.text(get(E))):"s_range"==E&&(B.text(B.text()+" "+la._143),set(E,24*ma),insertSettings())}"s_rearm"==E?(storage.defaultNotificationInterval=Number(1440*ma).toFixed(0),insertSettings()):"s_range"!=E&&set(E,B.text());B.css("border","1px solid orange");try{firefox||window.parent.postMessage("refresh,","*")}catch(na){}$("#reload").effect("highlight",{color:"#FFDBB7"},1E3);settings.send()});$(document).on("keypress",".editBox",function(B){if(13==
B.which&&window.getSelection)return window.getSelection().getRangeAt(0).deleteContents(),!1});$("#chartList,#trackList,#addonList").hover(function(){$(this).prev().css({color:"#000",borderBottom:"1px solid orange"})},function(){$(this).prev().css({color:"",borderBottom:""})});$("#chartList > li, #trackList > li, #addonList > li").hover(function(){$(this).children("sep").css({color:"#777"})},function(){$(this).children("sep").css({color:""})});$("#settingsTab").find("a").on("click",function(){var B=
$(this),E=B.parent().attr("id"),U=B.attr("rel");if("undefined"==typeof U||"undefined"==U)console.log("settings click rel is undefined",B);else{var ka=function(){$("#reload").effect("highlight",{color:"#FFDBB7"},1E3);settings.send();try{firefox||window.parent.postMessage("refresh,","*")}catch(Aa){}};if(-1!=U)switch(E){case "optOut_crawl":case "revealStock":case "s_boxType":case "s_boxHorizontal":case "overlayPriceGraph":settings.setExtensionSetting(E,U)}switch(E){case "showGraphs":B=JSON.parse(get("showGraphs"));
B[U]="0"==B[U]?1:0;set("showGraphs",B);break;case "s_range":set("s_range",U);break;case "graphScale":set("graphScale",U);break;case "extremeFilter":set("extremeFilter",U);break;case "s_dateFormat":set("s_dateFormat",U);break;case "s_trackingMode":set("s_trackingMode",U);break;case "s_trackingTtl":set("s_trackingTtl",U);break;case "s_merchantTrack":B=get("s_merchantTrack");B=B.replaceAt(U,"0"==B.charAt(U)?1:0);set("s_merchantTrack",B);break;case "s_language":set("language",U);break;case "s_boxHorizontal":set("s_boxHorizontal",
U);break;case "overlayPriceGraph":if(-1==U){U=GraphService.getAvailableGraphTypes();var ma=JSON.parse(get("webGraphType")),na=get("webGraphRange");B='<p class="mdc-typography--body2">'+la._654+':</p>\n\t\t\t\t\t\t<div id="ovSetup">';E=$jscomp.makeIterator(U);for(var W=E.next();!W.done;W=E.next())W=W.value,B+='<input type="checkbox" id="webGraphType'+W+'" value="'+W+'"><label for="webGraphType'+W+'">'+CsvType.getName(W)+"</label><br>";B+='<br><input type="number" min="1" max="1000" id="webGraphRange" value="'+
na+'"><label for="webGraphRange">&ensp;'+la._135+" ("+la._143+')</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p class="mdc-typography--body2"><span class="button" id="saveSetup">&ensp;'+la._64+"&ensp;</span></p>";var ya=showPopup(la._253,B,!0);U=$jscomp.makeIterator(U);for(W=U.next();!W.done;W=U.next())B=W.value,1==ma[B]&&$("#webGraphType"+B).prop("checked",!0);$("#saveSetup").on("click",function(){ya.close();$("#ovSetup input[type=checkbox]").each(function(Aa,Da){ma[Da.value]=$(Da).prop("checked")?
1:0});set("webGraphType",ma);na=Number($("#webGraphRange")[0].value);set("webGraphRange",na);settings.setExtensionSetting("webGraphRange",""+na);settings.setExtensionSetting("webGraphType",JSON.stringify(ma));ka()});return}set("overlayPriceGraph",U);break;case "revealStock":if(-1==U){window.open("https://keeepa.amztoolz.com/#!settings/1");return}set("revealStock",U);break;case "stockMaxOrderQty":U!=storage.stockMaxOrderQty&&(showPopup("",la._976,!0),storage.stockMaxOrderQty="true"==U);break;case "s_position":set("s_position",
U);set("s_boxType",0);break;case "s_boxType":set("s_boxType",U);set("s_position",0);break;case "s_upcomingLightningDeals":storage.sendUpcomingLightningDealsAlert="true"==U;break;case "s_startLightningDeals":storage.sendStartLightningDealsAlert="true"==U;break;case "s_useSmile":storage.useSmile="true"==U;break;case "noCouponsForAlerts":storage.noCouponsForAlerts="true"===U;break;case "noPrimeExclAlerts":storage.noPrimeExclAlerts="true"===U;break;case "s_rearm":U=Number(U);isNaN(U)&&(U=0);storage.defaultNotificationInterval=
Number(1440*U).toFixed(0);break;case "optOut_crawl":set("optOut_crawl",U);break;case "s_reset":resetSettings(1);break;case "currencySettings":CurrencySwitch.init();break;default:return}insertSettings();ka()}})}
function resetSettings(a){1==a&&showPopup("",la._286,!0);set("showGraphs",graph.getDefaultShowGraphSetting());set("s_range",2160);set("graphScale",0);set("extremeFilter",0);set("s_dateFormat","D, M j G:i");set("s_percent",5);set("s_trackingMode","basic");set("s_trackingTtl",TrackingComponent.getDefaultTtl());set("s_merchantTrack","100");set("s_boxHorizontal",0);set("s_position",0);set("s_boxType",0);set("optOut_crawl",0);set("revealStock",1);set("stockMaxOrderQty",!1);set("webGraphType",JSON.stringify(GraphService.getDefaultWebGraphType()));
set("webGraphRange",GraphService.getDefaultWebGraphRange().toString())}function save(a,b){"object"==typeof b&&(b=JSON.stringify(b));storage[a]=b;try{addon(a,b)}catch(d){}}function set(a,b){"object"==typeof b&&(b=JSON.stringify(b));storage[a]=b;try{addon("storageEntry",{key:a,value:b})}catch(d){}}function remove(a){storage.removeItem(a)}
function get(a){var b=storage[a];b&&"null"!=b||(b={showGraphs:JSON.stringify(graph.getDefaultShowGraphSetting()),s_range:"2160",graphScale:"0",s_dateFormat:"D, M j G:i",s_percent:"5",s_trackingMode:"basic",s_trackingTtl:TrackingComponent.getDefaultTtl().toString(),s_merchantTrack:"100",s_boxVertical:"200",s_boxHorizontal:"0",s_position:"0",s_boxType:"0",optOut_crawl:"0",s_alertTimer:"900000",extremeFilter:"0",revealStock:"1",webGraphType:JSON.stringify(GraphService.getDefaultWebGraphType()),webGraphRange:GraphService.getDefaultWebGraphRange().toString()}[a],
save(a,b));return b};var searching=!1;
function sendSearch(a){if(!searching){searching=!0;$("#leftPanel").hide();verifyRegExp.domainId.test(a)||(a=/^([1-9]|10|11|12)$/.test(storage.domain)?storage.domain:la==la_de?3:la==la_ja?5:1);var b=$("#searchInput").val();replaceHtml("searchPage",'<div style="margin-top:250px;">'+getLoaderBox(!0)+"</div>");replaceHtml("searchPageContinue","");network.request({content:b,domainId:a,path:"service/search",type:"productBasic"}).always(function(d){searching=!1;d=d.searchProducts;null==d||0==d.length?(replaceHtml("searchPage",
la._237+'<span id="searchQuery" style="color:slategrey;"></span>'+la._238),$("#searchQuery").text(b)):null!=d&&1==d.length?($("#bodyPanel").html(""),window.document.location.hash="#!product/"+d[0].domainId+"-"+d[0].asin):(GridSearch.init(d,"searchPage"),d='<div class="card m-t-10 p-10"><p class="mdc-typography--caption -center">\n                        <a class="href -data" href="https://www.amazon.'+getTldByDomain(a)+"/gp/search?keywords="+encodeURIComponent(b)+'">&rarr; '+la._357+" &larr;</a>\n                    </p></div>",
$("#searchPageContinue").html(d));$("#subMenu1Search").prev().css("visibility","hidden")})}}
function searchUpdate(){0==$("#searchPage").length&&generateSearch();var a=window.location.hash.split("/");if("#!search"==a[0]||"#search"==a[0]){a.splice(0,1);var b=a.join("/").split("-");if(2>b.length)replaceHtml("productTableDescription","Error:<br>"+la._216);else{a=b.splice(0,1);b=decodeURIComponent(b.join("-"));$(".headline").text(la._10+": "+truncate(b,70));var d=$("#searchInput");d.val($("<div/>").text(b).text());""!=d.val()&&sendSearch(a[0])}}}
function initSearch(){var a=this,b=$("#searchInput");b.autocomplete({appendTo:"#searchBar",source:function(d,g){$.ajax({url:"https://completion.amazon."+getSSTldByDomain(storage.domain)+"/search/complete",type:"GET",cache:!1,dataType:"jsonp",data:{q:d.term,"search-alias":"aps",mkt:getSSMktByDomain(storage.domain)}}).always(function(n){try{g($.map(n[1],function(t){return{label:t,value:t}}))}catch(t){console.log(t)}})},minLength:2,select:function(d,g){""!=g.item.value&&(b.val(g.item.value),window.location.href=
"#!search/"+storage.domain+"-"+encodeURIComponent(g.item.value))},open:function(){$(a).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){$(a).removeClass("ui-corner-top").addClass("ui-corner-all")}})}function truncate(a,b){var d;a=a.split("");if(a.length>b){for(d=a.length-1;-1<d;--d)if(d>b)a.length=d;else if(" "===a[d]){a.length=d;break}a.push("...")}return a.join("")};var Guid=Guid||function(){var a=function(d,g,n){return d.length>=g?d:a(n+d,g,n||" ")},b=function(){var d=(new Date).getTime();return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/x/g,function(g){var n=(d+16*Math.random())%16|0;d=Math.floor(d/16);return("x"===g?n:n&7|8).toString(16)})};return{newGuid:function(){var d="undefined"!=typeof window.crypto,g;d&&(g="undefined"!=typeof window.crypto.getRandomValues);if(d&&g){d=new window.Uint16Array(16);window.crypto.getRandomValues(d);
var n="";for(g=0;16>g;g++){var t=d[g].toString(16);t=a(t,4,"0");n+=t}d=n}else d=b();return d}}}(),settings={isEmailVerified:!1,refresh:function(){lastSubUrl=lastRootUrl=lastUrl="";initPage();clickedObjectReference=null;rootPreventLoop=!1;currency=getCurrencyByDomain(storage.domain);currencyDomainId=isNaN(Number(storage.currencyDomainId))?0:Number(storage.currencyDomainId)},reset:function(a,b){storage.accountType=0;storage.removeItem("username");storage.removeItem("email");storage.removeItem("twitter");
storage.removeItem("wishlist");storage.removeItem(intranet.key);for(var d=0;d<numberOfDomains;d++)storage.removeItem("dealsExcludedCats."+d),storage.removeItem("dealExcludedCats."+d);storage.removeItem("dealExcludedCats");for(d=0;d<storage.length;d++){var g=storage.key(d);0==g.indexOf("keepa.")&&storage.removeItem(g)}a&&settings.setToken(Guid.newGuid(),b);emailActive=twitterActive=0;clearedLocalStorage=!1;settings.applyDataBucket()},setToken:function(a,b){a&&64==a.length&&(storage.token!=a&&(storage.token=
"4ivrqmu4nhnhaa6qha7lu9h17ostrs2lbvbdo4gqr6gv96osptcre17omclm23ha",storage.removeItem("hashSynced"),network.reauthorize()),b&&settings.setExtensionSetting("token",a))},setExtensionSetting:function(a,b){"undefined"!=typeof b&&null!=b&&"null"!=b&&""!=b&&"undefined"!=b&&(sendReceive({key:"setCookie",value:{key:a,val:b}}),document.cookie=a+"="+b+";path=/extension;secure;Max-Age=31536000;")},setExtensionSettingAll:function(){settings.setExtensionSetting("optOut_crawl",storage.optOut_crawl);settings.setExtensionSetting("revealStock",storage.revealStock);settings.setExtensionSetting("s_boxType",
storage.s_boxType);settings.setExtensionSetting("s_boxHorizontal",storage.s_boxHorizontal);settings.setExtensionSetting("webGraphType",storage.webGraphType);settings.setExtensionSetting("webGraphRange",storage.webGraphRange);settings.setExtensionSetting("overlayPriceGraph",storage.overlayPriceGraph)},send:function(a){var b=$.Deferred(),d=$("#extension");0<d.length&&(d={browser:browserInfo(),type:d.attr("type"),version:d.attr("version")},storage.extension=JSON.stringify(d));var g={};d=["dealsRequest."];
for(var n="accountType casinLocales currencyDomainId dealsClearDays dealsInterval dealsMerchant dealsOpacity dealsThumbSize defaultNotificationInterval defaultNotificationType domain domainId email emailVerified exportFormat exportSelection extension extremeFilter forceReload graphInterval graphScale gridConfig gridPresets gridState gridVersion hasAPI initFailed install language lastBugReport lastManageVisit lastManageVisitUpdate lastViewerVisit lastViewerVisitUpdate lastVisit manageDiffSortByOption manageExportFormat manageGrid manageGridDefaultGraphMode manageGridGraphRange manageGridView manageGridViewMobile manageSortFilterReference manageView moreData noCouponsForAlerts noDataPromo noPrimeExclAlerts noReview optOut_crawl overlayPriceGraph previewCasin revealStock rssHash s_alerts s_boxHorizontal s_boxType s_boxVertical s_dateFormat s_extreme s_merchantTrack s_percent s_position s_range s_trackingMode s_trackingTtl salesRankInverse sendUpcomingLightningDealsAlert sendStartLightningDealsAlert showGraphs showSalesRankGraph sortDefault stockMaxOrderQty twitter updated1008 username useSmile webGraphRange webGraphType wishlist".split(" "),
t={},h=0;h<storage.length;t={$jscomp$loop$prop$k$589$793:t.$jscomp$loop$prop$k$589$793},h++)if(t.$jscomp$loop$prop$k$589$793=storage.key(h),t.$jscomp$loop$prop$k$589$793.startsWith("__$"))localStorage.removeItem(t.$jscomp$loop$prop$k$589$793);else if(!(t.$jscomp$loop$prop$k$589$793==intranet.key||"token"==t.$jscomp$loop$prop$k$589$793||0<t.$jscomp$loop$prop$k$589$793.indexOf("viewer")||0<t.$jscomp$loop$prop$k$589$793.indexOf("_localstorage_available_")))if(-1===n.indexOf(t.$jscomp$loop$prop$k$589$793)&&
!d.some(function(r){return function(q){return-1<r.$jscomp$loop$prop$k$589$793.indexOf(q)}}(t))&&isTest)console.warn("key will be skipped:",t.$jscomp$loop$prop$k$589$793);else if("string"===typeof storage[t.$jscomp$loop$prop$k$589$793]){var m=storage[t.$jscomp$loop$prop$k$589$793];m&&(g[t.$jscomp$loop$prop$k$589$793]=m)}d={path:"user/settings",type:"setSettings",localStorage:JSON.stringify(g),domainId:storage.domain,language:storage.language};if(0==d.localStorage.length||"{}"==d.localStorage)try{d.localStorage=
localStorageIsPolyFill?storage.toJSON():JSON.stringify(storage)}catch(r){}"undefined"!==typeof a&&!0===a.removeEmail&&"undefined"===typeof d.email&&(d.removeEmail=!0,isTest&&console.info("%csetSettings","color:orange;font-weight:bold;",d));"undefined"!==typeof a&&"undefined"!==typeof a.password&&(d.password=a.password);storage.email&&(d.email=storage.email);storage.twitter&&(d.twitterId=storage.twitter);isNaN(parseInt(storage.defaultNotificationInterval))&&(storage.defaultNotificationInterval=2880);
"undefined"!=typeof storage.defaultNotificationInterval&&(d.defaultNotificationInterval=storage.defaultNotificationInterval);if("undefined"!=typeof storage.defaultNotificationType)for(d.defaultNotificationType=JSON.parse(storage.defaultNotificationType),a=0;a<d.defaultNotificationType.length;a++)d.defaultNotificationType[a]=d.defaultNotificationType[a]?1:0;"undefined"!=typeof storage.sendUpcomingLightningDealsAlert&&(d.sendUpcomingLightningDealsAlert=storage.sendUpcomingLightningDealsAlert);"undefined"!=
typeof storage.sendStartLightningDealsAlert&&(d.sendStartLightningDealsAlert=storage.sendStartLightningDealsAlert);"undefined"!=typeof storage.useSmile&&(d.useSmile=storage.useSmile);d.noCouponsForAlerts="true"===storage.noCouponsForAlerts?!0:!1;d.noPrimeExclAlerts="true"===storage.noPrimeExclAlerts?!0:!1;"undefined"!=typeof storage.stockMaxOrderQty&&(d.stockMaxOrderQty="true"==storage.stockMaxOrderQty?!0:!1);a=getCasinLocalesFromStorage();d.casinLocales=a;network.request(d).done(function(r){if(0!=
parseInt(r)){var q=[];r.status.length?q=r.status:q.push(r.status);for(var u=0;u<q.length;u++)switch(q[u]){case 0:break;case 1:storage.domain=1;break;case 2:storage.language=1;break;case 3:isTest&&console.info("%cSettings error","color:red;font-weight:bold;","EMAIL FAILED");storage.removeItem("email");break;case 4:storage.removeItem("twitter");break;case 5:reportBug(null,"sendSettings error 5, storage js fail "+JSON.stringify(g));break;case -1:case -2:break;default:reportBug(null,"sendSettings unknown status error "+
JSON.stringify(r))}refreshDomain(storage.domain);b.resolve(r)}}).fail(function(r){b.reject(r)});return b},dataCache:null,lastPromise:null,retrieve:function(a,b,d){var g=$.Deferred(),n=function(){var t=function(m){0!=parseInt(m)?(localStorageSupported&&handleSettingsRequest(m,a),g.resolve()):g.reject()},h=function(m){401==m.status?(localStorageSupported&&settings.reset(!1,!1),g.resolve()):g.reject()};d=d?d:500;null!=settings.dataCache&&Date.now()-settings.dataCache.time<d?settings.dataCache.success?
t(settings.dataCache.data):h(settings.dataCache.data):network.request({path:"user/settings",type:"getSettings",maxAge:d}).done(function(m){settings.dataCache={time:m.timeStamp,data:m,success:!0};t(m)}).fail(function(m){settings.dataCache={time:m.timeStamp,data:m,success:!1};h(m)})};b||null==settings.lastPromise?n():settings.lastPromise.always(n);return settings.lastPromise=g},applyDataBucket:function(a,b){"undefined"!==typeof a&&null!==a?(storage.tokenBucketSize=a,storage.tokens=storage.tokens?3E3<
Date.now()-Number(storage.bucketUpdated)?b:Math.min(0>storage.tokens?0:storage.tokens,b):b?b:0):(storage.tokenBucketSize=0,storage.tokens=0);storage.bucketUpdated=Date.now()}},logosvg='<svg version="1.1" id="keepa" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 281.1 80.8" enable-background="new 0 0 281.1 80.8" xml:space="preserve"> <g> <g> <path class="svgKeepaShadow" fill="#CDCCCC" d="M116.7,60.4H109c0-0.3-1.3-2.3-4-6.1c-3.1-4.4-5.9-8.1-8.5-11c-3.5-3.9-6-5.9-7.7-5.9h-1.1 c0,5.5,0.1,13.1,0.4,23h-6.6c0.4-7.3,0.5-15.3,0.5-24c0-8.2-0.2-15.5-0.5-21.7h6.6c-0.2,6.2-0.4,12.6-0.4,19h0.8 c1.3,0,4.5-3,9.7-9c5.1-6,7.7-9.3,7.7-10h7.3c0,0.7-2.5,3.6-7.5,8.7c-5,5.1-8.7,8.5-11.2,10.3V34c2.7,1,7.2,5.7,13.5,14 C113.8,55.5,116.7,59.7,116.7,60.4z"/> <path class="svgKeepaShadow" fill="#CDCCCC" d="M151,39.8c0,1,0,2.3-0.1,4.1l-24.2,0.4c0.2,3.4,1.6,6.3,4,8.6c2.4,2.3,5.6,3.5,9.6,3.5 c3.6,0,6.9-0.4,10-1.3l-0.6,5c-2.3,0.9-5.6,1.4-9.9,1.4c-6.1,0-10.7-1.7-13.9-5C122.6,53,121,49,121,44.2c0-5.1,1.5-9.5,4.4-13.2 c2.9-3.7,6.8-5.5,11.8-5.5c4.5,0,8,1.3,10.3,4S151,35.6,151,39.8z M145.1,39.8c0-6.6-2.8-9.9-8.3-9.9c-5.6,0-8.9,3.4-9.9,10.3 L145.1,39.8z"/> <path class="svgKeepaShadow" fill="#CDCCCC" d="M187.9,39.8c0,1,0,2.3-0.1,4.1l-24.2,0.4c0.2,3.4,1.6,6.3,4,8.6c2.4,2.3,5.6,3.5,9.6,3.5 c3.6,0,6.9-0.4,10-1.3l-0.6,5c-2.3,0.9-5.6,1.4-9.9,1.4c-6.1,0-10.7-1.7-13.9-5c-3.2-3.3-4.8-7.4-4.8-12.2c0-5.1,1.5-9.5,4.4-13.2 s6.8-5.5,11.8-5.5c4.5,0,8,1.3,10.3,4S187.9,35.6,187.9,39.8z M182,39.8c0-6.6-2.8-9.9-8.3-9.9c-5.6,0-8.9,3.4-9.9,10.3L182,39.8z "/> <path class="svgKeepaShadow" fill="#CDCCCC" d="M227.9,42.3c0,5.1-1.4,9.5-4.3,13.3c-2.9,3.8-6.9,5.7-12.1,5.7c-4.3,0-7.1-0.8-8.5-2.3h-0.4 c0,6.5,0.1,12.3,0.2,17.4h-6.6c0.5-6.2,0.8-13.9,0.8-23.1c0-11.3-0.6-20-1.8-26.2l6.2-0.9l0.5,3.5h0.4c2.3-2.6,6-4,11-4 c4.5,0,8,1.6,10.6,4.9S227.9,37.8,227.9,42.3z M221.7,43.2c0-3.5-0.9-6.4-2.7-8.9c-1.8-2.5-4.4-3.7-7.7-3.7 c-4.2,0-7.2,1.3-9.1,3.8c0.4,7.9,0.6,14.6,0.6,20.3c1.9,1.6,4.4,2.4,7.4,2.4c3.9,0,6.8-1.4,8.7-4.1 C220.7,50.3,221.7,47,221.7,43.2z"/> <path class="svgKeepaShadow" fill="#CDCCCC" d="M262.4,60.4l-5.5,0.2c-0.3-1.1-0.4-2.2-0.4-3.3h-0.4c-2.9,2.6-6.8,3.9-11.8,3.9c-2.7,0-5-0.8-7-2.4 s-2.9-3.8-2.9-6.8c0-3.6,1.5-6.5,4.6-8.7c3-2.2,8.7-3.3,17-3.5c0.1-0.6,0.1-1.2,0.1-1.9c0-2.9-0.8-4.8-2.3-5.8 c-1.5-1-3.9-1.4-7-1.4c-3.7,0-7.3,0.5-10.9,1.4l0.6-4.9c3.5-1,7.6-1.5,12.1-1.5c4.2,0,7.4,0.9,9.7,2.6s3.4,4.7,3.4,8.8 c0,1.1-0.1,3.1-0.2,6c-0.1,2.9-0.2,4.8-0.2,5.8C261.5,53.3,261.8,57.1,262.4,60.4z M256.2,53.6c-0.1-3.6-0.2-6.8-0.2-9.6 c-4.4,0-7.8,0.3-10.1,1c-3.8,1.2-5.8,3.4-5.8,6.7c0,3.2,2.3,4.8,6.8,4.8C250.8,56.5,253.9,55.5,256.2,53.6z"/> </g> <g> <g> <path class="svgKeepa" fill="#FFFFFF" d="M115.3,59h-7.7c0-0.3-1.3-2.3-4-6.1c-3.1-4.4-5.9-8.1-8.5-11c-3.5-3.9-6-5.9-7.7-5.9h-1.1 c0,5.5,0.1,13.1,0.4,23h-6.6c0.4-7.3,0.5-15.3,0.5-24c0-8.2-0.2-15.5-0.5-21.7h6.6c-0.2,6.2-0.4,12.6-0.4,19h0.8 c1.3,0,4.5-3,9.7-9c5.1-6,7.7-9.3,7.7-10h7.3c0,0.7-2.5,3.6-7.5,8.7c-5,5.1-8.7,8.5-11.2,10.3v0.4c2.7,1,7.2,5.7,13.5,14 C112.4,54.1,115.3,58.3,115.3,59z"/> <path class="svgKeepa" fill="#FFFFFF" d="M149.5,38.4c0,1,0,2.3-0.1,4.1l-24.2,0.4c0.2,3.4,1.6,6.3,4,8.6c2.4,2.3,5.6,3.5,9.6,3.5 c3.6,0,6.9-0.4,10-1.3l-0.6,5c-2.3,0.9-5.6,1.4-9.9,1.4c-6.1,0-10.7-1.7-13.9-5c-3.2-3.3-4.8-7.4-4.8-12.2 c0-5.1,1.5-9.5,4.4-13.2s6.8-5.5,11.8-5.5c4.5,0,8,1.3,10.3,4S149.5,34.2,149.5,38.4z M143.7,38.4c0-6.6-2.8-9.9-8.3-9.9 c-5.6,0-8.9,3.4-9.9,10.3L143.7,38.4z"/> <path class="svgKeepa" fill="#FFFFFF" d="M186.5,38.4c0,1,0,2.3-0.1,4.1l-24.2,0.4c0.2,3.4,1.6,6.3,4,8.6c2.4,2.3,5.6,3.5,9.6,3.5 c3.6,0,6.9-0.4,10-1.3l-0.6,5c-2.3,0.9-5.6,1.4-9.9,1.4c-6.1,0-10.7-1.7-13.9-5c-3.2-3.3-4.8-7.4-4.8-12.2 c0-5.1,1.5-9.5,4.4-13.2s6.8-5.5,11.8-5.5c4.5,0,8,1.3,10.3,4S186.5,34.2,186.5,38.4z M180.6,38.4c0-6.6-2.8-9.9-8.3-9.9 c-5.6,0-8.9,3.4-9.9,10.3L180.6,38.4z"/> <path class="svgKeepa" fill="#FFFFFF" d="M226.5,40.9c0,5.1-1.4,9.5-4.3,13.3c-2.9,3.8-6.9,5.7-12.1,5.7c-4.3,0-7.1-0.8-8.5-2.3h-0.4 c0,6.5,0.1,12.3,0.2,17.4h-6.6c0.5-6.2,0.8-13.9,0.8-23.1c0-11.3-0.6-20-1.8-26.2l6.2-0.9l0.5,3.5h0.4c2.3-2.6,6-4,11-4 c4.5,0,8,1.6,10.6,4.9S226.5,36.4,226.5,40.9z M220.2,41.8c0-3.5-0.9-6.4-2.7-8.9c-1.8-2.5-4.4-3.7-7.7-3.7 c-4.2,0-7.2,1.3-9.1,3.8c0.4,7.9,0.6,14.6,0.6,20.3c1.9,1.6,4.4,2.4,7.4,2.4c3.9,0,6.8-1.4,8.7-4.1 C219.3,48.9,220.2,45.6,220.2,41.8z"/> <path class="svgKeepa" fill="#FFFFFF" d="M261,59l-5.5,0.2c-0.3-1.1-0.4-2.2-0.4-3.3h-0.4c-2.9,2.6-6.8,3.9-11.8,3.9c-2.7,0-5-0.8-7-2.4 s-2.9-3.8-2.9-6.8c0-3.6,1.5-6.5,4.6-8.7c3-2.2,8.7-3.3,17-3.5c0.1-0.6,0.1-1.2,0.1-1.9c0-2.9-0.8-4.8-2.3-5.8 c-1.5-1-3.9-1.4-7-1.4c-3.7,0-7.3,0.5-10.9,1.4l0.6-4.9c3.5-1,7.6-1.5,12.1-1.5c4.2,0,7.4,0.9,9.7,2.6s3.4,4.7,3.4,8.8 c0,1.1-0.1,3.1-0.2,6c-0.1,2.9-0.2,4.8-0.2,5.8C260.1,51.9,260.4,55.7,261,59z M254.8,52.2c-0.1-3.6-0.2-6.8-0.2-9.6 c-4.4,0-7.8,0.3-10.1,1c-3.8,1.2-5.8,3.4-5.8,6.7c0,3.2,2.3,4.8,6.8,4.8C249.4,55.1,252.5,54.1,254.8,52.2z"/> </g> </g> </g> <g> <g> <path class="svgKeepaShadow" fill="#CDCCCC" d="M46.4,45.8h-13v13H21.6v-13h-13V34h13V21h11.8v13h13V45.8z M22.2,34.6v10.6h10.4V34.6H22.2z"/> </g> <g> <g> <path class="svgKeepa" fill="#FFFFFF" d="M45,44.4h-13v13H20.1v-13h-13V32.6h13v-13h11.8v13h13V44.4z M20.8,33.2v10.6h10.4V33.2H20.8z"/> </g> </g> </g> </svg> ';
function getLogoSVG(a){return'<img style="vertical-align: middle; width: '+a+'px; !important" src="'+imgCDNUrl+'logo_circled.svg" alt="">'}var clearedLocalStorage=!1,isSocialAccount=!1,userData=null;
function handleSettingsRequest(a,b){if(null!=a)if(-2==a.status)settings.reset(!1,!1);else if(userData=a.user,null==userData&&(userData=a.data),null!=userData){isSocialAccount=!!a.sso;localStorageIsPolyFill||settings.setExtensionSetting("token",storage.token);if(null!=userData.localStorage)try{try{userData.localStorage=JSON.parse(userData.localStorage),delete userData.localStorage[intranet.key]}catch(q){reportBug(q,userData.localStorage),userData.localStorage=null}for(var d={hashSynced:storage.hashSynced,
wishlistAddonId:storage.wishlistAddonId,wishlistDomain:storage.wishlistDomain,token:storage.token,initFailed:storage.initFailed},g=0;g<storage.length;g++)if("token"!=g){var n=storage.key(g);"string"==typeof n&&0==n.indexOf("11")&&(d[n]=storage[n])}clearedLocalStorage||null==d.token||"undefined"==d.token||64!=d.token.length||(storage.clear(),storage.token=d.token,clearedLocalStorage=!0);for(var t in userData.localStorage){var h=userData.localStorage[t];"null"!=h&&null!=h&&"undefined"!=h&&(/hashSynced|install|token|keepa\..*|addonVersion.*|wishlist/.test(t)||
"undefined"!=typeof d[t]||(storage[t]=h))}isNaN(Number(storage.currencyDomainId))||(currencyDomainId=Number(storage.currencyDomainId));for(var m in d){var r=d[m];void 0!=r&&null!=r&&(storage[m]=r)}}catch(q){console.log(q),reportBug(q)}storage.accountType=userData.accountType;storage.username="ANON"!=AccountType[userData.accountType]?userData.userName:la._43;verifyRegExp.domainId.test(userData.domainId)?storage.domain=userData.domainId:verifyRegExp.domainId.test(storage.language)&&(storage.domain=
storage.language);1>storage.domain&&(storage.domain=1);storage.language=userData.language||storage.language;storage.rssHash=userData.rssHash;storage.defaultNotificationInterval=userData.defaultNotificationInterval;storage.defaultNotificationType=JSON.stringify(userData.defaultNotificationType);storage.sendUpcomingLightningDealsAlert=userData.sendUpcomingLightningDealsAlert;storage.sendStartLightningDealsAlert=userData.sendStartLightningDealsAlert;storage.useSmile=userData.useSmile;storage.noCouponsForAlerts=
userData.noCouponsForAlerts;storage.noPrimeExclAlerts=userData.noPrimeExclAlerts;storage.stockMaxOrderQty=userData.stockMaxOrderQty;storage.lastVisit=userData.lastVisit;d=Date.now();null!=storage.lastManageVisitUpdate?12E5<d-Number(storage.lastManageVisitUpdate)&&(storage.lastManageVisitUpdate=d,storage.lastManageVisit=userData.lastManageVisit):storage.lastManageVisit=userData.lastManageVisit;storage.lastManageVisitUpdate=d;storage.showSalesRankGraph="undefined"===typeof storage.showSalesRankGraph?
"undefined"!=typeof storage.showGraphs?storage.showGraphs[7]:0:storage.showSalesRankGraph;storage.webGraphType&&storage.webGraphRange||(storage.webGraphType=JSON.stringify(GraphService.getDefaultWebGraphType()),storage.webGraphRange=GraphService.getDefaultWebGraphRange().toString(),storage.s_overlay&&(d=JSON.parse(storage.s_overlay),g=GraphService.getWebGraphTypeAllOff(),g[CsvType.AMAZON.index]=d[CsvType.AMAZON.index],g[CsvType.NEW.index]=d[CsvType.NEW.index],g[CsvType.USED.index]=d[CsvType.USED.index],
g[CsvType.SALES.index]=d[CsvType.SALES.index],g[CsvType.WAREHOUSE.index]=1,g[CsvType.LIGHTNING_DEAL.index]=1,storage.webGraphType=JSON.stringify(g),storage.webGraphRange=d[4].toString()));storage.removeItem("s_overlay");userData.casinLocales&&Array.isArray(userData.casinLocales)?storage.casinLocales=JSON.stringify(userData.casinLocales):(d=null,"string"===typeof storage.casinLocales&&(d=tryParseJSON(storage.casinLocales)),g=null,d&&(g=d.map(function(q){return!!q}),"1"!==storage.casinLimited&&(g[0]=
!1)),Array.isArray(g)&&g.length===LocaleType.length||(g=Array(LocaleType.length).fill(!1),g[0]=!0),storage.casinLocales=JSON.stringify(g));storage.casinLimited&&storage.removeItem("casinLimited");13===Number(storage.currencyDomainId)&&(storage.currencyDomainId=0);userData.emailAddress?storage.email=userData.emailAddress:storage.removeItem("email");userData.twitterId?storage.twitter=userData.twitterId:storage.removeItem("twitter");null!=a.ear?"VERIFIED"!=EmailStatus[a.ear.status]?(setTimeout(function(){resend_Verify()},
4E3),settings.isEmailVerified=!1):settings.isEmailVerified=!0:settings.isEmailVerified=!0;settings.setExtensionSettingAll();twitterActive=storage.twitter?1:0;emailActive=storage.email?1:0;manageSortType=storage.sortDefault;refreshDomain(storage.domain);b||$("#tabTrack").hasClass("active")?refreshLoginBar():settings.refresh()}}
function refreshLoginBar(){$("#loginOverlay").hide();storage.accountType&&0!=storage.accountType?(1!=storage.accountType?updateMenuUserMenu({settings:1,login:0,register:0,subscriptions:1,api:storage.hasAPI?1:0,logout:1}):updateMenuUserMenu({settings:1,login:1,register:1,subscriptions:0,api:0,logout:1}),$("#panelUsername").text(storage.username),updateMenuUserPanel(1)):($("#panelUsername").text(la._9),updateMenuUserPanel(0));$("#submitLogin").val(la._2);$("#submitRegister").val(la._42)}
function updateMenuUserPanel(a){0===a?($("#panelUserMenu").hide(),$("#userMenuOverlay").css({opacity:0,display:"none"}),$("#panelUserRegisterLogin").show()):($("#panelUserMenu").show(),$("#panelUserRegisterLogin").hide())}
var userMenuEntriesActive={login:1,register:1,settings:1,subscriptions:1,api:0,logout:0},userMenuEntries={login:function(){return'<div id="UMElogin"><i class="fa fa-sign-in fa-fw fa-lg"></i>&ensp;'+la._2+"</div>"},register:function(){return'<div id="UMEregister"><i class="fa fa-user-plus fa-fw fa-lg"></i>&ensp;'+la._42+"</div>"},settings:function(){return'<div id="UMEsettings"><a href="#!channels"><i class="fa fa-fw fa-cog fa-lg"></i>&ensp;'+la._8+"</a></div>"},subscriptions:function(){return'<div id="UMEsubscriptions"><a href="#!settings/1"><i class="fa fa-fw fa-unlock fa-lg"></i>&ensp;'+
la._647+"</a></div>"},api:function(){return'<div id="UMEapi"><a href="#!api"><i class="fa fa-fw fa-cloud fa-lg"></i>&ensp;API Access</a></div>'},logout:function(){return'<div id="UMElogout"><i class="fa fa-fw fa-power-off fa-lg"></i>&ensp;'+la._392+"</div>"}};function showLoginOverlay(){$("#loginOverlay").show()}
function updateMenuUserMenu(a){var b="",d;for(d in a)a.hasOwnProperty(d)&&userMenuEntriesActive.hasOwnProperty(d)&&(userMenuEntriesActive[d]=a[d]);for(var g in userMenuEntriesActive)userMenuEntriesActive.hasOwnProperty(g)&&1===userMenuEntriesActive[g]&&userMenuEntries.hasOwnProperty(g)&&(b+=userMenuEntries[g]());replaceHtml("userMenuOverlay",b);$("#UMElogin").click(function(){showLoginOverlay()});$("#UMElogout").click(function(){logout()});$("#UMEregister").click(function(){showLoginOverlay();$("#registerTab").trigger("click")})}
var reCaptchaPromise;
function isUserHuman(a){var b=$.Deferred();if(isHuman)return b.resolve(""),b;reCaptchaPromise=$.Deferred();var d=showPopup("One time anti-bot check",'<div id="recaptcha" class="g-recaptcha"></div><div id="reCaptchaHelp"><div style="display:block" id="loadingIcon"></div><br>Loading reCaptcha ...</div><br>',a);var g=window.setTimeout(function(){$("#reCaptchaHelp").html("Unable to load reCaptcha from Google. Please verify you can access Google.com unrestricted. We use the reCaptcha service to verify you are human and to block bots from abusing our service.")},5E3);
if("undefined"!=typeof grecaptcha)try{grecaptcha.reset(),$("#reCaptchaHelp").remove(),grecaptcha.render("recaptcha",reCaptchaParm)}catch(n){reportBug(n),showErrorPopup(n)}else $.ajax({url:"https://www.google.com/recaptcha/api.js?onload=reCaptchaOnload&render=explicit",dataType:"script",success:function(){$("#reCaptchaHelp").remove();window.clearTimeout(g)}});reCaptchaPromise.always(function(n){$(".pls-container").remove();d.close();b.resolve(n);addon()});d.promise.fail(function(){b.reject()});return b}
var reCaptchaParm={sitekey:"6Lf6pwITAAAAAFzmtyDr1Vv629mD-I6QiibwemP1",callback:function(a){reCaptchaPromise.resolve(a)},theme:"light"};function reCaptchaOnload(){$("#reCaptchaHelp").remove();addon("resize","1000px");grecaptcha.render("recaptcha",reCaptchaParm)}
function registerAnonymous(a){var b=$.Deferred();iframe.isIframe&&0==$("#loginOverlayBox").length&&($("#content").before(getLoginForm()),initLogin());$("#loginOverlay").css("position","fixed");showLoginOverlay();addon("resize",350+float2int($("#loginOverlayBox").height()));!0!==a&&$("#registerTab").trigger("click");var d="registerAnon"+Date.now();loginCallbacks[d]=function(g){$("#guestContainer").remove();delete loginCallbacks[d];$("#loginOverlay-close").trigger("click");$("#loginOverlay").css("position",
"absolute");g||a?b.resolve():isUserHuman(!0).done(function(n){network.request({path:"user/session",type:"register",captcha:n}).always(function(t){settings.send().done(function(){settings.retrieve(!0).done(function(){refreshLoginBar();sendHelloGraph();b.resolve();loginProgress.notify(!0)}).fail(function(){b.reject(!0);loginProgress.notify(!1)})}).fail(function(){loginProgress.notify(!1);b.reject(!0)})})}).fail(function(){$("#loginOverlay").css("position","absolute");b.reject(!1)})};$("#loginForm").before('<div id="guestContainer" style="text-align: right;"><div id="continueGuest" class="button" style="display: inline-block;">'+
la._588+'</div><br><hr style="border-color:rgba(10, 40, 82, 0.5) !important"></div>');$("#continueGuest").on("click",function(){loginProgress.notify(!1)});b.fail(function(){addon("resize",50+float2int($("#initPage").height()))});return b}function wasForceLogout(){}
function logout(a){a&&showPopup(la._27,'<div style="max-width:600px"><p class="mdc-typography--body2">'+la._941+"</p></div>",!0);a=storage.token;var b=storage.username,d=storage.install,g=storage.optOut_crawl,n=storage.overlayPriceGraph;storage.clear();network.clearDatabase();settings.reset(!0,!0);d&&(storage.install=d);g&&(storage.optOut_crawl=g);n&&(storage.overlayPriceGraph=n);initializeSettings();network.request({path:"user/session",type:"logout",token:a}).always(function(t){updateMenuUserPanel(0);
refreshLoginBar();replaceHtml("panelUsername",la._41+b);currency=getCurrencyByDomain(storage.domain);try{callSubPage(1)}catch(h){reportBug(h,JSON.stringify(h))}""==storage.username||/anon/.test(storage.username)?$("#name").val(storage.username):$("label[for=name]").append(" "+storage.username);updateMenuUserPanel(0);intranet.postMessage({key:"logout"});sendHelloGraph(!0);network.clearDatabase()})}
var popupSettings="toolbar=no,statusbar=no,location=no,width=900px,height=600px,resizable=yes",popupName="Keepa_OpenID_Login";
window.addEventListener("message",function(a){if(a.data&&a.origin)if(~a.origin.indexOf("https://dyn.keepa.com"))handleSocialLoginCallback(a.data);else if(~a.origin.indexOf("https://discuss.keepa.com"))switch(a.data.key){case "discussLoaded":$(".pL").remove();$("#discussContainer").slideDown("slow");break;case "discussNavigation":var b=a.data.value;a=a.data.title||"Keepa.com";b="#!discuss"+b.substring(b.indexOf("keepa.com")+9);history.replaceState({path:b},a,b);document.title=a}});var lastSocial="";
function handleSocialLoginCallback(a){try{var b=0<location.href.indexOf("#!tgMessengerLogin"),d=function(){""==redirect_uri?(reportBug(null,"redirect_uri is empty after socialLogin loop"),showErrorPopup()):network.request({path:"user/session",type:"fbApp",content:"tg"}).done(function(g){document.location=redirect_uri+g.hash}).fail(showErrorPopup)};if(~a.status)switch("twitter"==a.provider&&"twitterNotify"==lastSocial&&(a.provider=lastSocial),a.provider){case "alreadyRegistered":showPopup("External Account Link failed",
"The external account is already linked with a Keepa Account. You need to remove that link first: log out, then use the external account to sign in and go to the settings page. There you can either delete the link or, if not needed anymore, delete the whole account.",!0);break;case "loginNotExist":showPopup("External Account login failed",'No Keepa account is connected with the chosen "login with" option. You can register a new one instead or use a different login option.',!0);break;case "google":case "amazon":case "twitter":1==
a.status?showPopup("Error","Social login failed, as you denied Keepa access / aborted the process.",!0):(localStorageSupported&&settings.setToken(a.token,!0),settings.retrieve().always(function(){b&&d();loginProgress.notify(!0)}))}else throw Error("status != 0");}catch(g){loginProgress.notify(!1),showErrorPopup(),reportBug(g,"socialCallback: "+JSON.stringify(a))}}
function sendToDiscussSSO(){2==storage.accountType&&null!=sso&&network.request({path:"user/session",type:"sso",sso:sso,sig:sig}).done(function(a){if(a.url)location.hash="#!nothing",setTimeout(function(){location.hash="#!discuss/"+a.url},10);else if(a.error){var b=a.error;"emailNew"===b.type?null==storage.email?showPopup("Missing eMail",la._428,!0):resend_Verify():"alreadyUsed"===b.type?(showPopup("eMail already in use",'Your email address is already assigned to another account and can not be used again when using the forum. Please sign in using the account you used the first time accessing the forum or change your email address through the <a class="settings-chpw" href="#!settings">settings</a>.<br><br> You can gain access to all your accounts associated with your email address by requesting a <a class="settings-chpw" id="loginMailPopup">account recovery email</a>.',
!0),replaceHtml("initPage",""),$("#loginMailPopup").on("click",function(){setTimeout(function(){network.request({path:"user/session",type:"loginMail"}).done(function(d){null==d.error?showPopup("Account access email sent.","Please check your email: "+storage.email,!0):showErrorPopup()}).fail(function(){showPopup("Error",a.status+" "+la._error,!0)})},400)})):showPopup("Error",a.status+" "+la._error,!0)}}).fail(showErrorPopup).always(function(){sig=sso=null})}
function addOpenIdEvents(a){var b=$("#loginForm"),d=a?"&redirect_uri="+a:"";b.find("#openIDoogle").click(function(){var n=getSocialLoginURL("googleLogin",d,isMobile?"1":"0");isMobile?document.location=n:window.open(n,popupName,popupSettings)});b.find("#openIDwitter").click(function(){var n=getSocialLoginURL("twitterLogin",d,isMobile?"1":"0");isMobile?document.location=n:window.open(n,popupName,popupSettings)});b.find("#openIDmazon").click(function(){var n=getSocialLoginURL("amazonLogin",d,isMobile?
"1":"0");isMobile?document.location=n:window.open(n,popupName,popupSettings)});$("#pwreset").click(function(){$("#loginTable").hide();$("#resetForm").show();$("#emailReset").val($("#emailRegister").val())});$("#PWresetBack").click(function(){$("#resetForm").hide();$("#emailReset").val("");$("#loginTable").show()});var g=!1;$("#resetForm").submit(function(n){n.preventDefault();n=$("#emailReset").val().trim();if(0==n.length)$("#emailReset").effect("highlight");else{if(g)return!1;g=!0;$("#submitPWreset").val(la._45);
network.request({path:"user/session",type:"emailpw",email:n}).done(function(){g=!1;$("#resetForm").html('<div style="width: 400px; text-align: justify; margin-right: 30px;">'+la._375+"</div>")}).fail(function(t){g=!1;replaceHtml("resetForm",'<div style="width: 400px; text-align: justify; margin-right: 30px;">'+la._error+"</div>");reportBug(null,"resetForm fail: "+t.status)})}})}
function getSocialLoginURL(a,b,d){var g=protocol+network.server[network.serverIndex]+ajaxPrefix,n=localStorageSupported?storage.token:Guid.newGuid(),t=$("#registerEmailBox").is(":visible")?"1":"0";return g+"user/social/init/?user="+n+"&type="+a+"&noCache="+Date.now()+b+"&isRegister="+t+"&isRedirect="+d}var la,languageObjects={};
function loadLanguage(a){"pending"!==languagePromise.state()&&(languagePromise=$.Deferred());a||(a="en",3==storage.language?a="de":4==storage.language?a="fr":5==storage.language?a="ja":7==storage.language?a="cn":8==storage.language?a="it":9==storage.language&&(a="es"));if(languageObjects[a])la=languageObjects[a],languagePromise.resolve();else{if(/test\.keepa/.test(location.href))var b="https://test.keepa.com/js/languages/"+a+".json";else if(/localhost:63342\/web/.test(location.href))b="http://localhost:63342/web/js/languages/"+
a+".json?"+Date.now();else{var d=$('script[src$="keepa.js"]').attr("src");d=d?d.split("/").slice(-2,-1)[0]:Date.now();b=CDNUrl+"languages/"+a+".json?"+d}var g=0,n=function(){network.ajax({type:"GET",url:b,dataType:"json"},!0).done(function(t){la=t;languageObjects[a]=t;languagePromise.resolve()}).fail(function(t){3<g?(reportBug(null,"could not load language: "+a+" "+b+" "+JSON.stringify(t)),showErrorPopup("unable to load files. please check your network connection and try to reload page."),languagePromise.reject()):
(g++,setTimeout(n,500))})};n()}}var loginCallbacks={},loginProgress=$.Deferred();loginProgress.progress(function(a){for(var b in loginCallbacks)loginCallbacks[b](a)});
var initRun=!1,initLogin=function(){$("#registerTab").click(function(){$(this).hasClass("inactive")&&(toggleLoginRegister(!0),$(this).removeClass(),$("#loginTab").addClass("inactive"),$("#registerTabBox").show("fold",300))});var a=$(".toggle-password");a.click(function(){a.toggleClass("fa-eye fa-eye-slash");var g=$("#password");"password"==g.attr("type")?g.attr("type","text"):g.attr("type","password")});$("#loginTab").click(function(){$(this).hasClass("inactive")&&(toggleLoginRegister(!1),$(this).removeClass(),
$("#registerTab").addClass("inactive"))});$("#loginOverlay-close").click(function(g){$("#loginOverlay").hide();$("#loginTable").show();$("#resetForm").hide();$("#registerForm").find(".error").remove();g.preventDefault();loginProgress.notify(!1)});$("#usernameRegister").blur(function(){storage.username=$(this).val()});var b=!1,d=function(){if(b)return!1;b=!0;$("#submitLogin").val(la._45);isUserHuman(!0).done(function(g){var n=$("#emailRegister").val().trim();g={path:"user/session",type:"register",
username:$("#username").val().trim(),password:$("#password").val().trim(),email:n,captcha:g};0==n.length&&delete g.email;var t=function(h,m){$("#loginForm").find(".error").remove();$("#submitLogin").val(la._42);$("#pwreset").hide();$("#loginForm").find("label[for="+h+"]").append('<span class="error">'+m+"</span>")};network.request(g).done(function(h){b=!1;if(h.error)switch(h.error.type){case "usernametaken":t("username",la._50);break;case "emailAddressTaken":t("email",la._936);$("#pwreset").show().velocity({opacity:1},
{duration:300});break;default:reportBug(null,"user/session register: default "+JSON.stringify(h)),showErrorPopup()}else settings.setToken(h.token,!0),$("#submitLogin").val(la._44),settings.retrieve().done(function(){$("#loginOverlay-close").trigger("click");intranet.postMessage({key:"login"})}),sendToDiscussSSO(),sendHelloGraph(),loginProgress.notify(!0)}).fail(function(h){b=!1;if(h.hasOwnProperty("details")&&h.hasOwnProperty("error")&&"invalidParameter"==h.error)for(var m in h.details){var r=h.details[m];
if("invalid"!=r.message){var q="",u="";switch(r.type){case "userName":q="username";u=la._48.replace("6","2");break;case "restrictedUserName":q="username";u=r.message;break;case "userPasswordOld":case "userPassword":q="password";u=la._48;break;case "userEmail":q="email";u=la._49;break;case "captcha":q=r.type;u=r.message;break;default:reportBug(null,"user/session register: case unknown "+JSON.stringify(h)),showErrorPopup()}$("#loginForm").find(".error").remove();$("#loginForm").find("label[for="+q+
"]").append('<span class="error">'+u+"</span>")}}else reportBug(null,"keepa register "+JSON.stringify(h)),showErrorPopup();$("#submitLogin").val(la._42)})}).fail(function(){$("#submitLogin").val(la._42);b=!1})};$("#loginForm").submit(function(g){g.preventDefault();if($("#loginTab").hasClass("inactive"))d();else{if(b)return!1;b=!0;$("#submitLogin").val(la._45);replaceHtml("loginError","");network.request({path:"user/session",type:"login",username:$("#username").val().trim(),password:$("#password").val().trim()}).done(function(n){b=
!1;null==n.error||"undefined"==typeof n.error?(settings.setToken(n.token,!0),$("#submitLogin").val(la._44),settings.retrieve().done(function(){$("#loginOverlay-close").trigger("click");intranet.postMessage({key:"login"})}),sendToDiscussSSO(),sendHelloGraph(),loginProgress.notify(!0),network.clearDatabase()):"loginCredentialsWrong"===n.error.type?($("#submitLogin").val(la._2),replaceHtml("loginError",la._46)):(showErrorPopup(),reportBug(null,"user/session login: "+JSON.stringify(n)))}).fail(function(n){b=
!1;if(n.hasOwnProperty("details")&&n.hasOwnProperty("error")&&"invalidParameter"==n.error)for(var t in n.details){var h=n.details[t];if("invalid"!=h.message){var m="",r="";switch(h.type){case "userName":m="username";r=la._48.replace("6","4");break;case "userPasswordOld":case "userPassword":m="password";r=la._48;break;default:reportBug(null,"user/session register: case unknown "+JSON.stringify(n)),showErrorPopup()}$("#loginForm").find(".error").remove();$("#loginForm").find("label[for="+m+"]").append('<span class="error">'+
r+"</span>")}}else reportBug(null,"user/session login: "+JSON.stringify(n)),showErrorPopup();$("#submitLogin").val(la._2)})}});addOpenIdEvents()};window.initTimestamp=Date.now();window.settingsLoadedTimestamp=0;window.networkInitTimestamp=0;var isDomainSwitch=!1,sentInitOnce=!0;
function sendInitTimeStat(a){if(sentInitOnce){sentInitOnce=!1;try{var b=Date.now()-window.initTimestamp,d=window.networkInitTimestamp-window.initTimestamp,g=window.settingsLoadedTimestamp-window.initTimestamp;console.log("network took "+d+"ms, init took "+g+"ms");network.ajax({url:"app/stats/?type=init"+(iframe.isIframe?"Iframe":"Website")+"&took="+b+"&tookNetwork="+d+"&tookSettings="+g+"&domain="+a,type:"GET",dataType:"json"},!0)}catch(n){}}}
function initPage(){initRun=!0;window.settingsLoadedTimestamp=Date.now();if("undefined"==typeof storage.domain||7==storage.domain)storage.domain=1;loadLanguage();languagePromise.done(function(){storage.removeItem("hash");if(iframe.isIframe)iframe.init();else{sendInitTimeStat(storage.domain);var a=!1;setTimeout(function(){try{inIframe()&&(0<location.href.indexOf("#!sso")||0<location.href.indexOf("#!logout")||0<window.parent.location.href.indexOf("#!discuss"))&&(a=!0,window.parent.location=location.href,
$("html").html(""))}catch(b){}},0);setTimeout(function(){if(!a){generateIndex();initMenu();initSearch();replaceHtml("currentLanguage",'<div style="display:flex;justify-content:space-between;">\n\t\t\t\t\t\t\t<span class="languageMenuText">'+la._56+'</span>\n\t\t\t\t\t\t\t<img class="languageMenuImg" style="margin-top:5px;width:30px;height:20px;" src="'+(1==storage.language?englishFlagLarge:flagsLarge[storage.language])+'"  rel="language"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style="display:flex;justify-content:space-between;height:30px;margin-top:5px;">\n\t\t\t\t\t\t\t<span class="languageMenuText">'+
la._55+'</span>\n\t\t\t\t\t\t\t<span class="languageMenuImg" style="vertical-align: top;" rel="domain">.'+getTldByDomain(storage.domain)+"</span>\n\t\t\t\t\t\t</div>");var b=null,d=null,g=$("#languageOverlay"),n=$("#userMenuOverlay");$("#userMenuPanel");var t=$("#currentLanguage"),h=$("#panelUser"),m=function(){if($(this).hasClass("switch__currency"))return CurrencySwitch.init(),!1;if("undefined"===typeof $(this).attr("rel"))return!1;var q=$("#currentLanguage").find("[rel = "+$(this).attr("rel")+
"]");$(this).attr("src");"domain"==$(this).attr("rel")?($("#language_domains").find(".active").removeClass("active"),q.text("."+$(this).text().substring(1)),$(this).addClass("active")):"language"==$(this).attr("rel")&&($("#language_language").find(".active").removeClass("active"),$(this).addClass("active"));q=storage.language;var u=storage.domain;g.find(".active").each(function(){var D=$(this).attr("rel"),F=$(this).attr("setting");F&&D&&(storage[D]=F)});if(storage.language!=q||storage.domain!=u)isDomainSwitch=
!0,refreshDomain(storage.domain),settings.send(),storage.language!=q?settings.refresh():("#!product"==lastUrl&&(q=lastSubUrl.indexOf("-"),0<q&&(lastSubUrl=storage.domain+lastSubUrl.substr(q),location.hash=lastUrl+"/"+lastSubUrl)),callSubPage(0));return!1};g.find("span").on("click",m);g.find("img").on("click",m);g.hover(function(){clearTimeout(b)},function(){b=setTimeout(function(){g.velocity("slideUp",{duration:150})},500)});t.on("click",function(){clearTimeout(b);g.velocity("slideDown",{duration:100})});
t.on("mouseleave",function(){b=setTimeout(function(){g.velocity("slideUp",{duration:150})},500)});t.on("mouseenter",function(){clearTimeout(b)});var r=!1;h.hover(function(){clearTimeout(b);clearTimeout(d);r||(r=!0,g.velocity("slideUp",{duration:70}),"none"==$("#panelUserRegisterLogin").css("display")&&(n=$("#userMenuOverlay"),n.css({display:"inline-block"}),n.velocity("slideDown",{duration:100})))},function(){"none"==$("#panelUserRegisterLogin").css("display")&&(d=setTimeout(function(){n.velocity("slideUp",
{duration:100});r=!1},250))});$("#language_domains").find("[setting = "+storage.domain+"]").addClass("active");$("#language_language").find("[setting = "+storage.language+"]").addClass("active");initLogin();$("#productOverlay-close").click(function(q){q.preventDefault();$(document).off("click.overlay");closeProductOverlay()});refreshLoginBar();$("#userMenuPanel").click(function(){$("#panelUserRegisterLogin").is(":visible")?$("#loginOverlay").show():$("#userMenuOverlay").css("display","inline-block")});
$("#userMenuPanel").on("mouseenter",function(){$("#panelUserRegisterLogin").is(":visible")||$("#userMenuOverlay").css("display","inline-block")});$("#loginSettings").click(function(){window.location.hash=""==window.location.hash?"#!settings":"#!settings/"+window.location.hash.replace(/#!settings\|*/,"");return!1});$("#searchBarForm").submit(function(q){q.preventDefault();""!=$("#searchInput").val()&&$("#searchInput").val()!=la._159&&(window.location.href="#!search/"+storage.domain+"-"+encodeURIComponent($("#searchInput").val()))});
$("#submitSearch").click(function(){$("#searchBarForm").trigger("submit")});pageLoaded();2==storage.accountType&&settings.isEmailVerified&&"#!discuss"!=lastUrl&&discourseApi.notification(function(q){if(!q.errors&&q.notifications){for(var u=0,D=0;D<q.notifications.length;D++)q.notifications[D].read||u++;var F=q.load_more_notifications.substr(q.load_more_notifications.indexOf("username=")+9);0<u&&($("#panelUserMenu").prepend('<span title="Unread Forum Notifications" id="userMenuNotification">'+u+"</span>"),
$("#userMenuNotification").on("click",function(M){document.location=discourseUrl+"/u/"+F.toLowerCase()+"/notifications";$(M.currentTarget).hide("slow",function(){$(M.currentTarget).remove()})}).colorTip({color:"transparent"}))}})}},1)}})}var redirect_uri="";
function tgBotLogin(){var a=getDefaultLocation(),b="en";3==a?b="de":5==a?b="ja":7==a?b="cn":8==a&&(b="it");loadLanguage(b);languagePromise.done(function(){var d=location.hash.split("-");if(2>d.length)console.error("invalid split length: ",d),showErrorPopup("invalid split length: "+d);else if(redirect_uri=decodeURIComponent(d.splice(1).join("-")),0!=redirect_uri.indexOf("https://keepa.kallisto.rocks/")&&0!=redirect_uri.indexOf("https://bot.keepa.com/"))reportBug(null,"untrusted redirect_uri: ",redirect_uri),
showErrorPopup("untrusted redirect_uri: "+redirect_uri);else{redirect_uri=-1<redirect_uri.indexOf("?")?redirect_uri+"&authorization_code=":redirect_uri+"?authorization_code=";$("#content").html(getLoginForm());$("#loginOverlay-close").after('<img src="https://keeepa.amztoolz.com/_cdn/img/logo_circled.svg" alt="" style="width:135px;margin:0 0 10px 42px;">');$("#loginOverlay-close").remove();document.querySelector('meta[name="viewport"]').content="user-scalable=yes, initial-scale=1.0, maximum-scale=2.0, minimum-scale=0.2, width=device-width, height=device-height";
$("#submitLogin").css("fontSize","17px");$("#loginForm").addClass("is-tgbot-login");$("#loginForm label, #orOpenId").css("fontSize","16px");$("#loginOverlay").css({background:"inherit",display:"flex",justifyContent:"center"});$("html").css({background:"#989898"});$("#loginOverlayBox").css({margin:"15px",position:"static"});$("#registerTab").click(function(){$(this).hasClass("inactive")&&(toggleLoginRegister(!0),$(this).removeClass(),$("#loginTab").addClass("inactive"))});$("#loginTab").click(function(){$(this).hasClass("inactive")&&
(toggleLoginRegister(!1),$(this).removeClass(),$("#registerTab").addClass("inactive"))});if(localStorageSupported){storage.token=null;try{storage.clear(),intranet.postMessage({key:"logout"}),network.clearDatabase(),initializeSettings()}catch(t){}}addOpenIdEvents(encodeURIComponent(redirect_uri));var g=!1,n=function(){if(g)return!1;g=!0;$("#submitLogin").val(la._45);$(this);isUserHuman(!0).done(function(t){var h=$("#emailRegister").val().trim();t={path:"user/session",type:"register",username:$("#username").val().trim(),
password:$("#password").val().trim(),email:h,captcha:t,sso:"fbBot",content:"tg"};0===h.length&&delete t.email;var m=function(r,q){$("#loginForm").find(".error").remove();$("#submitLogin").val(la._42);$("#pwreset").hide();$("#loginForm").find("label[for="+r+"]").append('<span class="error">'+q+"</span>")};network.request(t).done(function(r){g=!1;if(r.error)switch(r.error.type){case "usernametaken":m("username",la._50);break;case "emailAddressTaken":m("email",la._936);$("#pwreset").show().velocity({opacity:1},
{duration:300});break;default:reportBug(null,"user/session register: default "+JSON.stringify(r)),showErrorPopup()}else $("#submitLogin").val(la._44),document.location=redirect_uri+r.hash}).fail(function(r){g=!1;if(r.hasOwnProperty("details")&&r.hasOwnProperty("error")&&"invalidParameter"===r.error)for(var q in r.details){var u=r.details[q];if("invalid"!==u.message){var D="",F="";switch(u.type){case "userName":D="username";F=la._48.replace("6","4");break;case "userPasswordOld":case "userPassword":D=
"password";F=la._48;break;case "userEmail":D="email";F=la._49;break;case "captcha":D=u.type;F=u.message;break;default:reportBug(null,"user/session register: case unknown "+JSON.stringify(r)),showErrorPopup()}$("#loginForm").find(".error").remove();$("#loginForm").find("label[for="+D+"]").append('<span class="error">'+F+"</span>")}}else reportBug(null,"keepa register "+JSON.stringify(r)),showErrorPopup("Register Failed.");$("#submitLogin").val(la._42)})}).fail(function(){$("#submitLogin").val(la._42);
g=!1})};g=!1;$("#loginForm").submit(function(t){t.preventDefault();if($("#loginTab").hasClass("inactive"))n();else{if(g)return!1;g=!0;$("#submitLogin").val(la._45);replaceHtml("loginError","");network.request({path:"user/session",type:"login",username:$("#username").val().trim(),password:$("#password").val().trim(),sso:"fbBot",content:"tg"}).done(function(h){g=!1;null===h.error||"undefined"==typeof h.error?(localStorageSupported&&settings.setToken(h.token,!0),$("#submitLogin").val(la._44),document.location=
redirect_uri+h.hash,network.clearDatabase()):"loginCredentialsWrong"===h.error.type?($("#submitLogin").val(la._2),replaceHtml("loginError",la._46)):(showErrorPopup("Login Failed."),reportBug(null,"user/session login: "+JSON.stringify(h)))}).fail(function(h){g=!1;if(h.hasOwnProperty("details")&&h.hasOwnProperty("error")&&"invalidParameter"===h.error)for(var m in h.details){var r=h.details[m];if("invalid"!=r.message){var q="",u="";switch(r.type){case "userName":q="username";u=la._48.replace("6","4");
break;case "userPasswordOld":case "userPassword":q="password";u=la._48;break;default:reportBug(null,"user/session register: case unknown "+JSON.stringify(h)),showErrorPopup()}$("#loginForm").find(".error").remove();$("#loginForm").find("label[for="+q+"]").append('<span class="error">'+u+"</span>")}}else reportBug(null,"user/session login: "+JSON.stringify(h)),showErrorPopup("Login Failed.");$("#submitLogin").val(la._2)})}})}})}
function pageLoaded(){"function"===typeof window.callPhantom&&window.callPhantom({status:"loaded"})}var popupActive3=!1,popupActive4=!1;function showErrorPopup(a){return a?showPopup("Error",a+"<br>"+la._error,!0):showPopup("Error",la._error,!0)}
function showDialog(a,b,d,g){function n(){$("#shareChartOverlay-close"+(3==g?"":g)).on("click",t);$("#popupMessage"+(3==g?"":g)+' a[id != "terms"]').on("click",t);$("#overlayShadowTop"+g).on("click",t);if(3==g)$("#abortOp").on("click",t);if(d)$(document).on("keydown.escape.popup"+r,function(u){"Escape"==u.key&&($(this).off(u),t())})}function t(){m.reject();h()}function h(){shareChartOverlayActive=!1;window["popupActive"+g]=!1;$("#overlayShadowTop"+g).fadeOut(300,function(){$("#"+r).remove()});q.velocity("transition.shrinkOut",
150,function(){q.parent().remove();addon()})}var m=$.Deferred();if(window["popupActive"+g])return!1;window["popupActive"+g]=!0;var r="popup"+g;a='<div id="'+r+'"><div id="overlayShadowTop'+g+'"></div><div class="relativeAlignCenter flex"><div class="hidden generalOverlay" style="max-height: 80%;"><div class="text_long mdc-elevation--z10" style="margin:0px;text-align:justify; color: #444; max-width:95%;position: relative;">'+(d?'<div id="shareChartOverlay-close'+(3==g?"":g)+'"><i class="fa fa-times-circle fa-2x"></i></div>':
"")+'<div id="popupTitle'+(3==g?"":g)+'" style="font-size: 18px; margin: 0 40px 15px 0;display: inline-block; color: #111">'+a+'</div><br><span id="popupMessage'+(3==g?"":g)+'">'+b+"</span></div></div></div></div>";0<$("#contentAlign").length?$("#contentAlign").before(a):$("body").append(a);var q=$("#"+r+" .generalOverlay");q.velocity("transition.shrinkIn",250,function(){setTimeout(function(){q.css("transform","");var u=Math.max(1.25*$(q).height(),25+q.find(".text_long").height());addon("resize",
Math.max($(document).height(),120+float2int(u)))},1)});n();return{close:function(){m.resolve();h()},update:function(u){replaceHtml("popupMessage"+(3==g?"":g),u);n()},promise:m}}function showPopPopup(a,b,d){return showDialog(a,b,d,4)}function showPopup(a,b,d){return showDialog(a,b,d,3)}
var resend_Verify=function(){showPopup(la._361,la._362+'<br><br><input type="submit" class="button" id="resendVerify" value="'+(la._363+'"><br><br><hr style="border-color:#38F !important">')+la._364+'&ensp;<span style="color: #39F">'+storage.email+'</span>&ensp;<a class="settings-chpw" id="gotoSettings" href="#!channels">'+la._365+"</a>",!0);$("#gotoSettings").click(function(){$("#shareChartOverlay-close").trigger("click")});var a=!1,b=$("#resendVerify");b.click(function(d){d.preventDefault();if(a)return!1;
a=!0;$("#resendVerify").val(la._45);network.ajax({type:"GET",url:"user/verify/?type=send&user="+storage.token,dataType:"json"},!0).done(function(g){if(0!=parseInt(g))switch(g.status){case "IS_BLOCKED":replaceElement(b[0],"div","<br>"+la._368,"color:tomato;");break;case "NEW_MAIL_SENT":replaceElement(b[0],"div","<br>"+la._366,"color:tomato;");break;case "IS_VERIFIED":replaceElement(b[0],"div","<br>"+la._360,"color:#009000;");break;case "ALREADY_SENT_RECENTLY":replaceElement(b[0],"div","<br>"+la._369,
"color:tomato;");break;case "MAX_ATTEMPTS_REACHED":replaceElement(b[0],"div","<br>"+la._370,"color:tomato;");break;default:reportBug(null,"resendVerifyButton default "+JSON.stringify(g)),replaceElement(b[0],"div","<br>"+la._error,"color:tomato;")}}).fail(function(){replaceElement(b[0],"div","<br>"+la._error,"color:tomato;");reportBug(null,"resendVerify "+textStatus+"<br>"+errorThrown)})})};
function updateThemeColor(a){$("meta[name=theme-color]").remove();$("meta[name=msapplication-navbutton-color]").remove();$("meta[name=apple-mobile-web-app-status-bar-style]").remove();$("head").append('<meta name="theme-color" content="'+a+'">');$("head").append('<meta name="msapplication-navbutton-color" content="'+a+'">');$("head").append('<meta name="apple-mobile-web-app-status-bar-style" content="'+a+'">')}
function showWebSocketNotSupported(){showPopup("Your browser is outdated",'Keepa.com uses a WebSocket for communication, which your browser does not support.<br><br>Please update your browser or <a class="url" href="http://caniuse.com/#feat=websockets">check out supported browsers</a>.',!1);$(".generalOverlay").css("top","4%");$(".generalOverlay").css("left","4%");$(".text_long").css("width","80%");setTimeout(function(){try{window.parent.postMessage({key:"resize",value:"800px",origin:"keepaIframe"},
"*")}catch(a){}},1500)}
var onready=function(a){try{var b=window.location.hash;b=b.replace("%21","!");"#!"!=b.substring(0,2)&&(b="#!"+b.substring(1));var d=b.split("/");if("#!r"==d[0]&&64<=d[1].length){var g=d[1].substring(64),n=d[1].substr(0,64),t=d[2]&&0<d[2].length?"/"+d[2]:"";if(storage.token!=n){var h=storage.install,m=storage.optOut_crawl,r=storage.overlayPriceGraph,q=storage.revealStock;storage.clear();h&&(storage.install=h);m&&(storage.optOut_crawl=m);r&&(storage.overlayPriceGraph=r);q&&(storage.revealStock=q);n&&
64==n.length&&storage.token!=n&&(storage.token=n,storage.removeItem("hashSynced"))}window.location.hash="#!"+g+t}}catch(u){console.error(u)}keepaApp&&!a||"undefined"!=typeof isSnapshotPage||("WebSocket"in window||"MozWebSocket"in window?0<location.href.indexOf("#!tgMessengerLogin")?tgBotLogin():localStorageSupported?(initializeSettings(),loadLanguage(),languagePromise.done(function(){var u=null,D='<br><br><div style="color: #9a4100">Please check if there is an update available for your browser. It is possible that your connection to Keepa is interrupted by browser extensions, proxys or firewalls you or your company use. You can try to use a private/incognito browser session, use another browser or your mobile device to verify if that is the case. Certain anti-virus software (like Kaspersky, avast!, NOD32) features (usually called something like "web security") can prevent Keepa from working as well - try disabling them to see if that is the case. <br><br>'+
(isMobile?"We suggest you try out another browser, we recommend Chrome Mobile of Firefox Mobile.":"If the error persists, please open your browser console (F12 > Console) to look for any 'WebSocket' errors logged and send us a snapshot of them to info@keepa.com.")+"</div>";try{/bot|googlebot|crawler|spider|robot|crawling/i.test(navigator.userAgent)&&(storage.initFailed=Date.now())}catch(M){}setTimeout(function(){initRun||(network.connectToServer(!0),setTimeout(function(){if("undefined"==typeof isLoggerPage&&
!initRun){$("#networkOverlay").hide();var M="";"undefined"==typeof storage.initFailed?M=' or, if it still fails, switch to the <span class="url blue" id="ifcm">compatibility mode</span>.':reportBug(null,"init failed in cm mode");u=showPopup("Oh no! Initialization Failed",'Checking your connection to Keepa:&emsp;&emsp;<span id="ajaxCheck"><span class="dotLoading" style="display:inline-block;height: 8px;"></span></span><br><br>Your browser\'s user agent:<br><span style="color:#868686;">'+navigator.userAgent+
'</span><br><br>You can try to <span class="url blue" id="ifr">reload</span>'+M,!1);network.ajax({url:"https://"+server[0]+"/isOnline",type:"GET",dataType:"text"},!0).done(function(Q){$("#networkOverlay").hide();Q.startsWith("200")?network.ajax({url:"https://"+server[0]+"/getWebSocketHeader",type:"GET",dataType:"text"},!0).done(function(T){replaceHtml("ajaxCheck",'<span class="green">OK!</span><br>Checking WebSocket connectivity:&emsp;&emsp;<span id="wsCheck"><span class="dotLoading" style="display:inline-block;height: 8px;"></span><br>');
var ha=new WebSocket("ws://keeepa.amztoolz.com/_dyn/apps/cloud/?app=keepaWebsite&version=2.0");ha.binaryType="arraybuffer";ha.onclose=function(P){var R=P.code;P=P.reason;"blocked"==P?($("#networkOverlay").show(),$("#networkBar").html("You are blocked from our services. Please contact us via info@keepa.com for resolution."),storage.updated1008="1",replaceHtml("wsCheck",'<span class="red">Failed</span>')):replaceHtml("wsCheck",'<span class="red">Failed with status '+R+" "+P+"</span><div><div>Connection headers:</div><div>"+
T+"</div></div>"+D)};ha.onerror=function(P){ha.close()};ha.onopen=function(P){replaceHtml("wsCheck",'<span class="green">OK!</span><br><br>There appears to be no problem with your connection. Please try to reload. If the error persists, please open your browser console (F12 > Console) to look for any errors logged and send us a snapshot of them to info@keepa.com. If you are on a mobile device you can try to use another browser.')}}):replaceHtml("ajaxCheck",'<span class="red">Failed. '+Q+" - Please try again later.</span>")}).fail(function(Q){replaceHtml("ajaxCheck",
'<span class="red">Failed. Are you offline? Maybe Keepa is down right now.</span>')});$("#ifr").on("click",function(){network.connectToServer(!0);document.location.reload(!0)});$("#ifcm").on("click",function(){reportBug(null,"init failed in sw mode, set to cm mode.");storage.initFailed=Date.now();window.forceNoSWConnection=!0;setTimeout(function(){document.location.reload(!0)},500)});network.ajax({url:"app/stats/?type=failedWS",type:"GET",dataType:"json"},!0)}},6E3))},12E3);var F=function(){settings.retrieve(!0,
!1,3E5).always(function(){if(null!=u)try{u.close()}catch(Q){}initPage();if("undefined"!=typeof storage.initFailed){var M=Number(storage.initFailed);$.isNumeric(M)&&6048E5<Date.now()-M&&(storage.removeItem("initFailed"),settings.send())}})};network.connectToServer(!1);null==network.onConnected()?F():network.onConnected().done(F)})):(showPopup("Your browser settings prevent Keepa from functioning",'Keepa.com needs permission to store data in your browser. Please check your browser privacy settings and add an exception allowing Keepa to store website data (even for third party, as our Keepa Box is third party when embedded on Amazon):<br><br><span style="text-align: left"><span style="color: cornflowerblue">Chrome:</span><br>Open the Content&nbsp;Settings&nbsp;Page at <span style="color: #777">chrome://settings/content</span>, select Cookies and add <span style="color:#4CA14E">[*.]keepa.com</span> as an allowed exception in the section "Allow".<br><br><span style="color: cornflowerblue">Firefox:</span><br>Open Options -> Privacy, select "Exceptions..." under "Cookies and Site Data" and add <span style="color:#4CA14E">https://keeepa.amztoolz.com</span> as an allowed exception.</span><br>In case you have Content Blocking (Tracking Protection) enabled, please make sure you only block tracker cookies instead of all (Open Options -> Privacy, select "Trackers (recommended)" under "Content Blocking" > "Third-Party Cookies"). Alternatively try to restore the default settings.<br><br>If this does not help: Please verify that none of your addons / extensions block access to local storage. You can also contact info@keepa.com if you need further help.',
!1),$(".generalOverlay").css("top","4%"),$(".generalOverlay").css("left","4%"),$(".text_long").css("width","80%"),setTimeout(function(){try{window.parent.postMessage({key:"resize",value:"800px",origin:"keepaIframe"},"*")}catch(u){}},1500)):showWebSocketNotSupported())};
function getDefaultLocation(){try{var a=navigator.language||navigator.userLanguage;if(0<=a.indexOf("ja"))return 5;if(0<=a.indexOf("de"))return 3;if(0<=a.indexOf("cn")||0<=a.indexOf("zh"))return 7;if(0<=a.indexOf("it"))return 8;if(0<=a.indexOf("es"))return 9}catch(b){}return 1}
function initializeSettings(){try{for(var a=0;a<storage.length;a++){var b=storage.key(a);"null"!=storage[b]&&"undefined"!==storage[b]||storage.removeItem(b)}}catch(d){}settings.dataCache=null;!storage.email&&storage["keepa.email"]&&(storage.email=storage["keepa.email"]);"null"!=storage.email&&"undefined"!=storage.email||storage.removeItem("email");storage.token&&64===storage.token.length||settings.reset(!0,!1);storage.domain=storage.domain||getDefaultLocation();/^([1-9]|1[0-9])$/.test(storage.domain)||
(storage.domain=getDefaultLocation());storage.language=storage.language||getDefaultLocation();storage.accountType=storage.accountType||0;storage.accountType="none"==storage.accountType?0:storage.accountType;storage.graphInterval=storage.graphInterval||2160;storage.graphScale=storage.graphScale||0;storage.extremeFilter=storage.extremeFilter||0;storage.dealsThumbSize=storage.dealsThumbSize||0;storage.dealsMerchant=storage.dealsMerchant||1;storage.dealsInterval=storage.dealsInterval||2;storage.lastVisit=
storage.lastVisit||0;storage.emailVerified=storage.emailVerified||0;storage.sortDefault=storage.sortDefault||0;storage.manageView=storage.manageView||0;storage.salesRankInverse=storage.salesRankInverse||0;refreshDomain(storage.domain);SettingsSubscription.reset();hasDataAccessSubscription=!1}
(function(a){a.onerror=function(b,d,g,n,t){"object"===typeof b&&b.srcElement&&b.target&&(b="[object HTMLScriptElement]"==b.srcElement&&"[object HTMLScriptElement]"==b.target?"Error loading script":"Event Error - target:"+b.target+" srcElement:"+b.srcElement);b=b.toString();var h="",m="";n=n||0;if(t&&t.stack){m=h=t.stack;try{h=t.stack.split("\n").splice(1).splice(1).join("&ensp;&lArr;&ensp;"),h=h.replace(/http|s:\/\/.*?\//g,"").replace(/:[0-9]*?\)/g,")").replace(/[ ]{2,}/g,"")}catch(r){console.log(r)}}b=
"error: "+b+" url: "+(d||document.location.toString())+" line: "+parseInt(g||0)+" col: "+parseInt(n||0);console.log(b+" "+m);if(h.startsWith("https://www.amazon")||h.startsWith("https://sellercentral"))return!1;reportBug(t,b+" date: "+new Date+" stack: "+h);return!1}})(window);var pointSymbols={square:function(a,b,d,g,n){g=g*Math.sqrt(Math.PI)/2;a.rect(b-g,d-g,g+g,g+g)},diamond:function(a,b,d,g,n){g*=Math.sqrt(Math.PI/2);a.moveTo(b-g,d);a.lineTo(b,d-g);a.lineTo(b+g,d);a.lineTo(b,d+g);a.lineTo(b-g,d)},triangle:function(a,b,d,g,n){g*=Math.sqrt(2*Math.PI/Math.sin(Math.PI/3));var t=g*Math.sin(Math.PI/3);a.moveTo(b-g/2,d+t/2);a.lineTo(b+g/2,d+t/2);n||(a.lineTo(b,d-t/2),a.lineTo(b-g/2,d+t/2))},cross:function(a,b,d,g,n){g=g*Math.sqrt(Math.PI)/2;a.moveTo(b-g,d-g);a.lineTo(b+g,
d+g);a.moveTo(b-g,d+g);a.lineTo(b+g,d-g)},nabla:function(a,b,d,g,n){g*=Math.sqrt(2*Math.PI/Math.sin(Math.PI/3));var t=g*Math.sin(Math.PI/3);a.moveTo(b-g/2,d-t/2);a.lineTo(b+g/2,d-t/2);n||(a.lineTo(b,d+t/2),a.lineTo(b-g/2,d-t/2))},lastPoint:function(a,b,d,g,n,t){t&&a.arc(b,d,1.5,0,n?Math.PI:2*Math.PI,!1)}},graph=function(){function a(){for(var w=[],O=112;O<=(new Date).getYear();O++){var z=(new Date(1900+O,0,1,0,0,0,0)).getTime();w.push({color:"#aaa",lineWidth:2,xaxis:{from:z,to:z}})}return w}function b(){var w=
n(!0,!0),O={},z=0,I;for(I in w){var K=w[I];K.index=100+z++;K.series.index=K.index;K.series.lines.show=!1;K.series.label=null;K.series.labelText=(CsvType[I].currency?la._342.replace("&nbsp;"," "):la._860)+": "+K.series.labelText;K.series.dashes={show:!0,steps:!0,lineWidth:1.2,dashLength:13};K.series.points.show=!1;O[desiredSeriesPrefix+I]=K}return O}function d(w,O,z,I,K){var A={},J=-1,S;for(S in w){w=O[S];J++;"undefined"===typeof w&&(w={contextFreeName:"?"});var v="undefined"===typeof z[S]||1==z[S].length?
"":' <i class="fa fa-sitemap" aria-hidden="true"></i> '+(z[S].length-1);A[S]={index:J,isDisabled:!1,series:{index:S,data:[],label:(0==J?'<span style="color: darkseagreen;position: absolute;margin-top: -17px;margin-left: -18px;font-size: 11px;">Category Sales Ranks</span>':"")+w.contextFreeName+v,labelText:w.contextFreeName+v,getLabelText:function(p){p=getValueAtTime(K,p,CsvType.SALES);return-1==p?K[1]:p},labelReferenceHistory:S==I?K:null,lines:{show:!0,steps:!0,fill:S==I,fillColor:{colors:["rgba(198, 237, 203, 0.1)",
"rgba(198, 237, 203, 1.0)"]},lineWidth:1},hoverable:!1,color:S==I?CsvType.SALES.color:$.color.parse(CsvType.SALES.color).add("rgb",-25*J).toString(),backgroundColor:CsvType.SALES.bg,points:{show:!0,symbol:pointSymbols.lastPoint},dashes:{show:!1},yaxis:J+2,isCurrency:!1}}}return A}function g(w,O,z){var I={};z=-1;for(var K in w)z++,I[K]={index:K,deal:!1,currency:!1,showDefault:1,isEnabled:!0,isWithShipping:!1,isTopGraph:!1,isOfferData:!1,isSalesRankGraph:!0,color:"#8FBC8F",bg:"rgba(198, 237, 203, 0.8)"};
I.length=z;I.getName=function(A){return O[A].contextFreeName};I.getObjectNameByName=function(A){return I[A]};I.getObject=function(A){return I[A]};I.getObjectName=function(A){return A};return I}function n(w,O,z){var I=keepaApp?1:1.5,K=keepaApp?1.5:2.5,A=function(S){var v=graphIsRestricted(w,S),p=CsvType.getName(S),H="";"undefined"==typeof isSnapshotPage&&(S===CsvType.SALES.index&&(p=CsvType.getName(S)+('<span class="salesRankInverse">&ensp;'+("0"===storage.salesRankInverse?'<i class="fa fa-sort-numeric-desc"></i>':
'<i class="fa fa-sort-numeric-asc"></i>')+"&ensp;</span>"),v||(p+='<span class="toggleSalesRankGraph" style="margin-left:3px;color:'+("1"==storage.showSalesRankGraph?"#34bf34":"#666")+'" title="Toggle standalone Sales Rank graph"><i class="fa fa fa-sitemap"></i> <span style="font-style:italic;">sub-ranks</span></span>')),S===CsvType.EBAY_NEW_SHIPPING.index&&(H='<span class="graphEbayNewLink" title="show listing on ebay">&ensp;<i class="fa fa-external-link"></i>&ensp;</span></a>'),S===CsvType.EBAY_USED_SHIPPING.index&&
(H='<span class="graphEbayUsedLink" title="show listing on ebay">&ensp;<i class="fa fa-external-link"></i>&ensp;</span></a>'));return v&&keepaApp?"":p+(v?'&ensp;<i class="fa fa-lock"></i>&ensp;':H)},J=function(S){return 1==N[S]||!0===z};return{AMAZON:{index:0,isDisabled:!CsvType.AMAZON.isEnabled,series:{index:0,data:null,label:A(0),labelText:CsvType.getName(0),labelDesc:CsvType.getDescription(0),lines:{show:J(0),steps:!0,fill:!0,fillColor:{colors:CsvType.AMAZON.fillColor},lineWidth:I},hoverable:!1,
color:CsvType.AMAZON.color,backgroundColor:CsvType.AMAZON.bg,points:{show:!0,symbol:pointSymbols.lastPoint},dashes:{show:!1},yaxis:1,isCurrency:CsvType.AMAZON.currency}},NEW:{index:1,isDisabled:!CsvType.NEW.isEnabled,series:{index:1,data:null,label:A(1),labelText:CsvType.getName(1),labelDesc:CsvType.getDescription(1),lines:{show:J(1),steps:!0,lineWidth:I},hoverable:!1,color:CsvType.NEW.color,backgroundColor:CsvType.NEW.bg,points:{show:!0,symbol:pointSymbols.lastPoint},dashes:{show:!1},yaxis:1,isCurrency:CsvType.NEW.currency}},
USED:{index:2,isDisabled:!CsvType.USED.isEnabled,series:{index:2,data:null,label:A(2),labelText:CsvType.getName(2),labelDesc:CsvType.getDescription(2),lines:{show:J(2),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.USED.color,backgroundColor:CsvType.USED.bg,points:{show:!0,symbol:pointSymbols.lastPoint},dashes:{show:!1},yaxis:1,isCurrency:CsvType.USED.currency}},SALES:{index:3,isDisabled:!CsvType.SALES.isEnabled,series:{index:3,data:null,label:A(3),labelText:CsvType.getName(3),labelDesc:CsvType.getDescription(3),
lines:{show:J(3),steps:!0,lineWidth:I},hoverable:!1,points:{show:!1},color:CsvType.SALES.color,backgroundColor:CsvType.SALES.bg,dashes:{show:!1},yaxis:2,isCurrency:CsvType.SALES.currency}},LISTPRICE:{index:4,isDisabled:!CsvType.LISTPRICE.isEnabled,series:{index:4,data:null,label:A(4),labelText:CsvType.getName(4),labelDesc:CsvType.getDescription(4),lines:{show:J(4),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.LISTPRICE.color,backgroundColor:CsvType.LISTPRICE.bg,points:{show:!1},dashes:{show:!1},
yaxis:1,isCurrency:CsvType.LISTPRICE.currency}},COLLECTIBLE:{index:5,isDisabled:!CsvType.COLLECTIBLE.isEnabled,series:{index:5,data:null,label:A(5),labelText:CsvType.getName(5),labelDesc:CsvType.getDescription(5),lines:{show:J(5),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.COLLECTIBLE.color,backgroundColor:CsvType.COLLECTIBLE.bg,points:{show:!1},dashes:{show:!1},yaxis:1,isCurrency:CsvType.COLLECTIBLE.currency}},REFURBISHED:{index:6,isDisabled:!CsvType.REFURBISHED.isEnabled,series:{index:6,
data:null,label:A(6),labelText:CsvType.getName(6),labelDesc:CsvType.getDescription(6),lines:{show:J(6),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.REFURBISHED.color,backgroundColor:CsvType.REFURBISHED.bg,points:{show:!1},dashes:{show:!1},yaxis:1,isCurrency:CsvType.REFURBISHED.currency}},NEW_FBM_SHIPPING:{index:7,isDisabled:!CsvType.NEW_FBM_SHIPPING.isEnabled,series:{index:7,data:null,label:A(7),labelText:CsvType.getName(7),labelDesc:CsvType.getDescription(7),lines:{show:J(7),steps:!0,
fill:!1,lineWidth:I},hoverable:!1,color:CsvType.NEW_FBM_SHIPPING.color,backgroundColor:CsvType.NEW_FBM_SHIPPING.bg,points:{show:O,symbol:pointSymbols.square,lineWidth:1,radius:K},dashes:{show:!1},yaxis:1,isCurrency:CsvType.NEW_FBM_SHIPPING.currency}},LIGHTNING_DEAL:{index:8,isDisabled:!CsvType.LIGHTNING_DEAL.isEnabled,series:{index:8,data:null,label:A(8),labelText:CsvType.getName(8),lines:{show:J(8),steps:!0,fill:!1,lineWidth:5},hoverable:!1,color:CsvType.LIGHTNING_DEAL.color,backgroundColor:CsvType.LIGHTNING_DEAL.bg,
points:{show:!0},dashes:{show:!1},yaxis:1,isCurrency:CsvType.LIGHTNING_DEAL.currency}},WAREHOUSE:{index:9,isDisabled:!CsvType.WAREHOUSE.isEnabled,series:{index:9,data:null,label:A(9),labelText:CsvType.getName(9),lines:{show:J(9),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.WAREHOUSE.color,backgroundColor:CsvType.WAREHOUSE.bg,points:{show:O,symbol:pointSymbols.cross,lineWidth:1,radius:K+.5},dashes:{show:!1},yaxis:1,isCurrency:CsvType.WAREHOUSE.currency}},NEW_FBA:{index:10,isDisabled:!CsvType.NEW_FBA.isEnabled,
series:{index:10,data:null,label:A(10),labelText:CsvType.getName(10),labelDesc:CsvType.getDescription(10),lines:{show:J(10),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.NEW_FBA.color,backgroundColor:CsvType.NEW_FBA.bg,points:{show:O,symbol:pointSymbols.triangle,lineWidth:1,radius:K},dashes:{show:!1},yaxis:1,isCurrency:CsvType.NEW_FBA.currency}},COUNT_NEW:{index:11,isDisabled:!CsvType.COUNT_NEW.isEnabled,series:{index:11,data:null,label:A(11),labelText:CsvType.getName(11),lines:{show:J(11),
steps:!0,lineWidth:I},hoverable:!1,points:{show:!1},color:CsvType.COUNT_NEW.color,backgroundColor:CsvType.COUNT_NEW.bg,dashes:{show:!1},yaxis:3,isCurrency:CsvType.COUNT_NEW.currency}},COUNT_USED:{index:12,isDisabled:!CsvType.COUNT_USED.isEnabled,series:{index:12,data:null,label:A(12),labelText:CsvType.getName(12),lines:{show:J(12),steps:!0,lineWidth:I},hoverable:!1,points:{show:!1},color:CsvType.COUNT_USED.color,backgroundColor:CsvType.COUNT_USED.bg,dashes:{show:!1},yaxis:3,isCurrency:CsvType.COUNT_USED.currency}},
COUNT_REFURBISHED:{index:13,isDisabled:!CsvType.COUNT_REFURBISHED.isEnabled,series:{index:13,data:null,label:A(13),labelText:CsvType.getName(13),lines:{show:J(13),steps:!0,lineWidth:I},hoverable:!1,points:{show:!1},color:CsvType.COUNT_REFURBISHED.color,backgroundColor:CsvType.COUNT_REFURBISHED.bg,dashes:{show:!1},yaxis:3,isCurrency:CsvType.COUNT_REFURBISHED.currency}},COUNT_COLLECTIBLE:{index:14,isDisabled:!CsvType.COUNT_COLLECTIBLE.isEnabled,series:{index:14,data:null,label:A(14),labelText:CsvType.getName(14),
lines:{show:J(14),steps:!0,lineWidth:I},hoverable:!1,points:{show:!1},color:CsvType.COUNT_COLLECTIBLE.color,backgroundColor:CsvType.COUNT_COLLECTIBLE.bg,dashes:{show:!1},yaxis:3,isCurrency:CsvType.COUNT_COLLECTIBLE.currency}},EXTRA_INFO_UPDATES:{index:15,isDisabled:!CsvType.EXTRA_INFO_UPDATES.isEnabled,series:{index:15,data:null,label:A(15),labelText:CsvType.getName(15),lines:{show:J(15),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.EXTRA_INFO_UPDATES.color,backgroundColor:CsvType.EXTRA_INFO_UPDATES.bg,
points:{show:!1},dashes:{show:!1},yaxis:1,isCurrency:CsvType.EXTRA_INFO_UPDATES.currency}},RATING:{index:16,isDisabled:!CsvType.RATING.isEnabled,series:{index:16,data:null,label:A(16),labelText:CsvType.getName(16),lines:{show:J(16),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.RATING.color,backgroundColor:CsvType.RATING.bg,points:{show:!1},dashes:{show:!1},yaxis:6,isCurrency:CsvType.RATING.currency}},COUNT_REVIEWS:{index:17,isDisabled:!CsvType.COUNT_REVIEWS.isEnabled,series:{index:17,data:null,
label:A(17),labelText:CsvType.getName(17),lines:{show:J(17),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.COUNT_REVIEWS.color,backgroundColor:CsvType.COUNT_REVIEWS.bg,points:{show:!1},dashes:{show:!1},yaxis:5,isCurrency:CsvType.COUNT_REVIEWS.currency}},BUY_BOX_SHIPPING:{index:18,isDisabled:!CsvType.BUY_BOX_SHIPPING.isEnabled,series:{index:18,data:null,label:A(18),labelText:CsvType.getName(18),labelDesc:CsvType.getDescription(18),lines:{show:J(18),steps:!0,fill:!1,lineWidth:I},hoverable:!1,
color:CsvType.BUY_BOX_SHIPPING.color,backgroundColor:CsvType.BUY_BOX_SHIPPING.bg,points:{show:O,symbol:pointSymbols.diamond,lineWidth:1,radius:K},dashes:{show:!1},yaxis:1,isCurrency:CsvType.BUY_BOX_SHIPPING.currency}},USED_NEW_SHIPPING:{index:19,isDisabled:!CsvType.USED_NEW_SHIPPING.isEnabled,series:{index:19,data:null,label:A(19),labelText:CsvType.getName(19),labelDesc:CsvType.getDescription(19),lines:{show:J(19),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.USED_NEW_SHIPPING.color,backgroundColor:CsvType.USED_NEW_SHIPPING.bg,
points:{show:O,lineWidth:1,radius:K},dashes:{show:!1},yaxis:1,isCurrency:CsvType.USED_NEW_SHIPPING.currency}},USED_VERY_GOOD_SHIPPING:{index:20,isDisabled:!CsvType.USED_VERY_GOOD_SHIPPING.isEnabled,series:{index:20,data:null,label:A(20),labelText:CsvType.getName(20),labelDesc:CsvType.getDescription(20),lines:{show:J(20),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.USED_VERY_GOOD_SHIPPING.color,backgroundColor:CsvType.USED_VERY_GOOD_SHIPPING.bg,points:{show:O,symbol:pointSymbols.diamond,
lineWidth:1,radius:K},dashes:{show:!1},yaxis:1,isCurrency:CsvType.USED_VERY_GOOD_SHIPPING.currency}},USED_GOOD_SHIPPING:{index:21,isDisabled:!CsvType.USED_GOOD_SHIPPING.isEnabled,series:{index:21,data:null,label:A(21),labelText:CsvType.getName(21),labelDesc:CsvType.getDescription(21),lines:{show:J(21),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.USED_GOOD_SHIPPING.color,backgroundColor:CsvType.USED_GOOD_SHIPPING.bg,points:{show:O,symbol:pointSymbols.triangle,lineWidth:1,radius:K},dashes:{show:!1},
yaxis:1,isCurrency:CsvType.USED_GOOD_SHIPPING.currency}},USED_ACCEPTABLE_SHIPPING:{index:22,isDisabled:!CsvType.USED_ACCEPTABLE_SHIPPING.isEnabled,series:{index:22,data:null,label:A(22),labelText:CsvType.getName(22),labelDesc:CsvType.getDescription(22),lines:{show:J(22),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.USED_ACCEPTABLE_SHIPPING.color,backgroundColor:CsvType.USED_ACCEPTABLE_SHIPPING.bg,points:{show:O,symbol:pointSymbols.square,lineWidth:1,radius:K},dashes:{show:!1},yaxis:1,isCurrency:CsvType.USED_ACCEPTABLE_SHIPPING.currency}},
COLLECTIBLE_NEW_SHIPPING:{index:23,isDisabled:!CsvType.COLLECTIBLE_NEW_SHIPPING.isEnabled,series:{index:23,data:null,label:A(23),labelText:CsvType.getName(23),lines:{show:J(23),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.COLLECTIBLE_NEW_SHIPPING.color,backgroundColor:CsvType.COLLECTIBLE_NEW_SHIPPING.bg,points:{show:!1},dashes:{show:!1},yaxis:1,isCurrency:CsvType.COLLECTIBLE_NEW_SHIPPING.currency}},COLLECTIBLE_VERY_GOOD_SHIPPING:{index:24,isDisabled:!CsvType.COLLECTIBLE_VERY_GOOD_SHIPPING.isEnabled,
series:{index:24,data:null,label:A(24),labelText:CsvType.getName(24),lines:{show:J(24),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.COLLECTIBLE_VERY_GOOD_SHIPPING.color,backgroundColor:CsvType.COLLECTIBLE_VERY_GOOD_SHIPPING.bg,points:{show:!1},dashes:{show:!1},yaxis:1,isCurrency:CsvType.COLLECTIBLE_VERY_GOOD_SHIPPING.currency}},COLLECTIBLE_GOOD_SHIPPING:{index:25,isDisabled:!CsvType.COLLECTIBLE_GOOD_SHIPPING.isEnabled,series:{index:25,data:null,label:A(25),labelText:CsvType.getName(25),
lines:{show:J(25),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.COLLECTIBLE_GOOD_SHIPPING.color,backgroundColor:CsvType.COLLECTIBLE_GOOD_SHIPPING.bg,points:{show:!1},dashes:{show:!1},yaxis:1,isCurrency:CsvType.COLLECTIBLE_GOOD_SHIPPING.currency}},COLLECTIBLE_ACCEPTABLE_SHIPPING:{index:26,isDisabled:!CsvType.COLLECTIBLE_ACCEPTABLE_SHIPPING.isEnabled,series:{index:26,data:null,label:A(26),labelText:CsvType.getName(26),lines:{show:J(26),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.COLLECTIBLE_ACCEPTABLE_SHIPPING.color,
backgroundColor:CsvType.COLLECTIBLE_ACCEPTABLE_SHIPPING.bg,points:{show:!1},dashes:{show:!1},yaxis:1,isCurrency:CsvType.COLLECTIBLE_ACCEPTABLE_SHIPPING.currency}},REFURBISHED_SHIPPING:{index:27,isDisabled:!CsvType.REFURBISHED_SHIPPING.isEnabled,series:{index:27,data:null,label:A(27),labelText:CsvType.getName(27),lines:{show:J(27),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.REFURBISHED_SHIPPING.color,backgroundColor:CsvType.REFURBISHED_SHIPPING.bg,points:{show:!1},dashes:{show:!1},yaxis:1,
isCurrency:CsvType.REFURBISHED_SHIPPING.currency}},EBAY_NEW_SHIPPING:{index:28,isDisabled:!CsvType.EBAY_NEW_SHIPPING.isEnabled,series:{index:28,data:null,label:A(28),labelText:CsvType.getName(28),lines:{show:J(28),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.EBAY_NEW_SHIPPING.color,backgroundColor:CsvType.EBAY_NEW_SHIPPING.bg,points:{show:!1},dashes:{show:!1},yaxis:1,isCurrency:CsvType.EBAY_NEW_SHIPPING.currency}},EBAY_USED_SHIPPING:{index:29,isDisabled:!CsvType.EBAY_USED_SHIPPING.isEnabled,
series:{index:29,data:null,label:A(29),labelText:CsvType.getName(29),lines:{show:J(29),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.EBAY_USED_SHIPPING.color,backgroundColor:CsvType.EBAY_USED_SHIPPING.bg,points:{show:!1},dashes:{show:!1},yaxis:1,isCurrency:CsvType.EBAY_USED_SHIPPING.currency}},TRADE_IN:{index:30,isDisabled:!CsvType.TRADE_IN.isEnabled,series:{index:30,data:null,label:A(30),labelText:CsvType.getName(30),lines:{show:J(30),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.TRADE_IN.color,
backgroundColor:CsvType.TRADE_IN.bg,points:{show:!1},dashes:{show:!1},yaxis:1,isCurrency:CsvType.TRADE_IN.currency}},RENT:{index:31,isDisabled:!CsvType.RENT.isEnabled,series:{index:31,data:null,label:A(31),labelText:CsvType.getName(31),lines:{show:J(31),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.RENT.color,backgroundColor:CsvType.RENT.bg,points:{show:!1},dashes:{show:!1},yaxis:1,isCurrency:CsvType.RENT.currency}},BUY_BOX_USED_SHIPPING:{index:32,isDisabled:!CsvType.BUY_BOX_USED_SHIPPING.isEnabled,
series:{index:32,data:null,label:A(32),labelText:CsvType.getName(32),labelDesc:CsvType.getDescription(32),lines:{show:J(32),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.BUY_BOX_USED_SHIPPING.color,backgroundColor:CsvType.BUY_BOX_USED_SHIPPING.bg,points:{show:O,symbol:pointSymbols.diamond,lineWidth:1,radius:K},dashes:{show:!1},yaxis:1,isCurrency:CsvType.BUY_BOX_USED_SHIPPING.currency}},PRIME_EXCL:{index:33,isDisabled:!CsvType.PRIME_EXCL.isEnabled,series:{index:33,data:null,label:A(33),
labelText:CsvType.getName(33),labelDesc:CsvType.getDescription(33),lines:{show:J(33),steps:!0,fill:!1,lineWidth:I},hoverable:!1,color:CsvType.PRIME_EXCL.color,backgroundColor:CsvType.PRIME_EXCL.bg,points:{show:O,symbol:pointSymbols.nabla,lineWidth:1,radius:K},dashes:{show:!1},yaxis:1,isCurrency:CsvType.PRIME_EXCL.currency}}}}function t(){var w=[],O;for(O in CsvType)"object"==typeof CsvType[O]&&w.push(CsvType[O].showDefault);try{w[CsvType.AMAZON.index]=null==storage.s_merchantChart?1:"1"===storage.s_merchantChart[0]?
1:0,w[CsvType.NEW.index]=null==storage.s_merchantChart?1:"1"===storage.s_merchantChart[1]?1:0,w[CsvType.USED.index]=null==storage.s_merchantChart?1:"1"===storage.s_merchantChart[2]?1:0}catch(z){}return w}function h(w){var O=[],z;for(z in w.csv){var I="locales"==w.type||3>z.length?w.objectType.getObjectName(z):z;if(w.series[I]){var K=w.series[I].series;null==w.data[z]||w.series[I].isDisabled?K.data=null:(K.data=K.lines.show||K.dashes.show?w.data[z]:[null,null],O.push(K))}}return O}function m(w){var O=
[];$.each(w.axes.y,function(S,v){v.min=w.parameter.scale?0:null});for(var z in w.csv)if(2==w.graphIndex||$.isNumeric(z)){var I=w.objectType.getObjectName(z);if("undefined"==typeof I)break;if("undefined"!=typeof w.series[I]){var K=w.series[I].series;if(0===w.graphIndex){if(3===K.yaxis||6===K.yaxis)continue}else if(1===w.graphIndex&&3>K.yaxis)continue;1!=w.graphIndex&&6!=K.yaxis&&2!=w.graphIndex&&4<K.yaxis||(2==w.graphIndex?O[K.yaxis]=w.axes.y[K.yaxis-1].show:w.series[I].isDisabled||0==K.lines.show?
1!=O[K.yaxis]&&(O[K.yaxis]=!1):O[K.yaxis]=!0)}}if(w.plot)for(var A in O)z=O[A],I=w.plot.getYAxes()[A-1],2==w.graphIndex?I.options.color=z&&2==A?"#444":"#fff":(I.options.show=z,I.show=z);else for(var J in O)w.axes.y[J-1].show=O[J]}function r(w,O){if(!(1>=w.syncedGraphs.length||keepaApp)){$.each(w.plot.getYAxes(),function(U,ka){ka.options.labelWidth=void 0;ka.labelWidth=void 0;ka.reserveSpace=void 0;ka.options.reserveSpace=void 0});$(w.plot.getYAxes()).each(function(U,ka){ka.options.color="#fff"});
for(O=0;O<w.syncedGraphs.length;O++){var z=w.syncedGraphs[O];null!=z.plot&&($.each(z.plot.getYAxes(),function(U,ka){ka.options.labelWidth=void 0;ka.labelWidth=void 0;ka.reserveSpace=void 0;ka.options.reserveSpace=void 0}),$(z.plot.getYAxes()).each(function(U,ka){ka.options.color="#fff"}),z.plot.getOptions().grid.tickColor="#fff",z.plot.setupGrid(!0))}var I=z=O=0,K=0;$(w.plot.getYAxes()).each(function(U,ka){ka.options.color="#444"});var A=0;w.plot.setupGrid(!0);for(var J=0;J<w.syncedGraphs.length;J++){var S=
w.syncedGraphs[J].plot.getYAxes(),v=0,p=0,H=0,L;for(L in S){var B=S[L];B.labelWidth=B.labelWidth||0;0==B.labelWidth&&(B.options.labelWidth=0);"left"==B.options.position?(J==w.syncedGraphs.length-1&&0<B.labelWidth&&A++,p+=B.labelWidth):(v++,H+=B.labelWidth)}0==J?z=p:J==w.syncedGraphs.length-1&&(I=p);O=Math.max(O,p);K=Math.max(K,H)}for(L=0;L<w.syncedGraphs.length;L++){J=w.syncedGraphs[L];$(J.plot.getYAxes()).each(function(U,ka){ka.options.color="#444"});J.plot.setupGrid(!0);S=J.plot.getYAxes();v=1;
H=p=0;for(var E in S)B=S[E],0==B.labelWidth&&(B.options.reserveSpace=!1),B.reserveSpace&&(H++,"left"!=B.options.position?v=E:p=E);0<O&&(L==w.syncedGraphs.length-1?z==O&&I<z&&(S[p].options.labelWidth=O-I+S[p].labelWidth):(S[p].options.labelWidth=O,1<A&&(S[p].options.labelWidth+=J.grid.axisMargin+J.grid.labelMargin)),S[p].options.reserveSpace=!0);0<K&&(S[v].options.labelWidth=K+(0>H&&0!=H?18:0),S[v].options.reserveSpace=!0);graph.redraw(J,!1,!0)}}}function q(w){try{ca(w);if(2==w.graphIndex)w.objectType=
g(w.salesRanks,w.salesRankCategories,w.salesRankCategoryTrees),w.series=d(w.salesRanks,w.salesRankCategories,w.salesRankCategoryTrees,w.salesRankReference,w.salesRankReferenceHistory);else{for(var O in w.series){var z=w.series[O].index;null!==w.csv[z]&&!0===w.series[O].series.lines.show&&graphIsRestricted(w.domainId,z)&&(w.series[O].series.lines.show=!1)}if(null!=w.buyBoxSellerIdHistory){var I=w.series[CsvType.getObjectName(CsvType.BUY_BOX_SHIPPING.index)].series;I.buyBoxSellerIdHistory=w.buyBoxSellerIdHistory;
I.offers=w.offers;I.bbHistory=w.bbHistory}w.currencySymbol=getCurrencyByDomain(w.domainId);ta(w)}600>w.parameter.width.replace("px","")&&(w.axes.x[0].labelAngle=30);w.axes.x[0].max=w.internal.time;w.axes.y[1].transform=0===w.parameter.salesRankInverse?null:function(na){return-na};w.axes.y[1].inverseTransform=0===w.parameter.salesRankInverse?null:function(na){return-na};0===w.data.length&&Y(w);var K=-1==w.parameter.interval?99999999:w.parameter.interval,A=w.parameter.forceInterval?K:Math.min(ja(w,
!1),K);w.axes.x[0].min=w.internal.time-36E5*A;if((1==w.graphIndex||2==w.graphIndex)&&0<w.syncedGraphs.length){var J=w.axes.x[0].min;for(O=0;O<w.syncedGraphs.length;O++)J=Math.min(w.syncedGraphs[O].axes.x[0].min,J);w.axes.x[0].min=J}361E4>Math.abs(w.axes.x[0].min-w.axes.x[0].max)&&(w.axes.x[0].min=w.axes.x[0].max-36E5*ja(w,!0));w.$container.css({width:w.parameter.width,height:w.parameter.height});var S=h(w);m(w);w.plot=$.plot(w.$container,S,{xaxes:w.axes.x,yaxes:w.axes.y,series:{shadowSize:0},graphSeries:w.series,
currency:getCurrencyByDomain(w.domainId),domain:w.domainId,timeShiftOffset:keepaTime.timeShiftOffset,grid:w.grid,legend:{show:w.showLegend,noLegend:w.showOnlyTracked,position:"nw"},selection:{mode:"x",color:"#777"},hooks:{bindEvents:function(na,W){W.mousemove(function(ya,Aa){if(0<w.syncedGraphs.length&&!Aa)for(Aa=0;Aa<w.syncedGraphs.length;Aa++)w.syncedGraphs[Aa].plot.getEventHolder().trigger("mousemove",[ya,!0])});W.on("touchmove",function(ya,Aa){if(!(1<ya.touches.length)&&0<w.syncedGraphs.length&&
!Aa)for(Aa=0;Aa<w.syncedGraphs.length;Aa++)ya.pageX=ya.originalEvent.touches[0].pageX,ya.pageY=ya.originalEvent.touches[0].pageY,w.syncedGraphs[Aa].plot.getEventHolder().trigger("mousemove",[ya,!0])})}},graphIndex:w.graphIndex,showOnlyTracked:w.showOnlyTracked});0<w.syncedGraphs.length&&(w.plot.getOptions().$isSyncedWith=w.syncedGraphs);(J="undefined"!=typeof isSnapshotPage)?T(w,!0,!0):(F(w),M(w));if(!(0!=w.graphIndex&&2!=w.graphIndex||J||keepaApp)){var v=float2int(w.$container.height()),p=float2int(w.$container.find(".legend > table").height()),
H=Math.max(v,p);H>v&&(w.$container.height(H),w.parameter.height=H+"px",w.plot.resize(),w.plot.setupGrid(!0),w.plot.draw())}if(!J){w.$container.on("plotselected",function(na,W){na=w.plot.getXAxes()[0].options;P(w,na.min,na.max,W.xaxis.from,W.xaxis.to)});w.$container.on("plotunselected",function(na){$("#selection").text("")});w.$container.on("dblclick",function(na){na=w.internal.time;var W=w.plot.getXAxes()[0].options;P(w,W.min,W.max,na-36E5*w.parameter.interval,na)});if(isMobile){var L=Date.now(),
B=L,E=L,U=w.plot.getPlotOffset(),ka=function(na,W){na.pageX=na.originalEvent.touches[W].pageX;na.pageY=na.originalEvent.touches[W].pageY;W=w.$container.offset();return w.plot.c2p({left:na.pageX-W.left-U.left,top:na.pageY-W.top-U.top}).x},ma=w.plot.getXAxes();w.$container.on("touchmove",function(na){if(1<na.touches.length){na.preventDefault();var W=ma[0].options,ya=ka(na,0),Aa=ka(na,1);na=Math.abs(ya-Aa)-E;Aa=(L+B)/2-(ya+Aa)/2;ya=Math.max(ma[0].datamin,W.min+Aa+na);na=Math.min(Date.now(),W.max+Aa-
na);P(w,W.min,W.max,ya,na)}});w.$container.on("touchstart",function(na){if(1<na.touches.length){na.preventDefault();if(0<w.syncedGraphs.length)for(var W=0;W<w.syncedGraphs.length;W++)w.syncedGraphs[W].plot.getEventHolder().trigger("mouseout",[na,!0]);L=ka(na,0);B=ka(na,1);E=Math.abs(L-B)}});w.$container.on("touchend",function(na){})}if(!keepaApp)w.$container.on("plotclick",function(na,W,ya){if(0<ya.length&&null!=w.offers){na=[];for(var Aa in ya){var Da=ya[Aa],va=w.csv[Da.series.index];W=CsvType.getObject(Da.series.index);
if(W.isOfferData){var za=keepaTime.epochToMinutes(Da.datapoint[0])-keepaTime.timeShiftOffset,Ha=Number(Da.datapoint[1].toFixed(2).replace(/,|\./g,""));5==w.domainId&&(Ha/=100);if(Da.series.index!=CsvType.BUY_BOX_SHIPPING.index){Da=W.isWithShipping?3:2;for(var ea=0;ea<va.length;ea+=Da)if(va[ea]==za){if(0==ea)break;for(var ia=!1;(-1==va[ea-Da+1]||va[ea-Da+1]==va[ea+1]&&(!W.isWithShipping||va[ea-Da+2]==va[ea+2]))&&0!=ea;)ia=-1!=va[ea-Da+1],ea-=Da;ia&&(za=va[ea]);break}}if(va=findOffer(w.offers,w.buyBoxSellerIdHistory,
za,Ha,null,W,null,w.buyBoxUsedHistory))va.item.type||(va.item.type=[]),va.item.type[W.index]=W,va&&(na[va.offerId]=va)}}if(0<na.length){var ua=function(){for(var wa in fa){var Ca=fa[wa],Ba=w.sellerObjects[Ca];if(Ba&&(Ca=$("#"+Ca+" a"),$(Ca[0]).text(Ba.sellerName),null!=Ba.csv[0]&&null!=Ba.csv[1]&&0<Ca.length))for(var Fa=0;Fa<Ca.length;Fa++)0<$(Ca[Fa]).siblings("span").length||$(Ca[Fa]).parent().append('<span>&emsp;<span style="color:#AA5D5D">'+la._440+":</span> "+getLast(Ba.csv[0],CsvType.AMAZON)+
'%&emsp;<span style="color:#AA5D5D">'+la._533+": </span>"+getLast(Ba.csv[1],CsvType.AMAZON)+"</span>")}};Aa=ya="";var fa=[];"object"!=typeof w.sellerObjects&&(w.sellerObjects={});W={};for(var oa in na){W.$jscomp$loop$prop$offer$639$795=na[oa];""!=ya&&(ya+="<hr>");W.$jscomp$loop$prop$offer$639$795.conditionComment||(W.$jscomp$loop$prop$offer$639$795.conditionComment=la._552);va="";for(var G in W.$jscomp$loop$prop$offer$639$795.item.type)Ha=W.$jscomp$loop$prop$offer$639$795.item.type[G],va=""==va?CsvType.getName(Ha.index):
va+("&emsp;"+CsvType.getName(Ha.index));!0!==disableStockFeatures&&!0!==disableSoldNumbers&&(W.$jscomp$loop$prop$offer$639$795.sold=getAggregatedDrop(W.$jscomp$loop$prop$offer$639$795.stockCSV,0,800),W.$jscomp$loop$prop$offer$639$795.sold30Day=getAggregatedDrop(W.$jscomp$loop$prop$offer$639$795.stockCSV,keepaTime.now()-43200,800));Ha="";if(W.$jscomp$loop$prop$offer$639$795.item.type[CsvType.WAREHOUSE.index]||W.$jscomp$loop$prop$offer$639$795.item.type[CsvType.BUY_BOX_USED_SHIPPING.index])Ha='<div style="max-width:550px;"><span><span style="color:#5983ff">'+
la._553+":</span>&emsp;"+ConditionType.getName(W.$jscomp$loop$prop$offer$639$795.condition)+"</span></div>";getTldByDomain(w.domainId);ea=SellerUtil.getLabel(W.$jscomp$loop$prop$offer$639$795.sellerId,w.domainId);Da=SellerUtil.getHtml(W.$jscomp$loop$prop$offer$639$795.sellerId,w.domainId,ea);Da=W.$jscomp$loop$prop$offer$639$795.isWarehouseDeal?"":'<div style="max-width:550px;"><span><span style="color:#5983ff">'+la._554+(':</span>&emsp;<span id="'+W.$jscomp$loop$prop$offer$639$795.sellerId+'">'+Da+
"</span></span></div>");keepaApp&&(Da=W.$jscomp$loop$prop$offer$639$795.isWarehouseDeal?"":'<div style="max-width:550px;"><span><span style="color:#5983ff">'+la._554+(':</span>&emsp;<span id="'+W.$jscomp$loop$prop$offer$639$795.sellerId+'"><a target="_blank">'+ea+"</a></span></span></div>"));ea=W.$jscomp$loop$prop$offer$639$795.isPrime?'<span style="color:#2692c2;font-style: italic;">&ensp;Prime</span>':"";ia=Money.format(W.$jscomp$loop$prop$offer$639$795.item.price,{sourceDomainId:w.domainId,targetDomainId:w.domainId})+
(0<W.$jscomp$loop$prop$offer$639$795.item.shipping?" + "+Money.format(W.$jscomp$loop$prop$offer$639$795.item.shipping,{sourceDomainId:w.domainId,targetDomainId:w.domainId}):"");showReferencePrice(w.domainId)?ia=Money.format(W.$jscomp$loop$prop$offer$639$795.item.price,{sourceDomainId:w.domainId})+(0<W.$jscomp$loop$prop$offer$639$795.item.shipping?" + "+Money.format(W.$jscomp$loop$prop$offer$639$795.item.shipping,{sourceDomainId:w.domainId})+" "+la._541:"")+(' <span class="price__reference">('+ia+
")</span>"):0<W.$jscomp$loop$prop$offer$639$795.item.shipping&&(ia+=" "+la._541);var X="";"undefined"===typeof W.$jscomp$loop$prop$offer$639$795.item.type[CsvType.PRIME_EXCL.index]&&W.$jscomp$loop$prop$offer$639$795.isPrimeExcl&&(X="&ensp;("+la._631+" "+Money.format(W.$jscomp$loop$prop$offer$639$795.primeExclCSV[W.$jscomp$loop$prop$offer$639$795.primeExclCSV.length-1],{sourceDomainId:w.domainId,targetDomainId:w.domainId})+")&ensp;");var aa="";"undefined"!==typeof W.$jscomp$loop$prop$offer$639$795.coupon&&
0!=W.$jscomp$loop$prop$offer$639$795.coupon&&(aa="&ensp;(&#x1f516; "+(0>W.$jscomp$loop$prop$offer$639$795.coupon?Math.abs(W.$jscomp$loop$prop$offer$639$795.coupon)+"%":""+Money.format(W.$jscomp$loop$prop$offer$639$795.coupon,{sourceDomainId:w.domainId,targetDomainId:w.domainId}))+" Coupon)&ensp;");var da=(new Date(keepaTime.minutesToEpoch(W.$jscomp$loop$prop$offer$639$795.offerCSV[0]))).formatDate("M j Y, G:i"),qa=(new Date(keepaTime.minutesToEpoch(W.$jscomp$loop$prop$offer$639$795.lastSeen))).formatDate("M j Y, G:i");
da='<div class="flex">\n\t\t\t\t\t\t\t\t\t\t\t<div style="width:220px;"><div style="max-width:550px;"><span><span style="color:#5983ff">'+la._636+":</span>&emsp;"+da+'</span></div></div>\n\t\t\t\t\t\t\t\t\t\t\t<div style="width:220px;"><div style="max-width:550px;"><span><span style="color:#5983ff">'+la._635+":</span>&emsp;"+qa+"</span></div></div>\n\t\t\t\t\t\t\t\t\t\t</div>";var xa="";qa="";!0!==disableStockFeatures&&(xa=isStockMax(W.$jscomp$loop$prop$offer$639$795.item.stock,W.$jscomp$loop$prop$offer$639$795.stockLimit),
xa='<div><div style="max-width:550px;"><span><span style="color:#5983ff">'+la._556+":</span>&emsp;"+(0>=W.$jscomp$loop$prop$offer$639$795.item.stock?"?":(xa?">":"")+W.$jscomp$loop$prop$offer$639$795.item.stock+'&ensp;<span style="color:#8d8d8d">('+(new Date(keepaTime.minutesToEpoch(za))).formatDate("M j Y, G:i")+")</span>")+'</span></div><div style="margin: 10px 20px;" id="offerstockGraph'+W.$jscomp$loop$prop$offer$639$795.offerId+'"></div></div>',!0!==disableSoldNumbers&&(qa='<div style="max-width:550px;"><span><span style="color:#5983ff">Sold in last 30 days (estimate from stock history):</span>&emsp;'+
(0>=W.$jscomp$loop$prop$offer$639$795.sold30Day?"?":W.$jscomp$loop$prop$offer$639$795.sold30Day)+'&ensp;<span style="color:#8d8d8d">(since offer was first seen: '+(0>=W.$jscomp$loop$prop$offer$639$795.sold?"?":W.$jscomp$loop$prop$offer$639$795.sold)+")</span></span></div>"));ya+='<div><div style="max-width:550px;"><span><span style="color:#5983ff">'+la._551+":</span>&emsp;"+(new Date(W.$jscomp$loop$prop$offer$639$795.item.time)).formatDate("M j Y, G:i")+"</span></div>"+da+'<div style="max-width:550px;"><span><span style="color:#5983ff">'+
la._555+":</span>&emsp;"+va+"</span></div>"+Ha+'<div class="flex"><div><div style="max-width:550px;"><span><span style="color:#5983ff">'+la._488+":</span>&emsp;"+ia+ea+X+aa+'</span></div><div style="margin: 10px 20px;" id="offerpriceGraph'+W.$jscomp$loop$prop$offer$639$795.offerId+'"></div></div>'+xa+"</div>"+qa+Da+'<div style="max-width:550px;"><span><span style="color:#5983ff">'+la._557+":</span>&emsp;"+W.$jscomp$loop$prop$offer$639$795.conditionComment+"</span></div></div>";W.$jscomp$loop$prop$offer$639$795.isWarehouseDeal||
(fa.push(W.$jscomp$loop$prop$offer$639$795.sellerId),w.sellerObjects&&w.sellerObjects[W.$jscomp$loop$prop$offer$639$795.sellerId]||(Aa=""==Aa?W.$jscomp$loop$prop$offer$639$795.sellerId:Aa+(","+W.$jscomp$loop$prop$offer$639$795.sellerId)));W.$jscomp$loop$prop$offer$639$795.item.type=null;setTimeout(function(wa){return function(){var Ca=function(Ba){var Fa=$("<div/>",{id:wa.$jscomp$loop$prop$offer$639$795.offerId}),Ea=$("<div/>",{style:"visibility: hidden;"});Ea.append(Fa);$("body").append(Ea);wa.$jscomp$loop$prop$offer$639$795.updateCSV=
w.csv[CsvType.EXTRA_INFO_UPDATES.index];wa.$jscomp$loop$prop$offer$639$795.domainId=w.domainId;graph.insertOfferGraph(wa.$jscomp$loop$prop$offer$639$795,wa.$jscomp$loop$prop$offer$639$795.offerId,Fa,Ba);Fa=Fa.get(0);Ea.detach();$("#offer"+Ba+"Graph"+wa.$jscomp$loop$prop$offer$639$795.offerId).append(Fa)};!0!==disableStockFeatures&&Ca("stock");Ca("price")}}(W),0);W={$jscomp$loop$prop$offer$639$795:W.$jscomp$loop$prop$offer$639$795}}showPopup(la._550,ya,!0);""!=Aa?network.request({path:"pro/seller",
domainId:w.domainId,asin:w.asin,seller:Aa,history:!0}).done(function(wa){wa=wa.merchants;for(var Ca in wa)w.sellerObjects[Ca]=wa[Ca];ua()}):ua()}}})}Z[w.domainId+w.asin+w.graphIndex+w.isOnTrackingPage]=w;w.$container.data("domainId",w.domainId);w.$container.data("asin",w.asin);w.$container.data("index",w.graphIndex);J||(pa(w),T(w,!0,!0));w.parentWidthCache=w.$container.parent().width()}catch(na){console.log(na)}}function u(w){return 0!=w.graphIndex?!0:2==w.csv[CsvType.SALES.index].length&&-2==w.csv[CsvType.SALES.index][1]?
!1:2<w.csv[CsvType.SALES.index].length?!0:!("undefined"==typeof w.salesRankCategoryTrees||0===Object.keys(w.salesRankCategoryTrees).length&&w.salesRankCategoryTrees.constructor===Object)}function D(w){if(!w.isOnTrackingPage&&!keepaApp&&(0==w.graphIndex&&"1"==storage.showSalesRankGraph&&u(w)||"1"==storage.moreData&&(0==w.graphIndex||2==w.graphIndex)))return"<tr><td><table></table></td></tr>";var O='<tr style="border-top: 4px solid white;"><td class="legendIcon" style="vertical-align: initial;"><i style="font-size: 14px;" class="fa fa-calendar"></i></td><td class="legendLabel" style="vertical-align: top; line-height: 14px;"><table>',
z=ja(w,!1);if(0<w.syncedGraphs.length)for(var I=0;I<w.syncedGraphs.length;I++){var K=w.syncedGraphs[I];K.graphIndex!=w.graphIndex&&(K=ja(K,!1),z=Math.max(z,K))}I=0;K=Date.now();for(v in w.csv)if(7!=v){var A=w.objectType.getObjectName(v);if("undefined"!==typeof A&&"undefined"!==typeof w.series[A]&&!w.series[A].isDisabled&&w.series[A].series.lines.show){var J=w.csv[v];if(null!=J){A=w.objectType[A].isWithShipping?3:2;for(var S=J.length-2;0<S;S-=A)if(""!=J[S]&&-1!=J[S]){I<J[S]&&(I=Number(J[S]));break}}}}0==
I&&(I=-(K/precisionDevisor).toFixed(0));var v=Number(((K/36E5).toFixed(0)-offsetHours-I/60).toFixed(0));var p=24==w.parameter.interval?" active":"",H=168==w.parameter.interval?" active":"",L=744==w.parameter.interval?" active":"",B=2160==w.parameter.interval?" active":"",E=8760==w.parameter.interval?" active":"";A=2>Math.abs(w.parameter.interval-z)?" active":"";S=w.showOnlyTracked?"":"<td></td>";I="";K=Number(storage.s_range);(J=24!=K&&168!=K&&744!=K&&2160!=K&&8760!=K&&-1!=K)&&(I="<tr>"+S+'<td class="legendRange'+
(w.parameter.interval==K?" active":"")+'" range="'+K+'">'+K/24+" "+la._143+"</td></tr>");w="<tr>"+S+'<td class="legendRange'+p+'" range="24">'+la._136+"</td></tr>";H="<tr>"+S+'<td class="legendRange'+H+'" range="168">'+la._137+"</td></tr>";L="<tr>"+S+'<td class="legendRange'+L+'" range="744">'+la._139+"</td></tr>";B="<tr>"+S+'<td class="legendRange'+B+'" range="2160">'+la._140+"</td></tr>";E="<tr>"+S+'<td class="legendRange'+E+'" range="8760">'+la._141+"</td></tr>";p=Math.floor(z/24);A=0==p?"":"<tr>"+
S+'<td class="legendRange'+A+'" range="'+z+'">'+la._142+" ("+p+" "+la._143+")</td></tr>";!J&&24<z&&24>v&&(O+=w);J&&168>K&&24<K&&(O+=I);168<z&&168>v&&(O+=H);J&&744>K&&168<K&&(O+=I);744<z&&744>v&&(O+=L);J&&2160>K&&744<K&&(O+=I);2160<z&&2160>v&&(O+=B);J&&8760>K&&2160<K&&(O+=I);8760<z&&8760>v&&(O+=E);J&&8760<K&&z>K&&v<K&&(O+=I);O=O+A+"</table></td></tr>";return keepaApp?(replaceHtml("legendInterval",O),""):O}function F(w){var O=1==w.parameter.extreme?'&nbsp;<i class="fa fa-toggle-off"></i>':'&nbsp;<i class="fa fa-toggle-on"></i>',
z=w.internal.filteredExtremes?'<tr border-top: 4px solid white; class="legendFilter" ><td class="legendIcon">'+f+'</td><td class="legendLabel">'+la._164+" "+O+"</td></tr>":"";O=(w.showOnlyTracked?"":'<tr style="line-height: 12px;"><td>&emsp;</td></tr>')+'<tr class="legendScale"><td class="legendIcon"><i style="font-size: 14px;" class="fa fa-search"></i></td><td class="legendLabel"><span><span '+(w.showOnlyTracked?'title="'+la._144+'"':"")+">"+(w.showOnlyTracked?"":la._144)+(1==w.parameter.scale?'&nbsp;<i class="fa fa-toggle-off"></i>':
'&nbsp;<i class="fa fa-toggle-on"></i>')+"</span>"+(w.showOnlyTracked&&w.internal.filteredExtremes?'&emsp;<span title="'+la._164+'">'+f+"&ensp;"+O:"")+"</span></span></td></tr>"+(w.showOnlyTracked?"":z)+D(w);w.$container.find(".legend").find("table").append(O)}function M(w){w.$container.find(".legendScale").on("click dblclick",function(){w.parameter.scale=1===w.parameter.scale?0:1;storage.graphScale=w.parameter.scale;settings.send();$(this).find(".legendLabel").html((w.showOnlyTracked?"":la._144)+
(1==w.parameter.scale?'&nbsp;<i class="fa fa-toggle-off"></i>':'&nbsp;<i class="fa fa-toggle-on"></i>'));$.each(w.plot.getYAxes(),function(z,I){I.options.min=w.parameter.scale?0:null});T(w,!0,!0);return!1});w.$container.find(".legendFilter").on("click dblclick",function(){w.parameter.extreme=1===w.parameter.extreme?0:1;storage.extremeFilter=w.parameter.extreme;settings.send();$(this).find(".legendLabel").html((w.showOnlyTracked?"":la._164)+" "+(1==w.parameter.extreme?'&nbsp;<i class="fa fa-toggle-off"></i>':
'&nbsp;<i class="fa fa-toggle-on"></i>'));Y(w);w.plot.setData(h(w));T(w,!0,!0);return!1});w.$container.find(".salesRankInverse").on("click dblclick",function(z,I){z=w.parameter.salesRankInverse=1===w.parameter.salesRankInverse?0:1;storage.salesRankInverse=w.parameter.salesRankInverse;I=["fa-sort-numeric-asc","fa-sort-numeric-desc"];w.$container.find(".salesRankInverse > i").removeClass(I[1==z?1:0]).addClass(I[1==z?0:1]);settings.send();z=w.plot.getYAxes()[1].options;z.transform=0===w.parameter.salesRankInverse?
null:function(K){return-K};z.inverseTransform=0===w.parameter.salesRankInverse?null:function(K){return-K};T(w,!0,!0);return!1});!0===w.isOnTrackingPage&&w.$container.find(".toggleSalesRankGraph").remove();var O=w.$container.find(".toggleSalesRankGraph");keepaApp&&O.remove();O.on("click dblclick",function(z){"1"===storage.showSalesRankGraph?(storage.showSalesRankGraph="0",settings.send(),hideSalesRankGraph(w.domainId,w.asin),O.css({color:"#666"})):(storage.showSalesRankGraph="1",settings.send(),showSalesRankGraph(w.p,
w.domainId,w.syncedGraphs),O.css({color:"#8FBC8F"}));return!1});w.$container.find(".graphEbayNewLink").on("click dblclick",function(z,I){window.open(getEbayRedirectByDomain(w.domainId,w.asin,!1,CsvType.EBAY_NEW_SHIPPING.index),"_blank").focus();return!1});w.$container.find(".graphEbayUsedLink").on("click dblclick",function(z,I){window.open(getEbayRedirectByDomain(w.domainId,w.asin,!1,CsvType.EBAY_USED_SHIPPING.index),"_blank").focus();return!1});w.$container.find(".legendLabel").each(function(){if("legendColorBox"==
$(this).prev().attr("class")){var z=function(I){return w.objectType.getObjectName(I.children(".legendLabel").data().type)};$(this).parent().on("click dblclick",function(){var I=$(this),K=z($(this));if(w.isHighlighted){for(var A in w.series){var J=w.series[A];J.series.Yignore=!1;J.series.color=J.series.colorBackup;J.series.lines.lineWidth=J.series.lines.lineWidthBackup;J.series.lines.fill&&(J.series.lines.fillColor.colors=[],J.series.lines.fillColor.colors[0]=J.series.lines.fillColorBackup[0],J.series.lines.fillColor.colors[1]=
J.series.lines.fillColorBackup[1])}w.isHighlighted=!1}A=w.series[K];J=w.objectType[K];J=comparePricesOverlayActive?J.index:w.domainId;if(graphIsRestricted(J,A.index)){I='<i class="fa fa-line-chart"></i>&emsp;'+la._896;K=[];var S=[],v;for(v in CsvType)"object"===typeof CsvType[v]&&([CsvType.EBAY_NEW_SHIPPING.index,CsvType.EBAY_USED_SHIPPING.index].includes(CsvType[v].index)&&!1===globalEbayArray[J]||graphIsRestricted(J,CsvType[v].index)&&(CsvType[v].isTopGraph?K.push(CsvType[v].index):S.push(CsvType[v].index)));
var p="";K=K.concat(S);if(K.length){p='<div class="block block--columns-250-2">';K=$jscomp.makeIterator(K);for(v=K.next();!v.done;v=K.next())if(v=v.value,![CsvType.EBAY_NEW_SHIPPING.index,CsvType.EBAY_USED_SHIPPING.index].includes(v)||[CsvType.EBAY_NEW_SHIPPING.index,CsvType.EBAY_USED_SHIPPING.index].includes(A.index))p+="<div>"+CsvType.getNameWithCircle(v)+"</div>";p+="</div"}K="";[CsvType.EBAY_NEW_SHIPPING.index,CsvType.EBAY_USED_SHIPPING.index].includes(A.index)&&(K='<p class="mdc-typography--caption">\n\t\t\t\t\t\t'+
la._893+"\n\t\t\t\t\t</p>");A='<div class="popup--medium popup--medium-fixed">\n\t\t\t\t\t<p class="mdc-typography--body2">\n\t\t\t\t\t\t'+la._892+"<br>&raquo; "+la._897+"\n\t\t\t\t\t\t"+p+"\n\t\t\t\t\t</p>\n\t\t\t\t\t"+K+'\n\t\t\t\t\t<p class="mdc-typography--body2">\n\t\t\t\t\t\t<a class="mdc-button mdc-button--raised" href="https://keeepa.amztoolz.com/#!settings/1" target="_blank"><i class="fa fa-shopping-bag" ></i>&ensp; '+la._894+'</a>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p class="mdc-typography--body2">'+la._924+
"</p>\n\t\t\t\t</div>";comparePricesOverlayActive?showDialog(I,A,!0,5):showPopup(I,A,!0)}else{S=A.index;J=!!A.series.lines.show;v=!0;2<S&&99>S&&(N[S]=J?0:1,"priceTypes"==w.type&&(storage.showGraphs=JSON.stringify(N),settings.send()));A.series.lines.show=!J;"undefined"!=typeof w.series[desiredSeriesPrefix+K]&&(w.series[desiredSeriesPrefix+K].series.dashes.show=!J);K=A.series.yaxis;for(p in w.series)if(null!=w.series[p]){var H=w.series[p].series;if(!w.series[p].isDisabled&&H.index!=S&&H.yaxis==K&&H.lines.show){v=
!1;break}}I=I.children(".legendColorBox").children().first().children().first();J?(I.css("borderColor","#ccc"),I.css("borderWidth","1px")):(I.css("borderColor",A.series.color),I.css("borderWidth","6px"));w.plot.setData(h(w));v&&(A=w.plot.getYAxes()[K-1],A.options.min=w.parameter.scale?0:null,A.options.max=null);T(w,!v,!0);v&&r(w)}return!1});$(this).parent().mouseenter(function(){ra(w,z($(this)),!0)}).mouseleave(function(){ra(w,z($(this)),!1)})}});Q(w)}function Q(w){if(w.isOnTrackingPage||keepaApp||
!(0==w.graphIndex&&"1"==storage.showSalesRankGraph&&u(w)||"1"==storage.moreData&&(0==w.graphIndex||2==w.graphIndex)))(keepaApp?$("#legendInterval .legendRange"):w.$container.find(".legendRange")).on("click",function(){var O=$(this),z=w.plot.getXAxes()[0].options;O=Math.round(Number(O.attr("range")));w.parameter.interval=O;var I=w.internal.time;P(w,z.min,z.max,I-36E5*O,I);return!1}),w.showOnlyTracked||w.$container.find(".legendLabel td").first().text(la._135).css({"padding-right":"7px",width:"45px"})}
function T(w,O,z){var I=w.internal.time,K=ja(w,!1);I-=36E5*Math.min(K,w.parameter.interval);var A=w.plot.getXAxes()[0];K=A.options.min;A=A.options.max;m(w);var J=w.$container.find(".legend table").last().parent().parent();J.attr("id")!=w.$container.attr("id")&&replaceElement(J[0],"tr",D(w),"border-top: 4px solid white;");Q(w);O?P(w,K,A,z?K:I,A):(361E4>Math.abs(I-A)&&(I=A-36E5*ja(w,!0)),w.plot.getXAxes()[0].options.min=Math.round(z?K:I),w.plot.getXAxes()[0].options.max=Math.round(A),w.plot.setupGrid(!0),
w.plot.draw(),w.plot.clearSelection(),pa(w))}function ha(w,O,z,I){var K=Number.MAX_VALUE,A=Number.MIN_VALUE,J=w.plot.getData();for(B in J){var S=J[B];if(S.yaxis.n==O.n&&(S.lines.show||S.dashes.show)&&!S.Yignore)for(var v=!0,p=0;p<S.data.length;p++){var H=S.data[p];if(!(null==H||H[0]<z)){if(H[0]>I){if(v&&0<p){var L=S.data[p-1];null!=L&&(L[1]>A&&(A=Number(L[1])),L[1]<K&&(K=Number(L[1])))}break}v&&(v=!1,0<p&&(L=S.data[p-1],null!=L&&(L[1]>A&&(A=Number(L[1])),L[1]<K&&(K=Number(L[1])))));H[1]>A&&(A=Number(H[1]));
H[1]<K&&(K=Number(H[1]))}}}z=O.datamin;I=O.datamax;J=O.options.min;var B=O.options.max;S=O.min;v=O.max;O.datamin=K;O.options.min=0==O.options.min&&w.parameter.scale?0:null;O.min=null;O.datamax=A;O.options.max=null;O.max=null;if(2==w.graphIndex||O.show||O.options.reserveSpace)w.plot.setRange(O),w.plot.setupTickGeneration(O),w.plot.setTicks(O),w.plot.snapRangeToTicks(O,O.ticks);w=O.min;p=O.max;O.datamin=z;O.options.min=J;O.min=S;O.datamax=I;O.options.max=B;O.max=v;A==Number.MIN_VALUE&&(A=p=100);K==
Number.MAX_VALUE&&(K=w=0);1E100<Math.abs(p)&&(A=p=100);1E100<Math.abs(w)&&(K=w=0);return{datamin:K,datamax:A,ymin:w,ymax:p}}function P(w,O,z,I,K){var A=[];w.animationCount||(w.animationCount=1);var J=[],S=[];if(0<w.syncedGraphs.length)for(var v=0;v<w.syncedGraphs.length;v++)A.push(w.syncedGraphs[v]);else A.push(w);var p=I-O,H=K-z;for(v=0;v<A.length;v++){var L=A[v],B=L.plot.getYAxes(),E=[],U=[];L.plot.getXAxes()[0].options.min=Math.round(I);L.plot.getXAxes()[0].options.max=Math.round(K);for(var ka=
0;ka<B.length;ka++)if(B[ka].show||2==L.graphIndex&&3==B[ka].n)E[ka]=ha(L,B[ka],I,K),U[ka]={datamin:B[ka].datamin||E[ka].datamin,datamax:B[ka].datamax||E[ka].datamax,ymin:B[ka].options.min||B[ka].min,ymax:(B[ka].options.max||B[ka].max)+1,diffMin:E[ka].ymin-(B[ka].min||0)||0,diffMax:E[ka].ymax-(B[ka].max||0)||0};L.plot.getXAxes()[0].options.min=Math.round(O);L.plot.getXAxes()[0].options.max=Math.round(z);L.plot.unhighlight();J[v]=E;S[v]=U}if(isMobile||1==w.animationCount)R({pos:1},A,J,S,O,z,p,H),r(w);
else{var ma=0;w.$container.stop().animate({tabIndex:0},{duration:300,easing:"easeInOutCubic",step:function(na,W){R(W,A,J,S,O,z,p,H);0==ma++%3&&r(w)},complete:function(){r(w)}})}w.animationCount++}function R(w,O,z,I,K,A,J,S){try{for(var v=0;v<O.length;v++){var p=O[v];if("undefined"!=typeof p){var H=z[v],L=I[v],B=p.plot.getYAxes();p.plot.getXAxes()[0].options.min=Math.round(K+J*w.pos);p.plot.getXAxes()[0].options.max=Math.round(A+S*w.pos);for(var E=0;E<B.length;E++)if((B[E].show||2==p.graphIndex&&3==
B[E].n)&&H[E]&&"undefined"!=typeof H[E]&&(H[E].ymin!=Number.MIN_VALUE&&(B[E].options.min=Math.round(L[E].ymin+L[E].diffMin*w.pos)),H[E].ymax!=Number.MAX_VALUE&&(B[E].options.max=Math.round(L[E].ymax+L[E].diffMax*w.pos)),1==p.graphIndex&&6==B[E].n)){var U=.1;.4>H[E].datamax-H[E].datamin&&(U=.2);B[E].options.max=H[E].datamax+U;B[E].options.min=H[E].datamin-U;p.parameter.scale?(B[E].options.max=5.1,B[E].options.min=.9):(5.01<B[E].options.max&&(B[E].options.max=5.01),0<B[E].options.min&&1>B[E].options.min?
B[E].options.min=.8:5==B[E].options.min&&(B[E].options.min=4.6))}p.plot.setupGrid(!0);p.plot.unhighlight();p.plot.draw();p.plot.clearSelection();pa(p)}}}catch(ka){console.log(ka)}}function Y(w){var O=0==w.graphIndex,z=1==w.graphIndex;var I=5==w.domainId?100:1;var K=99E5*I,A=2E4*I,J;for(J in w.csv){I=!1;var S=0,v=w.csvType||J,p=w.objectType.getObject(J);if(3>J.length&&null==p)console.error("unknown type: "+v,J);else{var H=w.csv[J],L=3>J.length?p.isWithShipping:!1,B="locales"==w.type,E="merchant"==
w.type;B&&(L=CsvType.getObject(v).isWithShipping);var U=L?3:2,ka=L?2:1;B=B||3>J.length?w.objectType.getObjectName(J):J;if(w.series[B]){var ma=w.series[B].series.yaxis;var na=2==ma||3==ma||6==ma?!0:1==w.parameter.extreme;var W=w.series[B].series.isCurrency?w.domainId:5;"RATING"!=B||E||(W=100);E=!1;if(w.series[B].isDisabled||null==H||2==H.length&&0>H[1]&&-2!==H[1])w.series[B].isDisabled=!0;else{if(3>J.length&&(O||z)){if(p.isTopGraph&&z)continue;if(!p.isTopGraph&&!z)continue}var ya=3>J.length?getWeightedMean(w.csv[J],
keepaTime.now(),1E3,p,w.domainId):0;p=H[H.length-U]-H[0];if(4<H.length&&168<p){if(0===ya&&!L){for(;S<H.length-3;S+=2)0<H[S+1]?ya+=H[S+1]*(H[S+2]-H[S]):p-=H[S+2]-H[S];ya=Math.round(ya/p)}}else 3>J.length&&(na=!0);if(""!=H[0])if(H.length==U&&0>H[1]&&-2!==H[1])w.series[B].isDisabled=!E;else{p=[];for(S=0;S<H.length;S+=U){p.push(H[S]);var Aa=H[S+1];b:{var Da=ma;var va=!1;2<v.length&&(va=Aa>K);if(!va){if(0>Aa||0==ya||w.objectType.SALES&&v==w.objectType.SALES.index){Da=!1;break b}va=Aa>A&&Aa>5*ya||Aa<0*
ya}va&&(I=!0,2!=Da&&3!=Da&&6!=Da&&5!=Da&&4!=Da&&(w.internal.filteredExtremes=!0));Da=na?!1:va}Da?p.push(-1):p.push(Aa);L&&p.push(H[S+2])}w.data[J]=[];for(S=0;S<p.length;S+=U)v=[],0>p[S+1]&&-2!==p[S+1]&&0==w.data[J].length||(v[0]=(p[S]+keepaTime.timeShiftOffset)*keepaTime.precisionDevisor+offset,H=p[S+1],L&&(na=p[S+2],H+=0>na?0:na),v[1]=Money.raw(H,{sourceDomainId:W,targetDomainId:W}),0>p[S+1]&&-2!==p[S+1]?0!=S&&-1!=p[S-ka]&&(H=p[S-ka],L&&(na=p[S-1],H+=0>na?0:na),v[1]=Money.raw(H,{sourceDomainId:W,
targetDomainId:W}),v[0]!=w.data[J][w.data[J].length-1][0]&&w.data[J].push(v),null!=w.data[J][w.data[J].length-1]&&w.data[J].push(null)):(E=!0,w.data[J].push(v)));""==w.data[J]||1==w.data[J].length&&null==w.data[J][0][1]?w.data[J]=null:(S-=U,U=[],U[0]=w.internal.time,0>p[S+1]?null!=w.data[J][w.data[J].length-1]&&w.data[J].push(null):(ka=p[S+1],L&&(S=p[S+2],ka+=0>S?0:S),U[1]=Money.raw(ka,{sourceDomainId:W,targetDomainId:W}),w.data[J].push(U),E=!0));I||(w.series[B].isDisabled=!E)}}}}}}function ja(w,
O){var z=9999999999999,I=Date.now();for(p in w.csv)if(7!=p){var K=w.objectType.getObjectName(p);if("undefined"!==typeof K&&"undefined"!==typeof w.series[K]&&(O||!w.series[K].isDisabled&&w.series[K].series.lines.show)){var A=w.csv[p];if(null!=A){K=w.objectType[K].isWithShipping?3:2;for(var J=0,S=A.length;J<S;J+=K)if(""!=A[J]&&-1!=A[J+1]){z>A[J]&&(z=Number(A[J]));break}}}}if(9999999999999==z){for(var v in w.csv)if(7!=v&&(A=w.objectType.getObjectName(v),"undefined"!=typeof A&&(O||!w.series[A].isDisabled&&
w.series[A].series.lines.show))){var p=w.csv[v];if(null!=p)for(A=w.objectType[A].isWithShipping?3:2,K=0,J=p.length;K<J;K+=A)if(""!=p[K]&&-1!=p[K+1]){z>p[K]&&(z=Number(p[K]));break}}9999999999999==z&&(z=(I/precisionDevisor).toFixed(0)-offsetVar)}O=(I/precisionDevisor).toFixed(0)-offsetVar-z;O=Number((O/60).toFixed(0));1>w.parameter.interval&&(w.parameter.interval=O);return O+keepaTime.timeShiftOffset/60}function ra(w,O,z){var I=w.series[O];if(I){if(I.series.lines.show){for(var K in w.series){var A=
w.series[K];A.series.lines.lineWidthBackup||(A.series.lines.lineWidthBackup=A.series.lines.lineWidth,A.series.points.lineWidthBackup=A.series.points.lineWidth,A.series.lines.fill&&(A.series.lines.fillColorBackup=[],A.series.lines.fillColorBackup[0]=A.series.lines.fillColor.colors[0],A.series.lines.fillColorBackup[1]=A.series.lines.fillColor.colors[1]),A.series.colorBackup=A.series.color);var J=A.series.yaxis-1;I.index!=A.index?(I.series.yaxis==A.series.yaxis&&(A.series.Yignore=z),2==w.graphIndex&&
(w.axes.y[J].show=!z),A.series.color=z?$.color.parse(A.series.color).add("a",-.7).toString():A.series.colorBackup,A.series.lines.fill&&(A.series.lines.fillColor.colors[0]=z?$.color.parse(A.series.lines.fillColorBackup[0]).add("a",-.7).toString():A.series.lines.fillColorBackup[0])):(A.series.Yignore=!1,2==w.graphIndex&&(w.axes.y[J].show=z));2!=w.graphIndex||z||(w.axes.y[J].show=w.axes.y[J].defaultShow)}if("priceTypes"==w.type&&2!=w.graphIndex)if(K=w.$container.find(".typeStats"),z){A=650>w.plot.width();
var S=function(ka){return CsvType.format(O,ka,w.domainId)},v=w.stats[I.index];J=S(v.highest.val);var p=A||"-"==J?"":' <span style="color: #b0b0b0">('+prettyDate(keepaTime.now()-v.highest.date)+")</span>",H=S(v.lowest.val),L=A||"-"==H?"":' <span style="color: #b0b0b0">('+prettyDate(keepaTime.now()-v.lowest.date)+")</span>",B='<span style="color: #000;">'+S(v.avg.val)+"</span>",E='<span style="color: #000;">'+S(v.avg180.val)+"</span>";S='<span style="color: #000;">'+S(v.current.val)+"</span>";0==K.length&&
w.$container.append('<div class="typeStats"></div>');K=w.$container.find(".typeStats");K.css("right",w.plot.getPlotOffset().right+"px");K.html("<span>"+CsvType.getNameWithCircle(I.index)+'</span><span style="color: rgb(60, 179, 113);">'+la._383+" "+H+L+"</span><span>"+la._344+" "+S+'</span><span style="color: tomato">'+la._384+" "+J+' <span style="color: #b0b0b0">'+p+"</span></span>"+(A?"":"<span>"+la._385+" 90 "+la._143+" "+B+"&ensp;180 "+la._143+" "+E+"</span>"));K.show()}else K.hide();I.series.lines.lineWidth=
z?2*I.series.lines.lineWidth:I.series.lines.lineWidthBackup;I.series.points.lineWidth=z?2*(I.series.points.lineWidth||I.series.lines.lineWidth):I.series.points.lineWidthBackup;I.series.lines.fill&&(I.series.lines.fillColor.colors[0]=z?$.color.parse(I.series.lines.fillColorBackup[0]).add("a",.2).toString():I.series.lines.fillColorBackup[0],I.series.lines.fillColor.colors[1]=z?$.color.parse(I.series.lines.fillColorBackup[1]).add("rgb",-18).toString():I.series.lines.fillColorBackup[1]);w.isHighlighted=
z;w.plot.setData(h(w));!z&&w.grid.backUpMarkings&&(w.grid.markings=w.grid.backUpMarkings,delete w.grid.backUpMarkings,w.plot.getOptions().grid.markings=w.grid.markings,w.plot.setupGrid(!0));if(I.index==CsvType.BUY_BOX_SHIPPING.index&&z){w.grid.backUpMarkings=w.grid.markings;w.grid.markings=a();K=keepaTime.epochToMinutes(w.plot.getAxes().xaxis.min)-keepaTime.timeShiftOffset;A=-1;for(J=0;J<w.csv[I.series.index].length;J+=3)if(p=w.csv[I.series.index][J],p>=K){A=p;break}for(J=0;J<w.bbHistory.length;J+=
2)if(p=Number(w.bbHistory[J]),H=J+2<w.bbHistory.length?w.bbHistory[J+2]:keepaTime.now(),!(H<K||(p<A&&(p=K),v=w.bbHistory[J+1].sellerId,4>v.length))){L="#ffc86e";if(!SellerUtil.isSellerIdAmazon(v,w.domainId)&&(L=CsvType.NEW.color,null!=w.offers)){E=[];B=null;var U=$jscomp.makeIterator(w.offers);for(S=U.next();!S.done;S=U.next())S=S.value,S.sellerId===v&&E.push(S);1<=E.length&&(B=E[0]);if(1<E.length)for(v=getValueAtTime(w.csv[CsvType.BUY_BOX_SHIPPING.index],p,CsvType.BUY_BOX_SHIPPING),E=$jscomp.makeIterator(E),
S=E.next();!S.done;S=E.next())S=S.value,getValueAtTime(S.offerCSV,p,CsvType.BUY_BOX_SHIPPING)==v&&(B=S);null!=B&&(L=B.isFBA?"#ff5722":CsvType.NEW_FBM_SHIPPING.color)}p+=keepaTime.timeShiftOffset;w.grid.markings.push({color:L,lineWidth:2,text:"",isBuyBoxMarker:!0,xaxis:{from:keepaTime.minutesToEpoch(p),to:keepaTime.minutesToEpoch(p>=changeV5?H+keepaTime.timeShiftOffset:p)}})}w.plot.getOptions().grid.markings=w.grid.markings;w.plot.setupGrid(!0)}T(w,!0,!0)}I.tip||(I.tip=w.$container.parent().find(".legendTip"));
z&&I.series.labelDesc?(I.tip.html('<div style="color: '+I.series.color+'; font-weight: bold">'+I.series.label+"</div>"+I.series.labelDesc),I.tip.css("border-top-color",I.series.color),I.tip.show()):I.tip.hide()}}function ta(w){for(var O=[],z=0;z<CsvType.length;z++)O[z]=!1;if("object"==typeof w.parameter.tracking){z=w.parameter.tracking;w.grid.markings.push({color:"#000",lineWidth:1,text:0===w.graphIndex?'<img src="'+flags[z.mainDomainId]+'"> '+la._197:"",xaxis:{from:keepaTime.minutesToEpoch(z.createDate+
keepaTime.timeShiftOffset),to:keepaTime.minutesToEpoch(z.createDate+keepaTime.timeShiftOffset)}});if(null!=z.notificationCSV)for(var I=0;I<z.notificationCSV.length;I+=5)try{var K=z.notificationCSV[I+4],A=0;if(null!=z.couponCSV)for(var J=0;J<z.couponCSV.length;J+=2)if(z.couponCSV[J]==K){A=z.couponCSV[J+1];break}J="";0!=A&&(J="&ensp;(&#x2705; "+(0>A?Math.abs(A)+"%":""+Money.format(A,{sourceDomainId:z.notificationCSV[I],targetDomainId:z.notificationCSV[I]}))+" Coupon)");var S=w.series[w.objectType.getObjectName(z.notificationCSV[I+
1])],v=S.series.color;if(0===w.graphIndex){if(3===S.series.yaxis||6===S.series.yaxis)continue}else if(1===w.graphIndex&&3>S.series.yaxis)continue;var p=w.objectType.getObject(z.notificationCSV[I+1]);w.grid.markings.push({color:v,text:la._868+':&ensp;<img src="'+flags[z.notificationCSV[I]]+'"> '+w.objectType.getName(z.notificationCSV[I+1])+" - "+NotificationCause.getName(z.notificationCSV[I+3],p.currency)+J,lineWidth:1,xaxis:{from:keepaTime.minutesToEpoch(K)+6E4*keepaTime.timeShiftOffset,to:keepaTime.minutesToEpoch(K)+
6E4*keepaTime.timeShiftOffset}})}catch(U){console.error(U)}if(null!=z.thresholdValues)for(K=b(),S=0;S<z.thresholdValues.length;S++)try{var H=z.thresholdValues[S];if(H.domain==w.domainId&&H.csvType!=CsvType.EBAY_NEW_SHIPPING.index&&H.csvType!=CsvType.EBAY_USED_SHIPPING.index){var L=w.objectType.getObjectName(H.csvType),B=w.series[L];if(0===w.graphIndex){if(3===B.series.yaxis||6===B.series.yaxis)continue}else if(1===w.graphIndex&&3>B.series.yaxis)continue;O[H.csvType]=!0;L=desiredSeriesPrefix+L;var E=
K[L];if(!B.isDisabled){if(B.series.isCurrency){if(H.domain!=z.mainDomainId&&null!=H.thresholdValueCSV)for(v=0;v<H.thresholdValueCSV.length;v+=2)H.thresholdValueCSV[v+1]=Money.raw(H.thresholdValueCSV[v+1],{sourceDomainId:z.mainDomainId,targetDomainId:H.domain,keepUnit:!0})}else if(H.csvType==CsvType.RATING.index&&null!=H.thresholdValueCSV)for(v=0;v<H.thresholdValueCSV.length;v+=2)fakeDomain=100,H.thresholdValueCSV[v+1]=Money.raw(H.thresholdValueCSV[v+1],{sourceDomainId:fakeDomain,targetDomainId:fakeDomain});
w.csv[L]=H.thresholdValueCSV;E.series.dashes.show=B.series.lines.show;w.series[L]=E}}}catch(U){console.error(U)}if(w.showOnlyTracked)for(H=[],L="undefined"!==typeof storage.manageGridDefaultGraphMode?JSON.parse(storage.manageGridDefaultGraphMode):{},1===L.mode&&(H=L.types,H=H.map(function(U){return Number(U)})),L=0;L<CsvType.length;L++)L!=CsvType.LIGHTNING_DEAL.index&&(B=w.objectType.getObjectName(L),"undefined"!==typeof w.series[B]&&(O[L]||-1!==H.indexOf(L)&&!graphIsRestricted(w.domainId,L)?w.series[B].series.lines.show=
!0:w.series[B].isDisabled=!0))}}function pa(w){if("object"==typeof w.parameter.tracking&&"undefined"==typeof isSnapshotPage){var O=w.parameter.tracking,z=w.plot.pointOffset({x:keepaTime.minutesToEpoch(O.createDate+keepaTime.timeShiftOffset)}),I=w.$container.find("#trackingStartedLabel");0==I.length&&(O=O.mainDomainId==w.domainId?"":' (<a class="gcblink noDecoration" href="#!product/'+O.mainDomainId+"-"+O.asin+'">.'+getTldByDomain(O.mainDomainId)+"</a>)",w.$container.append("<div id='trackingStartedLabel' style='font-size:11px;display:none;position:absolute;left:"+
(z.left+3)+"px;top:-13px;color:#666;white-space:nowrap'>"+la._197+O+"</div>"));I=w.$container.find("#trackingStartedLabel");0<z.left&&z.left<w.plot.width()*(1==storage.language?.98:.95)?(I.css("left",z.left+3),I.show()):I.hide()}}function ca(w){if(!w.preProcessedCSV){w.preProcessedCSV=!0;w.bbHistory=getMergedBB(w.buyBoxSellerIdHistory,w.csv[CsvType.BUY_BOX_SHIPPING.index],w.csv[CsvType.COUNT_NEW.index],null,!0,!1);var O=w.csv[CsvType.EXTRA_INFO_UPDATES.index],z="locales"==w.type,I="merchant"==w.type;
if(null!=w.salesRanks&&null!=w.salesRankCategoryTrees&&("undefined"!=typeof storage.showGraphs&&"1"==storage.showGraphs[7]||"1"==storage.showSalesRankGraph)){var K=getCategorySalesRanks(w.salesRankCategoryTrees,w.salesRankCategories,w.salesRanks);setTimeout(function(){for(var ya="",Aa=w.stats[3].avgDrops&&0<w.stats[3].avgDrops?'<span style="color: darkcyan; cursor: help;font-size:11px" title="Average number of times a relevant sales rank drop (e.g. from #1000 to # 500) occurred per month based on the last 90 days. \nA sales rank drop usually indicates sales, though each drop may correspond to any number of units sold. \nIf the rank is very good (e.g. #5) the product must be bought consistently just to keep its rank, so the absence of any drop does not indicate that the product does not sell.\nIf the drop number is interpreted as a sales indicator one should consider that the real sales volume is likely higher (not lower)."><i class="fa fa-arrow-right fa-rotate-45"></i> '+
w.stats[3].avgDrops+" drops / month</span>":"",Da='<table id="salesRankDetails" style="font-size: 12px;margin-left:30px;color:#7d7d7d;margin-top: 8px;position:relative;max-width: 800px;">\n\t\t\t\t\t\t\t<tr><td colspan="5"><i class="fa fa-circle" style="font-size: 7px;transform: translateY(-1px);color:#8FBC8F"></i>  Sales Rank'+(w.isParentSalesRank?'<span style="margin-left: 10px">(likely shared between all variations)</span>':"")+"</td></tr>",va=0,za=0,Ha=0,ea=function(aa){return-1==aa?"-":NumberUtil.format(aa)},
ia=!1,ua=!1,fa=$jscomp.makeIterator(K),oa=fa.next();!oa.done;oa=fa.next())oa=oa.value,0<oa.avg90&&(ia=!0),0<oa.avg365&&(ua=!0);fa=$jscomp.makeIterator(K);for(oa=fa.next();!oa.done;oa=fa.next())if(oa=oa.value,-1!=oa&&(-1!=oa.avg365||-1!=oa.rank)){0==va&&(va=10+9*(oa.rank+"").length);0==za&&(za=10+9*(oa.avg90+"").length);0==Ha&&(Ha=10+9*(oa.avg365+"").length);var G=100<oa.topPct?"-":oa.topPct;G='Top <span style="width: 30px; display: inline-block; text-align: right;">'+(0==G?" - ":G)+"%</span>";100<
oa.topPct&&(G="");G=' <td style="width: 65px; display: inline-block;cursor: help;color:#40bdb2" title="Products in Category: '+NumberUtil.format(oa.cr.productCount)+'">'+G+"</td>";var X=' <td style="color:#333;cursor: help;" title="'+(oa.cr.contextFreeName==oa.tree?"":oa.tree)+'">'+oa.cr.contextFreeName+'<span style="margin-left: 7px;color:grey">'+(oa.cr.catId==w.salesRankReference?Aa:'<span style="cursor: help;" title=\'subcategory level (number of ancestors in the category tree)\'><i class="fa fa-sitemap" aria-hidden="true"></i> '+
oa.sublevel+"</span>")+"</span></td>";ya+='<tr>\n\t\t\t\t\t\t\t\t\t<td style="padding-right: 20px;color:'+CsvType.SALES.color+";width: "+va+'px;">#<span style="display: inline-block; width: '+(va-10)+'px;text-align: right;">'+ea(oa.rank)+"</span></td>\n\t\t\t\t\t\t\t\t\t"+(ia?'<td style="padding-right: 5px;color:'+CsvType.SALES.color+";width: "+za+'px;">#<span style="display: inline-block;width: '+(za-10)+'px;text-align: right;">'+ea(oa.avg90)+"</span></td>":"")+"\n\t\t\t\t\t\t\t\t\t"+(ua?'<td style="padding-right: 5px;color:'+
CsvType.SALES.color+";width: "+Ha+'px;">#<span style="display: inline-block;width: '+(Ha-10)+'px;text-align: right;">'+ea(oa.avg365)+"</span></td>":"")+"\n\t\t\t\t\t\t\t\t</td>"+G+X+"</tr>"}Aa='<tr><td style="padding-right: 20px;width: '+va+'px;">current</td>\n\t\t\t\t\t\t\t\t\t'+(ia?'<td style="cursor:help;padding-right: 20px;width: '+za+'px;" title="average sales rank in the last 90 days">90d</td>':"")+"\n\t\t\t\t\t\t\t\t\t"+(ua?'<td style="cursor:help;padding-right: 20px;width: '+Ha+'px;" title="average sales rank in the last 365 days">365d</td>':
"")+"\n\t\t\t\t\t\t\t\t\t</tr>";0<ya.length&&($("#subGraphHover").before(Da+Aa+ya+"</div>"),addon())},0)}if("undefined"==typeof isSnapshotPage&&null!=w.csv[CsvType.BUY_BOX_SHIPPING.index]&&null!=w.buyBoxSellerIdHistory){for(var A=w.csv[CsvType.BUY_BOX_SHIPPING.index],J=w.buyBoxSellerIdHistory,S=[],v=0,p=0,H=0,L=-1,B=-1;v<A.length||p<J.length;){if(p>=J.length){for(;v<A.length;v+=3)S.push(A[v]),S.push(A[v+1]),S.push(A[v+2]);break}if(v>=A.length){for(;p<J.length;p+=2)S.push(Number(J[p])),S.push(L),S.push(B);
break}H=A[v];var E=Number(J[p]);H==E?(L=A[v+1],B=A[v+2],v+=3,p+=2):H>E?(H=E,p+=2):(L=A[v+1],B=A[v+2],v+=3);S.push(H);S.push(L);S.push(B)}w.csv[CsvType.BUY_BOX_SHIPPING.index]=S}if(null!=O||z||I)for(var U in w.csv)if(null!=w.csv[U]&&(!z||w.csvType!=CsvType.RATING.index&&w.csvType!=CsvType.COUNT_REVIEWS.index)&&(z||I||U!=CsvType.RATING.index&&U!=CsvType.COUNT_REVIEWS.index)&&(L=0,J=z?w.csvType:U,S=CsvType.getObject(J),null!=S&&(p=(v=3>U.length?S.isWithShipping:!1)?3:2,z&&(O=w.updateCSV[U]),A=z||3>U.length?
w.objectType.getObjectName(U):U,w.series[A]&&S.isOfferData))){B=w.csv[U];A=[];H=0;if(-2!==B[1])for(L=0;L<O.length;L+=2){for(var ka=O[L],ma=B[H];ma<ka;)H+=p,ma=B[H];if(!(ka<ma&&0==H)){if(!z&&!I)if(J==CsvType.BUY_BOX_SHIPPING.index){if(0==Math.max(getValueAtTime(w.csv[CsvType.COUNT_NEW.index],ka,CsvType.COUNT_NEW),0)+Math.max(getValueAtTime(w.csv[CsvType.COUNT_USED.index],ka,CsvType.COUNT_USED),0)+Math.max(getValueAtTime(w.csv[CsvType.COUNT_COLLECTIBLE.index],ka,CsvType.COUNT_COLLECTIBLE),0)+Math.max(getValueAtTime(w.csv[CsvType.COUNT_REFURBISHED.index],
ka,CsvType.COUNT_REFURBISHED),0)||-2===B[H+1]){ka==ma&&(H+=p);continue}}else if(U==CsvType.NEW_FBA.index||U==CsvType.NEW_FBM_SHIPPING.index){if(0==Math.max(getValueAtTime(w.csv[CsvType.COUNT_NEW.index],ka,CsvType.COUNT_NEW),0)){ka==ma&&(H+=p);continue}}else if(U==CsvType.REFURBISHED_SHIPPING.index){if(0==Math.max(getValueAtTime(w.csv[CsvType.COUNT_REFURBISHED.index],ka,CsvType.COUNT_REFURBISHED),0)){ka==ma&&(H+=p);continue}}else{if((U==CsvType.USED_ACCEPTABLE_SHIPPING.index||U==CsvType.USED_GOOD_SHIPPING.index||
U==CsvType.USED_NEW_SHIPPING.index||U==CsvType.USED_VERY_GOOD_SHIPPING.index||U==CsvType.COLLECTIBLE_ACCEPTABLE_SHIPPING.index||U==CsvType.COLLECTIBLE_GOOD_SHIPPING.index||U==CsvType.COLLECTIBLE_NEW_SHIPPING.index||U==CsvType.COLLECTIBLE_VERY_GOOD_SHIPPING.index)&&0==Math.max(getValueAtTime(w.csv[U],ka,S),0)){ka==ma&&(H+=p);continue}}else if(z&&-2===B[H+1]){ka==ma&&(H+=p);continue}E=A[A.length-2];var na=A[A.length-1];if(ka>=ma){ka=Math.max(B[H+1],-1);if(v){var W=Math.max(B[H+2],-1);ka==E&&na==W||
A.push(ma,ka,W,ma,-1,-1)}else ka!=E&&A.push(ma,ka,ma,-1);H+=p}else v?(ma=Math.max(B[H-2],-1),W=Math.max(B[H-1],-1),ma==E&&na==W||A.push(ka,ma,W,ka,-1,-1)):(na=Math.max(B[H-1],-1),na!=E&&A.push(ka,na,ka,-1))}}if(0===A.length&&-2===B[1])for(S=$jscomp.makeIterator(B),v=S.next();!v.done;v=S.next())A.push(v.value);if(J==CsvType.BUY_BOX_SHIPPING.index){J=w.csv[U];w.csv[U]=[];for(S=0;S<A.length;S+=3)if(v=A[S],v<=changeV5)w.csv[U].push(v),w.csv[U].push(A[S+1]),w.csv[U].push(A[S+2]);else break;A=!1;for(S=
0;S<J.length;S+=3)v=J[S],v>=changeV5&&(w.csv[U].push(v),w.csv[U].push(J[S+1]),w.csv[U].push(J[S+2]),A=!0);A||(w.csv[U].push(changeV5),w.csv[U].push(J[J.length-2]),w.csv[U].push(J[J.length-1]))}else if(J==CsvType.WAREHOUSE.index){J=w.csv[U];w.csv[U]=[];for(S=0;S<J.length;S+=2)v=J[S],w.csv[U].push(v),w.csv[U].push(J[S+1]),w.csv[U].push(v),w.csv[U].push(-1);w.csv[U]=sa(A,w.csv[U])}else w.csv[U]=A}}}function sa(w,O){for(var z=[],I=0,K=0;I<w.length&&K<O.length;){var A=w[I]-O[K];0<A?(z.push(O[K++]),z.push(O[K++])):
0>A?(z.push(w[I++]),z.push(w[I++])):I+=2}z=K<O.length?z.concat(O.slice(K)):z.concat(w.slice(I));w=[];O=-2;for(I=0;I<z.length;I+=2)if(K=z[I+1],-1!=K||-1!=O)w.push(z[I]),w.push(K),O=K;return w}var Z={},N=null,f='<img style="vertical-align: bottom;" src="'+imgCDNUrl+'filter.png">',C=$(window).width(),V=!1,ba=function(w){V||(V=!0,window.setTimeout(function(){var O=$(window).width();if(w||O!=C){C=O;for(var z in Z)if(O=Z[z],"stock"!=O.type){var I=O.$container.parent().width();0!=I&&O.parentWidthCache!=
I&&(O.parentWidthCache=I,O.$container.css("width",0),O.preResizeHook&&O.preResizeHook(),O.parameter.width=float2int(I-O.parameter.offsetLeft-(O.showOnlyTracked?140:215))+"px",O.$container.css("width",O.parameter.width),O.plot.resize(),T(O,!1,!0),r(O),O.resizeHook&&O.resizeHook())}addon()}V=!1},100))};if("undefined"==typeof isSnapshotPage)$(window).on("resize",function(){ba(!1)});return{prepare:function(w){try{N=storage.showGraphs?JSON.parse(storage.showGraphs):null}catch(z){N=null,reportBug(z)}null==
N&&(N=t(),storage.showGraphs=JSON.stringify(N),settings.send());var O={csv:[],data:[],dataWithExtremes:[],stats:{},$container:null,series:n(w,"undefined"==typeof isSnapshotPage),domainId:w,asin:null,graphIndex:0,plot:null,currencySymbol:null,syncedGraphs:[],type:"priceTypes",objectType:CsvType,resizeHook:null,preResizeHook:null,isOnTrackingPage:!1,showOnlyTracked:!1,axes:{x:[{mode:"time",twelveHourClock:!1,monthNames:la._79,show:!0}],y:[{index:1,tickDecimals:0,min:0,position:"left",tickFormatter:function(z,
I){return Money.format(z,{sourceDomainId:w,targetDomainId:w,isDivided:!0,noDigits:!0}).replace(" ","&nbsp;")},show:!1},{index:2,tickDecimals:0,min:0,position:"right",tickFormatter:function(z,I){return"#"+NumberUtil.format(z)},transform:"0"===storage.salesRankInverse?null:function(z){return-z},inverseTransform:"0"===storage.salesRankInverse?null:function(z){return-z},tickLength:0,show:!1},{index:3,tickDecimals:0,position:"right",tickFormatter:function(z,I){return NumberUtil.format(z)},show:!1},{index:4,
tickDecimals:0,alignTicksWithAxis:0,position:"right",tickFormatter:function(z,I){return NumberUtil.format(z)+"%"},show:!1},{index:5,tickDecimals:0,position:"left",tickFormatter:function(z,I){return NumberUtil.format(z)},tickLength:0,show:!1},{index:6,tickDecimals:1,position:"left",tickFormatter:function(z,I){z=NumberUtil.format(z,1);return 5<z||1>z?"":z+'<i style="color:#f1bb00;display: inline;margin-left:2px" class="fa fa-star"></i>'},tickLength:0,show:!1}]},grid:{color:"#444",show:!0,clickable:!0,
backgroundColor:null,labelMargin:4,axisMargin:3,tickColor:"#eee",borderWidth:1,borderColor:"#444",hoverable:!0,markings:a()},parameter:{interval:Number(storage.s_range)||2160,forceInterval:!1,scale:Number(storage.graphScale),extreme:Number(storage.extremeFilter),salesRankInverse:Number(storage.salesRankInverse),height:"450px",width:"100%",showSymbols:!0,showOfferLines:!0,offsetLeft:0},internal:{nowMinutes:keepaTime.now(),filteredExtremes:!1,time:Date.now()+keepaTime.timeShiftOffset*keepaTime.precisionDevisor}};
graphDateFormatIFrame=get("s_dateFormat");return O},create:q,getGraphObject:function(w,O,z,I){return Z[w+O+z+I]},setNewInterval:function(w){for(var O in Z){var z=Z[O];if(12!=O.length){var I=z.plot.getXAxes()[0].options,K=z.internal.time;z.parameter.interval=w;for(var A=0;A<z.syncedGraphs.length;A++)z.syncedGraphs[A].$container.find(".legendRange").removeClass("active"),z.syncedGraphs[A].$container.find(".legendRange[range="+w+"]").addClass("active"),z.syncedGraphs[A].$container.find(".legendRange[range="+
w+"]").addClass("active"),z.syncedGraphs[A].parameter.interval=w;P(z,I.min,I.max,K-36E5*w,K)}}},remove:function(w,O,z,I){var K=Z[w+O+z+I];K&&(K.plot.shutdown(),K.syncedGraphs=[],delete Z[w+O+z+I],K.$container.off())},redraw:T,removeAll:function(){for(var w in Z)Z[w].plot.shutdown();Z={}},updateYAxes:m,getDefaultShowGraphSetting:t,syncGraphAlignment:r,getLocaleSeriesTemplates:function(w){w=n(!0,!0)[w];for(var O={},z=" #5B7837 #96A6CD #C85332 #593C68 #85D1AD #D1B547 #CAA68A #6D3A2A #84D551 #AA65D0 #CB5086 #42554F".split(" "),
I=0;I<numberOfDomains;I++)if(7!=I&&"undefined"!==typeof w){var K=Object.assign({},w);K.series=Object.assign({},w.series);K.series.lines=Object.assign({},w.series.lines);K.series.points=Object.assign({},w.series.points);K.series.index=I;K.series.label=LocaleType.getName(I);K.series.labelText=K.series.label;K.isDisabled=!0;K.series.color=z[I];K.series.lines.fill=!1;K.series.lines.show=!0;K.series.domain=I;delete K.series.lines.fillColor;var A=$.color.parse(K.series.color);A.r=Math.round(A.r+.65*(255-
A.r));A.g=Math.round(A.g+.65*(255-A.g));A.b=Math.round(A.b+.65*(255-A.b));A.a=.8;K.series.backgroundColor=A.toString();O[K.series.label]=K}return O},getSeriesTemplates:n,getMerchantSeriesTemplates:function(){return{RATING:{index:0,isDisabled:!1,series:{index:0,data:null,label:MerchantType.getName(0),labelText:MerchantType.getName(0),lines:{show:!0,steps:!0,fill:!1,lineWidth:1.5},hoverable:!1,color:MerchantType.RATING.color,backgroundColor:MerchantType.RATING.bg,points:{show:!1},dashes:{show:!1},yaxis:4,
isCurrency:MerchantType.RATING.currency,formatter:function(w){return"<span>"+MerchantType.getName(0)+"</span><br>"+NumberUtil.format(w)+" %"}}},RATING_COUNT:{index:1,isDisabled:!1,series:{index:1,data:null,label:MerchantType.getName(1),labelText:MerchantType.getName(1),lines:{show:!0,steps:!0,fill:!1,lineWidth:1.5},hoverable:!1,color:MerchantType.RATING_COUNT.color,backgroundColor:MerchantType.RATING_COUNT.bg,points:{show:!1},dashes:{show:!1},yaxis:3,isCurrency:MerchantType.RATING_COUNT.currency}},
LISTINGS_COUNT:{index:2,isDisabled:!1,series:{index:2,data:null,label:MerchantType.getName(2),labelText:MerchantType.getName(2),lines:{show:!0,steps:!0,lineWidth:1.5},hoverable:!1,points:{show:!1},color:MerchantType.LISTINGS_COUNT.color,backgroundColor:MerchantType.LISTINGS_COUNT.bg,dashes:{show:!1},yaxis:5,isCurrency:MerchantType.LISTINGS_COUNT.currency}}}},getRatingSeriesTemplates:function(){return{COUNT_RATING:{index:0,isDisabled:!1,series:{index:0,data:null,label:RatingType.getName(0),labelText:RatingType.getName(0),
lines:{show:!0,steps:!0,fill:!1,lineWidth:1},hoverable:!1,color:RatingType.COUNT_RATING.color,backgroundColor:RatingType.COUNT_RATING.bg,points:{show:!0,symbol:pointSymbols.lastPoint},dashes:{show:!1},yaxis:3,isCurrency:!1}},COUNT_REVIEW:{index:1,isDisabled:!1,series:{index:1,data:null,label:RatingType.getName(1),labelText:RatingType.getName(1),lines:{show:!0,steps:!0,fill:!1,lineWidth:1},hoverable:!1,color:RatingType.COUNT_REVIEW.color,backgroundColor:RatingType.COUNT_REVIEW.bg,points:{show:!1},
dashes:{show:!1},yaxis:3,isCurrency:!1}}}},insertOfferGraph:function(w,O,z,I,K){try{var A=graph.prepare(w.domainId);A.asin=O;A.graphIndex=5;A.updateCSV=[];A.parameter.interval=K?K:2160;A.parameter.forceInterval=!0;A.parameter.scale=0;var J={STOCK:{index:0,isDisabled:!1,series:{index:0,data:null,label:OfferType.getName(0),labelText:OfferType.getName(0),lines:{show:!0,steps:!0,fill:!1,lineWidth:1},hoverable:!1,color:OfferType.STOCK.color,backgroundColor:OfferType.STOCK.bg,points:{show:!0,symbol:pointSymbols.lastPoint},
dashes:{show:!1},yaxis:3,isCurrency:!1}},PRICE:{index:1,isDisabled:!1,series:{index:1,data:null,label:OfferType.getName(1),labelText:OfferType.getName(1),lines:{show:!0,steps:!0,fill:!1,lineWidth:1},hoverable:!1,color:CsvType.NEW.color,backgroundColor:CsvType.NEW.bg,points:{show:!0,symbol:pointSymbols.lastPoint},dashes:{show:!1},yaxis:1,isCurrency:!0}}};A.series=J;var S=ConditionType.getCorrespondingCsvType(w.condition);null==S&&(S=w.isFBA?CsvType.NEW_FBA:CsvType.NEW_FBM_SHIPPING);w.isAmazon&&(S=
CsvType.AMAZON);w.isWarehouseDeal&&(S=CsvType.WAREHOUSE);A.series.PRICE.series.color=S.color;A.series.PRICE.series.backgroundColor=S.bg;A.series.PRICE.series.label=A.series.PRICE.series.labelText=CsvType.getName(S.index);O=[];var v=keepaTime.now();if("price"===I)O[OfferType.PRICE.index]=w.offerCSV.slice(),(null==w.updateCSV||w.lastSeen!=w.updateCSV[w.updateCSV.length-2])&&720<v-w.lastSeen&&O[OfferType.PRICE.index].push(w.lastSeen+60,-1,-1);else if("stock"===I){O[OfferType.STOCK.index]=w.stockCSV?
w.stockCSV.slice():null;var p=O[OfferType.STOCK.index];null==p&&(p=[v,-1,-1]);w.lastSeen!=w.updateCSV[w.updateCSV.length-2]&&720<v-w.lastSeen&&p.push(w.lastSeen+60,-1,-1);O[OfferType.STOCK.index]=p}A.csv=O;A.type="stock";A.objectType=OfferType;A.showLegend=!1;A.$container=z;A.$container.show();A.parameter.offsetLeft=-30;A.parameter.width="180px";A.parameter.height="95px";if(null!=w.updateCSV&&"price"===I)for(z=0;z<w.updateCSV.length;z+=2){var H=w.updateCSV[z]+keepaTime.timeShiftOffset,L=(new Date(keepaTime.minutesToEpoch(H))).formatDate("M j, G:i");
A.grid.markings.push({color:"#ff0098",lineWidth:1,text:"offer data was updated on "+L,isUpdateMarker:!0,xaxis:{from:keepaTime.minutesToEpoch(H),to:keepaTime.minutesToEpoch(H)}})}q(A)}catch(B){console.log(B)}},insertRatingGraph:function(w,O,z,I){try{var K=graph.prepare(1);K.asin=w.asin;K.graphIndex=5;K.updateCSV=[];K.parameter.interval=I?I:2160;K.parameter.forceInterval=!0;K.parameter.scale=0;K.series=graph.getRatingSeriesTemplates();I=[];"rating"===z&&w.reviews.ratingCount?(I[RatingType.COUNT_RATING.index]=
w.reviews.ratingCount.slice(),I[RatingType.COUNT_RATING.index].push(w.reviews.lastUpdate+60,-1,-1)):"review"===z&&w.reviews.reviewCount&&(I[RatingType.COUNT_REVIEW.index]=w.reviews.reviewCount.slice(),I[RatingType.COUNT_REVIEW.index].push(w.reviews.lastUpdate+60,-1,-1));K.csv=I;K.type="rating";K.objectType=RatingType;K.showLegend=!1;K.$container=O;K.$container.show();K.parameter.offsetLeft=-30;K.parameter.width="180px";K.parameter.height="95px";q(K)}catch(A){console.log(A)}},insertPriceGraph:function(w,
O,z,I){try{var K=graph.prepare(w.domainId);K.asin=w.asin;K.graphIndex=5;K.updateCSV=[];K.parameter.interval=I?I:2160;K.parameter.forceInterval=!0;K.parameter.scale=0;K.series=graph.getSeriesTemplates(w.domainId,!1,!0);I=[];I[z]=w.csv[z].slice();I[z].push(w.lastUpdate+60,-1,-1);K.csv=I;K.type="csv";K.objectType=CsvType;K.showLegend=!1;K.$container=O;K.$container.show();K.parameter.offsetLeft=-30;K.parameter.width="180px";K.parameter.height="95px";q(K)}catch(A){console.log(A)}},resizeGraphs:ba}}();var iframe=function(){function a(){$("#detailProductPage").hover(function(){$("#casinLine .casinLineContinent").css("opacity","1")},function(){$("#casinLine .casinLineContinent").css("opacity","0.5")})}function b(){replaceHtml("initPage",'<div id="detailProductPage" class="detailProductPageIFrame"><table id="productTableIFrame"><tr><td style="vertical-align: top;"><div id="productTableDescriptionIFrame"></div></td></tr></table></div><div id="networkOverlay"><div id="networkBar"></div></div>')}function d(){if(u)if(get("s_boxHorizontal")||
resetSettings(0),comparePricesOverlayActive=!1,compareCache="",shareChartOverlayActive=!1,"1-0-B000000001"==lastSubUrl)b(),isSettings=!0,g("");else{D||(D=!0,"onhashchange"in window?(hashChangeSupport=!0,window.onhashchange=F):interval=window.setInterval(F,100));keepaApp&&(keepaApp.domainId?lastSubUrl=keepaApp.domainId+"-0-"+keepaApp.asin:(reportBug(null,"iframe_app invalid data: "+JSON.stringify(keepaApp)+" localStorageIsPolyFill: "+localStorageIsPolyFill),$("#detailProductPage").html("app communication error.")));
var ta=lastSubUrl.split("-");3>ta.length&&2<location.search.length&&(ta=location.search.substring(1).split("-"));m=parseInt(ta[0]);sendInitTimeStat(m);if((ta=(h=ta[2])?h.match(verifyRegExp.asin):null)&&!(10>ta[1].length)){h=ta[1];var pa=network.request({path:"tracking/community",type:"product",asin:h,maxAge:0}),ca=h,sa=function(f){h==ca&&pa.always(function(C){f.trackings=C.comTrackings;r&&(r=!1);h==ca&&n(f)})},Z=null,N=null;sendReceive({key:"getState"}).done(function(f){Z=f.value;N=f.value2});network.request({path:"product",
history:!0,type:"ws",domainId:m,asin:h,maxAge:3,refreshProduct:r}).done(function(f){if(h==ca){var C=getProductFromList(h,f.products),V=null!==C?C.csv[CsvType.SALES.index]:null,ba=null===V||null!=V&&2===V.length&&-1===V[1];if(null!=C&&(null!=Z||null!=N))try{Z&&Z.asin_variation_values?C.variationCSV=Object.keys(Z.asin_variation_values).join(","):N&&(C.variationCSV=Object.values(N).join(","))}catch(w){reportBug(w,JSON.stringify(Z)),Z=null}null!==C&&null!==C.parentAsin&&null==C.variationCSV?(isTest&&
console.log("loading parentAsin: "+C.parentAsin+" "+m),network.request({path:"product",history:!0,type:"ws",domainId:m,asin:C.parentAsin,onlyParent:!0,maxAge:3,refreshProduct:r}).done(function(w){w=getProductFromList(C.parentAsin,w.products);try{null!=w.variationCSV&&(null==C.variationCSV||C.variationCSV.length<w.variationCSV.length)&&(C.variationCSV=w.variationCSV);var O=keepaTime.now(),z=null!=w.csv&&null!=w.csv[CsvType.SALES.index]?w.csv[CsvType.SALES.index].length:0;if(ba){if(1<z){var I=w.csv[CsvType.SALES.index][z-
2],K=w.csv[CsvType.SALES.index][z-1];-1==K&&3<z?(I=w.csv[CsvType.SALES.index][z-4],259200<O-I&&(w.csv[CsvType.SALES.index][z-2]=I+60)):259200<O-I&&0<K&&(w.csv[CsvType.SALES.index].push(I+60,-1),z+=2)}C.csv[CsvType.SALES.index]=w.csv[CsvType.SALES.index];C.isParentSalesRank=2<z}else if(2<z){var A=getWeightedMean(w.csv[CsvType.SALES.index],O,30,CsvType.SALES,w.domainId),J=getWeightedMean(C.csv[CsvType.SALES.index],O,30,CsvType.SALES,C.domainId),S=Math.min(A,J)/Math.max(A,J);.88<S&&(console.log("merged parent and child sales rank history",
S),C.csv[CsvType.SALES.index]=mergeCSV(C.csv[CsvType.SALES.index],w.csv[CsvType.SALES.index],CsvType.SALES),C.isParentSalesRank=!0)}}catch(v){}finally{sa(f)}}).fail(function(w){sa(f)})):sa(f)}}).fail(function(f){b();replaceHtml("productTableDescriptionIFrame","server not responding: <br>"+la._error)})}}}function g(ta,pa){var ca="";if(null!=pa)try{var sa=0;null==pa.categories||0==pa.categories.length?0<pa.rootCategory&&pa.rootCategory<invalidIfLargerCatId&&(sa=pa.rootCategory):sa=pa.categories[0];
0<sa&&(ca='<a href="'+rootURL+"#!bestseller/"+pa.domainId+"-"+sa+'" target="_blank">Related Best Sellers</a><span>&ensp;&#x271C;&ensp;</span>')}catch(I){console.error(I)}sa=null!=pa&&14==pa.domainId;ca='<a href="'+rootURL+'#!news" target="_blank">'+la._25+'</a><span>&ensp;&#x271C;&ensp;</span><a href="'+(rootURL+'#!discuss" target="_blank">Support</a><span>&ensp;&#x271C;&ensp;</span><a href="')+(rootURL+'#!manage" target="_blank">'+la._239+"</a><span>&ensp;&#x271C;&ensp;</span>")+(sa?"":'<a href="'+
rootURL+'#!finder" target="_blank">Product Finder</a><span>&ensp;&#x271C;&ensp;</span>'+ta+"<span>&ensp;&#x271C;&ensp;</span>"+ca);var Z=storage.username?'<span id="keepaBoxSettings"></span>':'<span id="keepaBoxLogin">'+la._9+"</span>",N=7!=storage.domain?'<li class="tabItemI" class="hidden" id="tabMore" rel="more">Data</li>':"",f=null!=pa&&"Guild Product"!==pa.productGroup?'<li class="tabSubItem" data-box="#MoreTab2">Offers</li>':"";ta=null!=pa&&(null!=pa.variationCSV&&12<pa.variationCSV.length||
null!=pa.variations&&1<pa.variations.length);var C=sa||!ta?"":'<li class="tabItemI" class="hidden" id="tabVariation" rel="more">'+la._747+"</li>",V=(ta=null!=pa&&!isAWS&&!(storage.email&&0<storage.email.indexOf("@amazon."))&&Q.includes(pa.domainId))?'<li class="tabItemI" id="tabAffiliate" rel="affiliate">\n\t\t\t\t'+la._748+"\n\t\t\t</li>":"",ba=sa?"":'<li class="tabItemI" id="tabTrack" rel="track">'+la._125+"</li>";sa&&$("#detailProductPage").prepend('<div style="color: #1376cd;text-align: center;">\u271c <b>Keepa: Only limited support for Amazon.nl</b>. Expect missing data and functionality.</div>');
sa='<div>\n\t\t\t\t<div>\n\t\t\t\t\t<div dir="rtl" id="keepaCopyright"><span id="keepaCopyrightWhitespace">-</span>'+la._272+"<span>&ensp;&#x271C;&ensp;</span>"+ca+Z+'</div>\n\t\t\t\t\t<ul id="tabHeadIFrame">\n\t\t\t\t\t\t<li class="tabItemI active" id="tabGraph" rel="graph">'+la._97+"</li>\n\t\t\t\t\t\t"+ba+"\n\t\t\t\t\t\t"+N+"\n\t\t\t\t\t\t"+C+"\n\t\t\t\t\t\t"+V+'\t\t\t\t\t\t\n\t\t\t\t\t\t<li class="tabItemI" id="tabSettings" rel="settings">'+la._8+'</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<div id="tabContentIFrame">\n\t\t\t\t\t<div id="priceHistory" class="active"><div class="graph unselectable" id="graph"></div></div>\n\t\t\t\t\t<div id="track" class="productTrack" style="margin: 0 0 0 23px;"></div>\t\t\t\t\n\t\t\t\t\t<div id="more" class="hidden" style="margin-right:10px;min-height:60px;">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<ul id="tabHeadSub">\n\t\t\t\t\t\t\t\t<li class="tabSubItem active" data-box="#MoreTab1">Product Details</li>\n\t\t\t\t\t\t\t\t'+
f+'\n\t\t\t\t\t\t\t\t<li class="tabSubItem" data-box="#MoreTab3">Buy Box Statistics</li>\n\t\t\t\t\t\t\t\t<li class="tabSubItem" data-box="#MoreTab4">Buy Box Used Statistics</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div id="loadingIconAdv" style="position:absolute !important;left:185px;top:80px;"><div id="loadingProgress"></div></div>\n\t\t\t\t\t\t'+(0==storage.accountType?'<div style="margin:15px 0;color:#000;font-style:italic;">'+la._926+"</div><br>":"")+'\n\t\t\t\t\t\t<div style="margin-top: 20px;">\n\t\t\t\t\t\t\t<div id="MoreTab1" class="active"></div>\n\t\t\t\t\t\t\t<div id="MoreTab2" class="hidden"></div>\n\t\t\t\t\t\t\t<div id="MoreTab3" class="hidden"></div>\n\t\t\t\t\t\t\t<div id="MoreTab4" class="hidden"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id="variation"></div>\n\t\t\t\t\t<div id="affiliateContent" class="block block--affiliate" style="display:none;"></div>\n\t\t\t\t\t<div id="settingsContent" style="display:none;" ></div>\n\t\t\t\t</div>\n\t\t\t</div>';
if(keepaApp){replaceHtml("content",'<div id="priceHistory" class="active"><div class="graph unselectable" id="graph"></div><div id="salesRankGraph" class="graph" style="display:none;"></div><div id="moreDataGraph" class="graph" style="display:none;"></div></div><div id="legendInterval"></div>'+(hasDataAccessSubscription?'<div id="graphToggles" style="position: absolute;right: 1%;bottom: 1%;font-size: 40px; cursor: pointer; user-select: none;">\n\t\t\t\t\t <div id="graph1" rel="0" class="active">1</div>\n\t\t\t\t\t <div id="graph2" rel="1">2</div>\n\t\t\t\t\t <div id="graph3" rel="2">3</div>\n\t\t\t\t </div>':
""));var w={graph1:$("#graph"),graph2:$("#salesRankGraph"),graph3:$("#moreDataGraph")};$("#graphToggles > div").on("click",function(I){I=$(I.target);I.hasClass("active")||(I.siblings(".active").removeClass("active"),I.addClass("active"),w.graph1.hide(),w.graph2.hide(),w.graph3.hide(),w[I.attr("id")].show(),I=graph.getGraphObject(pa.domainId,pa.asin,I.attr("rel"),!1),"undefined"!=typeof I&&null!=I&&graph.redraw(I,!0,!0))})}replaceHtml("productTableDescriptionIFrame",sa);sa=$("#keepaBoxSettings");1==
sa.length&&(sa[0].innerText=storage.username);setupQuotaWidget(!0);$("#tabHeadSub").on("click",function(I){I=$(I.target);I.hasClass("active")||(I.siblings(".active").removeClass("active"),I.addClass("active"),I=$(I.data("box")),I.siblings(".active").removeClass("active").addClass("hidden"),I.removeClass("hidden").addClass("active"),t(I.attr("id"),pa),addon("resize",50+float2int($("#initPage").height())))});$("#keepaBoxLogin").click(function(){registerAnonymous(!0)});$("#keepaBoxSettings").click(function(){window.open(rootURL+
"#!channels")});insertSettings();sa='<br><span id="reload">'+la._279+'</span><br><section id="settingsMore"><span>'+getLogoSVG(220)+'</span><br><span id="lfeedback">&rarr;&ensp;<a href="'+rootURL+'#!comment" target="blank">'+la._282+"</a>&ensp;</span></section>";$("#settingsTab").after(sa);var O=$("#tabContentIFrame"),z=$("#tabHeadIFrame");q=Number(get("s_boxVertical"))+100;$("#tabGraph").click(function(){$(this).hasClass("active")||(O.children(".active").hide(0),O.children(".active").removeClass("active"),
$("#priceHistory").addClass("active"),$("#priceHistory").fadeIn(),z.children().removeClass("active"),$("#tabGraph").addClass("active"),$("#subGraphButtons").show(0),$("#refreshProductBox").show(0),addon())});$("#tabTrack").click(function(){$(this).hasClass("active")||(0===$("#track .tracking").length&&(TrackingComponent.init({products:[pa]}),$("#grid-tools-variation").show(),$("#grid-wrapper-variation").show(),$("#grid-wrapper-variation-filter").show()),O.children(".active").hide(0),O.children(".active").removeClass("active"),
$("#track").addClass("active"),$("#track").fadeIn(),z.children().removeClass("active"),$("#tabTrack").addClass("active"),TrackingComponent.addonResizeHook())});$("#tabVariation").on("click",function(I){$(this).hasClass("active")||(O.css("height",""),O.children(".active").hide(0).removeClass("active"),$("#variation").addClass("active").fadeIn().width(O.width()),z.children().removeClass("active"),$("#tabVariation").addClass("active"),iframe.loadVariationMatrix(pa))});ta&&$("#tabAffiliate").click(function(){$(this).hasClass("active")||
(O.children(".active").hide(0).removeClass("active"),$("#affiliateContent").addClass("active").fadeIn(),z.children().removeClass("active"),$(this).addClass("active"),ja(),addon())});$("#tabSettings").click(function(){$(this).hasClass("active")||(O.children(".active").hide(0),O.children(".active").removeClass("active"),$("#settingsContent").addClass("active"),$("#settingsContent").fadeIn(),z.children().removeClass("active"),$("#tabSettings").addClass("active"),addon())});$("#tabHeadIFrame li").click(function(){$(".ag-cell-focus").length&&
$(".ag-cell-focus").contextMenu("hide")});isSettings&&($("#tabSettings").trigger("click"),$("#tabHeadIFrame").hide(),$("#reload").hide())}function n(ta){b();var pa=keepaTime.now(),ca='<span id="refreshProductBox"><br>&emsp;&emsp;(',sa=' <i id="refreshProduct" title="'+la._217+'" class="fa fa-refresh fa-rotate-90" style="cursor: pointer;"></i>',Z=ta.products;if(null==Z||0==Z.length)replaceHtml("productTableDescriptionIFrame",la._121);else{Z=getProductFromList(h,ta.products);var N=!0;try{30>pa-Z.trackingSince&&
console.log("no historical data yet"),2==Z.csv[0].length&&-1==Z.csv[0][1]&&2==Z.csv[1].length&&-1==Z.csv[1][1]&&2==Z.csv[2].length&&-1==Z.csv[2][1]&&null==Z.csv[CsvType.COLLECTIBLE.index]&&null==Z.csv[CsvType.REFURBISHED.index]&&2==Z.csv[3].length&&-1==Z.csv[3][1]&&($("#graph").html('<span style="color:#ff6347; margin-left: 20px;"><i class="fa fa-exclamation-triangle" ></i>&emsp;Product never was in stock since we started tracking it.</span>').show(),N=!1)}catch(K){N=!1}if(N)try{Z.stats=getStatistics(Z)}catch(K){console.error(K)}var f=
[],C=13==Z.domainId,V=function(){return addon("resize","80px")};if(5==Z.productType)null==Z.variationCSV||""==Z.variationCSV?replaceHtml("productTableDescriptionIFrame",la._121):(addon("resize","80px"),replaceHtml("productTableDescriptionIFrame","<div>\u271c Keepa: Please select a specific variation of this product.</div><br>"),$(".childASINs").on("click",function(){setTimeout(function(){location.reload()},10)}));else if(3==Z.productType||C)ta=C?"Keepa can sadly no longer update product data for Amazon."+
getTldByDomain(Z.domainId):la._341,N?(replaceHtml("productTableDescriptionIFrame",'<div style="color:tomato;font-size: 16px;"><i class="fa fa-exclamation-triangle"></i>&emsp;'+ta+'</div><br>Below is our <strong>outdated</strong> historical data for this product:<br><br><div id="priceHistory" style="margin-bottom: 30px;" class="active"><div class="graph unselectable" id="graph"></div></div>'),ta=$("#graph"),ca=graph.prepare(m),ca.csv=Z.csv,ca.salesRanks=Z.salesRanks,ca.p=Z,ca.salesRankCategoryTrees=
Z.salesRankCategoryTrees,ca.salesRankReference=Z.salesRankReference,ca.salesRankCategories=Z.salesRankCategories,ca.isParentSalesRank=Z.isParentSalesRank,ca.asin=Z.ASIN,ca.graphIndex=0,ca.syncedGraphs=f,f.push(ca),ca.stats=Z.stats,ca.buyBoxSellerIdHistory=Z.buyBoxSellerIdHistory,ca.buyBoxUsedHistory=Z.buyBoxUsedHistory,ca.offers=Z.offers,ca.$container=ta,ca.$container.show(),ca.parameter.width=float2int(ta.parent().width())-200+"px",ca.parameter.interval=(pa-Z.trackingSince)/60,ca.parameter.forceInterval=
!0,graph.create(ca),addSubGraphMenu(Z,m,f),$("#casinLine").hide(),addon()):(replaceHtml("productTableDescriptionIFrame",ta),V());else if(2==Z.productType)replaceHtml("productTableDescriptionIFrame",la._395),V();else if(4==Z.productType)replaceHtml("productTableDescriptionIFrame",la._341),V();else{Z.ASIN=h;Z.MANUFACTURER=Z.manufacturer;Z.TITLE=Z.title;Z.IMAGES=null==Z.imagesCSV?[""]:Z.imagesCSV.split(",");Z.LASTUPDATE=Z.lastUpdate;null!=Z.csv&&(Z.AMAZON=Z.csv[CsvType.AMAZON.index],Z.MARKET_NEW=Z.csv[CsvType.NEW.index],
Z.MARKET_USED=Z.csv[CsvType.USED.index],Z.SALESRANK=Z.csv[CsvType.SALES.index],Z.AMAZON_LAST=Z.AMAZON[Z.AMAZON.length-1],Z.MARKET_NEW_LAST=Z.MARKET_NEW[Z.MARKET_NEW.length-1],Z.MARKET_USED_LAST=Z.MARKET_USED[Z.MARKET_USED.length-1]);Z.TYPE=Z.productType;addLightningDealBox(Z);V=0;null==Z.AMAZON?(M=!0,ca+=sa+")</span>"):(M=!1,Z.AMAZON_LAST=Z.AMAZON[Z.AMAZON.length-1],Z.MARKET_NEW_LAST=Z.MARKET_NEW[Z.MARKET_NEW.length-1],Z.MARKET_USED_LAST=Z.MARKET_USED[Z.MARKET_USED.length-1],V=Date.now()/6E4-(Z.lastUpdate+
60*offsetHours),sa=60<V?sa:"",ca+=la._123+prettyDate(V)+sa+")</span>");Z.ASIN=h;getCurrencyByDomain(m);graphShareURL=GraphService.getShareUrl(Z.asin,m);sa="";if(Z.categories&&0<Z.categories.length)try{var ba=JSON.parse(JSON.stringify(dealWrapperInstance.get().loadRequest("last")));null==ba.includeCategories&&(ba.includeCategories=[]);ba.includeCategories[Z.domainId]=Z.categories;ba.dateRange=4;sa='<a href="https://keeepa.amztoolz.com/#!deals/'+encodeURIComponent(JSON.stringify(ba))+'" target="blank">'+la._420+
"</a>"}catch(K){reportBug(K)}g(sa,Z);var w=$("#tabContentIFrame"),O=$("#tabHeadIFrame");$("#tabMore").click(function(){if(!$(this).hasClass("active")){w.css("height","");$("#subGraphButtons").hide(0);$("#refreshProductBox").hide(0);w.children(".active").hide(0);w.children(".active").removeClass("active");$("#more").addClass("active");$("#more").fadeIn();O.children().removeClass("active");$("#tabMore").addClass("active");var K=float2int($("#tabContentIFrame").height())+160;addon("resize",K);q=float2int($("#productTableIFrame").height());
t("MoreTab1",Z);addon()}});if(M)w.css("height","60px"),$("#tabHeadIFrame").hide(),f=la._341,2==Z.TYPE&&(f=la._395),$("#graph").html('<div style="margin-left: 30px; font-size: 12px; color: #555"><i class="fa fa-exclamation-circle tomato fa-lg"></i>&emsp;'+f+"</div>").show("fast"),addon("resize",100);else{if(!(isAWS||storage.email&&0<storage.email.indexOf("@amazon."))){var z=getLastWithShipping(Z.csv[CsvType.EBAY_NEW_SHIPPING.index],CsvType.EBAY_NEW_SHIPPING);sa=getLastWithShipping(Z.csv[CsvType.EBAY_USED_SHIPPING.index],
CsvType.EBAY_USED_SHIPPING);ba="";if(0<z[0]){C=Money.format(z[0]+z[1],{sourceDomainId:m,targetDomainId:m});var I=Money.format(z[0],{sourceDomainId:m,targetDomainId:m});z=0==z[1]?0:Money.format(z[1],{sourceDomainId:m,targetDomainId:m});I=0===z?"free shipping":I+" + "+z+" shipping";ba+='<span class="productTableDescriptionPriceDescr">'+CsvType.getName(CsvType.EBAY_NEW_SHIPPING.index).replace(" \ud83d\ude9a","")+':</span>\n\t\t\t\t\t\t<span class="productTableDescriptionPrice priceEbayNew" title="'+
I+'" style="color:'+CsvType.EBAY_NEW_SHIPPING.color+';">'+C+"</span>"}0<sa[0]&&(C=Money.format(sa[0]+sa[1],{sourceDomainId:m,targetDomainId:m}),I=Money.format(sa[0],{sourceDomainId:m,targetDomainId:m}),sa=0==sa[1]?0:Money.format(sa[1],{sourceDomainId:m,targetDomainId:m}),sa=0===sa?"free shipping":I+" + "+sa+" shipping",ba+='&emsp;<span class="productTableDescriptionPriceDescr">'+CsvType.getName(CsvType.EBAY_USED_SHIPPING.index).replace(" \ud83d\ude9a","")+':</span>\n\t\t\t\t\t\t<span class="productTableDescriptionPrice priceEbayUsed" title="'+
sa+'" style="color:#000;">'+C+"</span>");ba&&(ba='<span id="ebayLinkPriceHover">'+ba+"</span>");sa="";if(globalEbayArray[Z.domainId]){sa="";C="unverified if sold on eBay";if(44640>pa-getLastTime(Z.csv[CsvType.EBAY_NEW_SHIPPING.index],CsvType.EBAY_NEW_SHIPPING)||44640>pa-getLastTime(Z.csv[CsvType.EBAY_USED_SHIPPING.index],CsvType.EBAY_USED_SHIPPING))sa='style="color:#888"',C="show on eBay";ba&&(C="");sa='&emsp;&emsp;<li class="tabItemI tabExtern"><a id="ebayLink" target="_blank" href="'+getEbayRedirectByDomain(Z.domainId,
Z.asin,!0)+'" rel="ebay" title="'+C+'" '+sa+'>\u2192&ensp;<span>e</span><span style="margin-left: -2px;">b</span><span style="margin-left: -2px;">a</span><span style="margin-left: -2px;">y</span></a>';$("#tabHeadIFrame").append(sa+ba);ba&&$("#ebayLink").hover(function(){$("#ebayLinkPriceHover").show()},function(){$("#ebayLinkPriceHover").hide()})}}Z.timeStamp=ta.timeStamp;Z.trackingInfos=getTrackingInfos(m,ta.trackings,Z);pa=Number(get("s_boxVertical"));keepaApp&&(pa=window.innerHeight-80);N&&(N=
$("#graph"),ba=graph.prepare(m),Z.stats||(Z.stats=getStatistics(Z)),ba.csv=Z.csv,ba.salesRanks=Z.salesRanks,ba.p=Z,ba.salesRankCategoryTrees=Z.salesRankCategoryTrees,ba.isParentSalesRank=Z.isParentSalesRank,ba.salesRankReference=Z.salesRankReference,ba.salesRankCategories=Z.salesRankCategories,ba.asin=Z.ASIN,ba.graphIndex=0,ba.stats=Z.stats,ba.buyBoxSellerIdHistory=Z.buyBoxSellerIdHistory,ba.buyBoxUsedHistory=Z.buyBoxUsedHistory,ba.offers=Z.offers,ba.axes.y[0].labelWidth=60,ba.parameter.height=pa,
ba.syncedGraphs=f,f.push(ba),ba.$container=N,ba.$container.show(),null!=Z.trackingInfos&&Z.trackingInfos.isTrackedByUser&&(ba.parameter.tracking=Z.trackingInfos.userTracking),ba.parameter.width=float2int(N.parent().width())-220+"px",keepaApp&&(ba.parameter.width=float2int(N.parent().width())-150+"px"),graph.create(ba),addSubGraphMenu(Z,m,f),$("#subGraphButtons").prepend(ca),ra(),$("#refreshProduct").one("click",function(){$("#refreshProduct").addClass("fa-spin");r=!0;d()}));if(!keepaApp)if(360<V){if(u){try{$($("#refreshProduct").get(0).previousSibling).replaceWith("<span>&emsp;&emsp;(&emsp;</span>"),
$("#refreshProduct").trigger("click")}catch(K){console.error(K)}u=!1}}else setTimeout(function(){if(storage.previewCasin){var K=function(){callCasin(function(A){comparePricesLine(Z.ASIN,m,A)},Z.ASIN,m,!0)};if(r)K();else $("#detailProductPage").one("mouseover",K)}},1);$(window).width();dataProduct=Z;keepaApp||TrackingComponent.init(ta);gotInterupted=!1;try{storage.noDataPromo&&storage.removeItem("noDataPromo")}catch(K){}addon()}}}}function t(ta,pa){if(0==storage.accountType)replaceHtml("MoreTab1",
""),replaceHtml("MoreTab2","");else if(null==pa.proDeferred||"pending"!==pa.proDeferred.state())if(pa.proDeferred||(pa.proDeferred=$.Deferred()),""!==$("#MoreTab1").html())1>$("#"+ta).find(".grid-wrapper").length&&Object.keys(T).length&&("MoreTab1"==ta?Y():"MoreTab2"==ta?R():"MoreTab3"==ta?ha():"MoreTab4"==ta&&P());else{$("#loadingIconAdv").show();addon("resize",300+float2int($("#initPage").height()));var ca=!1,sa=function(Z){var N="Failed loading advanced product information.<br>"+la._error;429==
Z.status&&(N=quotaExceeded);$("#loadingIconAdv").hide();replaceHtml("MoreTab1",N);replaceHtml("MoreTab2",N);addDataUpdateHandler()};network.request({path:"pro/product",domainId:pa?pa.domainId:m,history:!0,getSellersNoHistory:!0,asin:pa?pa.asin:h,offerPages:6,type:"offers",maxAge:0}).progress(function(Z){ca||replaceHtml("loadingProgress",Z+"%")}).always(function(){ca=!0;pa.proDeferred.resolve()}).done(function(Z){$("#loadingIconAdv").hide();"undefined"!==typeof Z.products&&Z.products[0]?(T=Z,replaceHtml("MoreTab1",
'<div style="display:flex;"><div id="grid-container-product-detail" class="on-white" style="flex: 0 1 auto;margin-right:23px"></div><div id="grid-container-product-price" class="on-white" style="flex: 0 1 auto;"></div></div>'),replaceHtml("MoreTab2",'<div id="offerGrid" class="on-white"></div>'),replaceHtml("MoreTab3",'<div id="grid-container-buy-box-history" class="on-white"></div>'),replaceHtml("MoreTab4",'<div id="grid-container-buy-box-used-history" class="on-white"></div>'),Z=$("#tabHeadSub").find(".active").data("box"),
"#MoreTab1"===Z&&Y(),"#MoreTab2"===Z&&R(),"#MoreTab3"===Z&&ha(),"#MoreTab4"===Z&&P()):sa(Z)}).fail(function(Z){reportBug(null,JSON.stringify(Z));sa(Z)})}}setTimeout(function(){try{waitForExtensionStorage&&!storagePolyFillHasData||onready(!1),sendReceive({key:"ping"}).done(function(ta){isIframe&&(iframe.parent=ta.location||ta.value.location)})}catch(ta){console.log(ta),setTimeout(function(){onready(!1)},100)}},0);var h="",m=1,r=!1,q=0,u=!0,D=!1,F=function(){-1<window.location.hash.substring(1).indexOf(h)||
(lastSubUrl=window.location.hash.substring(1),$("#detailProductPage").html('<div style="margin-top: 60px">'+window.loader(.75,1)+"</div>"),u=!0,d())},M=!1,Q=[1],T={},ha=function(){if(hasDataAccessSubscription)GridBuyBoxStatistics.init(T,"grid-container-buy-box-history").always(function(){return addon()});else{var ta=$("#grid-container-buy-box-history");ta.length&&ta.html('<div style="margin:15px 0;color:#b30093;font-weight:500;font-style:italic;">The "Buy Box History" feature requires a Data Access subscription. You can get a monthly subscription <a href="https://keeepa.amztoolz.com/#!settings/1"${iframe.isIframe ? \' target="_blank"\' : \'\'}>here</a>.</div>')}},
P=function(){if(hasDataAccessSubscription)GridBuyBoxUsedStatistics.init(T,"grid-container-buy-box-used-history").always(function(){return addon()});else{var ta=$("#grid-container-buy-box-used-history");ta.length&&ta.html('<div style="margin:15px 0;color:#b30093;font-weight:500;font-style:italic;">The "Buy Box Used History" feature requires a Data Access subscription. You can get a monthly subscription <a href="https://keeepa.amztoolz.com/#!settings/1"${iframe.isIframe ? \' target="_blank"\' : \'\'}>here</a>.</div>')}},
R=function(){GridOffer.init(T,"offerGrid").always(function(){return addon()})},Y=function(){var ta=GridProductDetail.init(T,"grid-container-product-detail"),pa=GridProductPrice.init(T,"grid-container-product-price");addon("resize","1000");$.when(ta,pa).always(addon)},ja=function(ta){var pa,ca=$("#affiliateContent");if(ta||""===ca.html()){ca.html('<div id="loadingIcon"></div>');$("#loadingIcon").show();var sa=0==storage.accountType,Z=1==storage.accountType,N=function(w){showErrorPopup((w.msg?w.msg+
"<br>":"")+(w.error?"["+w.error.type+"] "+w.error.message+"<br>":"")+"Status: "+w.status)},f=function(w){var O=w.affiliateId,z={sourceDomainId:1,targetDomainId:1},I=Money.format(w.referralFeeExtension,z),K=Money.format(w.referralFeeData,z);Money.format(w.referralFeeAPI,z);var A="https://get.keepa.com/#type#"+O;O=A.replace("#type#","e");var J=material.getRadio("affiliateExtension",la._750,!0,"affiliateType",!1,"e"),S=material.getRadio("affiliateData",la._751,!1,"affiliateType",!1,"d");O='<p class="mdc-typography--body2">'+
la._752+"</p>\n\t\t\t\t\t"+(sa||Z?'<p class="mdc-typography--body2"><a class="link--register">&raquo; '+la._749+"</a></p>":'<p class="mdc-typography--body2">'+la._753+"</p>\n\t\t\t\t\t<div>"+J+S+'</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class="promotionMessage black">\n\t\t\t\t\t\t<div class="copy-text">'+O+'</div>\n\t\t\t\t\t\t<span class="colorTip colorTipContainer"><span class="colorTipContent">'+la._754+'</span><span class="pointyTipShadow"></span><span class="pointyTip"></span></span>\n\t\t\t\t\t\t<div class="promotionMessageIcon"><i class="fa fa-files-o"></i></div>\n\t\t\t\t\t</div><br><br>')+
'\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t<p class="mdc-typography--body2">'+la._755+'</p>\n\t\t\t\t\t<ul class="mdc-typography--body2">\n\t\t\t\t\t\t<li>'+la._756+'</li>\n\t\t\t\t\t\t<li class="affiliate-info affiliate-info--type-e">'+la._757.replace("{FEE}","<nobr>"+I+"</nobr>")+'</li>\n\t\t\t\t\t\t<li class="affiliate-info affiliate-info--type-d" style="display:none;">'+la._758.replace("{FEE}","<nobr>"+K+"</nobr>")+"</li>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<li>"+la._760+"</li>\n\t\t\t\t\t</ul>\n\t\t\t\t";I='<p class="mdc-typography--subtitle1">'+
la._761+'</p>\n\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t\t<th class="cell--number">'+la._762+'</th>\n\t\t\t\t\t\t\t\t<th class="cell--number" title="'+la._773.replace(/\. /g,".<br>")+'">'+la._763+'</th>\n\t\t\t\t\t\t\t\t<th class="cell--number">'+la._764+'</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td title="'+la._765.replace("{FEE}",I)+'">'+la._750+' <i class="fa fa-info"></i></td>\n\t\t\t\t\t\t\t\t<td class="cell--number">'+w.totalExtensionClicks+
'</td>\n\t\t\t\t\t\t\t\t<td class="cell--number">'+w.pendingExtension+'</td>\n\t\t\t\t\t\t\t\t<td class="cell--number">'+w.extensionReferrals+'</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td title="'+la._765.replace("{FEE}",K)+'">'+la._751+' <i class="fa fa-info"></i></td>\n\t\t\t\t\t\t\t\t<td class="cell--number">'+w.totalDataClicks+'</td>\n\t\t\t\t\t\t\t\t<td class="cell--number">'+w.pendingData+'</td>\n\t\t\t\t\t\t\t\t<td class="cell--number">'+w.dataUsers+"</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</table>\n\t\t\t\t\t";
K="\n\t\t\t\t\t\t"+(null!=w.balance&&0<w.balance?'<p class="mdc-typography--body2">\n\t\t\t\t\t\t\t\t'+la._766+"&emsp;\n\t\t\t\t\t\t\t\t<span>"+Money.format(w.balance,z)+'</span>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p class="mdc-typography--body2">'+material.getButton("requestPayout",la._767,"","money")+"</p>":'<p class="mdc-typography--body2">'+la._768+"</p>")+"\n\t\t\t\t\t";J="";if(w.payments&&w.payments.length){J="";for(S=w.payments.length-1;0<=S;S--){var v=w.payments[S];J+="<tr>\n\t\t\t\t\t\t\t\t<td>"+
(new Date(v.createDate)).formatDate("M j, Y")+"</td>\n\t\t\t\t\t\t\t\t<td>Amazon."+getTldByDomain(v.quantity)+'</td>\n\t\t\t\t\t\t\t\t<td class="cell--number">'+Money.format(v.totalBill,z)+"</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t"}J='<br><p class="mdc-typography--body2">'+la._802+":</p>\n\t\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th>"+la._803+"</th>\n\t\t\t\t\t\t\t\t\t<th>"+la._804+'</th>\n\t\t\t\t\t\t\t\t\t<th class="cell--number">'+la._805+"</th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t"+
J+"\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t"}ca.html('<h6 class="mdc-typography--headline6">Keepa '+la._779+"</h6>\n\t\t\t\t\t\t<section>"+O+"</section><hr>\n\t\t\t\t\t\t\t<section>\n\t\t\t\t\t\t\t"+I+"\n\t\t\t\t\t\t\t"+K+"\n\t\t\t\t\t\t\t"+J+'\n\t\t\t\t\t\t</section><hr>\n\t\t\t\t\t\t<section><p class="mdc-typography--subtitle1">'+(la._769+'</p>\n\t\t\t\t\t\t<p class="mdc-typography--body2">'+la._770+'</p>\n\t\t\t\t\t\t<p class="mdc-typography--body2">'+la._771+'</p>\n\t\t\t\t\t\t<p class="mdc-typography--body2" style="font-size:0.8em;line-height:0.9rem;">'+
la._772+'</p>\n\t\t\t\t\t\t<ul class="mdc-typography--body2" style="font-size:0.8em;line-height:0.9rem;">\n\t\t\t\t\t\t\t<li>'+la._773+"</li>\n\t\t\t\t\t\t\t<li>"+la._774+"</li>\n\t\t\t\t\t\t\t<li>"+la._775+"</li>\n\t\t\t\t\t\t\t<li>"+la._776+"</li>\n\t\t\t\t\t\t\t<li>"+la._777+"</li>\n\t\t\t\t\t\t\t<li>"+la._778+"</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</section>\n\t\t\t\t\t"));addon();w=$(".block--affiliate .promotionMessage");var p=w.find(".copy-text"),H=w.find(".colorTip");w.click(function(){try{navigator.clipboard.writeText(p.html())}catch(B){selectText(p.get(0)),
document.execCommand("copy")}var L=-18-H.height();-40>L&&(L-=3);H.css({marginLeft:-H.outerWidth()/2,top:L}).show()});w.mouseout(function(){setTimeout(function(){H.fadeOut(200)},300)});$('input[name="affiliateType"]').on("change",function(){var L=$(this).val();p.html(A.replace("#type#",L));$(".block--affiliate .affiliate-info").hide();$(".block--affiliate .affiliate-info--type-"+L).show()});$(".block--affiliate td, .block--affiliate th").colorTip({color:"blue"});$("#requestPayout").on("click",function(){C()});
$(".link--register").on("click",function(){registerAnonymous()})},C=function(){var w=network.request({path:"service/stripe",type:"location",dashboard:"data"});network.request({path:"service/stripe",type:"countries",dashboard:"data"}).done(function(O){w.done(function(z){var I=la._780;z=V(O.countries,z.json?tryParseJSON(z.json):null);pa=showPopup(I,z,!0);pa.promise.always(function(){ja(!0)});addon()})}).fail(function(){showErrorPopup()})},V=function(w,O){var z=material.getRadio("individual",la._781,
!0,"bcb"),I=material.getRadio("business",la._782,!1,"bcb",!0,!1,la._783),K='<div style="width:204px;">'+material.getInput(!0,"\\S{3,}.*","formName",la._784,"name","billing-name",la._785,!1,!0)+"</div>",A='<div style="width:384px;">'+material.getInput(!0,"\\S{2,}.*","formAddress",la._786,"billing street-address","billing-address",la._787,!1,!0)+"</div>",J="<div>"+material.getInput(!0,"\\S{2,}.*","formCity",la._788,"billing address-level2","billing-city",la._789,!1,!0)+"</div>",S="<div>"+material.getInput(!0,
"\\S{2,}.*","formPostcode",la._790,"billing postal-code","billing-zip",la._791,!1,!0)+"</div>",v=[],p;for(p in priceDataAPI.statesUS)v.push({value:p,label:p});v='<div style="margin-top:12px;" id="formStateWrapper">'+material.getSelect("formState","billing-state","",v,"State",!1,!0)+"</div>";w=material.getCountrySelect(w,O?O.country_code:"");O=[];for(p=1;p<numberOfDomains;p++)7!=p&&Q.includes(p)&&O.push({value:p,label:"Amazon."+getTldByDomain(p)});O=material.getSelect("domainSelect","payout-domain",
"",O,la._792,!1,!0);p=material.getButton("submitAffiliate",la._793,"amazon");z='<div id="payoutFormWrapper" class="block block--affiliate-form">\n\t\t\t\t\t<form id="payoutForm">\n\t\t\t\t\t\t<section id="b2bRadio" >'+z+I+'</section>\n\t\t\t\t\t\t<div class="flex">'+K+A+'</div>\n\t\t\t\t\t\t<div class="flex" style="justify-content: space-between;">'+w+'<div class="flex" style="width: 384px;justify-content: space-between;">'+J+S+v+"</div></div>\n\t\t\t\t\t\t<div>"+la._794+"*&emsp;"+O+'</div>\n\t\t\t\t\t\t<div id="submitAffiliateWrapper" style="margin:20px 0;">'+
p+'</div>\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t<p class="mdc-typography--body2"><b>'+la._795+"</b><br>"+la._796+"</p>\t\t\n\t\t\t\t\t</form>\n\t\t\t\t</div>";material.init("#payoutForm");setTimeout(function(){var H=null;isTest&&"localhost"===document.location.hostname&&"63342"===document.location.port&&(H="anything");var L=$("#countrySelect"),B=function(){var E="US"==$(L.find(":selected")).attr("id"),U=$("#formStateWrapper"),ka=U.find("select");E?(ka.prop("disabled",!1),ka.prop("required",!0),U.css({visibility:"visible"})):
(ka.val(""),ka.prop("disabled",!0),ka.prop("required",!1),U.css({visibility:"hidden"}))};L.on("change",B);B();$("#payoutForm").on("submit",function(E){E.preventDefault();if(H)ba();else{E=getSocialLoginURL("amazonLogin","","0");window.open(E,popupName,popupSettings);var U="affiliateAmazonLink"+Date.now();loginCallbacks[U]=function(ka){delete loginCallbacks[U];ka?network.request({path:"user/settings",type:"getSettings"}).done(function(ma){setTimeout(function(){$("#tabAffiliate").trigger("click")},100);
H=ma.user.amazonEmailAddress||ma.user.amazonUsername;ma=$("#submitAffiliateWrapper");ma.siblings().hide();ma.html('\n\t\t\t\t\t\t\t\t\t\t\t<p class="mdc-typography--body2">\n\t\t\t\t\t\t\t\t\t\t\t\t'+la._797+":&emsp;<span>"+H+"</span><br>\n\t\t\t\t\t\t\t\t\t\t\t\t"+la._798.replace("{SUBMIT}",la._225)+'\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<a id="submitAffiliate" class="mdc-button mdc-button--raised mdc-button--primary" data-mdc-auto-init="MDCRipple">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-check"></i>&ensp;'+
la._225+"</a>");addon();var na=!1;$("#submitAffiliate").on("click",function(W){W.preventDefault();na||(na=!0,ba())})}).fail(function(ma){N(ma)}):isTest&&console.log("@todo:","handleAmazonLoginFailed?")}}})},0);return z},ba=function(){var w=$("#payoutForm"),O={billingContact:w.find("#formName").val(),billingCountry:w.find("#countrySelect").find(":selected")[0].getAttribute("data-country"),billingCity:w.find("#formCity").val(),billingStreet:w.find("#formAddress").val(),billingZipCode:w.find("#formPostcode").val(),
billingBusiness:!1};replaceHtml("payoutFormWrapper",'<div id="loadingIcon"></div>');$("#loadingIcon").show();addon();w={path:"user/affiliate",type:"payout",content:JSON.stringify(O),domainId:Number(w.find("#domainSelect").val())};isTest&&console.info("%payoutRequest:","color:#8A2BE2;font-weight:bold;",w);network.request(w).done(function(z){isTest&&console.info("%cpayoutRequest response:","color:#8A2BE2;font-weight:bold;",z);var I="";I=z.error||"undefined"===typeof z.affiliate||null==z.affiliate?'<span class="tomato">'+
la._799+"</span>":la._800;z=material.getButton("closePopup",la._801,"window-close",null,!1,!1);replaceHtml("payoutFormWrapper",'<p class="mdc-typography--body2">'+I+"</p><div>"+z+"</div>");addon();$("#closePopup").on("click",function(K){K.preventDefault();pa.close();ja(!0)})}).fail(function(z){N(z)})};network.request({path:"user/affiliate",type:"get"}).done(function(w){var O=w.affiliate;isTest&&console.info("%cAffiliate:","color:#8A2BE2;font-weight:bold;",O);w.error||"undefined"===typeof O||null==
O?N(w):f(O)}).fail(function(w){401===w.status&&"undefined"!==typeof w.affiliate&&null!==w.affiliate?f(w.affiliate):N(w)})}},ra=function(){var ta=Date.now();if(Date.now()<(new Date("2018/11/27 16:00:00")).getTime()){ta='<div style="text-align: center;">\n\t\t\t\t\t<div class="promotionMessage black">\n\t\t\t\t\t\t<div class="copy-text">get.keepa.com</div>\n\t\t\t\t\t\t<div class="copy-text-full" style="display:none;">Amazon Price Tracker Keepa: https://get.keepa.com</div>\n\t\t\t\t\t\t<span class="colorTip colorTipContainer"><span class="colorTipContent">Copied to clipboard!</span><span class="pointyTipShadow"></span><span class="pointyTip"></span></span>\n\t\t\t\t\t\t<div class="promotionMessageIcon"><i class="fa fa-files-o"></i></div>\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<br><span style="margin-top: 5px;display: inline-block;">'+
(ta<(new Date("2018/11/24 16:00:00")).getTime()?"<b>Black Friday</b> is on November 23rd!":"<b>Cyber Monday</b> is on November 26th!")+' Share Keepa with friends and family to help them save!</span>\n\t\t\t\t\t<br><span style="font-size: 10px;color: #7b7b7b;display: inline-block;">(get.keepa.com is an automatic redirect to our browser extension for the respective browser being used)</span>\n\t\t\t\t</div>';$("#casinLine").after(ta);ta=$(".promotionMessage");var pa=ta.find(".colorTip");ta.click(function(){var ca=
$(".copy-text-full");try{navigator.clipboard.writeText(ca.html())}catch(sa){selectText(ca.get(0)),document.execCommand("copy")}ca=-18-pa.height();-40>ca&&(ca-=3);pa.css({marginLeft:-pa.outerWidth()/2,top:ca}).show()});ta.mouseout(function(){setTimeout(function(){pa.fadeOut(200)},300)})}};return{init:function(){lastSubUrl=window.location.hash.substring(1);d();sendHelloGraph();a();window.addEventListener("unload",function(){addon=function(){}},!1)},load:d,loadVariationMatrix:function(ta){if(""!==$("#variation").html())addon();
else{var pa=[];ta.parentAsin&&ta.variationCSV&&(pa=ta.variationCSV.split(","));1<pa.length?(replaceHtml("variation",'<div id="loadingFlipper" style="display: flex;justify-content: center;margin: 80px;flex-direction: column;align-content: center;align-items: center;"><div style="position: relative;width: 50px;display: block;margin-bottom: 50px;"><div class="cssload-box-loading"></div></div><div id="loadingProgress"></div></div>'),network.request({path:"product",type:"variation",asin:ta.parentAsin,
domainId:ta.domainId,history:enableVariationGridPriceGraphs,maxAge:-1,refreshProduct:!1}).done(function(ca){var sa=[];null!==ca.products&&"undefined"!==typeof ca.products&&0<ca.products.length&&(sa=ca.products);replaceHtml("variation",'<div id="variationGrid" class="on-white"></div>');GridVariation.init(sa,"variationGrid").always(addon)}).fail(function(){replaceHtml("variation","Failed loading advanced product information.<br>"+la._error)})):replaceHtml("variation","No variations available.")}},initGridBuyBoxStatistics:ha,
initGridOffer:R,initGridProductDetail:Y,loadDataOffers:t,getIframeHeight:function(){return q},isIframe:isIframe}}(),firefox=!1,gotInterupted=!1;function loadProductIFrame(){iframe.load()}var addonCache=[],prevResize=0;
function addon(a,b){if(!keepaApp){if("undefined"==typeof a||"resize"==a&&"undefined"==typeof b)a="resize",b=float2int($("#initPage").height());try{if("resize"!=a||b!=prevResize)"resize"==a&&(prevResize=b),window.parent.postMessage({key:a,value:b,origin:"keepaIframe",location:""+document.location},"*"),addonCache[a]=b}catch(d){}}}function syncAddonDOM(a){addon=a};